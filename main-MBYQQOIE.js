import{a as N,b as G,c as V,d as ai,e as M0}from"./chunk-NX5AMF3I.js";function Dh(n,e){return Object.is(n,e)}var st=null,al=!1,Ih=1,rn=Symbol("SIGNAL");function ue(n){let e=st;return st=n,e}function Th(){return st}var oo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Xs(n){if(al)throw new Error("");if(st===null)return;st.consumerOnSignalRead(n);let e=st.nextProducerIndex++;if(fl(st),e<st.producerNode.length&&st.producerNode[e]!==n&&Js(st)){let t=st.producerNode[e];dl(t,st.producerIndexOfThis[e])}st.producerNode[e]!==n&&(st.producerNode[e]=n,st.producerIndexOfThis[e]=Js(st)?R0(n,st,e):0),st.producerLastReadVersion[e]=n.version}function A0(){Ih++}function Sh(n){if(!(Js(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ih)){if(!n.producerMustRecompute(n)&&!ul(n)){Eh(n);return}n.producerRecomputeValue(n),Eh(n)}}function xh(n){if(n.liveConsumerNode===void 0)return;let e=al;al=!0;try{for(let t of n.liveConsumerNode)t.dirty||Hx(t)}finally{al=e}}function Mh(){return st?.consumerAllowSignalWrites!==!1}function Hx(n){n.dirty=!0,xh(n),n.consumerMarkedDirty?.(n)}function Eh(n){n.dirty=!1,n.lastCleanEpoch=Ih}function ea(n){return n&&(n.nextProducerIndex=0),ue(n)}function ll(n,e){if(ue(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Js(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)dl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function ul(n){fl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Sh(t),r!==t.version))return!0}return!1}function ta(n){if(fl(n),Js(n))for(let e=0;e<n.producerNode.length;e++)dl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function R0(n,e,t){if(P0(n),n.liveConsumerNode.length===0&&N0(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=R0(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function dl(n,e){if(P0(n),n.liveConsumerNode.length===1&&N0(n))for(let r=0;r<n.producerNode.length;r++)dl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];fl(i),i.producerIndexOfThis[r]=e}}function Js(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function fl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function P0(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function N0(n){return n.producerNode!==void 0}function Ah(n,e){let t=Object.create(zx);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Sh(t),Xs(t),t.value===cl)throw t.error;return t.value};return r[rn]=t,r}var Ch=Symbol("UNSET"),bh=Symbol("COMPUTING"),cl=Symbol("ERRORED"),zx=G(N({},oo),{value:Ch,dirty:!0,error:null,equal:Dh,kind:"computed",producerMustRecompute(n){return n.value===Ch||n.value===bh},producerRecomputeValue(n){if(n.value===bh)throw new Error("Detected cycle in computations.");let e=n.value;n.value=bh;let t=ea(n),r,i=!1;try{r=n.computation(),ue(null),i=e!==Ch&&e!==cl&&r!==cl&&n.equal(e,r)}catch(o){r=cl,n.error=o}finally{ll(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function qx(){throw new Error}var O0=qx;function k0(n){O0(n)}function Rh(n){O0=n}var Gx=null;function Ph(n,e){let t=Object.create(hl);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(Xs(t),t.value);return r[rn]=t,r}function na(n,e){Mh()||k0(n),n.equal(n.value,e)||(n.value=e,Wx(n))}function Nh(n,e){Mh()||k0(n),na(n,e(n.value))}var hl=G(N({},oo),{equal:Dh,value:void 0,kind:"signal"});function Wx(n){n.version++,A0(),xh(n),Gx?.()}function Oh(n){let e=ue(null);try{return n()}finally{ue(e)}}var kh;function ra(){return kh}function tr(n){let e=kh;return kh=n,e}var pl=Symbol("NotFound");function ae(n){return typeof n=="function"}function so(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var gl=so(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ia(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ze=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ae(r))try{r()}catch(o){e=o instanceof gl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{V0(o)}catch(s){e=e??[],s instanceof gl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new gl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)V0(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ia(t,e)}remove(e){let{_finalizers:t}=this;t&&ia(t,e),e instanceof n&&e._removeParent(this)}};Ze.EMPTY=(()=>{let n=new Ze;return n.closed=!0,n})();var Vh=Ze.EMPTY;function ml(n){return n instanceof Ze||n&&"closed"in n&&ae(n.remove)&&ae(n.add)&&ae(n.unsubscribe)}function V0(n){ae(n)?n():n.unsubscribe()}var gn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ao={setTimeout(n,e,...t){let{delegate:r}=ao;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ao;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function yl(n){ao.setTimeout(()=>{let{onUnhandledError:e}=gn;if(e)e(n);else throw n})}function ci(){}var F0=Fh("C",void 0,void 0);function L0(n){return Fh("E",void 0,n)}function j0(n){return Fh("N",n,void 0)}function Fh(n,e,t){return{kind:n,value:e,error:t}}var li=null;function co(n){if(gn.useDeprecatedSynchronousErrorHandling){let e=!li;if(e&&(li={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=li;if(li=null,t)throw r}}else n()}function B0(n){gn.useDeprecatedSynchronousErrorHandling&&li&&(li.errorThrown=!0,li.error=n)}var ui=class extends Ze{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ml(e)&&e.add(this)):this.destination=Xx}static create(e,t,r){return new lo(e,t,r)}next(e){this.isStopped?jh(j0(e),this):this._next(e)}error(e){this.isStopped?jh(L0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?jh(F0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Zx=Function.prototype.bind;function Lh(n,e){return Zx.call(n,e)}var Bh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){vl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){vl(r)}else vl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){vl(t)}}},lo=class extends ui{constructor(e,t,r){super();let i;if(ae(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&gn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Lh(e.next,o),error:e.error&&Lh(e.error,o),complete:e.complete&&Lh(e.complete,o)}):i=e}this.destination=new Bh(i)}};function vl(n){gn.useDeprecatedSynchronousErrorHandling?B0(n):yl(n)}function Jx(n){throw n}function jh(n,e){let{onStoppedNotification:t}=gn;t&&ao.setTimeout(()=>t(n,e))}var Xx={closed:!0,next:ci,error:Jx,complete:ci};var uo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Yt(n){return n}function Uh(...n){return $h(n)}function $h(n){return n.length===0?Yt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var _e=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=tM(t)?t:new lo(t,r,i);return co(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=U0(r),new r((i,o)=>{let s=new lo({next:c=>{try{t(c)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[uo](){return this}pipe(...t){return $h(t)(this)}toPromise(t){return t=U0(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function U0(n){var e;return(e=n??gn.Promise)!==null&&e!==void 0?e:Promise}function eM(n){return n&&ae(n.next)&&ae(n.error)&&ae(n.complete)}function tM(n){return n&&n instanceof ui||eM(n)&&ml(n)}function Hh(n){return ae(n?.lift)}function De(n){return e=>{if(Hh(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function be(n,e,t,r,i){return new zh(n,e,t,r,i)}var zh=class extends ui{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(c){try{t(c)}catch(l){e.error(l)}}:super._next,this._error=i?function(c){try{i(c)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function fo(){return De((n,e)=>{let t=null;n._refCount++;let r=be(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ho=class extends _e{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Hh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ze;let t=this.getSubject();e.add(this.source.subscribe(be(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ze.EMPTY)}return e}refCount(){return fo()(this)}};var $0=so(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Be=(()=>{class n extends _e{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new _l(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new $0}next(t){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Vh:(this.currentObservers=null,o.push(t),new Ze(()=>{this.currentObservers=null,ia(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new _e;return t.source=this,t}}return n.create=(e,t)=>new _l(e,t),n})(),_l=class extends Be{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Vh}};var yt=class extends Be{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Bt=new _e(n=>n.complete());function H0(n){return n&&ae(n.schedule)}function z0(n){return n[n.length-1]}function wl(n){return ae(z0(n))?n.pop():void 0}function Fr(n){return H0(z0(n))?n.pop():void 0}function G0(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(f){try{u(r.next(f))}catch(p){s(p)}}function l(f){try{u(r.throw(f))}catch(p){s(p)}}function u(f){f.done?o(f.value):i(f.value).then(c,l)}u((r=r.apply(n,e||[])).next())})}function q0(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function di(n){return this instanceof di?(this.v=n,this):new di(n)}function W0(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(x){return Promise.resolve(x).then(m,p)}}function c(m,x){r[m]&&(i[m]=function(O){return new Promise(function(L,q){o.push([m,O,L,q])>1||l(m,O)})},x&&(i[m]=x(i[m])))}function l(m,x){try{u(r[m](x))}catch(O){_(o[0][3],O)}}function u(m){m.value instanceof di?Promise.resolve(m.value.v).then(f,p):_(o[0][2],m)}function f(m){l("next",m)}function p(m){l("throw",m)}function _(m,x){m(x),o.shift(),o.length&&l(o[0][0],o[0][1])}}function K0(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof q0=="function"?q0(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(c,l){s=n[o](s),i(c,l,s.done,s.value)})}}function i(o,s,c,l){Promise.resolve(l).then(function(u){o({value:u,done:c})},s)}}var Cl=n=>n&&typeof n.length=="number"&&typeof n!="function";function bl(n){return ae(n?.then)}function El(n){return ae(n[uo])}function Dl(n){return Symbol.asyncIterator&&ae(n?.[Symbol.asyncIterator])}function Il(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function nM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Tl=nM();function Sl(n){return ae(n?.[Tl])}function xl(n){return W0(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield di(t.read());if(i)return yield di(void 0);yield yield di(r)}}finally{t.releaseLock()}})}function Ml(n){return ae(n?.getReader)}function Je(n){if(n instanceof _e)return n;if(n!=null){if(El(n))return rM(n);if(Cl(n))return iM(n);if(bl(n))return oM(n);if(Dl(n))return Q0(n);if(Sl(n))return sM(n);if(Ml(n))return aM(n)}throw Il(n)}function rM(n){return new _e(e=>{let t=n[uo]();if(ae(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function iM(n){return new _e(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function oM(n){return new _e(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,yl)})}function sM(n){return new _e(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Q0(n){return new _e(e=>{cM(n,e).catch(t=>e.error(t))})}function aM(n){return Q0(xl(n))}function cM(n,e){var t,r,i,o;return G0(this,void 0,void 0,function*(){try{for(t=K0(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ut(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Al(n,e=0){return De((t,r)=>{t.subscribe(be(r,i=>Ut(r,n,()=>r.next(i),e),()=>Ut(r,n,()=>r.complete(),e),i=>Ut(r,n,()=>r.error(i),e)))})}function Rl(n,e=0){return De((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Y0(n,e){return Je(n).pipe(Rl(e),Al(e))}function Z0(n,e){return Je(n).pipe(Rl(e),Al(e))}function J0(n,e){return new _e(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function X0(n,e){return new _e(t=>{let r;return Ut(t,e,()=>{r=n[Tl](),Ut(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ae(r?.return)&&r.return()})}function Pl(n,e){if(!n)throw new Error("Iterable cannot be null");return new _e(t=>{Ut(t,e,()=>{let r=n[Symbol.asyncIterator]();Ut(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function ew(n,e){return Pl(xl(n),e)}function tw(n,e){if(n!=null){if(El(n))return Y0(n,e);if(Cl(n))return J0(n,e);if(bl(n))return Z0(n,e);if(Dl(n))return Pl(n,e);if(Sl(n))return X0(n,e);if(Ml(n))return ew(n,e)}throw Il(n)}function $e(n,e){return e?tw(n,e):Je(n)}function re(...n){let e=Fr(n);return $e(n,e)}function po(n,e){let t=ae(n)?n:()=>n,r=i=>i.error(t());return new _e(e?i=>e.schedule(r,0,i):r)}function qh(n){return!!n&&(n instanceof _e||ae(n.lift)&&ae(n.subscribe))}var nr=so(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function me(n,e){return De((t,r)=>{let i=0;t.subscribe(be(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:lM}=Array;function uM(n,e){return lM(e)?n(...e):n(e)}function Nl(n){return me(e=>uM(n,e))}var{isArray:dM}=Array,{getPrototypeOf:fM,prototype:hM,keys:pM}=Object;function Ol(n){if(n.length===1){let e=n[0];if(dM(e))return{args:e,keys:null};if(gM(e)){let t=pM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function gM(n){return n&&typeof n=="object"&&fM(n)===hM}function kl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Vl(...n){let e=Fr(n),t=wl(n),{args:r,keys:i}=Ol(n);if(r.length===0)return $e([],e);let o=new _e(mM(r,e,i?s=>kl(i,s):Yt));return t?o.pipe(Nl(t)):o}function mM(n,e,t=Yt){return r=>{nw(e,()=>{let{length:i}=n,o=new Array(i),s=i,c=i;for(let l=0;l<i;l++)nw(e,()=>{let u=$e(n[l],e),f=!1;u.subscribe(be(r,p=>{o[l]=p,f||(f=!0,c--),c||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function nw(n,e,t){n?Ut(t,n,e):e()}function rw(n,e,t,r,i,o,s,c){let l=[],u=0,f=0,p=!1,_=()=>{p&&!l.length&&!u&&e.complete()},m=O=>u<r?x(O):l.push(O),x=O=>{o&&e.next(O),u++;let L=!1;Je(t(O,f++)).subscribe(be(e,q=>{i?.(q),o?m(q):e.next(q)},()=>{L=!0},void 0,()=>{if(L)try{for(u--;l.length&&u<r;){let q=l.shift();s?Ut(e,s,()=>x(q)):x(q)}_()}catch(q){e.error(q)}}))};return n.subscribe(be(e,m,()=>{p=!0,_()})),()=>{c?.()}}function Xe(n,e,t=1/0){return ae(e)?Xe((r,i)=>me((o,s)=>e(r,o,i,s))(Je(n(r,i))),t):(typeof e=="number"&&(t=e),De((r,i)=>rw(r,i,n,t)))}function go(n=1/0){return Xe(Yt,n)}function iw(){return go(1)}function mo(...n){return iw()($e(n,Fr(n)))}function Fl(n){return new _e(e=>{Je(n()).subscribe(e)})}function Gh(...n){let e=wl(n),{args:t,keys:r}=Ol(n),i=new _e(o=>{let{length:s}=t;if(!s){o.complete();return}let c=new Array(s),l=s,u=s;for(let f=0;f<s;f++){let p=!1;Je(t[f]).subscribe(be(o,_=>{p||(p=!0,u--),c[f]=_},()=>l--,void 0,()=>{(!l||!p)&&(u||o.next(r?kl(r,c):c),o.complete())}))}});return e?i.pipe(Nl(e)):i}var fi=new _e(ci);function Ot(n,e){return De((t,r)=>{let i=0;t.subscribe(be(r,o=>n.call(e,o,i++)&&r.next(o)))})}function rr(n){return De((e,t)=>{let r=null,i=!1,o;r=e.subscribe(be(t,void 0,void 0,s=>{o=Je(n(s,rr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function ow(n,e,t,r,i){return(o,s)=>{let c=t,l=e,u=0;o.subscribe(be(s,f=>{let p=u++;l=c?n(l,f,p):(c=!0,f),r&&s.next(l)},i&&(()=>{c&&s.next(l),s.complete()})))}}function hi(n,e){return ae(e)?Xe(n,e,1):Xe(n,1)}function Lr(n){return De((e,t)=>{let r=!1;e.subscribe(be(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function kt(n){return n<=0?()=>Bt:De((e,t)=>{let r=0;e.subscribe(be(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ll(n=yM){return De((e,t)=>{let r=!1;e.subscribe(be(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function yM(){return new nr}function oa(n){return De((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ir(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ot((i,o)=>n(i,o,r)):Yt,kt(1),t?Lr(e):Ll(()=>new nr))}function yo(n){return n<=0?()=>Bt:De((e,t)=>{let r=[];e.subscribe(be(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Wh(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ot((i,o)=>n(i,o,r)):Yt,yo(1),t?Lr(e):Ll(()=>new nr))}function Kh(n,e){return De(ow(n,e,arguments.length>=2,!0))}function Qh(...n){let e=Fr(n);return De((t,r)=>{(e?mo(n,t,e):mo(n,t)).subscribe(r)})}function Et(n,e){return De((t,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();t.subscribe(be(r,l=>{i?.unsubscribe();let u=0,f=o++;Je(n(l,f)).subscribe(i=be(r,p=>r.next(e?e(l,p,f,u++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function Yh(n){return De((e,t)=>{Je(n).subscribe(be(t,()=>t.complete(),ci)),!t.closed&&e.subscribe(t)})}function vt(n,e,t){let r=ae(n)||e||t?{next:n,error:e,complete:t}:n;return r?De((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(be(o,l=>{var u;(u=r.next)===null||u===void 0||u.call(r,l),o.next(l)},()=>{var l;c=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var u;c=!1,(u=r.error)===null||u===void 0||u.call(r,l),o.error(l)},()=>{var l,u;c&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Yt}var Hw="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",K=class extends Error{code;constructor(e,t){super(mu(e,t)),this.code=e}};function vM(n){return`NG0${Math.abs(n)}`}function mu(n,e){return`${vM(n)}${e?": "+e:""}`}var zw=Symbol("InputSignalNode#UNSET"),_M=G(N({},hl),{transformFn:void 0,applyValueToInputSignal(n,e){na(n,e)}});function qw(n,e){let t=Object.create(_M);t.value=n,t.transformFn=e?.transform;function r(){if(Xs(t),t.value===zw){let i=null;throw new K(-950,i)}return t.value}return r[rn]=t,r}function yu(n){return{toString:n}.toString()}var fp=globalThis;function Fe(n){for(let e in n)if(n[e]===Fe)return e;throw Error("Could not find renamed property on target object.")}function wM(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ht(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Ht).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function hp(n,e){return n?e?`${n} ${e}`:n:e||""}var CM=Fe({__forward_ref__:Fe});function wn(n){return n.__forward_ref__=wn,n.toString=function(){return Ht(this())},n}function Vt(n){return Gw(n)?n():n}function Gw(n){return typeof n=="function"&&n.hasOwnProperty(CM)&&n.__forward_ref__===wn}function Q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function $r(n){return{providers:n.providers||[],imports:n.imports||[]}}function vu(n){return sw(n,Kw)||sw(n,Qw)}function Ww(n){return vu(n)!==null}function sw(n,e){return n.hasOwnProperty(e)?n[e]:null}function bM(n){let e=n&&(n[Kw]||n[Qw]);return e||null}function aw(n){return n&&(n.hasOwnProperty(cw)||n.hasOwnProperty(EM))?n[cw]:null}var Kw=Fe({\u0275prov:Fe}),cw=Fe({\u0275inj:Fe}),Qw=Fe({ngInjectableDef:Fe}),EM=Fe({ngInjectorDef:Fe}),Z=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Yw(n){return n&&!!n.\u0275providers}var DM=Fe({\u0275cmp:Fe}),IM=Fe({\u0275dir:Fe}),TM=Fe({\u0275pipe:Fe}),SM=Fe({\u0275mod:Fe}),Wl=Fe({\u0275fac:Fe}),la=Fe({__NG_ELEMENT_ID__:Fe}),lw=Fe({__NG_ENV_ID__:Fe});function bo(n){return typeof n=="string"?n:n==null?"":String(n)}function xM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():bo(n)}function Zw(n,e){throw new K(-200,n)}function ug(n,e){throw new K(-201,!1)}var pe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(pe||{}),pp;function Jw(){return pp}function on(n){let e=pp;return pp=n,e}function Xw(n,e,t){let r=vu(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&pe.Optional)return null;if(e!==void 0)return e;ug(n,"Injector")}var MM={},pi=MM,AM="__NG_DI_FLAG__",Kl=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?pl:pi,r)}},Ql="ngTempTokenPath",RM="ngTokenPath",PM=/\n/gm,NM="\u0275",uw="__source";function OM(n,e=pe.Default){if(ra()===void 0)throw new K(-203,!1);if(ra()===null)return Xw(n,void 0,e);{let t=ra(),r;return t instanceof Kl?r=t.injector:r=t,r.get(n,e&pe.Optional?null:void 0,e)}}function ne(n,e=pe.Default){return(Jw()||OM)(Vt(n),e)}function k(n,e=pe.Default){return ne(n,_u(e))}function _u(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function gp(n){let e=[];for(let t=0;t<n.length;t++){let r=Vt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new K(900,!1);let i,o=pe.Default;for(let s=0;s<r.length;s++){let c=r[s],l=kM(c);typeof l=="number"?l===-1?i=c.token:o|=l:i=c}e.push(ne(i,o))}else e.push(ne(r))}return e}function kM(n){return n[AM]}function VM(n,e,t,r){let i=n[Ql];throw e[uw]&&i.unshift(e[uw]),n.message=FM(`
`+n.message,i,t,r),n[RM]=i,n[Ql]=null,n}function FM(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==NM?n.slice(2):n;let i=Ht(e);if(Array.isArray(e))i=e.map(Ht).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let c=e[s];o.push(s+":"+(typeof c=="string"?JSON.stringify(c):Ht(c)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(PM,`
  `)}`}function Eo(n,e){let t=n.hasOwnProperty(Wl);return t?n[Wl]:null}function LM(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function jM(n){return n.flat(Number.POSITIVE_INFINITY)}function dg(n,e){n.forEach(t=>Array.isArray(t)?dg(t,e):e(t))}function eC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Yl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function BM(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function fg(n,e,t){let r=Ia(n,e);return r>=0?n[r|1]=t:(r=~r,BM(n,r,e,t)),r}function Zh(n,e){let t=Ia(n,e);if(t>=0)return n[t|1]}function Ia(n,e){return UM(n,e,1)}function UM(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var mi={},$t=[],ua=new Z(""),tC=new Z("",-1),nC=new Z(""),Zl=class{get(e,t=pi){if(t===pi){let r=new Error(`NullInjectorError: No provider for ${Ht(e)}!`);throw r.name="NullInjectorError",r}return t}};function rC(n,e){let t=n[SM]||null;if(!t&&e===!0)throw new Error(`Type ${Ht(n)} does not have '\u0275mod' property.`);return t}function Do(n){return n[DM]||null}function $M(n){return n[IM]||null}function HM(n){return n[TM]||null}function Ta(n){return{\u0275providers:n}}function zM(...n){return{\u0275providers:iC(!0,n),\u0275fromNgModule:!0}}function iC(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return dg(e,s=>{let c=s;mp(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&oC(i,o),t}function oC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];hg(i,o=>{e(o,r)})}}function mp(n,e,t,r){if(n=Vt(n),!n)return!1;let i=null,o=aw(n),s=!o&&Do(n);if(!o&&!s){let l=n.ngModule;if(o=aw(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)mp(u,e,t,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let u;try{dg(o.imports,f=>{mp(f,e,t,r)&&(u||=[],u.push(f))})}finally{}u!==void 0&&oC(u,e)}if(!c){let u=Eo(i)||(()=>new i);e({provide:i,useFactory:u,deps:$t},i),e({provide:nC,useValue:i,multi:!0},i),e({provide:ua,useValue:()=>ne(i),multi:!0},i)}let l=o.providers;if(l!=null&&!c){let u=n;hg(l,f=>{e(f,u)})}}else return!1;return i!==n&&n.providers!==void 0}function hg(n,e){for(let t of n)Yw(t)&&(t=t.\u0275providers),Array.isArray(t)?hg(t,e):e(t)}var qM=Fe({provide:String,useValue:Fe});function sC(n){return n!==null&&typeof n=="object"&&qM in n}function GM(n){return!!(n&&n.useExisting)}function WM(n){return!!(n&&n.useFactory)}function Io(n){return typeof n=="function"}function KM(n){return!!n.useClass}var wu=new Z(""),Ul={},dw={},Jh;function pg(){return Jh===void 0&&(Jh=new Zl),Jh}var Zt=class{},da=class extends Zt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,vp(e,s=>this.processProvider(s)),this.records.set(tC,vo(void 0,this)),i.has("environment")&&this.records.set(Zt,vo(void 0,this));let o=this.records.get(wu);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(nC,$t,pe.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?pl:pi,r)}destroy(){aa(this),this._destroyed=!0;let e=ue(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ue(e)}}onDestroy(e){return aa(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){aa(this);let t=tr(this),r=on(void 0),i;try{return e()}finally{tr(t),on(r)}}get(e,t=pi,r=pe.Default){if(aa(this),e.hasOwnProperty(lw))return e[lw](this);r=_u(r);let i,o=tr(this),s=on(void 0);try{if(!(r&pe.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=XM(e)&&vu(e);u&&this.injectableDefInScope(u)?l=vo(yp(e),Ul):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,r)}let c=r&pe.Self?pg():this.parent;return t=r&pe.Optional&&t===pi?null:t,c.get(e,t)}catch(c){if(c.name==="NullInjectorError"){if((c[Ql]=c[Ql]||[]).unshift(Ht(e)),o)throw c;return VM(c,e,"R3InjectorError",this.source)}else throw c}finally{on(s),tr(o)}}resolveInjectorInitializers(){let e=ue(null),t=tr(this),r=on(void 0),i;try{let o=this.get(ua,$t,pe.Self);for(let s of o)s()}finally{tr(t),on(r),ue(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ht(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Vt(e);let t=Io(e)?e:Vt(e&&e.provide),r=YM(e);if(!Io(e)&&e.multi===!0){let i=this.records.get(t);i||(i=vo(void 0,Ul,!0),i.factory=()=>gp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ue(null);try{return t.value===dw?Zw(Ht(e)):t.value===Ul&&(t.value=dw,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&JM(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ue(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Vt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function yp(n){let e=vu(n),t=e!==null?e.factory:Eo(n);if(t!==null)return t;if(n instanceof Z)throw new K(204,!1);if(n instanceof Function)return QM(n);throw new K(204,!1)}function QM(n){if(n.length>0)throw new K(204,!1);let t=bM(n);return t!==null?()=>t.factory(n):()=>new n}function YM(n){if(sC(n))return vo(void 0,n.useValue);{let e=aC(n);return vo(e,Ul)}}function aC(n,e,t){let r;if(Io(n)){let i=Vt(n);return Eo(i)||yp(i)}else if(sC(n))r=()=>Vt(n.useValue);else if(WM(n))r=()=>n.useFactory(...gp(n.deps||[]));else if(GM(n))r=(i,o)=>ne(Vt(n.useExisting),o!==void 0&&o&pe.Optional?pe.Optional:void 0);else{let i=Vt(n&&(n.useClass||n.provide));if(ZM(n))r=()=>new i(...gp(n.deps));else return Eo(i)||yp(i)}return r}function aa(n){if(n.destroyed)throw new K(205,!1)}function vo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function ZM(n){return!!n.deps}function JM(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function XM(n){return typeof n=="function"||typeof n=="object"&&n instanceof Z}function vp(n,e){for(let t of n)Array.isArray(t)?vp(t,e):t&&Yw(t)?vp(t.\u0275providers,e):e(t)}function Cn(n,e){let t;n instanceof da?(aa(n),t=n):t=new Kl(n);let r,i=tr(t),o=on(void 0);try{return e()}finally{tr(i),on(o)}}function cC(){return Jw()!==void 0||ra()!=null}function eA(n){if(!cC())throw new K(-203,!1)}function tA(n){return typeof n=="function"}var ar=0,de=1,oe=2,It=3,vn=4,bn=5,fa=6,Jl=7,ct=8,To=9,or=10,et=11,ha=12,fw=13,Po=14,_n=15,yi=16,_o=17,sr=18,Cu=19,lC=20,jr=21,Xh=22,vi=23,sn=24,ep=25,zt=26,uC=1;var _i=7,Xl=8,So=9,Dt=10;function Br(n){return Array.isArray(n)&&typeof n[uC]=="object"}function cr(n){return Array.isArray(n)&&n[uC]===!0}function dC(n){return(n.flags&4)!==0}function No(n){return n.componentOffset>-1}function gg(n){return(n.flags&1)===1}function Pn(n){return!!n.template}function eu(n){return(n[oe]&512)!==0}function Oo(n){return(n[oe]&256)===256}var _p=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function fC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var lr=(()=>{let n=()=>hC;return n.ngInherit=!0,n})();function hC(n){return n.type.prototype.ngOnChanges&&(n.setInput=rA),nA}function nA(){let n=gC(this),e=n?.current;if(e){let t=n.previous;if(t===mi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function rA(n,e,t,r,i){let o=this.declaredInputs[r],s=gC(n)||iA(n,{previous:mi,current:null}),c=s.current||(s.current={}),l=s.previous,u=l[o];c[o]=new _p(u&&u.currentValue,t,l===mi),fC(n,e,i,t)}var pC="__ngSimpleChanges__";function gC(n){return n[pC]||null}function iA(n,e){return n[pC]=e}var hw=null;var Le=function(n,e=null,t){hw?.(n,e,t)},oA="svg",sA="math";function Nn(n){for(;Array.isArray(n);)n=n[ar];return n}function mC(n,e){return Nn(e[n])}function jn(n,e){return Nn(e[n.index])}function mg(n,e){return n.data[e]}function aA(n,e){return n[e]}function yC(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function On(n,e){let t=e[n];return Br(t)?t:t[ar]}function cA(n){return(n[oe]&4)===4}function yg(n){return(n[oe]&128)===128}function lA(n){return cr(n[It])}function xo(n,e){return e==null?null:n[e]}function vC(n){n[_o]=0}function _C(n){n[oe]&1024||(n[oe]|=1024,yg(n)&&Sa(n))}function uA(n,e){for(;n>0;)e=e[Po],n--;return e}function bu(n){return!!(n[oe]&9216||n[sn]?.dirty)}function wp(n){n[or].changeDetectionScheduler?.notify(8),n[oe]&64&&(n[oe]|=1024),bu(n)&&Sa(n)}function Sa(n){n[or].changeDetectionScheduler?.notify(0);let e=wi(n);for(;e!==null&&!(e[oe]&8192||(e[oe]|=8192,!yg(e)));)e=wi(e)}function wC(n,e){if(Oo(n))throw new K(911,!1);n[jr]===null&&(n[jr]=[]),n[jr].push(e)}function dA(n,e){if(n[jr]===null)return;let t=n[jr].indexOf(e);t!==-1&&n[jr].splice(t,1)}function wi(n){let e=n[It];return cr(e)?e[It]:e}function vg(n){return n[Jl]??=[]}function _g(n){return n.cleanup??=[]}function fA(n,e,t,r){let i=vg(e);i.push(t),n.firstCreatePass&&_g(n).push(r,i.length-1)}var ye={lFrame:xC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Cp=!1;function hA(){return ye.lFrame.elementDepthCount}function pA(){ye.lFrame.elementDepthCount++}function gA(){ye.lFrame.elementDepthCount--}function CC(){return ye.bindingsEnabled}function mA(){return ye.skipHydrationRootTNode!==null}function yA(n){return ye.skipHydrationRootTNode===n}function vA(){ye.skipHydrationRootTNode=null}function we(){return ye.lFrame.lView}function ut(){return ye.lFrame.tView}function B(n){return ye.lFrame.contextLView=n,n[ct]}function U(n){return ye.lFrame.contextLView=null,n}function Ft(){let n=bC();for(;n!==null&&n.type===64;)n=n.parent;return n}function bC(){return ye.lFrame.currentTNode}function _A(){let n=ye.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ko(n,e){let t=ye.lFrame;t.currentTNode=n,t.isParent=e}function EC(){return ye.lFrame.isParent}function wA(){ye.lFrame.isParent=!1}function CA(){return ye.lFrame.contextLView}function DC(){return Cp}function tu(n){let e=Cp;return Cp=n,e}function bA(){let n=ye.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function EA(){return ye.lFrame.bindingIndex}function DA(n){return ye.lFrame.bindingIndex=n}function Vo(){return ye.lFrame.bindingIndex++}function wg(n){let e=ye.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function IA(){return ye.lFrame.inI18n}function TA(n,e){let t=ye.lFrame;t.bindingIndex=t.bindingRootIndex=n,bp(e)}function SA(){return ye.lFrame.currentDirectiveIndex}function bp(n){ye.lFrame.currentDirectiveIndex=n}function xA(n){let e=ye.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function IC(){return ye.lFrame.currentQueryIndex}function Cg(n){ye.lFrame.currentQueryIndex=n}function MA(n){let e=n[de];return e.type===2?e.declTNode:e.type===1?n[bn]:null}function TC(n,e,t){if(t&pe.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&pe.Host);)if(i=MA(o),i===null||(o=o[Po],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ye.lFrame=SC();return r.currentTNode=e,r.lView=n,!0}function bg(n){let e=SC(),t=n[de];ye.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function SC(){let n=ye.lFrame,e=n===null?null:n.child;return e===null?xC(n):e}function xC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function MC(){let n=ye.lFrame;return ye.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var AC=MC;function Eg(){let n=MC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function AA(n){return(ye.lFrame.contextLView=uA(n,ye.lFrame.contextLView))[ct]}function Bn(){return ye.lFrame.selectedIndex}function Ci(n){ye.lFrame.selectedIndex=n}function Dg(){let n=ye.lFrame;return mg(n.tView,n.selectedIndex)}function RA(){return ye.lFrame.currentNamespace}var RC=!0;function Ig(){return RC}function Tg(n){RC=n}function PA(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=hC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function PC(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function $l(n,e,t){NC(n,e,3,t)}function Hl(n,e,t,r){(n[oe]&3)===t&&NC(n,e,t,r)}function tp(n,e){let t=n[oe];(t&3)===e&&(t&=16383,t+=1,n[oe]=t)}function NC(n,e,t,r){let i=r!==void 0?n[_o]&65535:0,o=r??-1,s=e.length-1,c=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(c=e[l],r!=null&&c>=r)break}else e[l]<0&&(n[_o]+=65536),(c<o||o==-1)&&(NA(n,t,e,l),n[_o]=(n[_o]&4294901760)+l+2),l++}function pw(n,e){Le(4,n,e);let t=ue(null);try{e.call(n)}finally{ue(t),Le(5,n,e)}}function NA(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],c=n[s];i?n[oe]>>14<n[_o]>>16&&(n[oe]&3)===e&&(n[oe]+=16384,pw(c,o)):pw(c,o)}var Co=-1,bi=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function OA(n){return(n.flags&8)!==0}function kA(n){return(n.flags&16)!==0}function VA(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],c=t[r++];n.setAttribute(e,s,c,o)}else{let o=i,s=t[++r];FA(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function OC(n){return n===3||n===4||n===6}function FA(n){return n.charCodeAt(0)===64}function pa(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?gw(n,t,i,null,e[++r]):gw(n,t,i,null,null))}}return n}function gw(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let c=n[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<n.length;){let c=n[o];if(typeof c=="number")break;if(c===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function kC(n){return n!==Co}function nu(n){return n&32767}function LA(n){return n>>16}function ru(n,e){let t=LA(n),r=e;for(;t>0;)r=r[Po],t--;return r}var Ep=!0;function mw(n){let e=Ep;return Ep=n,e}var jA=256,VC=jA-1,FC=5,BA=0,Rn={};function UA(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(la)&&(r=t[la]),r==null&&(r=t[la]=BA++);let i=r&VC,o=1<<i;e.data[n+(i>>FC)]|=o}function iu(n,e){let t=LC(n,e);if(t!==-1)return t;let r=e[de];r.firstCreatePass&&(n.injectorIndex=e.length,np(r.data,n),np(e,null),np(r.blueprint,null));let i=Sg(n,e),o=n.injectorIndex;if(kC(i)){let s=nu(i),c=ru(i,e),l=c[de].data;for(let u=0;u<8;u++)e[o+u]=c[s+u]|l[s+u]}return e[o+8]=i,o}function np(n,e){n.push(0,0,0,0,0,0,0,0,e)}function LC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Sg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=HC(i),r===null)return Co;if(t++,i=i[Po],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Co}function Dp(n,e,t){UA(n,e,t)}function $A(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(OC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function jC(n,e,t){if(t&pe.Optional||n!==void 0)return n;ug(e,"NodeInjector")}function BC(n,e,t,r){if(t&pe.Optional&&r===void 0&&(r=null),(t&(pe.Self|pe.Host))===0){let i=n[To],o=on(void 0);try{return i?i.get(e,r,t&pe.Optional):Xw(e,r,t&pe.Optional)}finally{on(o)}}return jC(r,e,t)}function UC(n,e,t,r=pe.Default,i){if(n!==null){if(e[oe]&2048&&!(r&pe.Self)){let s=GA(n,e,t,r,Rn);if(s!==Rn)return s}let o=$C(n,e,t,r,Rn);if(o!==Rn)return o}return BC(e,t,r,i)}function $C(n,e,t,r,i){let o=zA(t);if(typeof o=="function"){if(!TC(e,n,r))return r&pe.Host?jC(i,t,r):BC(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&pe.Optional))ug(t);else return s}finally{AC()}}else if(typeof o=="number"){let s=null,c=LC(n,e),l=Co,u=r&pe.Host?e[_n][bn]:null;for((c===-1||r&pe.SkipSelf)&&(l=c===-1?Sg(n,e):e[c+8],l===Co||!vw(r,!1)?c=-1:(s=e[de],c=nu(l),e=ru(l,e)));c!==-1;){let f=e[de];if(yw(o,c,f.data)){let p=HA(c,e,t,s,r,u);if(p!==Rn)return p}l=e[c+8],l!==Co&&vw(r,e[de].data[c+8]===u)&&yw(o,c,e)?(s=f,c=nu(l),e=ru(l,e)):c=-1}}return i}function HA(n,e,t,r,i,o){let s=e[de],c=s.data[n+8],l=r==null?No(c)&&Ep:r!=s&&(c.type&3)!==0,u=i&pe.Host&&o===c,f=zl(c,s,t,l,u);return f!==null?ga(e,s,f,c,i):Rn}function zl(n,e,t,r,i){let o=n.providerIndexes,s=e.data,c=o&1048575,l=n.directiveStart,u=n.directiveEnd,f=o>>20,p=r?c:c+f,_=i?c+f:u;for(let m=p;m<_;m++){let x=s[m];if(m<l&&t===x||m>=l&&x.type===t)return m}if(i){let m=s[l];if(m&&Pn(m)&&m.type===t)return l}return null}function ga(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof bi){let c=o;c.resolving&&Zw(xM(s[t]));let l=mw(c.canSeeViewProviders);c.resolving=!0;let u,f=c.injectImpl?on(c.injectImpl):null,p=TC(n,r,pe.Default);try{o=n[t]=c.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&PA(t,s[t],e)}finally{f!==null&&on(f),mw(l),c.resolving=!1,AC()}}return o}function zA(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(la)?n[la]:void 0;return typeof e=="number"?e>=0?e&VC:qA:e}function yw(n,e,t){let r=1<<n;return!!(t[e+(n>>FC)]&r)}function vw(n,e){return!(n&pe.Self)&&!(n&pe.Host&&e)}var gi=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return UC(this._tNode,this._lView,e,_u(r),t)}};function qA(){return new gi(Ft(),we())}function En(n){return yu(()=>{let e=n.prototype.constructor,t=e[Wl]||Ip(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Wl]||Ip(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ip(n){return Gw(n)?()=>{let e=Ip(Vt(n));return e&&e()}:Eo(n)}function GA(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[oe]&2048&&!eu(s);){let c=$C(o,s,t,r|pe.Self,Rn);if(c!==Rn)return c;let l=o.parent;if(!l){let u=s[lC];if(u){let f=u.get(t,Rn,r);if(f!==Rn)return f}l=HC(s),s=s[Po]}o=l}return i}function HC(n){let e=n[de],t=e.type;return t===2?e.declTNode:t===1?n[bn]:null}function xg(n){return $A(Ft(),n)}function _w(n,e=null,t=null,r){let i=zC(n,e,t,r);return i.resolveInjectorInitializers(),i}function zC(n,e=null,t=null,r,i=new Set){let o=[t||$t,zM(n)];return r=r||(typeof n=="object"?void 0:Ht(n)),new da(o,e||pg(),r||null,i)}var an=class n{static THROW_IF_NOT_FOUND=pi;static NULL=new Zl;static create(e,t){if(Array.isArray(e))return _w({name:""},t,e,"");{let r=e.name??"";return _w({name:r},e.parent,e.providers,r)}}static \u0275prov=Q({token:n,providedIn:"any",factory:()=>ne(tC)});static __NG_ELEMENT_ID__=-1};var WA=new Z("");WA.__NG_ELEMENT_ID__=n=>{let e=Ft();if(e===null)throw new K(204,!1);if(e.type&2)return e.value;if(n&pe.Optional)return null;throw new K(204,!1)};var qC=!1,Fo=(()=>{class n{static __NG_ELEMENT_ID__=KA;static __NG_ENV_ID__=t=>t}return n})(),ou=class extends Fo{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return Oo(t)?(e(),()=>{}):(wC(t,e),()=>dA(t,e))}};function KA(){return new ou(we())}var Mo=class{},GC=new Z("",{providedIn:"root",factory:()=>!1});var WC=new Z(""),KC=new Z(""),Lo=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new yt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})();var Tp=class extends Be{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,cC()&&(this.destroyRef=k(Fo,{optional:!0})??void 0,this.pendingTasks=k(Lo,{optional:!0})??void 0)}emit(e){let t=ue(null);try{super.next(e)}finally{ue(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Ze&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},at=Tp;function ma(...n){}function QC(n){let e,t;function r(){n=ma;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function ww(n){return queueMicrotask(()=>n()),()=>{n=ma}}var Mg="isAngularZone",su=Mg+"_ID",QA=0,lt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new at(!1);onMicrotaskEmpty=new at(!1);onStable=new at(!1);onError=new at(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=qC}=e;if(typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,JA(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Mg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new K(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,YA,ma,ma);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},YA={};function Ag(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function ZA(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){QC(()=>{n.callbackScheduled=!1,Sp(n),n.isCheckStableRunning=!0,Ag(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Sp(n)}function JA(n){let e=()=>{ZA(n)},t=QA++;n._inner=n._inner.fork({name:"angular",properties:{[Mg]:!0,[su]:t,[su+t]:!0},onInvokeTask:(r,i,o,s,c,l)=>{if(XA(l))return r.invokeTask(o,s,c,l);try{return Cw(n),r.invokeTask(o,s,c,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),bw(n)}},onInvoke:(r,i,o,s,c,l,u)=>{try{return Cw(n),r.invoke(o,s,c,l,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!e1(l)&&e(),bw(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Sp(n),Ag(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Sp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Cw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function bw(n){n._nesting--,Ag(n)}var xp=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new at;onMicrotaskEmpty=new at;onStable=new at;onError=new at;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function XA(n){return YC(n,"__ignore_ng_zone__")}function e1(n){return YC(n,"__scheduler_tick__")}function YC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var kn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},t1=new Z("",{providedIn:"root",factory:()=>{let n=k(lt),e=k(kn);return t=>n.runOutsideAngular(()=>e.handleError(t))}}),Mp=class{destroyed=!1;listeners=null;errorHandler=k(kn,{optional:!0});destroyRef=k(Fo);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new K(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let t=this.listeners?.indexOf(e);t!==void 0&&t!==-1&&this.listeners?.splice(t,1)}}}emit(e){if(this.destroyed){console.warn(mu(953,!1));return}if(this.listeners===null)return;let t=ue(null);try{for(let r of this.listeners)try{r(e)}catch(i){this.errorHandler?.handleError(i)}}finally{ue(t)}}};function tt(n){return new Mp}function Ew(n,e){return qw(n,e)}function n1(n){return qw(zw,n)}var ze=(Ew.required=n1,Ew);function r1(){return jo(Ft(),we())}function jo(n,e){return new Jt(jn(n,e))}var Jt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=r1}return n})();function i1(n){return n instanceof Jt?n.nativeElement:n}function o1(n){return typeof n=="function"&&n[rn]!==void 0}function Y(n,e){let t=Ph(n,e?.equal),r=t[rn];return t.set=i=>na(r,i),t.update=i=>Nh(r,i),t.asReadonly=s1.bind(t),t}function s1(){let n=this[rn];if(n.readonlyFn===void 0){let e=()=>this();e[rn]=n,n.readonlyFn=e}return n.readonlyFn}function ZC(n){return o1(n)&&typeof n.set=="function"}function a1(){return this._results[Symbol.iterator]()}var Ap=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Be}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=jM(e);(this._changesDetected=!LM(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=a1};function JC(n){return(n.flags&128)===128}var XC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(XC||{}),eb=new Map,c1=0;function l1(){return c1++}function u1(n){eb.set(n[Cu],n)}function Rp(n){eb.delete(n[Cu])}var Dw="__ngContext__";function xa(n,e){Br(e)?(n[Dw]=e[Cu],u1(e)):n[Dw]=e}function tb(n){return rb(n[ha])}function nb(n){return rb(n[vn])}function rb(n){for(;n!==null&&!cr(n);)n=n[vn];return n}var Pp;function ib(n){Pp=n}function d1(){if(Pp!==void 0)return Pp;if(typeof document<"u")return document;throw new K(210,!1)}var Rg=new Z("",{providedIn:"root",factory:()=>f1}),f1="ng",Pg=new Z(""),Di=new Z("",{providedIn:"platform",factory:()=>"unknown"});var Ng=new Z("",{providedIn:"root",factory:()=>d1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var h1="h",p1="b";var ob=!1,g1=new Z("",{providedIn:"root",factory:()=>ob});var sb=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(sb||{}),Eu=new Z(""),Iw=new Set;function Ma(n){Iw.has(n)||(Iw.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var ab=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=m1}return n})();function m1(){return new ab(we(),Ft())}var y1=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})();var v1=(n,e,t,r)=>{};function _1(n,e,t,r){v1(n,e,t,r)}var w1=()=>null;function cb(n,e,t=!1){return w1(n,e,t)}function lb(n,e){let t=n.contentQueries;if(t!==null){let r=ue(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let c=n.data[s];Cg(o),c.contentQueries(2,e[s],s)}}}finally{ue(r)}}}function Np(n,e,t){Cg(0);let r=ue(null);try{e(n,t)}finally{ue(r)}}function ub(n,e,t){if(dC(e)){let r=ue(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=n.data[s];if(c.contentQueries){let l=t[s];c.contentQueries(1,l,s)}}}finally{ue(r)}}}var Vn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Vn||{});var jl;function C1(){if(jl===void 0&&(jl=null,fp.trustedTypes))try{jl=fp.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return jl}function Tw(n){return C1()?.createScriptURL(n)||n}var au=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Hw})`}};function Du(n){return n instanceof au?n.changingThisBreaksApplicationSecurity:n}function db(n,e){let t=b1(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Hw})`)}return t===e}function b1(n){return n instanceof au&&n.getTypeName()||null}var E1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function D1(n){return n=String(n),n.match(E1)?n:"unsafe:"+n}function I1(n,e){return n.createText(e)}function T1(n,e,t){n.setValue(e,t)}function fb(n,e,t){return n.createElement(e,t)}function cu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function hb(n,e,t){n.appendChild(e,t)}function Sw(n,e,t,r,i){r!==null?cu(n,e,t,r,i):hb(n,e,t)}function S1(n,e,t){n.removeChild(null,e,t)}function x1(n,e,t){n.setAttribute(e,"style",t)}function M1(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function pb(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&VA(n,e,r),i!==null&&M1(n,e,i),o!==null&&x1(n,e,o)}var Og=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Og||{});function kg(n){let e=mb();return e?e.sanitize(Og.URL,n)||"":db(n,"URL")?Du(n):D1(bo(n))}function A1(n){let e=mb();if(e)return Tw(e.sanitize(Og.RESOURCE_URL,n)||"");if(db(n,"ResourceURL"))return Tw(Du(n));throw new K(904,!1)}var R1=new Set(["embed","frame","iframe","media","script"]),P1=new Set(["base","link","script"]);function N1(n,e){return e==="src"&&R1.has(n)||e==="href"&&P1.has(n)||e==="xlink:href"&&n==="script"?A1:kg}function gb(n,e,t){return N1(e,t)(n)}function mb(){let n=we();return n&&n[or].sanitizer}function yb(n){return n instanceof Function?n():n}function O1(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var vb="ng-template";function k1(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&O1(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Vg(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Vg(n){return n.type===4&&n.value!==vb}function V1(n,e,t){let r=n.type===4&&!t?vb:n.value;return e===r}function F1(n,e,t){let r=4,i=n.attrs,o=i!==null?B1(i):0,s=!1;for(let c=0;c<e.length;c++){let l=e[c];if(typeof l=="number"){if(!s&&!mn(r)&&!mn(l))return!1;if(s&&mn(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!V1(n,l,t)||l===""&&e.length===1){if(mn(r))return!1;s=!0}}else if(r&8){if(i===null||!k1(n,i,l,t)){if(mn(r))return!1;s=!0}}else{let u=e[++c],f=L1(l,i,Vg(n),t);if(f===-1){if(mn(r))return!1;s=!0;continue}if(u!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&u!==p){if(mn(r))return!1;s=!0}}}}return mn(r)||s}function mn(n){return(n&1)===0}function L1(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return U1(e,n)}function j1(n,e,t=!1){for(let r=0;r<e.length;r++)if(F1(n,e[r],t))return!0;return!1}function B1(n){for(let e=0;e<n.length;e++){let t=n[e];if(OC(t))return e}return n.length}function U1(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function xw(n,e){return n?":not("+e.trim()+")":e}function $1(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let c=n[++t];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!mn(s)&&(e+=xw(o,i),i=""),r=s,o=o||!mn(r);t++}return i!==""&&(e+=xw(o,i)),e}function H1(n){return n.map($1).join(",")}function z1(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!mn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var cn={};function Fg(n,e,t,r,i,o,s,c,l,u,f){let p=zt+r,_=p+i,m=q1(p,_),x=typeof u=="function"?u():u;return m[de]={type:n,blueprint:m,template:t,queries:null,viewQuery:c,declTNode:e,data:m.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:x,incompleteFirstPass:!1,ssrId:f}}function q1(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:cn);return t}function G1(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Fg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Lg(n,e,t,r,i,o,s,c,l,u,f){let p=e.blueprint.slice();return p[ar]=i,p[oe]=r|4|128|8|64|1024,(u!==null||n&&n[oe]&2048)&&(p[oe]|=2048),vC(p),p[It]=p[Po]=n,p[ct]=t,p[or]=s||n&&n[or],p[et]=c||n&&n[et],p[To]=l||n&&n[To]||null,p[bn]=o,p[Cu]=l1(),p[fa]=f,p[lC]=u,p[_n]=e.type==2?n[_n]:p,p}function W1(n,e,t){let r=jn(e,n),i=G1(t),o=n[or].rendererFactory,s=jg(n,Lg(n,i,null,_b(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function _b(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function wb(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function jg(n,e){return n[ha]?n[fw][vn]=e:n[ha]=e,n[fw]=e,e}function R(n=1){Cb(ut(),we(),Bn()+n,!1)}function Cb(n,e,t,r){if(!r)if((e[oe]&3)===3){let o=n.preOrderCheckHooks;o!==null&&$l(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Hl(e,o,0,t)}Ci(t)}var Iu=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Iu||{});function Op(n,e,t,r){let i=ue(null);try{let[o,s,c]=n.inputs[t],l=null;(s&Iu.SignalBased)!==0&&(l=e[o][rn]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):c!==null&&(r=c.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,o):fC(e,l,o,r)}finally{ue(i)}}function bb(n,e,t,r,i){let o=Bn(),s=r&2;try{Ci(-1),s&&e.length>zt&&Cb(n,e,zt,!1),Le(s?2:0,i),t(r,i)}finally{Ci(o),Le(s?3:1,i)}}function Bg(n,e,t){X1(n,e,t),(t.flags&64)===64&&eR(n,e,t)}function Eb(n,e,t=jn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?t(e,n):n[s];n[i++]=c}}}function K1(n,e,t,r){let o=r.get(g1,ob)||t===Vn.ShadowDom,s=n.selectRootElement(e,o);return Q1(s),s}function Q1(n){Y1(n)}var Y1=()=>null;function Z1(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Db(n,e,t,r,i,o,s,c){if(!c&&Ug(e,n,t,r,i)){No(e)&&J1(t,e.index);return}if(e.type&3){let l=jn(e,t);r=Z1(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(l,r,i)}else e.type&12}function J1(n,e){let t=On(e,n);t[oe]&16||(t[oe]|=64)}function X1(n,e,t){let r=t.directiveStart,i=t.directiveEnd;No(t)&&W1(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||iu(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let c=n.data[s],l=ga(e,n,s,t);if(xa(l,e),o!==null&&iR(e,s-r,l,c,t,o),Pn(c)){let u=On(t.index,e);u[ct]=ga(e,n,s,t)}}}function eR(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=SA();try{Ci(o);for(let c=r;c<i;c++){let l=n.data[c],u=e[c];bp(c),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&tR(l,u)}}finally{Ci(-1),bp(s)}}function tR(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Ib(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];j1(e,o.selectors,!1)&&(r??=[],Pn(o)?r.unshift(o):r.push(o))}return r}function nR(n,e,t,r,i,o){let s=jn(n,e);rR(e[et],s,o,n.value,t,r,i)}function rR(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let c=s==null?bo(o):s(o,r||"",i);n.setAttribute(e,i,c,t)}}function iR(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1];Op(r,t,l,u)}}function oR(n,e){let t=n[To],r=t?t.get(kn,null):null;r&&r.handleError(e)}function Ug(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],c=!1;if(s)for(let l=0;l<s.length;l+=2){let u=s[l],f=s[l+1],p=e.data[u];Op(p,t[u],f,i),c=!0}if(o)for(let l of o){let u=t[l],f=e.data[l];Op(f,u,r,i),c=!0}return c}function sR(n,e){let t=On(e,n),r=t[de];aR(r,t);let i=t[ar];i!==null&&t[fa]===null&&(t[fa]=cb(i,t[To])),Le(18),$g(r,t,t[ct]),Le(19,t[ct])}function aR(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function $g(n,e,t){bg(e);try{let r=n.viewQuery;r!==null&&Np(1,r,t);let i=n.template;i!==null&&bb(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[sr]?.finishViewCreation(n),n.staticContentQueries&&lb(n,e),n.staticViewQueries&&Np(2,n.viewQuery,t);let o=n.components;o!==null&&cR(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[oe]&=-5,Eg()}}function cR(n,e){for(let t=0;t<e.length;t++)sR(n,e[t])}function Tu(n,e,t,r){let i=ue(null);try{let o=e.tView,c=n[oe]&4096?4096:16,l=Lg(n,o,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];l[yi]=u;let f=n[sr];return f!==null&&(l[sr]=f.createEmbeddedView(o)),$g(o,l,t),l}finally{ue(i)}}function ya(n,e){return!e||e.firstChild===null||JC(n)}var lR;function Hg(n,e){return lR(n,e)}var Ur=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ur||{});function Tb(n){return(n.flags&32)===32}function wo(n,e,t,r,i){if(r!=null){let o,s=!1;cr(r)?o=r:Br(r)&&(s=!0,r=r[ar]);let c=Nn(r);n===0&&t!==null?i==null?hb(e,t,c):cu(e,t,c,i||null,!0):n===1&&t!==null?cu(e,t,c,i||null,!0):n===2?S1(e,c,s):n===3&&e.destroyNode(c),o!=null&&CR(e,n,o,t,i)}}function uR(n,e){Sb(n,e),e[ar]=null,e[bn]=null}function dR(n,e,t,r,i,o){r[ar]=i,r[bn]=e,xu(n,r,t,1,i,o)}function Sb(n,e){e[or].changeDetectionScheduler?.notify(9),xu(n,e,e[et],2,null,null)}function fR(n){let e=n[ha];if(!e)return rp(n[de],n);for(;e;){let t=null;if(Br(e))t=e[ha];else{let r=e[Dt];r&&(t=r)}if(!t){for(;e&&!e[vn]&&e!==n;)Br(e)&&rp(e[de],e),e=e[It];e===null&&(e=n),Br(e)&&rp(e[de],e),t=e&&e[vn]}e=t}}function zg(n,e){let t=n[So],r=t.indexOf(e);t.splice(r,1)}function Su(n,e){if(Oo(e))return;let t=e[et];t.destroyNode&&xu(n,e,t,3,null,null),fR(e)}function rp(n,e){if(Oo(e))return;let t=ue(null);try{e[oe]&=-129,e[oe]|=256,e[sn]&&ta(e[sn]),pR(n,e),hR(n,e),e[de].type===1&&e[et].destroy();let r=e[yi];if(r!==null&&cr(e[It])){r!==e[It]&&zg(r,e);let i=e[sr];i!==null&&i.detachView(n)}Rp(e)}finally{ue(t)}}function hR(n,e){let t=n.cleanup,r=e[Jl];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let c=t[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[t[s+1]];t[s].call(c)}r!==null&&(e[Jl]=null);let i=e[jr];if(i!==null){e[jr]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[vi];if(o!==null){e[vi]=null;for(let s of o)s.destroy()}}function pR(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof bi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],l=o[s+1];Le(4,c,l);try{l.call(c)}finally{Le(5,c,l)}}else{Le(4,i,o);try{o.call(i)}finally{Le(5,i,o)}}}}}function gR(n,e,t){return mR(n,e.parent,t)}function mR(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ar];if(No(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Vn.None||i===Vn.Emulated)return null}return jn(r,t)}function yR(n,e,t){return _R(n,e,t)}function vR(n,e,t){return n.type&40?jn(n,t):null}var _R=vR,Mw;function qg(n,e,t,r){let i=gR(n,r,e),o=e[et],s=r.parent||e[bn],c=yR(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)Sw(o,i,t[l],c,!1);else Sw(o,i,t,c,!1);Mw!==void 0&&Mw(o,r,e,t,i)}function ca(n,e){if(e!==null){let t=e.type;if(t&3)return jn(e,n);if(t&4)return kp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ca(n,r);{let i=n[e.index];return cr(i)?kp(-1,i):Nn(i)}}else{if(t&128)return ca(n,e.next);if(t&32)return Hg(e,n)()||Nn(n[e.index]);{let r=xb(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=wi(n[_n]);return ca(i,r)}else return ca(n,e.next)}}}return null}function xb(n,e){if(e!==null){let r=n[_n][bn],i=e.projection;return r.projection[i]}return null}function kp(n,e){let t=Dt+n+1;if(t<e.length){let r=e[t],i=r[de].firstChild;if(i!==null)return ca(r,i)}return e[_i]}function Gg(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(s&&e===0&&(c&&xa(Nn(c),r),t.flags|=2),!Tb(t))if(l&8)Gg(n,e,t.child,r,i,o,!1),wo(e,n,i,c,o);else if(l&32){let u=Hg(t,r),f;for(;f=u();)wo(e,n,i,f,o);wo(e,n,i,c,o)}else l&16?wR(n,e,r,t,i,o):wo(e,n,i,c,o);t=s?t.projectionNext:t.next}}function xu(n,e,t,r,i,o){Gg(t,r,n.firstChild,e,i,o,!1)}function wR(n,e,t,r,i,o){let s=t[_n],l=s[bn].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let f=l[u];wo(e,n,i,f,o)}else{let u=l,f=s[It];JC(r)&&(u.flags|=128),Gg(n,e,u,f,i,o,!0)}}function CR(n,e,t,r,i){let o=t[_i],s=Nn(t);o!==s&&wo(e,n,r,o,i);for(let c=Dt;c<t.length;c++){let l=t[c];xu(l[de],l,n,e,r,o)}}function bR(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Ur.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ur.Important),n.setStyle(t,r,i,o))}}function lu(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Nn(o)),cr(o)&&ER(o,r);let s=t.type;if(s&8)lu(n,e,t.child,r);else if(s&32){let c=Hg(t,e),l;for(;l=c();)r.push(l)}else if(s&16){let c=xb(e,t);if(Array.isArray(c))r.push(...c);else{let l=wi(e[_n]);lu(l[de],l,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function ER(n,e){for(let t=Dt;t<n.length;t++){let r=n[t],i=r[de].firstChild;i!==null&&lu(r[de],r,i,e)}n[_i]!==n[ar]&&e.push(n[_i])}function Mb(n){if(n[ep]!==null){for(let e of n[ep])e.impl.addSequence(e);n[ep].length=0}}var Ab=[];function DR(n){return n[sn]??IR(n)}function IR(n){let e=Ab.pop()??Object.create(SR);return e.lView=n,e}function TR(n){n.lView[sn]!==n&&(n.lView=null,Ab.push(n))}var SR=G(N({},oo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Sa(n.lView)},consumerOnSignalRead(){this.lView[sn]=this}});function xR(n){let e=n[sn]??Object.create(MR);return e.lView=n,e}var MR=G(N({},oo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=wi(n.lView);for(;e&&!Rb(e[de]);)e=wi(e);e&&_C(e)},consumerOnSignalRead(){this.lView[sn]=this}});function Rb(n){return n.type!==2}function Pb(n){if(n[vi]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[vi])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[oe]&8192)}}var AR=100;function Nb(n,e=!0,t=0){let i=n[or].rendererFactory,o=!1;o||i.begin?.();try{RR(n,t)}catch(s){throw e&&oR(n,s),s}finally{o||i.end?.()}}function RR(n,e){let t=DC();try{tu(!0),Vp(n,e);let r=0;for(;bu(n);){if(r===AR)throw new K(103,!1);r++,Vp(n,1)}}finally{tu(t)}}function PR(n,e,t,r){if(Oo(e))return;let i=e[oe],o=!1,s=!1;bg(e);let c=!0,l=null,u=null;o||(Rb(n)?(u=DR(e),l=ea(u)):Th()===null?(c=!1,u=xR(e),l=ea(u)):e[sn]&&(ta(e[sn]),e[sn]=null));try{vC(e),DA(n.bindingStartIndex),t!==null&&bb(n,e,t,2,r);let f=(i&3)===3;if(!o)if(f){let m=n.preOrderCheckHooks;m!==null&&$l(e,m,null)}else{let m=n.preOrderHooks;m!==null&&Hl(e,m,0,null),tp(e,0)}if(s||NR(e),Pb(e),Ob(e,0),n.contentQueries!==null&&lb(n,e),!o)if(f){let m=n.contentCheckHooks;m!==null&&$l(e,m)}else{let m=n.contentHooks;m!==null&&Hl(e,m,1),tp(e,1)}kR(n,e);let p=n.components;p!==null&&Vb(e,p,0);let _=n.viewQuery;if(_!==null&&Np(2,_,r),!o)if(f){let m=n.viewCheckHooks;m!==null&&$l(e,m)}else{let m=n.viewHooks;m!==null&&Hl(e,m,2),tp(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Xh]){for(let m of e[Xh])m();e[Xh]=null}o||(Mb(e),e[oe]&=-73)}catch(f){throw o||Sa(e),f}finally{u!==null&&(ll(u,l),c&&TR(u)),Eg()}}function Ob(n,e){for(let t=tb(n);t!==null;t=nb(t))for(let r=Dt;r<t.length;r++){let i=t[r];kb(i,e)}}function NR(n){for(let e=tb(n);e!==null;e=nb(e)){if(!(e[oe]&2))continue;let t=e[So];for(let r=0;r<t.length;r++){let i=t[r];_C(i)}}}function OR(n,e,t){Le(18);let r=On(e,n);kb(r,t),Le(19,r[ct])}function kb(n,e){yg(n)&&Vp(n,e)}function Vp(n,e){let r=n[de],i=n[oe],o=n[sn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ul(o)),s||=!1,o&&(o.dirty=!1),n[oe]&=-9217,s)PR(r,n,r.template,n[ct]);else if(i&8192){Pb(n),Ob(n,1);let c=r.components;c!==null&&Vb(n,c,1),Mb(n)}}function Vb(n,e,t){for(let r=0;r<e.length;r++)OR(n,e[r],t)}function kR(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ci(~i);else{let o=i,s=t[++r],c=t[++r];TA(s,o);let l=e[o];Le(24,l),c(2,l),Le(25,l)}}}finally{Ci(-1)}}function Wg(n,e){let t=DC()?64:1088;for(n[or].changeDetectionScheduler?.notify(e);n;){n[oe]|=t;let r=wi(n);if(eu(n)&&!r)return n;n=r}return null}function Fb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Lb(n,e){let t=Dt+e;if(t<n.length)return n[t]}function Mu(n,e,t,r=!0){let i=e[de];if(VR(i,e,n,t),r){let s=kp(t,n),c=e[et],l=c.parentNode(n[_i]);l!==null&&dR(i,n[bn],c,e,l,s)}let o=e[fa];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function jb(n,e){let t=va(n,e);return t!==void 0&&Su(t[de],t),t}function va(n,e){if(n.length<=Dt)return;let t=Dt+e,r=n[t];if(r){let i=r[yi];i!==null&&i!==n&&zg(i,r),e>0&&(n[t-1][vn]=r[vn]);let o=Yl(n,Dt+e);uR(r[de],r);let s=o[sr];s!==null&&s.detachView(o[de]),r[It]=null,r[vn]=null,r[oe]&=-129}return r}function VR(n,e,t,r){let i=Dt+r,o=t.length;r>0&&(t[i-1][vn]=e),r<o-Dt?(e[vn]=t[i],eC(t,Dt+r,e)):(t.push(e),e[vn]=null),e[It]=t;let s=e[yi];s!==null&&t!==s&&Bb(s,e);let c=e[sr];c!==null&&c.insertView(n),wp(e),e[oe]|=128}function Bb(n,e){let t=n[So],r=e[It];if(Br(r))n[oe]|=2;else{let i=r[It][_n];e[_n]!==i&&(n[oe]|=2)}t===null?n[So]=[e]:t.push(e)}var _a=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[de];return lu(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[ct]}set context(e){this._lView[ct]=e}get destroyed(){return Oo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[It];if(cr(e)){let t=e[Xl],r=t?t.indexOf(this):-1;r>-1&&(va(e,r),Yl(t,r))}this._attachedToViewContainer=!1}Su(this._lView[de],this._lView)}onDestroy(e){wC(this._lView,e)}markForCheck(){Wg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[oe]&=-129}reattach(){wp(this._lView),this._lView[oe]|=128}detectChanges(){this._lView[oe]|=1024,Nb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=eu(this._lView),t=this._lView[yi];t!==null&&!e&&zg(t,this._lView),Sb(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=e;let t=eu(this._lView),r=this._lView[yi];r!==null&&!t&&Bb(r,this._lView),wp(this._lView)}};var wa=(()=>{class n{static __NG_ELEMENT_ID__=jR}return n})(),FR=wa,LR=class extends FR{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Tu(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new _a(i)}};function jR(){return Kg(Ft(),we())}function Kg(n,e){return n.type&4?new LR(e,n,jo(n,e)):null}function Au(n,e,t,r,i){let o=n.data[e];if(o===null)o=BR(n,e,t,r,i),IA()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=_A();o.injectorIndex=s===null?-1:s.injectorIndex}return ko(o,!0),o}function BR(n,e,t,r,i){let o=bC(),s=EC(),c=s?o:o&&o.parent,l=n.data[e]=$R(n,c,t,e,r,i);return UR(n,l,o,s),l}function UR(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function $R(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,c=0;return mA()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var HH=new RegExp(`^(\\d+)*(${p1}|${h1})*(.*)`);var HR=()=>null;function Ca(n,e){return HR(n,e)}var zR=class{},Ub=class{},Fp=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Ht(e)}.`)}},Ru=class{static NULL=new Fp},Ao=class{},ur=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>qR()}return n})();function qR(){let n=we(),e=Ft(),t=On(e.index,n);return(Br(t)?t:n)[et]}var GR=(()=>{class n{static \u0275prov=Q({token:n,providedIn:"root",factory:()=>null})}return n})();var ip={},Lp=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=_u(r);let i=this.injector.get(e,ip,r);return i!==ip||t===ip?i:this.parentInjector.get(e,t,r)}};function Aw(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=hp(i,c);else if(o==2){let l=c,u=e[++s];r=hp(r,l+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Ie(n,e=pe.Default){let t=we();if(t===null)return ne(n,e);let r=Ft();return UC(r,t,Vt(n),e)}function $b(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let c,l=null,u=null,f=KR(s);f===null?c=s:[c,l,u]=f,ZR(n,e,t,c,o,l,u)}o!==null&&r!==null&&WR(t,r,o)}function WR(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new K(-301,!1);r.push(e[i],o)}}function KR(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let c=n[s];if(s===0&&Pn(c)&&(e=c),c.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,QR(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function QR(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function YR(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function ZR(n,e,t,r,i,o,s){let c=r.length,l=!1;for(let _=0;_<c;_++){let m=r[_];!l&&Pn(m)&&(l=!0,YR(n,t,_)),Dp(iu(t,e),n,m.type)}rP(t,n.data.length,c);for(let _=0;_<c;_++){let m=r[_];m.providersResolver&&m.providersResolver(m)}let u=!1,f=!1,p=wb(n,e,c,null);c>0&&(t.directiveToIndex=new Map);for(let _=0;_<c;_++){let m=r[_];if(t.mergedAttrs=pa(t.mergedAttrs,m.hostAttrs),XR(n,t,e,p,m),nP(p,m,i),s!==null&&s.has(m)){let[O,L]=s.get(m);t.directiveToIndex.set(m.type,[p,O+t.directiveStart,L+t.directiveStart])}else(o===null||!o.has(m))&&t.directiveToIndex.set(m.type,p);m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let x=m.type.prototype;!u&&(x.ngOnChanges||x.ngOnInit||x.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!f&&(x.ngOnChanges||x.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),p++}JR(n,t,o)}function JR(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))Rw(0,e,i,r),Rw(1,e,i,r),Nw(e,r,!1);else{let o=t.get(i);Pw(0,e,o,r),Pw(1,e,o,r),Nw(e,r,!0)}}}function Rw(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),Hb(e,o)}}function Pw(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;n===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),Hb(e,s)}}function Hb(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function Nw(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Vg(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let l=r[c];if(l===0){c+=4;continue}else if(l===5){c+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let u=i[l];for(let f of u)if(f===e){s??=[],s.push(l,r[c+1]);break}}else if(t&&o.hasOwnProperty(l)){let u=o[l];for(let f=0;f<u.length;f+=2)if(u[f]===e){s??=[],s.push(u[f+1],r[c+1]);break}}c+=2}n.initialInputs??=[],n.initialInputs.push(s)}function XR(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Eo(i.type,!0)),s=new bi(o,Pn(i),Ie);n.blueprint[r]=s,t[r]=s,eP(n,e,r,wb(n,t,i.hostVars,cn),i)}function eP(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let c=~e.index;tP(s)!=c&&s.push(c),s.push(t,r,o)}}function tP(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function nP(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Pn(e)&&(t[""]=n)}}function rP(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function zb(n,e,t,r,i,o,s,c){let l=e.consts,u=xo(l,s),f=Au(e,n,2,r,u);return o&&$b(e,t,f,xo(l,c),i),f.mergedAttrs=pa(f.mergedAttrs,f.attrs),f.attrs!==null&&Aw(f,f.attrs,!1),f.mergedAttrs!==null&&Aw(f,f.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,f),f}function qb(n,e){PC(n,e),dC(e)&&n.queries.elementEnd(e)}var uu=class extends Ru{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Do(e);return new ba(t,this.ngModule)}};function iP(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Iu.SignalBased)!==0};return i&&(o.transform=i),o})}function oP(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function sP(n,e,t){let r=e instanceof Zt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Lp(t,r):t}function aP(n){let e=n.get(Ao,null);if(e===null)throw new K(407,!1);let t=n.get(GR,null),r=n.get(Mo,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function cP(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return fb(e,t,t==="svg"?oA:t==="math"?sA:null)}var ba=class extends Ub{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=iP(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=oP(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=H1(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){Le(22);let o=ue(null);try{let s=this.componentDef,c=r?["ng-version","19.2.18"]:z1(this.componentDef.selectors[0]),l=Fg(0,null,null,1,0,null,null,null,null,[c],null),u=sP(s,i||this.ngModule,e),f=aP(u),p=f.rendererFactory.createRenderer(null,s),_=r?K1(p,r,s.encapsulation,u):cP(s,p),m=Lg(null,l,null,512|_b(s),null,null,f,p,u,null,cb(_,u,!0));m[zt]=_,bg(m);let x=null;try{let O=zb(zt,l,m,"#host",()=>[this.componentDef],!0,0);_&&(pb(p,_,O),xa(_,m)),Bg(l,m,O),ub(l,O,m),qb(l,O),t!==void 0&&lP(O,this.ngContentSelectors,t),x=On(O.index,m),m[ct]=x[ct],$g(l,m,null)}catch(O){throw x!==null&&Rp(x),Rp(m),O}finally{Le(23),Eg()}return new jp(this.componentType,m)}finally{ue(o)}}},jp=class extends zR{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=mg(t[de],zt),this.location=jo(this._tNode,t),this.instance=On(this._tNode.index,t)[ct],this.hostView=this.changeDetectorRef=new _a(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Ug(r,i[de],i,e,t);this.previousInputValues.set(e,t);let s=On(r.index,i);Wg(s,1)}get injector(){return new gi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function lP(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Bo=(()=>{class n{static __NG_ELEMENT_ID__=uP}return n})();function uP(){let n=Ft();return Wb(n,we())}var dP=Bo,Gb=class extends dP{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return jo(this._hostTNode,this._hostLView)}get injector(){return new gi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Sg(this._hostTNode,this._hostLView);if(kC(e)){let t=ru(e,this._hostLView),r=nu(e),i=t[de].data[r+8];return new gi(i,t)}else return new gi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Ow(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Dt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Ca(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(c,i,ya(this._hostTNode,s)),c}createComponent(e,t,r,i,o){let s=e&&!tA(e),c;if(s)c=t;else{let x=t||{};c=x.index,r=x.injector,i=x.projectableNodes,o=x.environmentInjector||x.ngModuleRef}let l=s?e:new ba(Do(e)),u=r||this.parentInjector;if(!o&&l.ngModule==null){let O=(s?u:this.parentInjector).get(Zt,null);O&&(o=O)}let f=Do(l.componentType??{}),p=Ca(this._lContainer,f?.id??null),_=p?.firstChild??null,m=l.create(u,i,_,o);return this.insertImpl(m.hostView,c,ya(this._hostTNode,p)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(lA(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let l=i[It],u=new Gb(l,l[bn],l[It]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Mu(s,i,o,r),e.attachToViewContainerRef(),eC(op(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Ow(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=va(this._lContainer,t);r&&(Yl(op(this._lContainer),t),Su(r[de],r))}detach(e){let t=this._adjustIndex(e,-1),r=va(this._lContainer,t);return r&&Yl(op(this._lContainer),t)!=null?new _a(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Ow(n){return n[Xl]}function op(n){return n[Xl]||(n[Xl]=[])}function Wb(n,e){let t,r=e[n.index];return cr(r)?t=r:(t=Fb(r,e,null,n),e[n.index]=t,jg(e,t)),hP(t,e,n,r),new Gb(t,n,e)}function fP(n,e){let t=n[et],r=t.createComment(""),i=jn(e,n),o=t.parentNode(i);return cu(t,o,r,t.nextSibling(i),!1),r}var hP=mP,pP=()=>!1;function gP(n,e,t){return pP(n,e,t)}function mP(n,e,t,r){if(n[_i])return;let i;t.type&8?i=Nn(r):i=fP(e,t),n[_i]=i}var Bp=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Up=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),c=this.queries[s.indexInDeclarationView];i.push(c.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Qg(e,t).matches!==null&&this.queries[t].setDirty()}},$p=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=DP(e):this.predicate=e}},Hp=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},zp=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,yP(t,o)),this.matchTNodeWithReadOption(e,t,zl(t,e,o,!1,!1))}else r===wa?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,zl(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Jt||i===Bo||i===wa&&t.type&4)this.addMatch(t.index,-2);else{let o=zl(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function yP(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function vP(n,e){return n.type&11?jo(n,e):n.type&4?Kg(n,e):null}function _P(n,e,t,r){return t===-1?vP(e,n):t===-2?wP(n,e,r):ga(n,n[de],t,e)}function wP(n,e,t){if(t===Jt)return jo(e,n);if(t===wa)return Kg(e,n);if(t===Bo)return Wb(e,n)}function Kb(n,e,t,r){let i=e[sr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,c=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)c.push(null);else{let f=o[u];c.push(_P(e,f,s[l+1],t.metadata.read))}}i.matches=c}return i.matches}function qp(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=Kb(n,e,i,t);for(let c=0;c<o.length;c+=2){let l=o[c];if(l>0)r.push(s[c/2]);else{let u=o[c+1],f=e[-l];for(let p=Dt;p<f.length;p++){let _=f[p];_[yi]===_[It]&&qp(_[de],_,u,r)}if(f[So]!==null){let p=f[So];for(let _=0;_<p.length;_++){let m=p[_];qp(m[de],m,u,r)}}}}}return r}function CP(n,e){return n[sr].queries[e].queryList}function bP(n,e,t){let r=new Ap((t&4)===4);return fA(n,e,r,r.destroy),(e[sr]??=new Up).queries.push(new Bp(r))-1}function EP(n,e,t,r){let i=ut();if(i.firstCreatePass){let o=Ft();IP(i,new $p(e,t,r),o.index),TP(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return bP(i,we(),t)}function DP(n){return n.split(",").map(e=>e.trim())}function IP(n,e,t){n.queries===null&&(n.queries=new Hp),n.queries.track(new zp(e,t))}function TP(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function Qg(n,e){return n.queries.getByIndex(e)}function SP(n,e){let t=n[de],r=Qg(t,e);return r.crossesNgTemplate?qp(t,n,e,[]):Kb(t,n,r,e)}var Ea=class{},Yg=class{};var Gp=class extends Ea{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new uu(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=rC(e);this._bootstrapComponents=yb(o.bootstrap),this._r3Injector=zC(e,t,[{provide:Ea,useValue:this},{provide:Ru,useValue:this.componentFactoryResolver},...r],Ht(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Wp=class extends Yg{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Gp(this.moduleType,e,[])}};var du=class extends Ea{injector;componentFactoryResolver=new uu(this);instance=null;constructor(e){super();let t=new da([...e.providers,{provide:Ea,useValue:this},{provide:Ru,useValue:this.componentFactoryResolver}],e.parent||pg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Pu(n,e,t=null){return new du({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var xP=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=iC(!1,t.type),i=r.length>0?Pu([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Q({token:n,providedIn:"environment",factory:()=>new n(ne(Zt))})}return n})();function ve(n){return yu(()=>{let e=Qb(n),t=G(N({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===XC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(xP).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Vn.Emulated,styles:n.styles||$t,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ma("NgStandalone"),Yb(t);let r=n.dependencies;return t.directiveDefs=kw(r,!1),t.pipeDefs=kw(r,!0),t.id=NP(t),t})}function MP(n){return Do(n)||$M(n)}function AP(n){return n!==null}function Hr(n){return yu(()=>({type:n.type,bootstrap:n.bootstrap||$t,declarations:n.declarations||$t,imports:n.imports||$t,exports:n.exports||$t,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function RP(n,e){if(n==null)return mi;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,c,l;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,l=i[3]||null):(o=i,s=i,c=Iu.None,l=null),t[o]=[r,c,l],e[o]=s}return t}function PP(n){if(n==null)return mi;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function We(n){return yu(()=>{let e=Qb(n);return Yb(e),e})}function Qb(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||mi,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||$t,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:RP(n.inputs,e),outputs:PP(n.outputs),debugInfo:null}}function Yb(n){n.features?.forEach(e=>e(n))}function kw(n,e){if(!n)return null;let t=e?HM:MP;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(AP)}function NP(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function OP(n){return Object.getPrototypeOf(n.prototype).constructor}function ln(n){let e=OP(n.type),t=!0,r=[n];for(;e;){let i;if(Pn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new K(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=sp(n.inputs),s.declaredInputs=sp(n.declaredInputs),s.outputs=sp(n.outputs);let c=i.hostBindings;c&&jP(n,c);let l=i.viewQuery,u=i.contentQueries;if(l&&FP(n,l),u&&LP(n,u),kP(n,i),wM(n.outputs,i.outputs),Pn(i)&&i.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let c=o[s];c&&c.ngInherit&&c(n),c===ln&&(t=!1)}}e=Object.getPrototypeOf(e)}VP(r)}function kP(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function VP(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=pa(i.hostAttrs,t=pa(t,i.hostAttrs))}}function sp(n){return n===mi?{}:n===$t?[]:n}function FP(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function LP(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function jP(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function BP(n,e,t){return n[e]=t}function UP(n,e){return n[e]}function Fn(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function $P(n,e,t,r){let i=Fn(n,e,t);return Fn(n,e+1,r)||i}function HP(n,e,t,r,i,o,s,c,l){let u=e.consts,f=Au(e,n,4,s||null,c||null);CC()&&$b(e,t,f,xo(u,l),Ib),f.mergedAttrs=pa(f.mergedAttrs,f.attrs),PC(e,f);let p=f.tView=Fg(2,f,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}function Kp(n,e,t,r,i,o,s,c,l,u){let f=t+zt,p=e.firstCreatePass?HP(f,e,n,r,i,o,s,c,l):e.data[f];ko(p,!1);let _=zP(e,n,p,t);Ig()&&qg(e,n,_,p),xa(_,n);let m=Fb(_,n,_,p);return n[f]=m,jg(n,m),gP(m,p,n),gg(p)&&Bg(e,n,p),l!=null&&Eb(n,p,u),p}function ie(n,e,t,r,i,o,s,c){let l=we(),u=ut(),f=xo(u.consts,o);return Kp(l,u,n,e,t,r,i,f,s,c),ie}var zP=qP;function qP(n,e,t,r){return Tg(!0),e[et].createComment("")}var Zb=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Jb=new Z("");var Xb=(()=>{class n{static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new Qp})}return n})(),Qp=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Uo(n){return!!n&&typeof n.then=="function"}function GP(n){return!!n&&typeof n.subscribe=="function"}var eE=new Z("");function Zg(n){return Ta([{provide:eE,multi:!0,useValue:n}])}var tE=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=k(eE,{optional:!0})??[];injector=k(an);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Cn(this.injector,i);if(Uo(o))t.push(o);else if(GP(o)){let s=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jg=new Z("");function WP(){Rh(()=>{throw new K(600,!1)})}function KP(n){return n.isBoundToModule}var QP=10;var Ln=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(t1);afterRenderManager=k(y1);zonelessEnabled=k(GC);rootEffectScheduler=k(Xb);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Be;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=k(Lo).hasPendingTasks.pipe(me(t=>!t));constructor(){k(Eu,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=k(Zt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=an.NULL){Le(10);let o=t instanceof Ub;if(!this._injector.get(tE).done){let m="";throw new K(405,m)}let c;o?c=t:c=this._injector.get(Ru).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=KP(c)?void 0:this._injector.get(Ea),u=r||c.selector,f=c.create(i,[],u,l),p=f.location.nativeElement,_=f.injector.get(Jb,null);return _?.registerApplication(p),f.onDestroy(()=>{this.detachView(f.hostView),ql(this.components,f),_?.unregisterApplication(p)}),this._loadComponent(f),Le(11,f),f}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Le(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(sb.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new K(101,!1);let t=ue(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ue(t),this.afterTick.next(),Le(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ao,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<QP;)Le(14),this.synchronizeOnce(),Le(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)YP(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>bu(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;ql(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Jg,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ql(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new K(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ql(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function YP(n,e,t,r){if(!t&&!bu(n))return;Nb(n,e,t&&!r?0:1)}function Ii(n,e,t,r){let i=we(),o=Vo();if(Fn(i,o,e)){let s=ut(),c=Dg();nR(c,i,n,e,t,r)}return Ii}function ZP(n,e,t,r){return Fn(n,Vo(),t)?e+bo(t)+r:cn}function JP(n,e,t,r,i,o){let s=EA(),c=$P(n,s,t,i);return wg(2),c?e+bo(t)+r+bo(i)+o:cn}function Bl(n,e){return n<<17|e<<2}function Ei(n){return n>>17&32767}function XP(n){return(n&2)==2}function eN(n,e){return n&131071|e<<17}function Yp(n){return n|2}function Ro(n){return(n&131068)>>2}function ap(n,e){return n&-131069|e<<2}function tN(n){return(n&1)===1}function Zp(n){return n|1}function nN(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,c=Ei(s),l=Ro(s);n[r]=t;let u=!1,f;if(Array.isArray(t)){let p=t;f=p[1],(f===null||Ia(p,f)>0)&&(u=!0)}else f=t;if(i)if(l!==0){let _=Ei(n[c+1]);n[r+1]=Bl(_,c),_!==0&&(n[_+1]=ap(n[_+1],r)),n[c+1]=eN(n[c+1],r)}else n[r+1]=Bl(c,0),c!==0&&(n[c+1]=ap(n[c+1],r)),c=r;else n[r+1]=Bl(l,0),c===0?c=r:n[l+1]=ap(n[l+1],r),l=r;u&&(n[r+1]=Yp(n[r+1])),Vw(n,f,r,!0),Vw(n,f,r,!1),rN(e,f,n,r,o),s=Bl(c,l),o?e.classBindings=s:e.styleBindings=s}function rN(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Ia(o,e)>=0&&(t[r+1]=Zp(t[r+1]))}function Vw(n,e,t,r){let i=n[t+1],o=e===null,s=r?Ei(i):Ro(i),c=!1;for(;s!==0&&(c===!1||o);){let l=n[s],u=n[s+1];iN(l,e)&&(c=!0,n[s+1]=r?Zp(u):Yp(u)),s=r?Ei(u):Ro(u)}c&&(n[t+1]=r?Yp(i):Zp(i))}function iN(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ia(n,e)>=0:!1}var yn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function oN(n){return n.substring(yn.key,yn.keyEnd)}function sN(n){return aN(n),nE(n,rE(n,0,yn.textEnd))}function nE(n,e){let t=yn.textEnd;return t===e?-1:(e=yn.keyEnd=cN(n,yn.key=e,t),rE(n,e,t))}function aN(n){yn.key=0,yn.keyEnd=0,yn.value=0,yn.valueEnd=0,yn.textEnd=n.length}function rE(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function cN(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function fe(n,e,t){let r=we(),i=Vo();if(Fn(r,i,e)){let o=ut(),s=Dg();Db(o,s,r,n,e,r[et],t,!1)}return fe}function Jp(n,e,t,r,i){Ug(e,n,t,i?"class":"style",r)}function Xt(n,e){return uN(n,e,null,!0),Xt}function iE(n){dN(yN,lN,n,!0)}function lN(n,e){for(let t=sN(e);t>=0;t=nE(e,t))fg(n,oN(e),!0)}function uN(n,e,t,r){let i=we(),o=ut(),s=wg(2);if(o.firstUpdatePass&&sE(o,n,s,r),e!==cn&&Fn(i,s,e)){let c=o.data[Bn()];aE(o,c,i,i[et],n,i[s+1]=_N(e,t),r,s)}}function dN(n,e,t,r){let i=ut(),o=wg(2);i.firstUpdatePass&&sE(i,null,o,r);let s=we();if(t!==cn&&Fn(s,o,t)){let c=i.data[Bn()];if(cE(c,r)&&!oE(i,o)){let l=r?c.classesWithoutHost:c.stylesWithoutHost;l!==null&&(t=hp(l,t||"")),Jp(i,c,s,t,r)}else vN(i,c,s,s[et],s[o+1],s[o+1]=mN(n,e,t),r,o)}}function oE(n,e){return e>=n.expandoStartIndex}function sE(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Bn()],s=oE(n,t);cE(o,r)&&e===null&&!s&&(e=!1),e=fN(i,o,e,r),nN(i,o,e,t,s,r)}}function fN(n,e,t,r){let i=xA(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=cp(null,n,e,t,r),t=Da(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=cp(i,n,e,t,r),o===null){let l=hN(n,e,r);l!==void 0&&Array.isArray(l)&&(l=cp(null,n,e,l[1],r),l=Da(l,e.attrs,r),pN(n,e,r,l))}else o=gN(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function hN(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ro(r)!==0)return n[Ei(r)]}function pN(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ei(i)]=r}function gN(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Da(r,s,t)}return Da(r,e.attrs,t)}function cp(n,e,t,r,i){let o=null,s=t.directiveEnd,c=t.directiveStylingLast;for(c===-1?c=t.directiveStart:c++;c<s&&(o=e[c],r=Da(r,o.hostAttrs,i),o!==n);)c++;return n!==null&&(t.directiveStylingLast=c),r}function Da(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),fg(n,s,t?!0:e[++o]))}return n===void 0?null:n}function mN(n,e,t){if(t==null||t==="")return $t;let r=[],i=Du(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function yN(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&fg(n,r,t)}function vN(n,e,t,r,i,o,s,c){i===cn&&(i=$t);let l=0,u=0,f=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;f!==null||p!==null;){let _=l<i.length?i[l+1]:void 0,m=u<o.length?o[u+1]:void 0,x=null,O;f===p?(l+=2,u+=2,_!==m&&(x=p,O=m)):p===null||f!==null&&f<p?(l+=2,x=f):(u+=2,x=p,O=m),x!==null&&aE(n,e,t,r,x,O,s,c),f=l<i.length?i[l]:null,p=u<o.length?o[u]:null}}function aE(n,e,t,r,i,o,s,c){if(!(e.type&3))return;let l=n.data,u=l[c+1],f=tN(u)?Fw(l,e,t,i,Ro(u),s):void 0;if(!fu(f)){fu(o)||XP(u)&&(o=Fw(l,null,t,i,c,s));let p=mC(Bn(),t);bR(r,s,p,i,o)}}function Fw(n,e,t,r,i,o){let s=e===null,c;for(;i>0;){let l=n[i],u=Array.isArray(l),f=u?l[1]:l,p=f===null,_=t[i+1];_===cn&&(_=p?$t:void 0);let m=p?Zh(_,r):f===r?_:void 0;if(u&&!fu(m)&&(m=Zh(l,r)),fu(m)&&(c=m,s))return c;let x=n[i+1];i=s?Ei(x):Ro(x)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(c=Zh(l,r))}return c}function fu(n){return n!==void 0}function _N(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ht(Du(n)))),n}function cE(n,e){return(n.flags&(e?8:16))!==0}var Xp=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function lp(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function wN(n,e,t){let r,i,o=0,s=n.length-1,c=void 0;if(Array.isArray(e)){let l=e.length-1;for(;o<=s&&o<=l;){let u=n.at(o),f=e[o],p=lp(o,u,o,f,t);if(p!==0){p<0&&n.updateValue(o,f),o++;continue}let _=n.at(s),m=e[l],x=lp(s,_,l,m,t);if(x!==0){x<0&&n.updateValue(s,m),s--,l--;continue}let O=t(o,u),L=t(s,_),q=t(o,f);if(Object.is(q,L)){let J=t(l,m);Object.is(J,O)?(n.swap(o,s),n.updateValue(s,m),l--,s--):n.move(s,o),n.updateValue(o,f),o++;continue}if(r??=new hu,i??=jw(n,o,s,t),eg(n,r,o,q))n.updateValue(o,f),o++,s++;else if(i.has(q))r.set(O,n.detach(o)),s--;else{let J=n.create(o,e[o]);n.attach(o,J),o++,s++}}for(;o<=l;)Lw(n,r,t,o,e[o]),o++}else if(e!=null){let l=e[Symbol.iterator](),u=l.next();for(;!u.done&&o<=s;){let f=n.at(o),p=u.value,_=lp(o,f,o,p,t);if(_!==0)_<0&&n.updateValue(o,p),o++,u=l.next();else{r??=new hu,i??=jw(n,o,s,t);let m=t(o,p);if(eg(n,r,o,m))n.updateValue(o,p),o++,s++,u=l.next();else if(!i.has(m))n.attach(o,n.create(o,p)),o++,s++,u=l.next();else{let x=t(o,f);r.set(x,n.detach(o)),s--}}}for(;!u.done;)Lw(n,r,t,n.length,u.value),u=l.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(l=>{n.destroy(l)})}function eg(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function Lw(n,e,t,r,i){if(eg(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function jw(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var hu=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function te(n,e){Ma("NgControlFlow");let t=we(),r=Vo(),i=t[r]!==cn?t[r]:-1,o=i!==-1?pu(t,zt+i):void 0,s=0;if(Fn(t,r,n)){let c=ue(null);try{if(o!==void 0&&jb(o,s),n!==-1){let l=zt+n,u=pu(t,l),f=ig(t[de],l),p=Ca(u,f.tView.ssrId),_=Tu(t,f,e,{dehydratedView:p});Mu(u,_,s,ya(f,p))}}finally{ue(c)}}else if(o!==void 0){let c=Lb(o,s);c!==void 0&&(c[ct]=e)}}var tg=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Dt}};var ng=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Tt(n,e,t,r,i,o,s,c,l,u,f,p,_){Ma("NgControlFlow");let m=we(),x=ut(),O=l!==void 0,L=we(),q=c?s.bind(L[_n][ct]):s,J=new ng(O,q);L[zt+n]=J,Kp(m,x,n+1,e,t,r,i,xo(x.consts,o)),O&&Kp(m,x,n+2,l,u,f,p,xo(x.consts,_))}var rg=class extends Xp{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Dt}at(e){return this.getLView(e)[ct].$implicit}attach(e,t){let r=t[fa];this.needsIndexUpdate||=e!==this.length,Mu(this.lContainer,t,e,ya(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,CN(this.lContainer,e)}create(e,t){let r=Ca(this.lContainer,this.templateTNode.tView.ssrId),i=Tu(this.hostLView,this.templateTNode,new tg(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Su(e[de],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[ct].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[ct].$index=e}getLView(e){return bN(this.lContainer,e)}};function St(n){let e=ue(null),t=Bn();try{let r=we(),i=r[de],o=r[t],s=t+1,c=pu(r,s);if(o.liveCollection===void 0){let u=ig(i,s);o.liveCollection=new rg(c,r,u)}else o.liveCollection.reset();let l=o.liveCollection;if(wN(l,n,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let u=Vo(),f=l.length===0;if(Fn(r,u,f)){let p=t+2,_=pu(r,p);if(f){let m=ig(i,p),x=Ca(_,m.tView.ssrId),O=Tu(r,m,void 0,{dehydratedView:x});Mu(_,O,0,ya(m,x))}else jb(_,0)}}}finally{ue(e)}}function pu(n,e){return n[e]}function CN(n,e){return va(n,e)}function bN(n,e){return Lb(n,e)}function ig(n,e){return mg(n,e)}function v(n,e,t,r){let i=we(),o=ut(),s=zt+n,c=i[et],l=o.firstCreatePass?zb(s,o,i,e,Ib,CC(),t,r):o.data[s],u=EN(o,i,l,c,e,n);i[s]=u;let f=gg(l);return ko(l,!0),pb(c,u,l),!Tb(l)&&Ig()&&qg(o,i,u,l),(hA()===0||f)&&xa(u,i),pA(),f&&(Bg(o,i,l),ub(o,l,i)),r!==null&&Eb(i,l),v}function y(){let n=Ft();EC()?wA():(n=n.parent,ko(n,!1));let e=n;yA(e)&&vA(),gA();let t=ut();return t.firstCreatePass&&qb(t,e),e.classesWithoutHost!=null&&OA(e)&&Jp(t,e,we(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&kA(e)&&Jp(t,e,we(),e.stylesWithoutHost,!1),y}function Ke(n,e,t,r){return v(n,e,t,r),y(),Ke}var EN=(n,e,t,r,i,o)=>(Tg(!0),fb(r,i,RA()));function xe(){return we()}var gu="en-US";var DN=gu;function IN(n){typeof n=="string"&&(DN=n.toLowerCase().replace(/_/g,"-"))}function Bw(n,e,t){return function r(i){if(i===Function)return t;let o=No(n)?On(n.index,e):e;Wg(o,5);let s=e[ct],c=Uw(e,s,t,i),l=r.__ngNextListenerFn__;for(;l;)c=Uw(e,s,l,i)&&c,l=l.__ngNextListenerFn__;return c}}function Uw(n,e,t,r){let i=ue(null);try{return Le(6,e,t),t(r)!==!1}catch(o){return TN(n,o),!1}finally{Le(7,e,t),ue(i)}}function TN(n,e){let t=n[To],r=t?t.get(kn,null):null;r&&r.handleError(e)}function $w(n,e,t,r,i,o){let s=e[t],c=e[de],u=c.data[t].outputs[r],f=s[u],p=c.firstCreatePass?_g(c):null,_=vg(e),m=f.subscribe(o),x=_.length;_.push(o,m),p&&p.push(i,n.index,x,-(x+1))}function $(n,e,t,r){let i=we(),o=ut(),s=Ft();return lE(o,i,i[et],s,n,e,r),$}function SN(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let c=e[Jl],l=i[o+2];return c.length>l?c[l]:null}typeof s=="string"&&(o+=2)}return null}function lE(n,e,t,r,i,o,s){let c=gg(r),u=n.firstCreatePass?_g(n):null,f=vg(e),p=!0;if(r.type&3||s){let _=jn(r,e),m=s?s(_):_,x=f.length,O=s?q=>s(Nn(q[r.index])):r.index,L=null;if(!s&&c&&(L=SN(n,e,i,r.index)),L!==null){let q=L.__ngLastListenerFn__||L;q.__ngNextListenerFn__=o,L.__ngLastListenerFn__=o,p=!1}else{o=Bw(r,e,o),_1(e,m,i,o);let q=t.listen(m,i,o);f.push(o,q),u&&u.push(i,O,x,x+1)}}else o=Bw(r,e,o);if(p){let _=r.outputs?.[i],m=r.hostDirectiveOutputs?.[i];if(m&&m.length)for(let x=0;x<m.length;x+=2){let O=m[x],L=m[x+1];$w(r,e,O,L,i,o)}if(_&&_.length)for(let x of _)$w(r,e,x,i,i,o)}}function P(n=1){return AA(n)}function uE(n,e,t,r){EP(n,e,t,r)}function dE(n){let e=we(),t=ut(),r=IC();Cg(r+1);let i=Qg(t,r);if(n.dirty&&cA(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=SP(e,r);n.reset(o,i1),n.notifyOnChanges()}return!0}return!1}function fE(){return CP(we(),IC())}function E(n,e=""){let t=we(),r=ut(),i=n+zt,o=r.firstCreatePass?Au(r,i,1,e,null):r.data[i],s=xN(r,t,o,e,n);t[i]=s,Ig()&&qg(r,t,s,o),ko(o,!1)}var xN=(n,e,t,r,i)=>(Tg(!0),I1(e[et],r));function Me(n){return xt("",n,""),Me}function xt(n,e,t){let r=we(),i=ZP(r,n,e,t);return i!==cn&&hE(r,Bn(),i),xt}function Ti(n,e,t,r,i){let o=we(),s=JP(o,n,e,t,r,i);return s!==cn&&hE(o,Bn(),s),Ti}function hE(n,e,t){let r=mC(e,n);T1(n[et],r,t)}function Ae(n,e,t){ZC(e)&&(e=e());let r=we(),i=Vo();if(Fn(r,i,e)){let o=ut(),s=Dg();Db(o,s,r,n,e,r[et],t,!1)}return Ae}function Ne(n,e){let t=ZC(n);return t&&n.set(e),t}function Re(n,e){let t=we(),r=ut(),i=Ft();return lE(r,t,t[et],i,n,e),Re}var pE={};function $o(n){let e=ut(),t=we(),r=n+zt,i=Au(e,r,128,null,null);return ko(i,!1),yC(e,t,r,pE),$o}function gE(n){Ma("NgLet");let e=ut(),t=we(),r=Bn();return yC(e,t,r,n),n}function mE(n){let e=CA(),t=aA(e,zt+n);if(t===pE)throw new K(314,!1);return t}function MN(n,e,t){let r=ut();if(r.firstCreatePass){let i=Pn(n);og(t,r.data,r.blueprint,i,!0),og(e,r.data,r.blueprint,i,!1)}}function og(n,e,t,r,i){if(n=Vt(n),Array.isArray(n))for(let o=0;o<n.length;o++)og(n[o],e,t,r,i);else{let o=ut(),s=we(),c=Ft(),l=Io(n)?n:Vt(n.provide),u=aC(n),f=c.providerIndexes&1048575,p=c.directiveStart,_=c.providerIndexes>>20;if(Io(n)||!n.multi){let m=new bi(u,i,Ie),x=dp(l,e,i?f:f+_,p);x===-1?(Dp(iu(c,s),o,l),up(o,n,e.length),e.push(l),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(m),s.push(m)):(t[x]=m,s[x]=m)}else{let m=dp(l,e,f+_,p),x=dp(l,e,f,f+_),O=m>=0&&t[m],L=x>=0&&t[x];if(i&&!L||!i&&!O){Dp(iu(c,s),o,l);let q=PN(i?RN:AN,t.length,i,r,u);!i&&L&&(t[x].providerFactory=q),up(o,n,e.length,0),e.push(l),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(q),s.push(q)}else{let q=yE(t[i?x:m],u,!i&&r);up(o,n,m>-1?m:x,q)}!i&&r&&L&&t[x].componentProviders++}}}function up(n,e,t,r){let i=Io(e),o=KM(e);if(i||o){let l=(o?Vt(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let f=u.indexOf(t);f===-1?u.push(t,[r,l]):u[f+1].push(r,l)}else u.push(t,l)}}}function yE(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function dp(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function AN(n,e,t,r,i){return sg(this.multi,[])}function RN(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let c=this.providerFactory.componentProviders,l=ga(r,r[de],this.providerFactory.index,i);s=l.slice(0,c),sg(o,s);for(let u=c;u<l.length;u++)s.push(l[u])}else s=[],sg(o,s);return s}function sg(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function PN(n,e,t,r,i){let o=new bi(n,t,Ie);return o.multi=[],o.index=e,o.componentProviders=0,yE(o,i,r&&!t),o}function dr(n,e=[]){return t=>{t.providersResolver=(r,i)=>MN(r,i?i(n):n,e)}}function vE(n,e,t){let r=bA()+n,i=we();return i[r]===cn?BP(i,r,t?e.call(t):e()):UP(i,r)}var ag=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},_E=(()=>{class n{compileModuleSync(t){return new Wp(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=rC(t),o=yb(i.declarations).reduce((s,c)=>{let l=Do(c);return l&&s.push(new ba(l)),s},[]);return new ag(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var NN=(()=>{class n{zone=k(lt);changeDetectionScheduler=k(Mo);applicationRef=k(Ln);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ON({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new lt(G(N({},kN()),{scheduleInRootZone:t})),[{provide:lt,useFactory:n},{provide:ua,multi:!0,useFactory:()=>{let r=k(NN,{optional:!0});return()=>r.initialize()}},{provide:ua,multi:!0,useFactory:()=>{let r=k(VN);return()=>{r.initialize()}}},e===!0?{provide:WC,useValue:!0}:[],{provide:KC,useValue:t??qC}]}function kN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var VN=(()=>{class n{subscription=new Ze;initialized=!1;zone=k(lt);pendingTasks=k(Lo);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{lt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{lt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var FN=(()=>{class n{appRef=k(Ln);taskService=k(Lo);ngZone=k(lt);zonelessEnabled=k(GC);tracing=k(Eu,{optional:!0});disableScheduling=k(WC,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ze;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(su):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(KC,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof xp||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?ww:QC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(su+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ww(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function LN(){return typeof $localize<"u"&&$localize.locale||gu}var wE=new Z("",{providedIn:"root",factory:()=>k(wE,pe.Optional|pe.SkipSelf)||LN()});var cg=new Z(""),jN=new Z("");function sa(n){return!n.moduleRef}function BN(n){let e=sa(n)?n.r3Injector:n.moduleRef.injector,t=e.get(lt);return t.run(()=>{sa(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(kn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),sa(n)){let o=()=>e.destroy(),s=n.platformInjector.get(cg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(cg);s.add(o),n.moduleRef.onDestroy(()=>{ql(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return $N(r,t,()=>{let o=e.get(tE);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(wE,gu);if(IN(s||gu),!e.get(jN,!0))return sa(n)?e.get(Ln):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(sa(n)){let l=e.get(Ln);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return UN(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function UN(n,e){let t=n.injector.get(Ln);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new K(-403,!1);e.push(n)}function $N(n,e,t){try{let r=t();return Uo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Gl=null;function HN(n=[],e){return an.create({name:e,providers:[{provide:wu,useValue:"platform"},{provide:cg,useValue:new Set([()=>Gl=null])},...n]})}function zN(n=[]){if(Gl)return Gl;let e=HN(n);return Gl=e,WP(),qN(e),e}function qN(n){let e=n.get(Pg,null);Cn(n,()=>{e?.forEach(t=>t())})}function CE(){return!1}var Si=(()=>{class n{static __NG_ELEMENT_ID__=GN}return n})();function GN(n){return WN(Ft(),we(),(n&16)===16)}function WN(n,e,t){if(No(n)&&!t){let r=On(n.index,e);return new _a(r,r)}else if(n.type&175){let r=e[_n];return new _a(r,e)}return null}function bE(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Le(8);try{let o=i?.injector??zN(r),s=[ON({}),{provide:Mo,useExisting:FN},...t||[]],c=new du({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return BN({r3Injector:c.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Le(9)}}function xi(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Mi(n){return Oh(n)}function Lt(n,e){return Ah(n,e?.equal)}var lg=class{[rn];constructor(e){this[rn]=e}destroy(){this[rn].destroy()}};function Ai(n,e){!e?.injector&&eA(Ai);let t=e?.injector??k(an),r=e?.manualCleanup!==!0?t.get(Fo):null,i,o=t.get(ab,null,{optional:!0}),s=t.get(Mo);return o!==null&&!e?.forceRoot?(i=YN(o.view,s,n),r instanceof ou&&r._lView===o.view&&(r=null)):i=ZN(n,t.get(Xb),s),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new lg(i)}var EE=G(N({},oo),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:ma,run(){if(this.dirty=!1,this.hasRun&&!ul(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),e=ea(this),t=tu(!1);try{this.maybeCleanup(),this.fn(n)}finally{tu(t),ll(this,e)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),KN=G(N({},EE),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){ta(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),QN=G(N({},EE),{consumerMarkedDirty(){this.view[oe]|=8192,Sa(this.view),this.notifier.notify(13)},destroy(){ta(this),this.onDestroyFn(),this.maybeCleanup(),this.view[vi]?.delete(this)}});function YN(n,e,t){let r=Object.create(QN);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=t,n[vi]??=new Set,n[vi].add(r),r.consumerMarkedDirty(r),r}function ZN(n,e,t){let r=Object.create(KN);return r.fn=n,r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(12),r}var Mt=new Z("");var TE=null;function un(){return TE}function Xg(n){TE??=n}var Aa=class{},Ra=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(SE),providedIn:"platform"})}return n})();var SE=(()=>{class n extends Ra{_location;_history;_doc=k(Mt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return un().getBaseHref(this._doc)}onPopState(t){let r=un().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=un().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Nu(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function DE(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Dn(n){return n&&n[0]!=="?"?`?${n}`:n}var Un=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(em),providedIn:"root"})}return n})(),Ou=new Z(""),em=(()=>{class n extends Un{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(Mt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Nu(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Dn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Dn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Dn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ne(Ra),ne(Ou,8))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ri=(()=>{class n{_subject=new Be;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=eO(DE(IE(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Dn(r))}normalize(t){return n.stripTrailingSlash(XN(this._basePath,IE(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Dn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Dn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Dn;static joinWithSlash=Nu;static stripTrailingSlash=DE;static \u0275fac=function(r){return new(r||n)(ne(Un))};static \u0275prov=Q({token:n,factory:()=>JN(),providedIn:"root"})}return n})();function JN(){return new Ri(ne(Un))}function XN(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function IE(n){return n.replace(/\/index.html$/,"")}function eO(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var tm=(()=>{class n extends Un{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Nu(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Dn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Dn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ne(Ra),ne(Ou,8))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();function nm(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ku="browser",xE="server";function rm(n){return n===ku}function Vu(n){return n===xE}var Pa=class{};var ju=new Z(""),am=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new K(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ne(ju),ne(lt))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),Na=class{_doc;constructor(e){this._doc=e}manager},Fu="ng-app-id";function ME(n){for(let e of n)e.remove()}function AE(n,e){let t=e.createElement("style");return t.textContent=n,t}function oO(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Fu}="${e}"],link[${Fu}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Fu),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function om(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var cm=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Vu(o),oO(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,AE);r?.forEach(i=>this.addUsage(i,this.external,om))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(ME(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])ME(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,AE(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,om(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Fu,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ne(Mt),ne(Rg),ne(Ng,8),ne(Di))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),im={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},lm=/%COMP%/g;var PE="%COMP%",sO=`_nghost-${PE}`,aO=`_ngcontent-${PE}`,cO=!0,lO=new Z("",{providedIn:"root",factory:()=>cO});function uO(n){return aO.replace(lm,n)}function dO(n){return sO.replace(lm,n)}function NE(n,e){return e.map(t=>t.replace(lm,n))}var um=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,c,l,u=null,f=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=c,this.ngZone=l,this.nonce=u,this.tracingService=f,this.platformIsServer=Vu(c),this.defaultRenderer=new Oa(t,s,l,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Vn.ShadowDom&&(r=G(N({},r),{encapsulation:Vn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Lu?i.applyToHost(t):i instanceof ka&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer,_=this.tracingService;switch(r.encapsulation){case Vn.Emulated:o=new Lu(l,u,r,this.appId,f,s,c,p,_);break;case Vn.ShadowDom:return new sm(l,u,t,r,s,c,this.nonce,p,_);default:o=new ka(l,u,r,f,s,c,p,_);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ne(am),ne(cm),ne(Rg),ne(lO),ne(Mt),ne(Di),ne(lt),ne(Ng),ne(Eu,8))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),Oa=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(im[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(RE(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(RE(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new K(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=im[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=im[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ur.DashCase|Ur.Important)?e.style.setProperty(t,r,i&Ur.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ur.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=un().getGlobalEventTarget(this.doc,e),!e))throw new K(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function RE(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var sm=class extends Oa{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,c,l,u){super(e,o,s,l,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=i.styles;f=NE(i.id,f);for(let _ of f){let m=document.createElement("style");c&&m.setAttribute("nonce",c),m.textContent=_,this.shadowRoot.appendChild(m)}let p=i.getExternalStyles?.();if(p)for(let _ of p){let m=om(_,o);c&&m.setAttribute("nonce",c),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ka=class extends Oa{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,c,l,u){super(e,o,s,c,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=u?NE(u,f):f,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Lu=class extends ka{contentAttr;hostAttr;constructor(e,t,r,i,o,s,c,l,u){let f=i+"-"+r.id;super(e,t,r,o,s,c,l,u,f),this.contentAttr=uO(f),this.hostAttr=dO(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Bu=class n extends Aa{supportsDOMEvents=!0;static makeCurrent(){Xg(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=fO();return t==null?null:hO(t)}resetBaseElement(){Va=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return nm(document.cookie,e)}},Va=null;function fO(){return Va=Va||document.head.querySelector("base"),Va?Va.getAttribute("href"):null}function hO(n){return new URL(n,document.baseURI).pathname}var pO=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),kE=(()=>{class n extends Na{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(ne(Mt))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),OE=["alt","control","meta","shift"],gO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mO={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},VE=(()=>{class n extends Na{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),c=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>un().onAndCancel(t,s.domEventName,c,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),OE.forEach(u=>{let f=r.indexOf(u);f>-1&&(r.splice(f,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=gO[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),OE.forEach(s=>{if(s!==i){let c=mO[s];c(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ne(Mt))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();function dm(n,e,t){return bE(N({rootComponent:n,platformRef:t?.platformRef},yO(e)))}function yO(n){return{appProviders:[...bO,...n?.providers??[]],platformProviders:CO}}function vO(){Bu.makeCurrent()}function _O(){return new kn}function wO(){return ib(document),document}var CO=[{provide:Di,useValue:ku},{provide:Pg,useValue:vO,multi:!0},{provide:Mt,useFactory:wO}];var bO=[{provide:wu,useValue:"root"},{provide:kn,useFactory:_O},{provide:ju,useClass:kE,multi:!0,deps:[Mt]},{provide:ju,useClass:VE,multi:!0,deps:[Mt]},um,cm,am,{provide:Ao,useExisting:um},{provide:Pa,useClass:pO},[]];var FE=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ne(Mt))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var he="primary",Ya=Symbol("RouteTitle"),mm=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Oi(n){return new mm(n)}function qE(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],c=n[o];if(s[0]===":")i[s.substring(1)]=c;else if(s!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function DO(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!$n(n[t],e[t]))return!1;return!0}function $n(n,e){let t=n?ym(n):void 0,r=e?ym(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!GE(n[i],e[i]))return!1;return!0}function ym(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function GE(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function WE(n){return n.length>0?n[n.length-1]:null}function Gr(n){return qh(n)?n:Uo(n)?$e(Promise.resolve(n)):re(n)}var IO={exact:QE,subset:YE},KE={exact:TO,subset:SO,ignored:()=>!0};function LE(n,e,t){return IO[t.paths](n.root,e.root,t.matrixParams)&&KE[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function TO(n,e){return $n(n,e)}function QE(n,e,t){if(!Pi(n.segments,e.segments)||!Hu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!QE(n.children[r],e.children[r],t))return!1;return!0}function SO(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>GE(n[t],e[t]))}function YE(n,e,t){return ZE(n,e,e.segments,t)}function ZE(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Pi(i,t)||e.hasChildren()||!Hu(i,t,r))}else if(n.segments.length===t.length){if(!Pi(n.segments,t)||!Hu(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!YE(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Pi(n.segments,i)||!Hu(n.segments,i,r)||!n.children[he]?!1:ZE(n.children[he],e,o,r)}}function Hu(n,e,t){return e.every((r,i)=>KE[t](n[i].parameters,r.parameters))}var zn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Oe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Oi(this.queryParams),this._queryParamMap}toString(){return AO.serialize(this)}},Oe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zu(this)}},zr=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Oi(this.parameters),this._parameterMap}toString(){return XE(this)}};function xO(n,e){return Pi(n,e)&&n.every((t,r)=>$n(t.parameters,e[r].parameters))}function Pi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function MO(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===he&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==he&&(t=t.concat(e(i,r)))}),t}var Za=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>new ki,providedIn:"root"})}return n})(),ki=class{parse(e){let t=new _m(e);return new zn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Fa(e.root,!0)}`,r=NO(e.queryParams),i=typeof e.fragment=="string"?`#${RO(e.fragment)}`:"";return`${t}${r}${i}`}},AO=new ki;function zu(n){return n.segments.map(e=>XE(e)).join("/")}function Fa(n,e){if(!n.hasChildren())return zu(n);if(e){let t=n.children[he]?Fa(n.children[he],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==he&&r.push(`${i}:${Fa(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=MO(n,(r,i)=>i===he?[Fa(n.children[he],!1)]:[`${i}:${Fa(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[he]!=null?`${zu(n)}/${t[0]}`:`${zu(n)}/(${t.join("//")})`}}function JE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Uu(n){return JE(n).replace(/%3B/gi,";")}function RO(n){return encodeURI(n)}function vm(n){return JE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qu(n){return decodeURIComponent(n)}function jE(n){return qu(n.replace(/\+/g,"%20"))}function XE(n){return`${vm(n.path)}${PO(n.parameters)}`}function PO(n){return Object.entries(n).map(([e,t])=>`;${vm(e)}=${vm(t)}`).join("")}function NO(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Uu(t)}=${Uu(i)}`).join("&"):`${Uu(t)}=${Uu(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var OO=/^[^\/()?;#]+/;function fm(n){let e=n.match(OO);return e?e[0]:""}var kO=/^[^\/()?;=#]+/;function VO(n){let e=n.match(kO);return e?e[0]:""}var FO=/^[^=?&#]+/;function LO(n){let e=n.match(FO);return e?e[0]:""}var jO=/^[^&#]+/;function BO(n){let e=n.match(jO);return e?e[0]:""}var _m=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Oe([],{}):new Oe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[he]=new Oe(e,t)),r}parseSegment(){let e=fm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new K(4009,!1);return this.capture(e),new zr(qu(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=VO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=fm(this.remaining);i&&(r=i,this.capture(r))}e[qu(t)]=qu(r)}parseQueryParam(e){let t=LO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=BO(this.remaining);s&&(r=s,this.capture(r))}let i=jE(t),o=jE(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=fm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new K(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=he);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[he]:new Oe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new K(4011,!1)}};function eD(n){return n.segments.length>0?new Oe([],{[he]:n}):n}function tD(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=tD(i);if(r===he&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Oe(n.segments,e);return UO(t)}function UO(n){if(n.numberOfChildren===1&&n.children[he]){let e=n.children[he];return new Oe(n.segments.concat(e.segments),e.children)}return n}function qr(n){return n instanceof zn}function nD(n,e,t=null,r=null){let i=rD(n);return iD(i,e,t,r)}function rD(n){let e;function t(o){let s={};for(let l of o.children){let u=t(l);s[l.outlet]=u}let c=new Oe(o.url,s);return o===n&&(e=c),c}let r=t(n.root),i=eD(r);return e??i}function iD(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return hm(i,i,i,t,r);let o=$O(e);if(o.toRoot())return hm(i,i,new Oe([],{}),t,r);let s=HO(o,i,n),c=s.processChildren?ja(s.segmentGroup,s.index,o.commands):sD(s.segmentGroup,s.index,o.commands);return hm(i,s.segmentGroup,c,t,r)}function Wu(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ua(n){return typeof n=="object"&&n!=null&&n.outlets}function hm(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`});let s;n===e?s=t:s=oD(n,e,t);let c=eD(tD(s));return new zn(c,o,i)}function oD(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=oD(o,e,t)}),new Oe(n.segments,r)}var Ku=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Wu(r[0]))throw new K(4003,!1);let i=r.find(Ua);if(i&&i!==WE(r))throw new K(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function $O(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ku(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([l,u])=>{c[l]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new Ku(t,e,r)}var qo=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function HO(n,e,t){if(n.isAbsolute)return new qo(e,!0,0);if(!t)return new qo(e,!1,NaN);if(t.parent===null)return new qo(t,!0,0);let r=Wu(n.commands[0])?0:1,i=t.segments.length-1+r;return zO(t,i,n.numberOfDoubleDots)}function zO(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new K(4005,!1);i=r.segments.length}return new qo(r,!1,i-o)}function qO(n){return Ua(n[0])?n[0].outlets:{[he]:n}}function sD(n,e,t){if(n??=new Oe([],{}),n.segments.length===0&&n.hasChildren())return ja(n,e,t);let r=GO(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Oe(n.segments.slice(0,r.pathIndex),{});return o.children[he]=new Oe(n.segments.slice(r.pathIndex),n.children),ja(o,0,i)}else return r.match&&i.length===0?new Oe(n.segments,{}):r.match&&!n.hasChildren()?wm(n,e,t):r.match?ja(n,0,i):wm(n,e,t)}function ja(n,e,t){if(t.length===0)return new Oe(n.segments,{});{let r=qO(t),i={};if(Object.keys(r).some(o=>o!==he)&&n.children[he]&&n.numberOfChildren===1&&n.children[he].segments.length===0){let o=ja(n.children[he],e,t);return new Oe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=sD(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Oe(n.segments,i)}}function GO(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],c=t[r];if(Ua(c))break;let l=`${c}`,u=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!UE(l,u,s))return o;r+=2}else{if(!UE(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function wm(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Ua(o)){let l=WO(o.outlets);return new Oe(r,l)}if(i===0&&Wu(t[0])){let l=n.segments[e];r.push(new zr(l.path,BE(t[0]))),i++;continue}let s=Ua(o)?o.outlets[he]:`${o}`,c=i<t.length-1?t[i+1]:null;s&&c&&Wu(c)?(r.push(new zr(s,BE(c))),i+=2):(r.push(new zr(s,{})),i++)}return new Oe(r,{})}function WO(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=wm(new Oe([],{}),0,r))}),e}function BE(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function UE(n,e,t){return n==t.path&&$n(e,t.parameters)}var Gu="imperative",ft=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ft||{}),tn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Vi=class extends tn{type=ft.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Tn=class extends tn{urlAfterRedirects;type=ft.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},qt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(qt||{}),$a=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}($a||{}),Hn=class extends tn{reason;code;type=ft.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},fr=class extends tn{reason;code;type=ft.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Wo=class extends tn{error;target;type=ft.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ha=class extends tn{urlAfterRedirects;state;type=ft.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qu=class extends tn{urlAfterRedirects;state;type=ft.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yu=class extends tn{urlAfterRedirects;state;shouldActivate;type=ft.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Zu=class extends tn{urlAfterRedirects;state;type=ft.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ju=class extends tn{urlAfterRedirects;state;type=ft.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xu=class{route;type=ft.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ed=class{route;type=ft.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},td=class{snapshot;type=ft.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nd=class{snapshot;type=ft.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rd=class{snapshot;type=ft.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},id=class{snapshot;type=ft.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var za=class{},Ko=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function KO(n,e){return n.providers&&!n._injector&&(n._injector=Pu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function In(n){return n.outlet||he}function QO(n,e){let t=n.filter(r=>In(r)===e);return t.push(...n.filter(r=>In(r)!==e)),t}function Ja(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var od=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ja(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Zo(this.rootInjector)}},Zo=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new od(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ne(Zt))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Cm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Cm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=bm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return bm(e,this._root).map(t=>t.value)}};function Cm(n,e){if(n===e.value)return e;for(let t of e.children){let r=Cm(n,t);if(r)return r}return null}function bm(n,e){if(n===e.value)return[e];for(let t of e.children){let r=bm(n,t);if(r.length)return r.unshift(e),r}return[]}var en=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function zo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var qa=class extends sd{snapshot;constructor(e,t){super(e),this.snapshot=t,Am(this,e)}toString(){return this.snapshot.toString()}};function aD(n){let e=YO(n),t=new yt([new zr("",{})]),r=new yt({}),i=new yt({}),o=new yt({}),s=new yt(""),c=new hr(t,r,o,s,i,he,n,e.root);return c.snapshot=e.root,new qa(new en(c,[]),e)}function YO(n){let e={},t={},r={},i="",o=new Ni([],e,r,i,t,he,n,null,{});return new Ga("",new en(o,[]))}var hr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(me(u=>u[Ya]))??re(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(me(e=>Oi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(me(e=>Oi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ad(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:N(N({},e.params),n.params),data:N(N({},e.data),n.data),resolve:N(N(N(N({},n.data),e.data),i?.data),n._resolvedData)}:r={params:N({},n.params),data:N({},n.data),resolve:N(N({},n.data),n._resolvedData??{})},i&&lD(i)&&(r.resolve[Ya]=i.title),r}var Ni=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ya]}constructor(e,t,r,i,o,s,c,l,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=c,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Oi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Oi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ga=class extends sd{url;constructor(e,t){super(t),this.url=e,Am(this,t)}toString(){return cD(this._root)}};function Am(n,e){e.value._routerState=n,e.children.forEach(t=>Am(n,t))}function cD(n){let e=n.children.length>0?` { ${n.children.map(cD).join(", ")} } `:"";return`${n.value}${e}`}function pm(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,$n(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),$n(e.params,t.params)||n.paramsSubject.next(t.params),DO(e.url,t.url)||n.urlSubject.next(t.url),$n(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Em(n,e){let t=$n(n.params,e.params)&&xO(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Em(n.parent,e.parent))}function lD(n){return typeof n.title=="string"||n.title===null}var uD=new Z(""),Xa=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=he;activateEvents=new at;deactivateEvents=new at;attachEvents=new at;detachEvents=new at;routerOutletData=ze(void 0);parentContexts=k(Zo);location=k(Bo);changeDetector=k(Si);inputBinder=k(dd,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new K(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new K(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new K(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new K(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Dm(t,c,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=We({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[lr]})}return n})(),Dm=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===hr?this.route:e===Zo?this.childContexts:e===uD?this.outletData:this.parent.get(e,t)}},dd=new Z("");var Rm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ve({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Ke(0,"router-outlet")},dependencies:[Xa],encapsulation:2})}return n})();function Pm(n){let e=n.children&&n.children.map(Pm),t=e?G(N({},n),{children:e}):N({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==he&&(t.component=Rm),t}function ZO(n,e,t){let r=Wa(n,e._root,t?t._root:void 0);return new qa(r,e)}function Wa(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=JO(n,e,t);return new en(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>Wa(n,c)),s}}let r=XO(e.value),i=e.children.map(o=>Wa(n,o));return new en(r,i)}}function JO(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Wa(n,r,i);return Wa(n,r)})}function XO(n){return new hr(new yt(n.url),new yt(n.params),new yt(n.queryParams),new yt(n.fragment),new yt(n.data),n.outlet,n.component,n)}var Qo=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},dD="ngNavigationCancelingError";function cd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=qr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=fD(!1,qt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function fD(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[dD]=!0,t.cancellationCode=e,t}function ek(n){return hD(n)&&qr(n.url)}function hD(n){return!!n&&n[dD]}var tk=(n,e,t,r)=>me(i=>(new Im(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Im=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),pm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=zo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=zo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=zo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=zo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new id(o.value.snapshot))}),e.children.length&&this.forwardEvent(new nd(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(pm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),pm(c.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},ld=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Go=class{component;route;constructor(e,t){this.component=e,this.route=t}};function nk(n,e,t){let r=n._root,i=e?e._root:null;return La(r,i,t,[r.value])}function rk(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Jo(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Ww(n)?n:e.get(n):r}function La(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=zo(e);return n.children.forEach(s=>{ik(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>Ba(c,t.getContext(s),i)),i}function ik(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=ok(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new ld(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?La(n,e,c?c.children:null,r,i):La(n,e,t,r,i),l&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Go(c.outlet.component,s))}else s&&Ba(e,c,i),i.canActivateChecks.push(new ld(r)),o.component?La(n,null,c?c.children:null,r,i):La(n,null,t,r,i);return i}function ok(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Pi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Pi(n.url,e.url)||!$n(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Em(n,e)||!$n(n.queryParams,e.queryParams);case"paramsChange":default:return!Em(n,e)}}function Ba(n,e,t){let r=zo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ba(s,e.children.getContext(o),t):Ba(s,null,t):Ba(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Go(e.outlet.component,i)):t.canDeactivateChecks.push(new Go(null,i)):t.canDeactivateChecks.push(new Go(null,i))}function ec(n){return typeof n=="function"}function sk(n){return typeof n=="boolean"}function ak(n){return n&&ec(n.canLoad)}function ck(n){return n&&ec(n.canActivate)}function lk(n){return n&&ec(n.canActivateChild)}function uk(n){return n&&ec(n.canDeactivate)}function dk(n){return n&&ec(n.canMatch)}function pD(n){return n instanceof nr||n?.name==="EmptyError"}var $u=Symbol("INITIAL_VALUE");function Yo(){return Et(n=>Vl(n.map(e=>e.pipe(kt(1),Qh($u)))).pipe(me(e=>{for(let t of e)if(t!==!0){if(t===$u)return $u;if(t===!1||fk(t))return t}return!0}),Ot(e=>e!==$u),kt(1)))}function fk(n){return qr(n)||n instanceof Qo}function hk(n,e){return Xe(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?re(G(N({},t),{guardsResult:!0})):pk(s,r,i,n).pipe(Xe(c=>c&&sk(c)?gk(r,o,n,e):re(c)),me(c=>G(N({},t),{guardsResult:c})))})}function pk(n,e,t,r){return $e(n).pipe(Xe(i=>wk(i.component,i.route,t,e,r)),ir(i=>i!==!0,!0))}function gk(n,e,t,r){return $e(e).pipe(hi(i=>mo(yk(i.route.parent,r),mk(i.route,r),_k(n,i.path,t),vk(n,i.route,t))),ir(i=>i!==!0,!0))}function mk(n,e){return n!==null&&e&&e(new rd(n)),re(!0)}function yk(n,e){return n!==null&&e&&e(new td(n)),re(!0)}function vk(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return re(!0);let i=r.map(o=>Fl(()=>{let s=Ja(e)??t,c=Jo(o,s),l=ck(c)?c.canActivate(e,n):Cn(s,()=>c(e,n));return Gr(l).pipe(ir())}));return re(i).pipe(Yo())}function _k(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>rk(s)).filter(s=>s!==null).map(s=>Fl(()=>{let c=s.guards.map(l=>{let u=Ja(s.node)??t,f=Jo(l,u),p=lk(f)?f.canActivateChild(r,n):Cn(u,()=>f(r,n));return Gr(p).pipe(ir())});return re(c).pipe(Yo())}));return re(o).pipe(Yo())}function wk(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return re(!0);let s=o.map(c=>{let l=Ja(e)??i,u=Jo(c,l),f=uk(u)?u.canDeactivate(n,e,t,r):Cn(l,()=>u(n,e,t,r));return Gr(f).pipe(ir())});return re(s).pipe(Yo())}function Ck(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return re(!0);let o=i.map(s=>{let c=Jo(s,n),l=ak(c)?c.canLoad(e,t):Cn(n,()=>c(e,t));return Gr(l)});return re(o).pipe(Yo(),gD(r))}function gD(n){return Uh(vt(e=>{if(typeof e!="boolean")throw cd(n,e)}),me(e=>e===!0))}function bk(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return re(!0);let o=i.map(s=>{let c=Jo(s,n),l=dk(c)?c.canMatch(e,t):Cn(n,()=>c(e,t));return Gr(l)});return re(o).pipe(Yo(),gD(r))}var Ka=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Qa=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ho(n){return po(new Ka(n))}function Ek(n){return po(new K(4e3,!1))}function Dk(n){return po(fD(!1,qt.GuardRejected))}var Tm=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return re(r);if(i.numberOfChildren>1||!i.children[he])return Ek(`${e.redirectTo}`);i=i.children[he]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let c=t,{queryParams:l,fragment:u,routeConfig:f,url:p,outlet:_,params:m,data:x,title:O}=i,L=Cn(o,()=>c({params:m,data:x,queryParams:l,fragment:u,routeConfig:f,url:p,outlet:_,title:O}));if(L instanceof zn)throw new Qa(L);t=L}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Qa(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new zn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=t[c]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([c,l])=>{s[c]=this.createSegmentGroup(e,l,r,i)}),new Oe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new K(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Sm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ik(n,e,t,r,i){let o=mD(n,e,t);return o.matched?(r=KO(e,r),bk(r,e,t,i).pipe(me(s=>s===!0?o:N({},Sm)))):re(o)}function mD(n,e,t){if(e.path==="**")return Tk(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?N({},Sm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||qE)(t,n,e);if(!i)return N({},Sm);let o={};Object.entries(i.posParams??{}).forEach(([c,l])=>{o[c]=l.path});let s=i.consumed.length>0?N(N({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Tk(n){return{matched:!0,parameters:n.length>0?WE(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function $E(n,e,t,r){return t.length>0&&Mk(n,t,r)?{segmentGroup:new Oe(e,xk(r,new Oe(t,n.children))),slicedSegments:[]}:t.length===0&&Ak(n,t,r)?{segmentGroup:new Oe(n.segments,Sk(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Oe(n.segments,n.children),slicedSegments:t}}function Sk(n,e,t,r){let i={};for(let o of t)if(fd(n,e,o)&&!r[In(o)]){let s=new Oe([],{});i[In(o)]=s}return N(N({},r),i)}function xk(n,e){let t={};t[he]=e;for(let r of n)if(r.path===""&&In(r)!==he){let i=new Oe([],{});t[In(r)]=i}return t}function Mk(n,e,t){return t.some(r=>fd(n,e,r)&&In(r)!==he)}function Ak(n,e,t){return t.some(r=>fd(n,e,r))}function fd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Rk(n,e,t){return e.length===0&&!n.children[t]}var xm=class{};function Pk(n,e,t,r,i,o,s="emptyOnly"){return new Mm(n,e,t,r,i,s,o).recognize()}var Nk=31,Mm=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.applyRedirects=new Tm(this.urlSerializer,this.urlTree)}noMatchError(e){return new K(4002,`'${e.segmentGroup}'`)}recognize(){let e=$E(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(me(({children:t,rootSnapshot:r})=>{let i=new en(r,t),o=new Ga("",i),s=nD(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ni([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),he,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,he,t).pipe(me(r=>({children:r,rootSnapshot:t})),rr(r=>{if(r instanceof Qa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ka?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(me(s=>s instanceof en?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return $e(o).pipe(hi(s=>{let c=r.children[s],l=QO(t,s);return this.processSegmentGroup(e,l,c,s,i)}),Kh((s,c)=>(s.push(...c),s)),Lr(null),Wh(),Xe(s=>{if(s===null)return Ho(r);let c=yD(s);return Ok(c),re(c)}))}processSegment(e,t,r,i,o,s,c){return $e(t).pipe(hi(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,o,s,c).pipe(rr(u=>{if(u instanceof Ka)return re(null);throw u}))),ir(l=>!!l),rr(l=>{if(pD(l))return Rk(r,i,o)?re(new xm):Ho(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,o,s,c,l){return In(r)!==s&&(s===he||!fd(i,o,r))?Ho(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,l):Ho(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,c){let{matched:l,parameters:u,consumedSegments:f,positionalParamSegments:p,remainingSegments:_}=mD(t,i,o);if(!l)return Ho(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Nk&&(this.allowRedirects=!1));let m=new Ni(o,u,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,HE(i),In(i),i.component??i._loadedComponent??null,i,zE(i)),x=ad(m,c,this.paramsInheritanceStrategy);m.params=Object.freeze(x.params),m.data=Object.freeze(x.data);let O=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,m,e);return this.applyRedirects.lineralizeSegments(i,O).pipe(Xe(L=>this.processSegment(e,r,t,L.concat(_),s,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let c=Ik(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(Et(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Et(({routes:u})=>{let f=r._loadedInjector??e,{parameters:p,consumedSegments:_,remainingSegments:m}=l,x=new Ni(_,p,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,HE(r),In(r),r.component??r._loadedComponent??null,r,zE(r)),O=ad(x,s,this.paramsInheritanceStrategy);x.params=Object.freeze(O.params),x.data=Object.freeze(O.data);let{segmentGroup:L,slicedSegments:q}=$E(t,_,m,u);if(q.length===0&&L.hasChildren())return this.processChildren(f,u,L,x).pipe(me(le=>new en(x,le)));if(u.length===0&&q.length===0)return re(new en(x,[]));let J=In(r)===o;return this.processSegment(f,u,L,q,J?he:o,!0,x).pipe(me(le=>new en(x,le instanceof en?[le]:[])))}))):Ho(t)))}getChildConfig(e,t,r){return t.children?re({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?re({routes:t._loadedRoutes,injector:t._loadedInjector}):Ck(e,t,r,this.urlSerializer).pipe(Xe(i=>i?this.configLoader.loadChildren(e,t).pipe(vt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Dk(t))):re({routes:[],injector:e})}};function Ok(n){n.sort((e,t)=>e.value.outlet===he?-1:t.value.outlet===he?1:e.value.outlet.localeCompare(t.value.outlet))}function kk(n){let e=n.value.routeConfig;return e&&e.path===""}function yD(n){let e=[],t=new Set;for(let r of n){if(!kk(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=yD(r.children);e.push(new en(r.value,i))}return e.filter(r=>!t.has(r))}function HE(n){return n.data||{}}function zE(n){return n.resolve||{}}function Vk(n,e,t,r,i,o){return Xe(s=>Pk(n,e,t,r,s.extractedUrl,i,o).pipe(me(({state:c,tree:l})=>G(N({},s),{targetSnapshot:c,urlAfterRedirects:l}))))}function Fk(n,e){return Xe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return re(t);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of vD(l))s.add(u);let c=0;return $e(s).pipe(hi(l=>o.has(l)?Lk(l,r,n,e):(l.data=ad(l,l.parent,n).resolve,re(void 0))),vt(()=>c++),yo(1),Xe(l=>c===s.size?re(t):Bt))})}function vD(n){let e=n.children.map(t=>vD(t)).flat();return[n,...e]}function Lk(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!lD(i)&&(o[Ya]=i.title),jk(o,n,e,r).pipe(me(s=>(n._resolvedData=s,n.data=ad(n,n.parent,t).resolve,null)))}function jk(n,e,t,r){let i=ym(n);if(i.length===0)return re({});let o={};return $e(i).pipe(Xe(s=>Bk(n[s],e,t,r).pipe(ir(),vt(c=>{if(c instanceof Qo)throw cd(new ki,c);o[s]=c}))),yo(1),me(()=>o),rr(s=>pD(s)?Bt:po(s)))}function Bk(n,e,t,r){let i=Ja(e)??r,o=Jo(n,i),s=o.resolve?o.resolve(e,t):Cn(i,()=>o(e,t));return Gr(s)}function gm(n){return Et(e=>{let t=n(e);return t?$e(t).pipe(me(()=>e)):re(e)})}var Nm=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===he);return r}getResolvedTitleForRoute(t){return t.data[Ya]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(_D),providedIn:"root"})}return n})(),_D=(()=>{class n extends Nm{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ne(FE))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tc=new Z("",{providedIn:"root",factory:()=>({})}),nc=new Z(""),wD=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(_E);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return re(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Gr(t.loadComponent()).pipe(me(bD),vt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),oa(()=>{this.componentLoaders.delete(t)})),i=new ho(r,()=>new Be).pipe(fo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return re({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=CD(r,this.compiler,t,this.onLoadEndListener).pipe(oa(()=>{this.childrenLoaders.delete(r)})),s=new ho(o,()=>new Be).pipe(fo());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function CD(n,e,t,r){return Gr(n.loadChildren()).pipe(me(bD),Xe(i=>i instanceof Yg||Array.isArray(i)?re(i):$e(e.compileModuleAsync(i))),me(i=>{r&&r(n);let o,s,c=!1;return Array.isArray(i)?(s=i,c=!0):(o=i.create(t).injector,s=o.get(nc,[],{optional:!0,self:!0}).flat()),{routes:s.map(Pm),injector:o}}))}function Uk(n){return n&&typeof n=="object"&&"default"in n}function bD(n){return Uk(n)?n.default:n}var hd=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k($k),providedIn:"root"})}return n})(),$k=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ED=new Z("");var DD=new Z(""),ID=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Be;transitionAbortSubject=new Be;configLoader=k(wD);environmentInjector=k(Zt);destroyRef=k(Fo);urlSerializer=k(Za);rootContexts=k(Zo);location=k(Ri);inputBindingEnabled=k(dd,{optional:!0})!==null;titleStrategy=k(Nm);options=k(tc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(hd);createViewTransition=k(ED,{optional:!0});navigationErrorHandler=k(DD,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>re(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Xu(i)),r=i=>this.events.next(new ed(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(G(N({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new yt(null),this.transitions.pipe(Ot(r=>r!==null),Et(r=>{let i=!1,o=!1;return re(r).pipe(Et(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",qt.SupersededByNewNavigation),Bt;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?G(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&l!=="reload"){let u="";return this.events.next(new fr(s.id,this.urlSerializer.serialize(s.rawUrl),u,$a.IgnoredSameUrlNavigation)),s.resolve(!1),Bt}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return re(s).pipe(Et(u=>(this.events.next(new Vi(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Bt:Promise.resolve(u))),Vk(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),vt(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=G(N({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let f=new Ha(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:u,extractedUrl:f,source:p,restoredState:_,extras:m}=s,x=new Vi(u,this.urlSerializer.serialize(f),p,_);this.events.next(x);let O=aD(this.rootComponentType).snapshot;return this.currentTransition=r=G(N({},s),{targetSnapshot:O,urlAfterRedirects:f,extras:G(N({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,re(r)}else{let u="";return this.events.next(new fr(s.id,this.urlSerializer.serialize(s.extractedUrl),u,$a.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Bt}}),vt(s=>{let c=new Qu(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}),me(s=>(this.currentTransition=r=G(N({},s),{guards:nk(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),hk(this.environmentInjector,s=>this.events.next(s)),vt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw cd(this.urlSerializer,s.guardsResult);let c=new Yu(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(c)}),Ot(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",qt.GuardRejected),!1)),gm(s=>{if(s.guards.canActivateChecks.length!==0)return re(s).pipe(vt(c=>{let l=new Zu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Et(c=>{let l=!1;return re(c).pipe(Fk(this.paramsInheritanceStrategy,this.environmentInjector),vt({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(c,"",qt.NoDataFromResolver)}}))}),vt(c=>{let l=new Ju(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}))}),gm(s=>{let c=l=>{let u=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(l.routeConfig).pipe(vt(f=>{l.component=f}),me(()=>{})));for(let f of l.children)u.push(...c(f));return u};return Vl(c(s.targetSnapshot.root)).pipe(Lr(null),kt(1))}),gm(()=>this.afterPreactivation()),Et(()=>{let{currentSnapshot:s,targetSnapshot:c}=r,l=this.createViewTransition?.(this.environmentInjector,s.root,c.root);return l?$e(l).pipe(me(()=>r)):re(r)}),me(s=>{let c=ZO(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=G(N({},s),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,r}),vt(()=>{this.events.next(new za)}),tk(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),kt(1),vt({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Tn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Yh(this.transitionAbortSubject.pipe(vt(s=>{throw s}))),oa(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",qt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),rr(s=>{if(this.destroyed)return r.resolve(!1),Bt;if(o=!0,hD(s))this.events.next(new Hn(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),ek(s)?this.events.next(new Ko(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let c=new Wo(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let l=Cn(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(l instanceof Qo){let{message:u,cancellationCode:f}=cd(this.urlSerializer,l);this.events.next(new Hn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,f)),this.events.next(new Ko(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(c),s}catch(l){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(l)}}return Bt}))}))}cancelNavigationTransition(t,r,i){let o=new Hn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Hk(n){return n!==Gu}var TD=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(zk),providedIn:"root"})}return n})(),ud=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},zk=(()=>{class n extends ud{static \u0275fac=(()=>{let t;return function(i){return(t||(t=En(n)))(i||n)}})();static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),SD=(()=>{class n{urlSerializer=k(Za);options=k(tc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(Ri);urlHandlingStrategy=k(hd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new zn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof zn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=aD(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(qk),providedIn:"root"})}return n})(),qk=(()=>{class n extends SD{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Vi?this.updateStateMemento():t instanceof fr?this.commitTransition(r):t instanceof Ha?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof za?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Hn&&(t.code===qt.GuardRejected||t.code===qt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Wo?this.restoreHistory(r,!0):t instanceof Tn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let c=this.browserPageId,l=N(N({},s),this.generateNgRouterState(i,c));this.location.replaceState(t,"",l)}else{let c=N(N({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",c)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=En(n)))(i||n)}})();static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Om(n,e){n.events.pipe(Ot(t=>t instanceof Tn||t instanceof Hn||t instanceof Wo||t instanceof fr),me(t=>t instanceof Tn||t instanceof fr?0:(t instanceof Hn?t.code===qt.Redirect||t.code===qt.SupersededByNewNavigation:!1)?2:1),Ot(t=>t!==2),kt(1)).subscribe(()=>{e()})}var Gk={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Wk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Xo=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(Zb);stateManager=k(SD);options=k(tc,{optional:!0})||{};pendingTasks=k(Lo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(ID);urlSerializer=k(Za);location=k(Ri);urlHandlingStrategy=k(hd);_events=new Be;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(TD);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(nc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(dd,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ze;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Hn&&r.code!==qt.Redirect&&r.code!==qt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Tn)this.navigated=!0;else if(r instanceof Ko){let s=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=N({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Hk(i.source)},s);this.scheduleNavigation(c,Gu,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Qk(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Gu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=N({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Pm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:c,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:s,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=N(N({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let _=i?i.snapshot:this.routerState.snapshot.root;p=rD(_)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return iD(p,t,f,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=qr(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Gu,null,r)}navigate(t,r={skipLocationChange:!1}){return Kk(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=N({},Gk):r===!1?i=N({},Wk):i=r,qr(t))return LE(this.currentUrlTree,t,i);let o=this.parseUrl(t);return LE(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let c,l,u;s?(c=s.resolve,l=s.reject,u=s.promise):u=new Promise((p,_)=>{c=p,l=_});let f=this.pendingTasks.add();return Om(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Kk(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new K(4008,!1)}function Qk(n){return!(n instanceof za)&&!(n instanceof Ko)}var es=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Be;constructor(t,r,i,o,s,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=c;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof Tn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(qr(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:gb(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:qr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Ie(Xo),Ie(hr),xg("tabindex"),Ie(ur),Ie(Jt),Ie(Un))};static \u0275dir=We({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&$("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Ii("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",xi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",xi],replaceUrl:[2,"replaceUrl","replaceUrl",xi],routerLink:"routerLink"},features:[lr]})}return n})(),km=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new at;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(c=>{c instanceof Tn&&this.update()})}ngAfterContentInit(){re(this.links.changes,re(null)).pipe(go()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=$e(t).pipe(go()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=Zk(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(Ie(Xo),Ie(Jt),Ie(ur),Ie(Si),Ie(es,8))};static \u0275dir=We({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&uE(o,es,5),r&2){let s;dE(s=fE())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[lr]})}return n})();function Zk(n){return!!n.paths}var Jk=new Z("");function Vm(n,...e){return Ta([{provide:nc,multi:!0,useValue:n},[],{provide:hr,useFactory:Xk,deps:[Xo]},{provide:Jg,multi:!0,useFactory:tV},e.map(t=>t.\u0275providers)])}function Xk(n){return n.routerState.root}function eV(n,e){return{\u0275kind:n,\u0275providers:e}}function tV(){let n=k(an);return e=>{let t=n.get(Ln);if(e!==t.components[0])return;let r=n.get(Xo),i=n.get(nV);n.get(rV)===1&&r.initialNavigation(),n.get(iV,null,pe.Optional)?.setUpPreloading(),n.get(Jk,null,pe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var nV=new Z("",{factory:()=>new Be}),rV=new Z("",{providedIn:"root",factory:()=>1});var iV=new Z("");function Fm(){return eV(6,[{provide:Un,useClass:tm}])}var pd=class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ve({type:n,selectors:[["app-logo"]],decls:10,vars:0,consts:[[1,"logo-container"],[1,"logo-text"],[1,"logo-e"],[1,"logo-ampersand"],[1,"logo-d"],[1,"logo-subtitle"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"span",2),E(3,"E"),y(),v(4,"span",3),E(5,"&"),y(),v(6,"span",4),E(7,"D"),y()(),v(8,"div",5),E(9,"Hospitality"),y()())},styles:[".logo-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:.125rem}.logo-text[_ngcontent-%COMP%]{display:flex;align-items:baseline;font-size:1.5rem;font-weight:700;line-height:1;color:var(--color-text-primary)}.logo-e[_ngcontent-%COMP%]{color:var(--color-primary)}.logo-ampersand[_ngcontent-%COMP%]{color:var(--color-text-secondary);font-weight:400;margin:0 .125rem}.logo-d[_ngcontent-%COMP%]{color:#ec4899}.logo-subtitle[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;color:var(--color-text-secondary);letter-spacing:.05em;text-transform:uppercase}"],changeDetection:0})}};function gd(){if(typeof crypto<"u"&&typeof crypto.randomUUID=="function")return crypto.randomUUID();let n=new Uint8Array(16);crypto.getRandomValues(n),n[6]=n[6]&15|64,n[8]=n[8]&63|128;let e=Array.from(n,t=>t.toString(16).padStart(2,"0")).join("");return`${e.slice(0,8)}-${e.slice(8,12)}-${e.slice(12,16)}-${e.slice(16,20)}-${e.slice(20)}`}var xD=()=>{};var RD=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},oV=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],c=n[t++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},PD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,c=s?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,f=o>>2,p=(o&3)<<4|c>>4,_=(c&15)<<2|u>>6,m=u&63;l||(m=64,s||(_=64)),r.push(t[f],t[p],t[_],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(RD(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):oV(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||u==null||p==null)throw new Lm;let _=o<<2|c>>4;if(r.push(_),u!==64){let m=c<<4&240|u>>2;if(r.push(m),p!==64){let x=u<<6&192|p;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Lm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},sV=function(n){let e=RD(n);return PD.encodeByteArray(e,!0)},ic=function(n){return sV(n).replace(/\./g,"")},ND=function(n){try{return PD.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function OD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var aV=()=>OD().__FIREBASE_DEFAULTS__,cV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},lV=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&ND(n[1]);return e&&JSON.parse(e)},jm=()=>{try{return xD()||aV()||cV()||lV()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},uV=n=>jm()?.emulatorHosts?.[n],kD=n=>{let e=uV(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Bm=()=>jm()?.config;var md=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function yd(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function VD(n){return V(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function FD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=N({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ic(JSON.stringify(t)),ic(JSON.stringify(s)),""].join(".")}var rc={};function dV(){let n={prod:[],emulator:[]};for(let e of Object.keys(rc))rc[e]?n.emulator.push(e):n.prod.push(e);return n}function fV(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var MD=!1;function LD(n,e){if(typeof window>"u"||typeof document>"u"||!yd(window.location.host)||rc[n]===e||rc[n]||MD)return;rc[n]=e;function t(_){return`__firebase__banner__${_}`}let r="__firebase__banner",o=dV().prod.length>0;function s(){let _=document.getElementById(r);_&&_.remove()}function c(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function l(_,m){_.setAttribute("width","24"),_.setAttribute("id",m),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function u(){let _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{MD=!0,s()},_}function f(_,m){_.setAttribute("id",m),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function p(){let _=fV(r),m=t("text"),x=document.getElementById(m)||document.createElement("span"),O=t("learnmore"),L=document.getElementById(O)||document.createElement("a"),q=t("preprendIcon"),J=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){let le=_.element;c(le),f(L,O);let Ct=u();l(J,q),le.append(J,x,L,Ct),document.body.appendChild(le)}o?(x.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function jD(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hV(){let n=jm()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BD(){return!hV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Um(){try{return typeof indexedDB=="object"}catch{return!1}}function UD(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var pV="FirebaseError",pr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=pV,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oc.prototype.create)}},oc=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?gV(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new pr(i,c,r)}};function gV(n,e){return n.replace(mV,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var mV=/\{\$([^}]+)}/g;function Fi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(AD(o)&&AD(s)){if(!Fi(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function AD(n){return n!==null&&typeof n=="object"}var l9=4*60*60*1e3;function Li(n){return n&&n._delegate?n._delegate:n}var gr=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ji="[DEFAULT]";var $m=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new md;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vV(e))try{this.getOrInitializeService({instanceIdentifier:ji})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ji){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return V(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ji){return this.instances.has(e)}getOptions(e=ji){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yV(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ji){return this.component?this.component.multipleInstances?e:ji:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function yV(n){return n===ji?void 0:n}function vV(n){return n.instantiationMode==="EAGER"}var vd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new $m(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var _V=[],Te=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Te||{}),wV={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},CV=Te.INFO,bV={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},EV=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=bV[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ts=class{constructor(e){this.name=e,this._logLevel=CV,this._logHandler=EV,this._userLogHandler=null,_V.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}};var DV=(n,e)=>e.some(t=>n instanceof t),$D,HD;function IV(){return $D||($D=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TV(){return HD||(HD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var zD=new WeakMap,zm=new WeakMap,qD=new WeakMap,Hm=new WeakMap,Gm=new WeakMap;function SV(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(qn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&zD.set(t,n)}).catch(()=>{}),Gm.set(e,n),e}function xV(n){if(zm.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});zm.set(n,e)}var qm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return zm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||qD.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return qn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function GD(n){qm=n(qm)}function MV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(_d(this),e,...t);return qD.set(r,e.sort?e.sort():[e]),qn(r)}:TV().includes(n)?function(...e){return n.apply(_d(this),e),qn(zD.get(this))}:function(...e){return qn(n.apply(_d(this),e))}}function AV(n){return typeof n=="function"?MV(n):(n instanceof IDBTransaction&&xV(n),DV(n,IV())?new Proxy(n,qm):n)}function qn(n){if(n instanceof IDBRequest)return SV(n);if(Hm.has(n))return Hm.get(n);let e=AV(n);return e!==n&&(Hm.set(n,e),Gm.set(e,n)),e}var _d=n=>Gm.get(n);function KD(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),c=qn(s);return r&&s.addEventListener("upgradeneeded",l=>{r(qn(s.result),l.oldVersion,l.newVersion,qn(s.transaction),l)}),t&&s.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}var RV=["get","getKey","getAll","getAllKeys","count"],PV=["put","add","delete","clear"],Wm=new Map;function WD(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Wm.get(e))return Wm.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=PV.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||RV.includes(t)))return;let o=function(s,...c){return V(this,null,function*(){let l=this.transaction(s,i?"readwrite":"readonly"),u=l.store;return r&&(u=u.index(c.shift())),(yield Promise.all([u[t](...c),i&&l.done]))[0]})};return Wm.set(e,o),o}GD(n=>G(N({},n),{get:(e,t,r)=>WD(e,t)||n.get(e,t,r),has:(e,t)=>!!WD(e,t)||n.has(e,t)}));var Qm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(NV(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function NV(n){return n.getComponent()?.type==="VERSION"}var Ym="@firebase/app",QD="0.14.8";var mr=new ts("@firebase/app"),OV="@firebase/app-compat",kV="@firebase/analytics-compat",VV="@firebase/analytics",FV="@firebase/app-check-compat",LV="@firebase/app-check",jV="@firebase/auth",BV="@firebase/auth-compat",UV="@firebase/database",$V="@firebase/data-connect",HV="@firebase/database-compat",zV="@firebase/functions",qV="@firebase/functions-compat",GV="@firebase/installations",WV="@firebase/installations-compat",KV="@firebase/messaging",QV="@firebase/messaging-compat",YV="@firebase/performance",ZV="@firebase/performance-compat",JV="@firebase/remote-config",XV="@firebase/remote-config-compat",eF="@firebase/storage",tF="@firebase/storage-compat",nF="@firebase/firestore",rF="@firebase/ai",iF="@firebase/firestore-compat",oF="firebase",sF="12.9.0";var Zm="[DEFAULT]",aF={[Ym]:"fire-core",[OV]:"fire-core-compat",[VV]:"fire-analytics",[kV]:"fire-analytics-compat",[LV]:"fire-app-check",[FV]:"fire-app-check-compat",[jV]:"fire-auth",[BV]:"fire-auth-compat",[UV]:"fire-rtdb",[$V]:"fire-data-connect",[HV]:"fire-rtdb-compat",[zV]:"fire-fn",[qV]:"fire-fn-compat",[GV]:"fire-iid",[WV]:"fire-iid-compat",[KV]:"fire-fcm",[QV]:"fire-fcm-compat",[YV]:"fire-perf",[ZV]:"fire-perf-compat",[JV]:"fire-rc",[XV]:"fire-rc-compat",[eF]:"fire-gcs",[tF]:"fire-gcs-compat",[nF]:"fire-fst",[iF]:"fire-fst-compat",[rF]:"fire-vertex","fire-js":"fire-js",[oF]:"fire-js-all"};var wd=new Map,cF=new Map,Jm=new Map;function YD(n,e){try{n.container.addComponent(e)}catch(t){mr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function sc(n){let e=n.name;if(Jm.has(e))return mr.debug(`There were multiple attempts to register component ${e}.`),!1;Jm.set(e,n);for(let t of wd.values())YD(t,n);for(let t of cF.values())YD(t,n);return!0}function eI(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function tI(n){return n==null?!1:n.settings!==void 0}var lF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wr=new oc("app","Firebase",lF);var Xm=class{constructor(e,t,r){this._isDeleted=!1,this._options=N({},e),this._config=N({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wr.create("app-deleted",{appName:this._name})}};var nI=sF;function ny(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=N({name:Zm,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Wr.create("bad-app-name",{appName:String(i)});if(t||(t=Bm()),!t)throw Wr.create("no-options");let o=wd.get(i);if(o){if(Fi(t,o.options)&&Fi(r,o.config))return o;throw Wr.create("duplicate-app",{appName:i})}let s=new vd(i);for(let l of Jm.values())s.addComponent(l);let c=new Xm(t,r,s);return wd.set(i,c),c}function rI(n=Zm){let e=wd.get(n);if(!e&&n===Zm&&Bm())return ny();if(!e)throw Wr.create("no-app",{appName:n});return e}function Kr(n,e,t){let r=aF[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mr.warn(s.join(" "));return}sc(new gr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var uF="firebase-heartbeat-database",dF=1,ac="firebase-heartbeat-store",Km=null;function iI(){return Km||(Km=KD(uF,dF,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ac)}catch(t){console.warn(t)}}}}).catch(n=>{throw Wr.create("idb-open",{originalErrorMessage:n.message})})),Km}function fF(n){return V(this,null,function*(){try{let t=(yield iI()).transaction(ac),r=yield t.objectStore(ac).get(oI(n));return yield t.done,r}catch(e){if(e instanceof pr)mr.warn(e.message);else{let t=Wr.create("idb-get",{originalErrorMessage:e?.message});mr.warn(t.message)}}})}function ZD(n,e){return V(this,null,function*(){try{let r=(yield iI()).transaction(ac,"readwrite");yield r.objectStore(ac).put(e,oI(n)),yield r.done}catch(t){if(t instanceof pr)mr.warn(t.message);else{let r=Wr.create("idb-set",{originalErrorMessage:t?.message});mr.warn(r.message)}}})}function oI(n){return`${n.name}!${n.options.appId}`}var hF=1024,pF=30,ey=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new ty(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return V(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=JD();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>pF){let i=mF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){mr.warn(e)}})}getHeartbeatsHeader(){return V(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=JD(),{heartbeatsToSend:t,unsentEntries:r}=gF(this._heartbeatsCache.heartbeats),i=ic(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return mr.warn(e),""}})}};function JD(){return new Date().toISOString().substring(0,10)}function gF(n,e=hF){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),XD(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),XD(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var ty=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return V(this,null,function*(){return Um()?UD().then(()=>!0).catch(()=>!1):!1})}read(){return V(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield fF(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return V(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return ZD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return V(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return ZD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function XD(n){return ic(JSON.stringify({version:2,heartbeats:n})).length}function mF(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function yF(n){sc(new gr("platform-logger",e=>new Qm(e),"PRIVATE")),sc(new gr("heartbeat",e=>new ey(e),"PRIVATE")),Kr(Ym,QD,n),Kr(Ym,QD,"esm2020"),Kr("fire-js","")}yF("");var vF="firebase",_F="12.9.0";Kr(vF,_F,"app");var sI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},aI={};var yr,ry;(function(){var n;function e(I,w){function b(){}b.prototype=w.prototype,I.F=w.prototype,I.prototype=new b,I.prototype.constructor=I,I.D=function(T,D,M){for(var C=Array(arguments.length-2),jt=2;jt<arguments.length;jt++)C[jt-2]=arguments[jt];return w.prototype[D].apply(T,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,w,b){b||(b=0);let T=Array(16);if(typeof w=="string")for(var D=0;D<16;++D)T[D]=w.charCodeAt(b++)|w.charCodeAt(b++)<<8|w.charCodeAt(b++)<<16|w.charCodeAt(b++)<<24;else for(D=0;D<16;++D)T[D]=w[b++]|w[b++]<<8|w[b++]<<16|w[b++]<<24;w=I.g[0],b=I.g[1],D=I.g[2];let M=I.g[3],C;C=w+(M^b&(D^M))+T[0]+3614090360&4294967295,w=b+(C<<7&4294967295|C>>>25),C=M+(D^w&(b^D))+T[1]+3905402710&4294967295,M=w+(C<<12&4294967295|C>>>20),C=D+(b^M&(w^b))+T[2]+606105819&4294967295,D=M+(C<<17&4294967295|C>>>15),C=b+(w^D&(M^w))+T[3]+3250441966&4294967295,b=D+(C<<22&4294967295|C>>>10),C=w+(M^b&(D^M))+T[4]+4118548399&4294967295,w=b+(C<<7&4294967295|C>>>25),C=M+(D^w&(b^D))+T[5]+1200080426&4294967295,M=w+(C<<12&4294967295|C>>>20),C=D+(b^M&(w^b))+T[6]+2821735955&4294967295,D=M+(C<<17&4294967295|C>>>15),C=b+(w^D&(M^w))+T[7]+4249261313&4294967295,b=D+(C<<22&4294967295|C>>>10),C=w+(M^b&(D^M))+T[8]+1770035416&4294967295,w=b+(C<<7&4294967295|C>>>25),C=M+(D^w&(b^D))+T[9]+2336552879&4294967295,M=w+(C<<12&4294967295|C>>>20),C=D+(b^M&(w^b))+T[10]+4294925233&4294967295,D=M+(C<<17&4294967295|C>>>15),C=b+(w^D&(M^w))+T[11]+2304563134&4294967295,b=D+(C<<22&4294967295|C>>>10),C=w+(M^b&(D^M))+T[12]+1804603682&4294967295,w=b+(C<<7&4294967295|C>>>25),C=M+(D^w&(b^D))+T[13]+4254626195&4294967295,M=w+(C<<12&4294967295|C>>>20),C=D+(b^M&(w^b))+T[14]+2792965006&4294967295,D=M+(C<<17&4294967295|C>>>15),C=b+(w^D&(M^w))+T[15]+1236535329&4294967295,b=D+(C<<22&4294967295|C>>>10),C=w+(D^M&(b^D))+T[1]+4129170786&4294967295,w=b+(C<<5&4294967295|C>>>27),C=M+(b^D&(w^b))+T[6]+3225465664&4294967295,M=w+(C<<9&4294967295|C>>>23),C=D+(w^b&(M^w))+T[11]+643717713&4294967295,D=M+(C<<14&4294967295|C>>>18),C=b+(M^w&(D^M))+T[0]+3921069994&4294967295,b=D+(C<<20&4294967295|C>>>12),C=w+(D^M&(b^D))+T[5]+3593408605&4294967295,w=b+(C<<5&4294967295|C>>>27),C=M+(b^D&(w^b))+T[10]+38016083&4294967295,M=w+(C<<9&4294967295|C>>>23),C=D+(w^b&(M^w))+T[15]+3634488961&4294967295,D=M+(C<<14&4294967295|C>>>18),C=b+(M^w&(D^M))+T[4]+3889429448&4294967295,b=D+(C<<20&4294967295|C>>>12),C=w+(D^M&(b^D))+T[9]+568446438&4294967295,w=b+(C<<5&4294967295|C>>>27),C=M+(b^D&(w^b))+T[14]+3275163606&4294967295,M=w+(C<<9&4294967295|C>>>23),C=D+(w^b&(M^w))+T[3]+4107603335&4294967295,D=M+(C<<14&4294967295|C>>>18),C=b+(M^w&(D^M))+T[8]+1163531501&4294967295,b=D+(C<<20&4294967295|C>>>12),C=w+(D^M&(b^D))+T[13]+2850285829&4294967295,w=b+(C<<5&4294967295|C>>>27),C=M+(b^D&(w^b))+T[2]+4243563512&4294967295,M=w+(C<<9&4294967295|C>>>23),C=D+(w^b&(M^w))+T[7]+1735328473&4294967295,D=M+(C<<14&4294967295|C>>>18),C=b+(M^w&(D^M))+T[12]+2368359562&4294967295,b=D+(C<<20&4294967295|C>>>12),C=w+(b^D^M)+T[5]+4294588738&4294967295,w=b+(C<<4&4294967295|C>>>28),C=M+(w^b^D)+T[8]+2272392833&4294967295,M=w+(C<<11&4294967295|C>>>21),C=D+(M^w^b)+T[11]+1839030562&4294967295,D=M+(C<<16&4294967295|C>>>16),C=b+(D^M^w)+T[14]+4259657740&4294967295,b=D+(C<<23&4294967295|C>>>9),C=w+(b^D^M)+T[1]+2763975236&4294967295,w=b+(C<<4&4294967295|C>>>28),C=M+(w^b^D)+T[4]+1272893353&4294967295,M=w+(C<<11&4294967295|C>>>21),C=D+(M^w^b)+T[7]+4139469664&4294967295,D=M+(C<<16&4294967295|C>>>16),C=b+(D^M^w)+T[10]+3200236656&4294967295,b=D+(C<<23&4294967295|C>>>9),C=w+(b^D^M)+T[13]+681279174&4294967295,w=b+(C<<4&4294967295|C>>>28),C=M+(w^b^D)+T[0]+3936430074&4294967295,M=w+(C<<11&4294967295|C>>>21),C=D+(M^w^b)+T[3]+3572445317&4294967295,D=M+(C<<16&4294967295|C>>>16),C=b+(D^M^w)+T[6]+76029189&4294967295,b=D+(C<<23&4294967295|C>>>9),C=w+(b^D^M)+T[9]+3654602809&4294967295,w=b+(C<<4&4294967295|C>>>28),C=M+(w^b^D)+T[12]+3873151461&4294967295,M=w+(C<<11&4294967295|C>>>21),C=D+(M^w^b)+T[15]+530742520&4294967295,D=M+(C<<16&4294967295|C>>>16),C=b+(D^M^w)+T[2]+3299628645&4294967295,b=D+(C<<23&4294967295|C>>>9),C=w+(D^(b|~M))+T[0]+4096336452&4294967295,w=b+(C<<6&4294967295|C>>>26),C=M+(b^(w|~D))+T[7]+1126891415&4294967295,M=w+(C<<10&4294967295|C>>>22),C=D+(w^(M|~b))+T[14]+2878612391&4294967295,D=M+(C<<15&4294967295|C>>>17),C=b+(M^(D|~w))+T[5]+4237533241&4294967295,b=D+(C<<21&4294967295|C>>>11),C=w+(D^(b|~M))+T[12]+1700485571&4294967295,w=b+(C<<6&4294967295|C>>>26),C=M+(b^(w|~D))+T[3]+2399980690&4294967295,M=w+(C<<10&4294967295|C>>>22),C=D+(w^(M|~b))+T[10]+4293915773&4294967295,D=M+(C<<15&4294967295|C>>>17),C=b+(M^(D|~w))+T[1]+2240044497&4294967295,b=D+(C<<21&4294967295|C>>>11),C=w+(D^(b|~M))+T[8]+1873313359&4294967295,w=b+(C<<6&4294967295|C>>>26),C=M+(b^(w|~D))+T[15]+4264355552&4294967295,M=w+(C<<10&4294967295|C>>>22),C=D+(w^(M|~b))+T[6]+2734768916&4294967295,D=M+(C<<15&4294967295|C>>>17),C=b+(M^(D|~w))+T[13]+1309151649&4294967295,b=D+(C<<21&4294967295|C>>>11),C=w+(D^(b|~M))+T[4]+4149444226&4294967295,w=b+(C<<6&4294967295|C>>>26),C=M+(b^(w|~D))+T[11]+3174756917&4294967295,M=w+(C<<10&4294967295|C>>>22),C=D+(w^(M|~b))+T[2]+718787259&4294967295,D=M+(C<<15&4294967295|C>>>17),C=b+(M^(D|~w))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(D+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+M&4294967295}r.prototype.v=function(I,w){w===void 0&&(w=I.length);let b=w-this.blockSize,T=this.C,D=this.h,M=0;for(;M<w;){if(D==0)for(;M<=b;)i(this,I,M),M+=this.blockSize;if(typeof I=="string"){for(;M<w;)if(T[D++]=I.charCodeAt(M++),D==this.blockSize){i(this,T),D=0;break}}else for(;M<w;)if(T[D++]=I[M++],D==this.blockSize){i(this,T),D=0;break}}this.h=D,this.o+=w},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;w=this.o*8;for(var b=I.length-8;b<I.length;++b)I[b]=w&255,w/=256;for(this.v(I),I=Array(16),w=0,b=0;b<4;++b)for(let T=0;T<32;T+=8)I[w++]=this.g[b]>>>T&255;return I};function o(I,w){var b=c;return Object.prototype.hasOwnProperty.call(b,I)?b[I]:b[I]=w(I)}function s(I,w){this.h=w;let b=[],T=!0;for(let D=I.length-1;D>=0;D--){let M=I[D]|0;T&&M==w||(b[D]=M,T=!1)}this.g=b}var c={};function l(I){return-128<=I&&I<128?o(I,function(w){return new s([w|0],w<0?-1:0)}):new s([I|0],I<0?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return p;if(I<0)return L(u(-I));let w=[],b=1;for(let T=0;I>=b;T++)w[T]=I/b|0,b*=4294967296;return new s(w,0)}function f(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return L(f(I.substring(1),w));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');let b=u(Math.pow(w,8)),T=p;for(let M=0;M<I.length;M+=8){var D=Math.min(8,I.length-M);let C=parseInt(I.substring(M,M+D),w);D<8?(D=u(Math.pow(w,D)),T=T.j(D).add(u(C))):(T=T.j(b),T=T.add(u(C)))}return T}var p=l(0),_=l(1),m=l(16777216);n=s.prototype,n.m=function(){if(O(this))return-L(this).m();let I=0,w=1;for(let b=0;b<this.g.length;b++){let T=this.i(b);I+=(T>=0?T:4294967296+T)*w,w*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(x(this))return"0";if(O(this))return"-"+L(this).toString(I);let w=u(Math.pow(I,6));var b=this;let T="";for(;;){let D=Ct(b,w).g;b=q(b,D.j(w));let M=((b.g.length>0?b.g[0]:b.h)>>>0).toString(I);if(b=D,x(b))return M+T;for(;M.length<6;)M="0"+M;T=M+T}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function x(I){if(I.h!=0)return!1;for(let w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function O(I){return I.h==-1}n.l=function(I){return I=q(this,I),O(I)?-1:x(I)?0:1};function L(I){let w=I.g.length,b=[];for(let T=0;T<w;T++)b[T]=~I.g[T];return new s(b,~I.h).add(_)}n.abs=function(){return O(this)?L(this):this},n.add=function(I){let w=Math.max(this.g.length,I.g.length),b=[],T=0;for(let D=0;D<=w;D++){let M=T+(this.i(D)&65535)+(I.i(D)&65535),C=(M>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);T=C>>>16,M&=65535,C&=65535,b[D]=C<<16|M}return new s(b,b[b.length-1]&-2147483648?-1:0)};function q(I,w){return I.add(L(w))}n.j=function(I){if(x(this)||x(I))return p;if(O(this))return O(I)?L(this).j(L(I)):L(L(this).j(I));if(O(I))return L(this.j(L(I)));if(this.l(m)<0&&I.l(m)<0)return u(this.m()*I.m());let w=this.g.length+I.g.length,b=[];for(var T=0;T<2*w;T++)b[T]=0;for(T=0;T<this.g.length;T++)for(let D=0;D<I.g.length;D++){let M=this.i(T)>>>16,C=this.i(T)&65535,jt=I.i(D)>>>16,Ar=I.i(D)&65535;b[2*T+2*D]+=C*Ar,J(b,2*T+2*D),b[2*T+2*D+1]+=M*Ar,J(b,2*T+2*D+1),b[2*T+2*D+1]+=C*jt,J(b,2*T+2*D+1),b[2*T+2*D+2]+=M*jt,J(b,2*T+2*D+2)}for(I=0;I<w;I++)b[I]=b[2*I+1]<<16|b[2*I];for(I=w;I<2*w;I++)b[I]=0;return new s(b,0)};function J(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function le(I,w){this.g=I,this.h=w}function Ct(I,w){if(x(w))throw Error("division by zero");if(x(I))return new le(p,p);if(O(I))return w=Ct(L(I),w),new le(L(w.g),L(w.h));if(O(w))return w=Ct(I,L(w)),new le(L(w.g),w.h);if(I.g.length>30){if(O(I)||O(w))throw Error("slowDivide_ only works with positive integers.");for(var b=_,T=w;T.l(I)<=0;)b=pn(b),T=pn(T);var D=mt(b,1),M=mt(T,1);for(T=mt(T,2),b=mt(b,2);!x(T);){var C=M.add(T);C.l(I)<=0&&(D=D.add(b),M=C),T=mt(T,1),b=mt(b,1)}return w=q(I,D.j(w)),new le(D,w)}for(D=p;I.l(w)>=0;){for(b=Math.max(1,Math.floor(I.m()/w.m())),T=Math.ceil(Math.log(b)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),M=u(b),C=M.j(w);O(C)||C.l(I)>0;)b-=T,M=u(b),C=M.j(w);x(M)&&(M=_),D=D.add(M),I=q(I,C)}return new le(D,I)}n.B=function(I){return Ct(this,I).h},n.and=function(I){let w=Math.max(this.g.length,I.g.length),b=[];for(let T=0;T<w;T++)b[T]=this.i(T)&I.i(T);return new s(b,this.h&I.h)},n.or=function(I){let w=Math.max(this.g.length,I.g.length),b=[];for(let T=0;T<w;T++)b[T]=this.i(T)|I.i(T);return new s(b,this.h|I.h)},n.xor=function(I){let w=Math.max(this.g.length,I.g.length),b=[];for(let T=0;T<w;T++)b[T]=this.i(T)^I.i(T);return new s(b,this.h^I.h)};function pn(I){let w=I.g.length+1,b=[];for(let T=0;T<w;T++)b[T]=I.i(T)<<1|I.i(T-1)>>>31;return new s(b,I.h)}function mt(I,w){let b=w>>5;w%=32;let T=I.g.length-b,D=[];for(let M=0;M<T;M++)D[M]=w>0?I.i(M+b)>>>w|I.i(M+b+1)<<32-w:I.i(M+b);return new s(D,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ry=aI.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=f,yr=aI.Integer=s}).apply(typeof sI<"u"?sI:typeof self<"u"?self:typeof window<"u"?window:{});var Cd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vr={};var iy,wF,ns,oy,cc,bd,sy,ay,cy;(function(){var n,e=Object.defineProperty;function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cd=="object"&&Cd];for(var d=0;d<a.length;++d){var h=a[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(a,d){if(d)e:{var h=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var S=a[g];if(!(S in h))break e;h=h[S]}a=a[a.length-1],g=h[a],d=d(g),d!=g&&d!=null&&e(h,a,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(d){var h=[],g;for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&h.push([g,d[g]]);return h}});var o=o||{},s=this||self;function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function l(a,d,h){return a.call.apply(a.bind,arguments)}function u(a,d,h){return u=l,u.apply(null,arguments)}function f(a,d){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function p(a,d){function h(){}h.prototype=d.prototype,a.Z=d.prototype,a.prototype=new h,a.prototype.constructor=a,a.Ob=function(g,S,A){for(var H=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)H[ge-2]=arguments[ge];return d.prototype[S].apply(g,H)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function m(a){let d=a.length;if(d>0){let h=Array(d);for(let g=0;g<d;g++)h[g]=a[g];return h}return[]}function x(a,d){for(let g=1;g<arguments.length;g++){let S=arguments[g];var h=typeof S;if(h=h!="object"?h:S?Array.isArray(S)?"array":h:"null",h=="array"||h=="object"&&typeof S.length=="number"){h=a.length||0;let A=S.length||0;a.length=h+A;for(let H=0;H<A;H++)a[h+H]=S[H]}else a.push(S)}}class O{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function L(a){s.setTimeout(()=>{throw a},0)}function q(){var a=I;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class J{constructor(){this.h=this.g=null}add(d,h){let g=le.get();g.set(d,h),this.h?this.h.next=g:this.g=g,this.h=g}}var le=new O(()=>new Ct,a=>a.reset());class Ct{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let pn,mt=!1,I=new J,w=()=>{let a=Promise.resolve(void 0);pn=()=>{a.then(b)}};function b(){for(var a;a=q();){try{a.h.call(a.g)}catch(h){L(h)}var d=le;d.j(a),d.h<100&&(d.h++,a.next=d.g,d.g=a)}mt=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};s.addEventListener("test",h,d),s.removeEventListener("test",h,d)}catch{}return a}();function C(a){return/^[\s\xa0]*$/.test(a)}function jt(a,d){D.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,d)}p(jt,D),jt.prototype.init=function(a,d){let h=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget,d||(h=="mouseover"?d=a.fromElement:h=="mouseout"&&(d=a.toElement)),this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&jt.Z.h.call(this)},jt.prototype.h=function(){jt.Z.h.call(this);let a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ar="closure_listenable_"+(Math.random()*1e6|0),fx=0;function hx(a,d,h,g,S){this.listener=a,this.proxy=null,this.src=d,this.type=h,this.capture=!!g,this.ha=S,this.key=++fx,this.da=this.fa=!1}function qc(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Gc(a,d,h){for(let g in a)d.call(h,a[g],g,a)}function px(a,d){for(let h in a)d.call(void 0,a[h],h,a)}function S_(a){let d={};for(let h in a)d[h]=a[h];return d}let x_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M_(a,d){let h,g;for(let S=1;S<arguments.length;S++){g=arguments[S];for(h in g)a[h]=g[h];for(let A=0;A<x_.length;A++)h=x_[A],Object.prototype.hasOwnProperty.call(g,h)&&(a[h]=g[h])}}function Wc(a){this.src=a,this.g={},this.h=0}Wc.prototype.add=function(a,d,h,g,S){let A=a.toString();a=this.g[A],a||(a=this.g[A]=[],this.h++);let H=Jf(a,d,g,S);return H>-1?(d=a[H],h||(d.fa=!1)):(d=new hx(d,this.src,A,!!g,S),d.fa=h,a.push(d)),d};function Zf(a,d){let h=d.type;if(h in a.g){var g=a.g[h],S=Array.prototype.indexOf.call(g,d,void 0),A;(A=S>=0)&&Array.prototype.splice.call(g,S,1),A&&(qc(d),a.g[h].length==0&&(delete a.g[h],a.h--))}}function Jf(a,d,h,g){for(let S=0;S<a.length;++S){let A=a[S];if(!A.da&&A.listener==d&&A.capture==!!h&&A.ha==g)return S}return-1}var Xf="closure_lm_"+(Math.random()*1e6|0),eh={};function A_(a,d,h,g,S){if(g&&g.once)return P_(a,d,h,g,S);if(Array.isArray(d)){for(let A=0;A<d.length;A++)A_(a,d[A],h,g,S);return null}return h=ih(h),a&&a[Ar]?a.J(d,h,c(g)?!!g.capture:!!g,S):R_(a,d,h,!1,g,S)}function R_(a,d,h,g,S,A){if(!d)throw Error("Invalid event type");let H=c(S)?!!S.capture:!!S,ge=nh(a);if(ge||(a[Xf]=ge=new Wc(a)),h=ge.add(d,h,g,H,A),h.proxy)return h;if(g=gx(),h.proxy=g,g.src=a,g.listener=h,a.addEventListener)M||(S=H),S===void 0&&(S=!1),a.addEventListener(d.toString(),g,S);else if(a.attachEvent)a.attachEvent(O_(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function gx(){function a(h){return d.call(a.src,a.listener,h)}let d=mx;return a}function P_(a,d,h,g,S){if(Array.isArray(d)){for(let A=0;A<d.length;A++)P_(a,d[A],h,g,S);return null}return h=ih(h),a&&a[Ar]?a.K(d,h,c(g)?!!g.capture:!!g,S):R_(a,d,h,!0,g,S)}function N_(a,d,h,g,S){if(Array.isArray(d))for(var A=0;A<d.length;A++)N_(a,d[A],h,g,S);else g=c(g)?!!g.capture:!!g,h=ih(h),a&&a[Ar]?(a=a.i,A=String(d).toString(),A in a.g&&(d=a.g[A],h=Jf(d,h,g,S),h>-1&&(qc(d[h]),Array.prototype.splice.call(d,h,1),d.length==0&&(delete a.g[A],a.h--)))):a&&(a=nh(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Jf(d,h,g,S)),(h=a>-1?d[a]:null)&&th(h))}function th(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Ar])Zf(d.i,a);else{var h=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(h,g,a.capture):d.detachEvent?d.detachEvent(O_(h),g):d.addListener&&d.removeListener&&d.removeListener(g),(h=nh(d))?(Zf(h,a),h.h==0&&(h.src=null,d[Xf]=null)):qc(a)}}}function O_(a){return a in eh?eh[a]:eh[a]="on"+a}function mx(a,d){if(a.da)a=!0;else{d=new jt(d,this);let h=a.listener,g=a.ha||a.src;a.fa&&th(a),a=h.call(g,d)}return a}function nh(a){return a=a[Xf],a instanceof Wc?a:null}var rh="__closure_events_fn_"+(Math.random()*1e9>>>0);function ih(a){return typeof a=="function"?a:(a[rh]||(a[rh]=function(d){return a.handleEvent(d)}),a[rh])}function bt(){T.call(this),this.i=new Wc(this),this.M=this,this.G=null}p(bt,T),bt.prototype[Ar]=!0,bt.prototype.removeEventListener=function(a,d,h,g){N_(this,a,d,h,g)};function Pt(a,d){var h,g=a.G;if(g)for(h=[];g;g=g.G)h.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new D(d,a);else if(d instanceof D)d.target=d.target||a;else{var S=d;d=new D(g,a),M_(d,S)}S=!0;let A,H;if(h)for(H=h.length-1;H>=0;H--)A=d.g=h[H],S=Kc(A,g,!0,d)&&S;if(A=d.g=a,S=Kc(A,g,!0,d)&&S,S=Kc(A,g,!1,d)&&S,h)for(H=0;H<h.length;H++)A=d.g=h[H],S=Kc(A,g,!1,d)&&S}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var a=this.i;for(let d in a.g){let h=a.g[d];for(let g=0;g<h.length;g++)qc(h[g]);delete a.g[d],a.h--}}this.G=null},bt.prototype.J=function(a,d,h,g){return this.i.add(String(a),d,!1,h,g)},bt.prototype.K=function(a,d,h,g){return this.i.add(String(a),d,!0,h,g)};function Kc(a,d,h,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();let S=!0;for(let A=0;A<d.length;++A){let H=d[A];if(H&&!H.da&&H.capture==h){let ge=H.listener,ot=H.ha||H.src;H.fa&&Zf(a.i,H),S=ge.call(ot,g)!==!1&&S}}return S&&!g.defaultPrevented}function yx(a,d){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(a,d||0)}function k_(a){a.g=yx(()=>{a.g=null,a.i&&(a.i=!1,k_(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class vx extends T{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:k_(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vs(a){T.call(this),this.h=a,this.g={}}p(Vs,T);var V_=[];function F_(a){Gc(a.g,function(d,h){this.g.hasOwnProperty(h)&&th(d)},a),a.g={}}Vs.prototype.N=function(){Vs.Z.N.call(this),F_(this)},Vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oh=s.JSON.stringify,_x=s.JSON.parse,wx=class{stringify(a){return s.JSON.stringify(a,void 0)}parse(a){return s.JSON.parse(a,void 0)}};function L_(){}function j_(){}var Fs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function sh(){D.call(this,"d")}p(sh,D);function ah(){D.call(this,"c")}p(ah,D);var ni={},B_=null;function Qc(){return B_=B_||new bt}ni.Ia="serverreachability";function U_(a){D.call(this,ni.Ia,a)}p(U_,D);function Ls(a){let d=Qc();Pt(d,new U_(d))}ni.STAT_EVENT="statevent";function $_(a,d){D.call(this,ni.STAT_EVENT,a),this.stat=d}p($_,D);function Nt(a){let d=Qc();Pt(d,new $_(d,a))}ni.Ja="timingevent";function H_(a,d){D.call(this,ni.Ja,a),this.size=d}p(H_,D);function js(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){a()},d)}function Bs(){this.g=!0}Bs.prototype.ua=function(){this.g=!1};function Cx(a,d,h,g,S,A){a.info(function(){if(a.g)if(A){var H="",ge=A.split("&");for(let Ve=0;Ve<ge.length;Ve++){var ot=ge[Ve].split("=");if(ot.length>1){let dt=ot[0];ot=ot[1];let An=dt.split("_");H=An.length>=2&&An[1]=="type"?H+(dt+"="+ot+"&"):H+(dt+"=redacted&")}}}else H=null;else H=A;return"XMLHTTP REQ ("+g+") [attempt "+S+"]: "+d+`
`+h+`
`+H})}function bx(a,d,h,g,S,A,H){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+S+"]: "+d+`
`+h+`
`+A+" "+H})}function no(a,d,h,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+Dx(a,h)+(g?" "+g:"")})}function Ex(a,d){a.info(function(){return"TIMEOUT: "+d})}Bs.prototype.info=function(){};function Dx(a,d){if(!a.g)return d;if(!d)return null;try{let A=JSON.parse(d);if(A){for(a=0;a<A.length;a++)if(Array.isArray(A[a])){var h=A[a];if(!(h.length<2)){var g=h[1];if(Array.isArray(g)&&!(g.length<1)){var S=g[0];if(S!="noop"&&S!="stop"&&S!="close")for(let H=1;H<g.length;H++)g[H]=""}}}}return oh(A)}catch{return d}}var Yc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},z_={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},q_;function ch(){}p(ch,L_),ch.prototype.g=function(){return new XMLHttpRequest},q_=new ch;function Us(a){return encodeURIComponent(String(a))}function Ix(a){var d=1;a=a.split(":");let h=[];for(;d>0&&a.length;)h.push(a.shift()),d--;return a.length&&h.push(a.join(":")),h}function Rr(a,d,h,g){this.j=a,this.i=d,this.l=h,this.S=g||1,this.V=new Vs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new G_}function G_(){this.i=null,this.g="",this.h=!1}var W_={},lh={};function uh(a,d,h){a.M=1,a.A=Jc(Mn(d)),a.u=h,a.R=!0,K_(a,null)}function K_(a,d){a.F=Date.now(),Zc(a),a.B=Mn(a.A);var h=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),a0(h.i,"t",g),a.C=0,h=a.j.L,a.h=new G_,a.g=I0(a.j,h?d:null,!a.u),a.P>0&&(a.O=new vx(u(a.Y,a,a.g),a.P)),d=a.V,h=a.g,g=a.ba;var S="readystatechange";Array.isArray(S)||(S&&(V_[0]=S.toString()),S=V_);for(let A=0;A<S.length;A++){let H=A_(h,S[A],g||d.handleEvent,!1,d.h||d);if(!H)break;d.g[H.key]=H}d=a.J?S_(a.J):{},a.u?(a.v||(a.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,d)):(a.v="GET",a.g.ea(a.B,a.v,null,d)),Ls(),Cx(a.i,a.v,a.B,a.l,a.S,a.u)}Rr.prototype.ba=function(a){a=a.target;let d=this.O;d&&Or(a)==3?d.j():this.Y(a)},Rr.prototype.Y=function(a){try{if(a==this.g)e:{let ge=Or(this.g),ot=this.g.ya(),Ve=this.g.ca();if(!(ge<3)&&(ge!=3||this.g&&(this.h.h||this.g.la()||p0(this.g)))){this.K||ge!=4||ot==7||(ot==8||Ve<=0?Ls(3):Ls(2)),dh(this);var d=this.g.ca();this.X=d;var h=Tx(this);if(this.o=d==200,bx(this.i,this.v,this.B,this.l,this.S,ge,d),this.o){if(this.U&&!this.L){t:{if(this.g){var g,S=this.g;if((g=S.g?S.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(g)){var A=g;break t}}A=null}if(a=A)no(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,fh(this,a);else{this.o=!1,this.m=3,Nt(12),ri(this),$s(this);break e}}if(this.R){a=!0;let dt;for(;!this.K&&this.C<h.length;)if(dt=Sx(this,h),dt==lh){ge==4&&(this.m=4,Nt(14),a=!1),no(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==W_){this.m=4,Nt(15),no(this.i,this.l,h,"[Invalid Chunk]"),a=!1;break}else no(this.i,this.l,dt,null),fh(this,dt);if(Q_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ge!=4||h.length!=0||this.h.h||(this.m=1,Nt(16),a=!1),this.o=this.o&&a,!a)no(this.i,this.l,h,"[Invalid Chunked Response]"),ri(this),$s(this);else if(h.length>0&&!this.W){this.W=!0;var H=this.j;H.g==this&&H.aa&&!H.P&&(H.j.info("Great, no buffering proxy detected. Bytes received: "+h.length),_h(H),H.P=!0,Nt(11))}}else no(this.i,this.l,h,null),fh(this,h);ge==4&&ri(this),this.o&&!this.K&&(ge==4?C0(this.j,this):(this.o=!1,Zc(this)))}else Ux(this.g),d==400&&h.indexOf("Unknown SID")>0?(this.m=3,Nt(12)):(this.m=0,Nt(13)),ri(this),$s(this)}}}catch{}finally{}};function Tx(a){if(!Q_(a))return a.g.la();let d=p0(a.g);if(d==="")return"";let h="",g=d.length,S=Or(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return ri(a),$s(a),"";a.h.i=new s.TextDecoder}for(let A=0;A<g;A++)a.h.h=!0,h+=a.h.i.decode(d[A],{stream:!(S&&A==g-1)});return d.length=0,a.h.g+=h,a.C=0,a.h.g}function Q_(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Sx(a,d){var h=a.C,g=d.indexOf(`
`,h);return g==-1?lh:(h=Number(d.substring(h,g)),isNaN(h)?W_:(g+=1,g+h>d.length?lh:(d=d.slice(g,g+h),a.C=g+h,d)))}Rr.prototype.cancel=function(){this.K=!0,ri(this)};function Zc(a){a.T=Date.now()+a.H,Y_(a,a.H)}function Y_(a,d){if(a.D!=null)throw Error("WatchDog timer not null");a.D=js(u(a.aa,a),d)}function dh(a){a.D&&(s.clearTimeout(a.D),a.D=null)}Rr.prototype.aa=function(){this.D=null;let a=Date.now();a-this.T>=0?(Ex(this.i,this.B),this.M!=2&&(Ls(),Nt(17)),ri(this),this.m=2,$s(this)):Y_(this,this.T-a)};function $s(a){a.j.I==0||a.K||C0(a.j,a)}function ri(a){dh(a);var d=a.O;d&&typeof d.dispose=="function"&&d.dispose(),a.O=null,F_(a.V),a.g&&(d=a.g,a.g=null,d.abort(),d.dispose())}function fh(a,d){try{var h=a.j;if(h.I!=0&&(h.g==a||hh(h.h,a))){if(!a.L&&hh(h.h,a)&&h.I==3){try{var g=h.Ba.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var S=g;if(S[0]==0){e:if(!h.v){if(h.g)if(h.g.F+3e3<a.F)il(h),nl(h);else break e;vh(h),Nt(18)}}else h.xa=S[1],0<h.xa-h.K&&S[2]<37500&&h.F&&h.A==0&&!h.C&&(h.C=js(u(h.Va,h),6e3));X_(h.h)<=1&&h.ta&&(h.ta=void 0)}else oi(h,11)}else if((a.L||h.g==a)&&il(h),!C(d))for(S=h.Ba.g.parse(d),d=0;d<S.length;d++){let Ve=S[d],dt=Ve[0];if(!(dt<=h.K))if(h.K=dt,Ve=Ve[1],h.I==2)if(Ve[0]=="c"){h.M=Ve[1],h.ba=Ve[2];let An=Ve[3];An!=null&&(h.ka=An,h.j.info("VER="+h.ka));let si=Ve[4];si!=null&&(h.za=si,h.j.info("SVER="+h.za));let kr=Ve[5];kr!=null&&typeof kr=="number"&&kr>0&&(g=1.5*kr,h.O=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let Vr=a.g;if(Vr){let sl=Vr.g?Vr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sl){var A=g.h;A.g||sl.indexOf("spdy")==-1&&sl.indexOf("quic")==-1&&sl.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(ph(A,A.h),A.h=null))}if(g.G){let wh=Vr.g?Vr.g.getResponseHeader("X-HTTP-Session-Id"):null;wh&&(g.wa=wh,je(g.J,g.G,wh))}}h.I=3,h.l&&h.l.ra(),h.aa&&(h.T=Date.now()-a.F,h.j.info("Handshake RTT: "+h.T+"ms")),g=h;var H=a;if(g.na=D0(g,g.L?g.ba:null,g.W),H.L){e0(g.h,H);var ge=H,ot=g.O;ot&&(ge.H=ot),ge.D&&(dh(ge),Zc(ge)),g.g=H}else _0(g);h.i.length>0&&rl(h)}else Ve[0]!="stop"&&Ve[0]!="close"||oi(h,7);else h.I==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?oi(h,7):yh(h):Ve[0]!="noop"&&h.l&&h.l.qa(Ve),h.A=0)}}Ls(4)}catch{}}var xx=class{constructor(a,d){this.g=a,this.map=d}};function Z_(a){this.l=a||10,s.PerformanceNavigationTiming?(a=s.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function J_(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function X_(a){return a.h?1:a.g?a.g.size:0}function hh(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function ph(a,d){a.g?a.g.add(d):a.h=d}function e0(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Z_.prototype.cancel=function(){if(this.i=t0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function t0(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let h of a.g.values())d=d.concat(h.G);return d}return m(a.i)}var n0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mx(a,d){if(a){a=a.split("&");for(let h=0;h<a.length;h++){let g=a[h].indexOf("="),S,A=null;g>=0?(S=a[h].substring(0,g),A=a[h].substring(g+1)):S=a[h],d(S,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function Pr(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;a instanceof Pr?(this.l=a.l,Hs(this,a.j),this.o=a.o,this.g=a.g,zs(this,a.u),this.h=a.h,gh(this,c0(a.i)),this.m=a.m):a&&(d=String(a).match(n0))?(this.l=!1,Hs(this,d[1]||"",!0),this.o=qs(d[2]||""),this.g=qs(d[3]||"",!0),zs(this,d[4]),this.h=qs(d[5]||"",!0),gh(this,d[6]||"",!0),this.m=qs(d[7]||"")):(this.l=!1,this.i=new Ws(null,this.l))}Pr.prototype.toString=function(){let a=[];var d=this.j;d&&a.push(Gs(d,r0,!0),":");var h=this.g;return(h||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Gs(d,r0,!0),"@"),a.push(Us(h).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.u,h!=null&&a.push(":",String(h))),(h=this.h)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(Gs(h,h.charAt(0)=="/"?Px:Rx,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",Gs(h,Ox)),a.join("")},Pr.prototype.resolve=function(a){let d=Mn(this),h=!!a.j;h?Hs(d,a.j):h=!!a.o,h?d.o=a.o:h=!!a.g,h?d.g=a.g:h=a.u!=null;var g=a.h;if(h)zs(d,a.u);else if(h=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var S=d.h.lastIndexOf("/");S!=-1&&(g=d.h.slice(0,S+1)+g)}if(S=g,S==".."||S==".")g="";else if(S.indexOf("./")!=-1||S.indexOf("/.")!=-1){g=S.lastIndexOf("/",0)==0,S=S.split("/");let A=[];for(let H=0;H<S.length;){let ge=S[H++];ge=="."?g&&H==S.length&&A.push(""):ge==".."?((A.length>1||A.length==1&&A[0]!="")&&A.pop(),g&&H==S.length&&A.push("")):(A.push(ge),g=!0)}g=A.join("/")}else g=S}return h?d.h=g:h=a.i.toString()!=="",h?gh(d,c0(a.i)):h=!!a.m,h&&(d.m=a.m),d};function Mn(a){return new Pr(a)}function Hs(a,d,h){a.j=h?qs(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function zs(a,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);a.u=d}else a.u=null}function gh(a,d,h){d instanceof Ws?(a.i=d,kx(a.i,a.l)):(h||(d=Gs(d,Nx)),a.i=new Ws(d,a.l))}function je(a,d,h){a.i.set(d,h)}function Jc(a){return je(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function qs(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Gs(a,d,h){return typeof a=="string"?(a=encodeURI(a).replace(d,Ax),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Ax(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var r0=/[#\/\?@]/g,Rx=/[#\?:]/g,Px=/[#\?]/g,Nx=/[#\?@]/g,Ox=/#/g;function Ws(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function ii(a){a.g||(a.g=new Map,a.h=0,a.i&&Mx(a.i,function(d,h){a.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}n=Ws.prototype,n.add=function(a,d){ii(this),this.i=null,a=ro(this,a);let h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(d),this.h+=1,this};function i0(a,d){ii(a),d=ro(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function o0(a,d){return ii(a),d=ro(a,d),a.g.has(d)}n.forEach=function(a,d){ii(this),this.g.forEach(function(h,g){h.forEach(function(S){a.call(d,S,g,this)},this)},this)};function s0(a,d){ii(a);let h=[];if(typeof d=="string")o0(a,d)&&(h=h.concat(a.g.get(ro(a,d))));else for(a=Array.from(a.g.values()),d=0;d<a.length;d++)h=h.concat(a[d]);return h}n.set=function(a,d){return ii(this),this.i=null,a=ro(this,a),o0(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},n.get=function(a,d){return a?(a=s0(this,a),a.length>0?String(a[0]):d):d};function a0(a,d,h){i0(a,d),h.length>0&&(a.i=null,a.g.set(ro(a,d),m(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(let g=0;g<d.length;g++){var h=d[g];let S=Us(h);h=s0(this,h);for(let A=0;A<h.length;A++){let H=S;h[A]!==""&&(H+="="+Us(h[A])),a.push(H)}}return this.i=a.join("&")};function c0(a){let d=new Ws;return d.i=a.i,a.g&&(d.g=new Map(a.g),d.h=a.h),d}function ro(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function kx(a,d){d&&!a.j&&(ii(a),a.i=null,a.g.forEach(function(h,g){let S=g.toLowerCase();g!=S&&(i0(this,g),a0(this,S,h))},a)),a.j=d}function Vx(a,d){let h=new Bs;if(s.Image){let g=new Image;g.onload=f(Nr,h,"TestLoadImage: loaded",!0,d,g),g.onerror=f(Nr,h,"TestLoadImage: error",!1,d,g),g.onabort=f(Nr,h,"TestLoadImage: abort",!1,d,g),g.ontimeout=f(Nr,h,"TestLoadImage: timeout",!1,d,g),s.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function Fx(a,d){let h=new Bs,g=new AbortController,S=setTimeout(()=>{g.abort(),Nr(h,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(A=>{clearTimeout(S),A.ok?Nr(h,"TestPingServer: ok",!0,d):Nr(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(S),Nr(h,"TestPingServer: error",!1,d)})}function Nr(a,d,h,g,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),g(h)}catch{}}function Lx(){this.g=new wx}function Xc(a){this.i=a.Sb||null,this.h=a.ab||!1}p(Xc,L_),Xc.prototype.g=function(){return new el(this.i,this.h)};function el(a,d){bt.call(this),this.H=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(el,bt),n=el.prototype,n.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=d,this.readyState=1,Qs(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(d.body=a),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ks(this)),this.readyState=0},n.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Qs(this)),this.g&&(this.readyState=3,Qs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;l0(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function l0(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}n.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Ks(this):Qs(this),this.readyState==3&&l0(this)}},n.Oa=function(a){this.g&&(this.response=this.responseText=a,Ks(this))},n.Na=function(a){this.g&&(this.response=a,Ks(this))},n.ga=function(){this.g&&Ks(this)};function Ks(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Qs(a)}n.setRequestHeader=function(a,d){this.A.append(a,d)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=d.next();return a.join(`\r
`)};function Qs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(el.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function u0(a){let d="";return Gc(a,function(h,g){d+=g,d+=":",d+=h,d+=`\r
`}),d}function mh(a,d,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=u0(h),typeof a=="string"?h!=null&&Us(h):je(a,d,h))}function He(a){bt.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(He,bt);var jx=/^https?$/i,Bx=["POST","PUT"];n=He.prototype,n.Fa=function(a){this.H=a},n.ea=function(a,d,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():q_.g(),this.g.onreadystatechange=_(u(this.Ca,this));try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(A){d0(this,A);return}if(a=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var S in g)h.set(S,g[S]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())h.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(A=>A.toLowerCase()=="content-type"),S=s.FormData&&a instanceof s.FormData,!(Array.prototype.indexOf.call(Bx,d,void 0)>=0)||g||S||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,H]of h)this.g.setRequestHeader(A,H);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(A){d0(this,A)}};function d0(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.o=5,f0(a),tl(a)}function f0(a){a.A||(a.A=!0,Pt(a,"complete"),Pt(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,Pt(this,"complete"),Pt(this,"abort"),tl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tl(this,!0)),He.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?h0(this):this.Xa())},n.Xa=function(){h0(this)};function h0(a){if(a.h&&typeof o<"u"){if(a.v&&Or(a)==4)setTimeout(a.Ca.bind(a),0);else if(Pt(a,"readystatechange"),Or(a)==4){a.h=!1;try{let A=a.ca();e:switch(A){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var g;if(g=A===0){let H=String(a.D).match(n0)[1]||null;!H&&s.self&&s.self.location&&(H=s.self.location.protocol.slice(0,-1)),g=!jx.test(H?H.toLowerCase():"")}h=g}if(h)Pt(a,"complete"),Pt(a,"success");else{a.o=6;try{var S=Or(a)>2?a.g.statusText:""}catch{S=""}a.l=S+" ["+a.ca()+"]",f0(a)}}finally{tl(a)}}}}function tl(a,d){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);let h=a.g;a.g=null,d||Pt(a,"ready");try{h.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Or(a){return a.g?a.g.readyState:0}n.ca=function(){try{return Or(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),_x(d)}};function p0(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Ux(a){let d={};a=(a.g&&Or(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(C(a[g]))continue;var h=Ix(a[g]);let S=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let A=d[S]||[];d[S]=A,A.push(h)}px(d,function(g){return g.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ys(a,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||d}function g0(a){this.za=0,this.i=[],this.j=new Bs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ys("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ys("baseRetryDelayMs",5e3,a),this.Za=Ys("retryDelaySeedMs",1e4,a),this.Ta=Ys("forwardChannelMaxRetries",2,a),this.va=Ys("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Z_(a&&a.concurrentRequestLimit),this.Ba=new Lx,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=g0.prototype,n.ka=8,n.I=1,n.connect=function(a,d,h,g){Nt(0),this.W=a,this.H=d||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.J=D0(this,null,this.W),rl(this)};function yh(a){if(m0(a),a.I==3){var d=a.V++,h=Mn(a.J);if(je(h,"SID",a.M),je(h,"RID",d),je(h,"TYPE","terminate"),Zs(a,h),d=new Rr(a,a.j,d),d.M=2,d.A=Jc(Mn(h)),h=!1,s.navigator&&s.navigator.sendBeacon)try{h=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!h&&s.Image&&(new Image().src=d.A,h=!0),h||(d.g=I0(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Zc(d)}E0(a)}function nl(a){a.g&&(_h(a),a.g.cancel(),a.g=null)}function m0(a){nl(a),a.v&&(s.clearTimeout(a.v),a.v=null),il(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&s.clearTimeout(a.m),a.m=null)}function rl(a){if(!J_(a.h)&&!a.m){a.m=!0;var d=a.Ea;pn||w(),mt||(pn(),mt=!0),I.add(d,a),a.D=0}}function $x(a,d){return X_(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=d.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=js(u(a.Ea,a,d),b0(a,a.D)),a.D++,!0)}n.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;let S=new Rr(this,this.j,a),A=this.o;if(this.U&&(A?(A=S_(A),M_(A,this.U)):A=this.U),this.u!==null||this.R||(S.J=A,A=null),this.S)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,d>4096){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=v0(this,S,d),h=Mn(this.J),je(h,"RID",a),je(h,"CVER",22),this.G&&je(h,"X-HTTP-Session-Id",this.G),Zs(this,h),A&&(this.R?d="headers="+Us(u0(A))+"&"+d:this.u&&mh(h,this.u,A)),ph(this.h,S),this.Ra&&je(h,"TYPE","init"),this.S?(je(h,"$req",d),je(h,"SID","null"),S.U=!0,uh(S,h,null)):uh(S,h,d),this.I=2}}else this.I==3&&(a?y0(this,a):this.i.length==0||J_(this.h)||y0(this))};function y0(a,d){var h;d?h=d.l:h=a.V++;let g=Mn(a.J);je(g,"SID",a.M),je(g,"RID",h),je(g,"AID",a.K),Zs(a,g),a.u&&a.o&&mh(g,a.u,a.o),h=new Rr(a,a.j,h,a.D+1),a.u===null&&(h.J=a.o),d&&(a.i=d.G.concat(a.i)),d=v0(a,h,1e3),h.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),ph(a.h,h),uh(h,g,d)}function Zs(a,d){a.H&&Gc(a.H,function(h,g){je(d,g,h)}),a.l&&Gc({},function(h,g){je(d,g,h)})}function v0(a,d,h){h=Math.min(a.i.length,h);let g=a.l?u(a.l.Ka,a.l,a):null;e:{var S=a.i;let ge=-1;for(;;){let ot=["count="+h];ge==-1?h>0?(ge=S[0].g,ot.push("ofs="+ge)):ge=0:ot.push("ofs="+ge);let Ve=!0;for(let dt=0;dt<h;dt++){var A=S[dt].g;let An=S[dt].map;if(A-=ge,A<0)ge=Math.max(0,S[dt].g-100),Ve=!1;else try{A="req"+A+"_"||"";try{var H=An instanceof Map?An:Object.entries(An);for(let[si,kr]of H){let Vr=kr;c(kr)&&(Vr=oh(kr)),ot.push(A+si+"="+encodeURIComponent(Vr))}}catch(si){throw ot.push(A+"type="+encodeURIComponent("_badmap")),si}}catch{g&&g(An)}}if(Ve){H=ot.join("&");break e}}H=void 0}return a=a.i.splice(0,h),d.G=a,H}function _0(a){if(!a.g&&!a.v){a.Y=1;var d=a.Da;pn||w(),mt||(pn(),mt=!0),I.add(d,a),a.A=0}}function vh(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=js(u(a.Da,a),b0(a,a.A)),a.A++,!0)}n.Da=function(){if(this.v=null,w0(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=js(u(this.Wa,this),a)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Nt(10),nl(this),w0(this))};function _h(a){a.B!=null&&(s.clearTimeout(a.B),a.B=null)}function w0(a){a.g=new Rr(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var d=Mn(a.na);je(d,"RID","rpc"),je(d,"SID",a.M),je(d,"AID",a.K),je(d,"CI",a.F?"0":"1"),!a.F&&a.ia&&je(d,"TO",a.ia),je(d,"TYPE","xmlhttp"),Zs(a,d),a.u&&a.o&&mh(d,a.u,a.o),a.O&&(a.g.H=a.O);var h=a.g;a=a.ba,h.M=1,h.A=Jc(Mn(d)),h.u=null,h.R=!0,K_(h,a)}n.Va=function(){this.C!=null&&(this.C=null,nl(this),vh(this),Nt(19))};function il(a){a.C!=null&&(s.clearTimeout(a.C),a.C=null)}function C0(a,d){var h=null;if(a.g==d){il(a),_h(a),a.g=null;var g=2}else if(hh(a.h,d))h=d.G,e0(a.h,d),g=1;else return;if(a.I!=0){if(d.o)if(g==1){h=d.u?d.u.length:0,d=Date.now()-d.F;var S=a.D;g=Qc(),Pt(g,new H_(g,h)),rl(a)}else _0(a);else if(S=d.m,S==3||S==0&&d.X>0||!(g==1&&$x(a,d)||g==2&&vh(a)))switch(h&&h.length>0&&(d=a.h,d.i=d.i.concat(h)),S){case 1:oi(a,5);break;case 4:oi(a,10);break;case 3:oi(a,6);break;default:oi(a,2)}}}function b0(a,d){let h=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(h*=2),h*d}function oi(a,d){if(a.j.info("Error code "+d),d==2){var h=u(a.bb,a),g=a.Ua;let S=!g;g=new Pr(g||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Hs(g,"https"),Jc(g),S?Vx(g.toString(),h):Fx(g.toString(),h)}else Nt(2);a.I=0,a.l&&a.l.pa(d),E0(a),m0(a)}n.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function E0(a){if(a.I=0,a.ja=[],a.l){let d=t0(a.h);(d.length!=0||a.i.length!=0)&&(x(a.ja,d),x(a.ja,a.i),a.h.i.length=0,m(a.i),a.i.length=0),a.l.oa()}}function D0(a,d,h){var g=h instanceof Pr?Mn(h):new Pr(h);if(g.g!="")d&&(g.g=d+"."+g.g),zs(g,g.u);else{var S=s.location;g=S.protocol,d=d?d+"."+S.hostname:S.hostname,S=+S.port;let A=new Pr(null);g&&Hs(A,g),d&&(A.g=d),S&&zs(A,S),h&&(A.h=h),g=A}return h=a.G,d=a.wa,h&&d&&je(g,h,d),je(g,"VER",a.ka),Zs(a,g),g}function I0(a,d,h){if(d&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Aa&&!a.ma?new He(new Xc({ab:h})):new He(a.ma),d.Fa(a.L),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function T0(){}n=T0.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ol(){}ol.prototype.g=function(a,d){return new Qt(a,d)};function Qt(a,d){bt.call(this),this.g=new g0(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(a?a["X-WebChannel-Client-Profile"]=d.sa:a={"X-WebChannel-Client-Profile":d.sa}),this.g.U=a,(a=d&&d.Qb)&&!C(a)&&(this.g.u=a),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!C(d)&&(this.g.G=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new io(this)}p(Qt,bt),Qt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){yh(this.g)},Qt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.v&&(h={},h.__data__=oh(a),a=h);d.i.push(new xx(d.Ya++,a)),d.I==3&&rl(d)},Qt.prototype.N=function(){this.g.l=null,delete this.j,yh(this.g),delete this.g,Qt.Z.N.call(this)};function S0(a){sh.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let h in d){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}p(S0,sh);function x0(){ah.call(this),this.status=1}p(x0,ah);function io(a){this.g=a}p(io,T0),io.prototype.ra=function(){Pt(this.g,"a")},io.prototype.qa=function(a){Pt(this.g,new S0(a))},io.prototype.pa=function(a){Pt(this.g,new x0)},io.prototype.oa=function(){Pt(this.g,"b")},ol.prototype.createWebChannel=ol.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,cy=vr.createWebChannelTransport=function(){return new ol},ay=vr.getStatEventTarget=function(){return Qc()},sy=vr.Event=ni,bd=vr.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Yc.NO_ERROR=0,Yc.TIMEOUT=8,Yc.HTTP_ERROR=6,cc=vr.ErrorCode=Yc,z_.COMPLETE="complete",oy=vr.EventType=z_,j_.EventType=Fs,Fs.OPEN="a",Fs.CLOSE="b",Fs.ERROR="c",Fs.MESSAGE="d",bt.prototype.listen=bt.prototype.J,ns=vr.WebChannel=j_,wF=vr.FetchXmlHttpFactory=Xc,He.prototype.listenOnce=He.prototype.K,He.prototype.getLastError=He.prototype.Ha,He.prototype.getLastErrorCode=He.prototype.ya,He.prototype.getStatus=He.prototype.ca,He.prototype.getResponseJson=He.prototype.La,He.prototype.getResponseText=He.prototype.la,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Fa,iy=vr.XhrIo=He}).apply(typeof Cd<"u"?Cd:typeof self<"u"?self:typeof window<"u"?window:{});var ht=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");var bs="12.9.0";function GI(n){bs=n}var $i=new ts("@firebase/firestore");function rs(){return $i.logLevel}function z(n,...e){if($i.logLevel<=Te.DEBUG){let t=e.map(jv);$i.debug(`Firestore (${bs}): ${n}`,...t)}}function wr(n,...e){if($i.logLevel<=Te.ERROR){let t=e.map(jv);$i.error(`Firestore (${bs}): ${n}`,...t)}}function Cr(n,...e){if($i.logLevel<=Te.WARN){let t=e.map(jv);$i.warn(`Firestore (${bs}): ${n}`,...t)}}function jv(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ee(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,WI(n,r,t)}function WI(n,e,t){let r=`FIRESTORE (${bs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw wr(r),new Error(r)}function ke(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||WI(e,i,r)}function se(n,e){return n}var F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},W=class extends pr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Wn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Md=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ad=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ht.UNAUTHENTICATED))}shutdown(){}},py=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Rd=class{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ke(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),o=new Wn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Wn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(()=>V(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},c=l=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Wn)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke(typeof r.accessToken=="string",31837,{l:r}),new Md(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string",2055,{h:e}),new ht(e)}},gy=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);let e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}},my=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new gy(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Pd=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Nd=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tI(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ke(this.o===void 0,3512);let r=o=>{o.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,z("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Pd(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Pd(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function CF(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Hi=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=CF(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Ee(n,e){return n<e?-1:n>e?1:0}function yy(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return ly(i)===ly(o)?Ee(i,o):ly(i)?1:-1}return Ee(n.length,e.length)}var bF=55296,EF=57343;function ly(n){let e=n.charCodeAt(0);return e>=bF&&e<=EF}function us(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var cI="__name__",Od=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ee(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ee(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Ee(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):yy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yr.fromString(e.substring(4,e.length-2))}},qe=class n extends Od{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new W(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},DF=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Gt=class n extends Od{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return DF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cI}static keyField(){return new n([cI])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new W(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new W(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new W(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new W(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var X=class n{constructor(e){this.path=e}static fromPath(e){return new n(qe.fromString(e))}static fromName(e){return new n(qe.fromString(e).popFirst(5))}static empty(){return new n(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new qe(e.slice()))}};function IF(n,e,t){if(!t)throw new W(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function KI(n,e,t,r){if(e===!0&&r===!0)throw new W(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function lI(n){if(!X.isDocumentKey(n))throw new W(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function QI(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function df(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ee(12329,{type:typeof n})}function er(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new W(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=df(n);throw new W(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Qe(n,e){let t={typeString:n};return e&&(t.value=e),t}function Es(n,e){if(!QI(n))throw new W(F.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new W(F.INVALID_ARGUMENT,t);return!0}var uI=-62135596800,dI=1e6,Ye=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*dI);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<uI)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dI}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Es(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-uI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:Qe("string",Ye._jsonSchemaVersion),seconds:Qe("number"),nanoseconds:Qe("number")};var ce=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ye(0,0))}static max(){return new n(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var pc=-1,kd=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};kd.UNKNOWN_ID=-1;function TF(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new Ye(t+1,0):new Ye(t,r));return new zi(i,X.empty(),e)}function SF(n){return new zi(n.readTime,n.key,pc)}var zi=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ce.min(),X.empty(),pc)}static max(){return new n(ce.max(),X.empty(),pc)}};function xF(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=X.comparator(n.documentKey,e.documentKey),t!==0?t:Ee(n.largestBatchId,e.largestBatchId))}var MF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vy=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ds(n){return V(this,null,function*(){if(n.code!==F.FAILED_PRECONDITION||n.message!==MF)throw n;z("LocalStore","Unexpectedly lost primary lease")})}var j=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&t()},l=>r(l))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let l=0;l<o;l++){let u=l;t(e[u]).next(f=>{s[u]=f,++c,c===o&&r(s)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function AF(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Is(n){return n.name==="IndexedDbTransactionError"}var Bv=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),Uv=-1;function ff(n){return n==null}function gc(n){return n===0&&1/n==-1/0}function RF(n){return typeof n=="number"&&Number.isInteger(n)&&!gc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var YI="";function PF(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=fI(e)),e=NF(n.get(t),e);return fI(e)}function NF(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case YI:t+="";break;default:t+=o}}return t}function fI(n){return n+YI+""}var OF="remoteDocuments",ZI="owner";var JI="mutationQueues";var XI="mutations";var eT="documentMutations",kF="remoteDocumentsV14";var tT="remoteDocumentGlobal";var nT="targets";var rT="targetDocuments";var iT="targetGlobal",oT="collectionParents";var sT="clientMetadata";var aT="bundles";var cT="namedQueries";var VF="indexConfiguration";var FF="indexState";var LF="indexEntries";var lT="documentOverlays";var jF="globals";var BF=[JI,XI,eT,OF,nT,ZI,iT,rT,sT,tT,oT,aT,cT],W9=[...BF,lT],UF=[JI,XI,eT,kF,nT,ZI,iT,rT,sT,tT,oT,aT,cT,lT],$F=UF,HF=[...$F,VF,FF,LF];var K9=[...HF,jF];function hI(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ji(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uT(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ge=class n{constructor(e,t){this.comparator=e,this.root=t||Kn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new as(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new as(this.root,e,this.comparator,!1)}getReverseIterator(){return new as(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new as(this.root,e,this.comparator,!0)}},as=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Kn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ee(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ee(27949);return e+(this.isRed()?0:1)}};Kn.EMPTY=null,Kn.RED=!0,Kn.BLACK=!1;Kn.EMPTY=new class{constructor(){this.size=0}get key(){throw ee(57766)}get value(){throw ee(16141)}get color(){throw ee(16727)}get left(){throw ee(29726)}get right(){throw ee(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Kn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var pt=class n{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vd(this.data.getIterator())}getIteratorFrom(e){return new Vd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Vd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Gn=class n{constructor(e){this.fields=e,e.sort(Gt.comparator)}static empty(){return new n([])}unionWith(e){let t=new pt(Gt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return us(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Fd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var wt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Fd("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};wt.EMPTY_BYTE_STRING=new wt("");var zF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function br(n){if(ke(!!n,39018),typeof n=="string"){let e=0,t=zF.exec(n);if(ke(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(n.seconds),nanos:Ue(n.nanos)}}function Ue(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Er(n){return typeof n=="string"?wt.fromBase64String(n):wt.fromUint8Array(n)}var dT="server_timestamp",fT="__type__",hT="__previous_value__",pT="__local_write_time__";function hf(n){return(n?.mapValue?.fields||{})[fT]?.stringValue===dT}function pf(n){let e=n.mapValue.fields[hT];return hf(e)?pf(e):e}function mc(n){let e=br(n.mapValue.fields[pT].timestampValue);return new Ye(e.seconds,e.nanos)}var _y=class{constructor(e,t,r,i,o,s,c,l,u,f,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=f,this.apiKey=p}},Ld="(default)",yc=class n{constructor(e,t){this.projectId=e,this.database=t||Ld}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Ld}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};function gT(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new W(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yc(n.options.projectId,e)}var $v="__type__",mT="__max__",Ed={mapValue:{fields:{__type__:{stringValue:mT}}}},Hv="__vector__",ds="value";function Yr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hf(n)?4:vT(n)?9007199254740991:yT(n)?10:11:ee(28295,{value:n})}function Xn(n,e){if(n===e)return!0;let t=Yr(n);if(t!==Yr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mc(n).isEqual(mc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=br(i.timestampValue),c=br(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Er(i.bytesValue).isEqual(Er(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ue(i.geoPointValue.latitude)===Ue(o.geoPointValue.latitude)&&Ue(i.geoPointValue.longitude)===Ue(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ue(i.integerValue)===Ue(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ue(i.doubleValue),c=Ue(o.doubleValue);return s===c?gc(s)===gc(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return us(n.arrayValue.values||[],e.arrayValue.values||[],Xn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(hI(s)!==hI(c))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(c[l]===void 0||!Xn(s[l],c[l])))return!1;return!0}(n,e);default:return ee(52216,{left:n})}}function vc(n,e){return(n.values||[]).find(t=>Xn(t,e))!==void 0}function fs(n,e){if(n===e)return 0;let t=Yr(n),r=Yr(e);if(t!==r)return Ee(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ee(n.booleanValue,e.booleanValue);case 2:return function(o,s){let c=Ue(o.integerValue||o.doubleValue),l=Ue(s.integerValue||s.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return pI(n.timestampValue,e.timestampValue);case 4:return pI(mc(n),mc(e));case 5:return yy(n.stringValue,e.stringValue);case 6:return function(o,s){let c=Er(o),l=Er(s);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let c=o.split("/"),l=s.split("/");for(let u=0;u<c.length&&u<l.length;u++){let f=Ee(c[u],l[u]);if(f!==0)return f}return Ee(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let c=Ee(Ue(o.latitude),Ue(s.latitude));return c!==0?c:Ee(Ue(o.longitude),Ue(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return gI(n.arrayValue,e.arrayValue);case 10:return function(o,s){let c=o.fields||{},l=s.fields||{},u=c[ds]?.arrayValue,f=l[ds]?.arrayValue,p=Ee(u?.values?.length||0,f?.values?.length||0);return p!==0?p:gI(u,f)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Ed.mapValue&&s===Ed.mapValue)return 0;if(o===Ed.mapValue)return 1;if(s===Ed.mapValue)return-1;let c=o.fields||{},l=Object.keys(c),u=s.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){let _=yy(l[p],f[p]);if(_!==0)return _;let m=fs(c[l[p]],u[f[p]]);if(m!==0)return m}return Ee(l.length,f.length)}(n.mapValue,e.mapValue);default:throw ee(23264,{he:t})}}function pI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ee(n,e);let t=br(n),r=br(e),i=Ee(t.seconds,r.seconds);return i!==0?i:Ee(t.nanos,r.nanos)}function gI(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=fs(t[i],r[i]);if(o)return o}return Ee(t.length,r.length)}function hs(n){return wy(n)}function wy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=br(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Er(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return X.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=wy(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${wy(t.fields[s])}`;return i+"}"}(n.mapValue):ee(61005,{value:n})}function Td(n){switch(Yr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=pf(n);return e?16+Td(e):16;case 5:return 2*n.stringValue.length;case 6:return Er(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Td(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Ji(r.fields,(o,s)=>{i+=o.length+Td(s)}),i}(n.mapValue);default:throw ee(13486,{value:n})}}function Cy(n){return!!n&&"integerValue"in n}function zv(n){return!!n&&"arrayValue"in n}function mI(n){return!!n&&"nullValue"in n}function yI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sd(n){return!!n&&"mapValue"in n}function yT(n){return(n?.mapValue?.fields||{})[$v]?.stringValue===Hv}function dc(n){if(n.geoPointValue)return{geoPointValue:N({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:N({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ji(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=dc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dc(n.arrayValue.values[t]);return e}return N({},n)}function vT(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===mT}var Y9={mapValue:{fields:{[$v]:{stringValue:Hv},[ds]:{arrayValue:{}}}}};var fn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Sd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dc(t)}setAll(e){let t=Gt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=c.popLast()}s?r[c.lastSegment()]=dc(s):i.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Sd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Sd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ji(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(dc(this.value))}};function _T(n){let e=[];return Ji(n.fields,(t,r)=>{let i=new Gt([t]);if(Sd(r)){let o=_T(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Gn(e)}var Sn=class n{constructor(e,t,r,i,o,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new n(e,0,ce.min(),ce.min(),ce.min(),fn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ce.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ce.min(),ce.min(),fn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ce.min(),ce.min(),fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var qi=class{constructor(e,t){this.position=e,this.inclusive=t}};function vI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=X.comparator(X.fromName(s.referenceValue),t.key):r=fs(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function _I(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xn(n.position[t],e.position[t]))return!1;return!0}var Gi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function qF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var jd=class{},it=class n extends jd{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Ey(e,t,r):t==="array-contains"?new Ty(e,r):t==="in"?new Sy(e,r):t==="not-in"?new xy(e,r):t==="array-contains-any"?new My(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Dy(e,r):new Iy(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(fs(t,this.value)):t!==null&&Yr(this.value)===Yr(t)&&this.matchesComparison(fs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},xn=class n extends jd{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return wT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function wT(n){return n.op==="and"}function CT(n){return GF(n)&&wT(n)}function GF(n){for(let e of n.filters)if(e instanceof xn)return!1;return!0}function by(n){if(n instanceof it)return n.field.canonicalString()+n.op.toString()+hs(n.value);if(CT(n))return n.filters.map(e=>by(e)).join(",");{let e=n.filters.map(t=>by(t)).join(",");return`${n.op}(${e})`}}function bT(n,e){return n instanceof it?function(r,i){return i instanceof it&&r.op===i.op&&r.field.isEqual(i.field)&&Xn(r.value,i.value)}(n,e):n instanceof xn?function(r,i){return i instanceof xn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&bT(s,i.filters[c]),!0):!1}(n,e):void ee(19439)}function ET(n){return n instanceof it?function(t){return`${t.field.canonicalString()} ${t.op} ${hs(t.value)}`}(n):n instanceof xn?function(t){return t.op.toString()+" {"+t.getFilters().map(ET).join(" ,")+"}"}(n):"Filter"}var Ey=class extends it{constructor(e,t,r){super(e,t,r),this.key=X.fromName(r.referenceValue)}matches(e){let t=X.comparator(e.key,this.key);return this.matchesComparison(t)}},Dy=class extends it{constructor(e,t){super(e,"in",t),this.keys=DT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Iy=class extends it{constructor(e,t){super(e,"not-in",t),this.keys=DT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function DT(n,e){return(e.arrayValue?.values||[]).map(t=>X.fromName(t.referenceValue))}var Ty=class extends it{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return zv(t)&&vc(t.arrayValue,this.value)}},Sy=class extends it{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&vc(this.value.arrayValue,t)}},xy=class extends it{constructor(e,t){super(e,"not-in",t)}matches(e){if(vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!vc(this.value.arrayValue,t)}},My=class extends it{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!zv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vc(this.value.arrayValue,r))}};var Ay=class{constructor(e,t=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Te=null}};function wI(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Ay(n,e,t,r,i,o,s)}function qv(n){let e=se(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>by(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),ff(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hs(r)).join(",")),e.Te=t}return e.Te}function Gv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!qF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!bT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_I(n.startAt,e.startAt)&&_I(n.endAt,e.endAt)}function Ry(n){return X.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ps=class{constructor(e,t=null,r=[],i=[],o=null,s="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function WF(n,e,t,r,i,o,s,c){return new ps(n,e,t,r,i,o,s,c)}function Mc(n){return new ps(n)}function CI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function KF(n){return X.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function IT(n){return n.collectionGroup!==null}function cs(n){let e=se(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new pt(Gt.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(c=c.add(u.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Gi(o,r))}),t.has(Gt.keyField().canonicalString())||e.Ie.push(new Gi(Gt.keyField(),r))}return e.Ie}function Qn(n){let e=se(n);return e.Ee||(e.Ee=QF(e,cs(n))),e.Ee}function QF(n,e){if(n.limitType==="F")return wI(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Gi(i.field,o)});let t=n.endAt?new qi(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new qi(n.startAt.position,n.startAt.inclusive):null;return wI(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Bd(n,e,t){return new ps(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gf(n,e){return Gv(Qn(n),Qn(e))&&n.limitType===e.limitType}function TT(n){return`${qv(Qn(n))}|lt:${n.limitType}`}function is(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>ET(i)).join(", ")}]`),ff(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>hs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>hs(i)).join(",")),`Target(${r})`}(Qn(n))}; limitType=${n.limitType})`}function mf(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):X.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of cs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,c,l){let u=vI(s,c,l);return s.inclusive?u<=0:u<0}(r.startAt,cs(r),i)||r.endAt&&!function(s,c,l){let u=vI(s,c,l);return s.inclusive?u>=0:u>0}(r.endAt,cs(r),i))}(n,e)}function YF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ST(n){return(e,t)=>{let r=!1;for(let i of cs(n)){let o=ZF(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function ZF(n,e,t){let r=n.field.isKeyField()?X.comparator(e.key,t.key):function(o,s,c){let l=s.data.field(o),u=c.data.field(o);return l!==null&&u!==null?fs(l,u):ee(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ee(19790,{direction:n.dir})}}var Dr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ji(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return uT(this.inner)}size(){return this.innerSize}};var JF=new Ge(X.comparator);function Ir(){return JF}var xT=new Ge(X.comparator);function uc(...n){let e=xT;for(let t of n)e=e.insert(t.key,t);return e}function MT(n){let e=xT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Bi(){return fc()}function AT(){return fc()}function fc(){return new Dr(n=>n.toString(),(n,e)=>n.isEqual(e))}var XF=new Ge(X.comparator),eL=new pt(X.comparator);function Ce(...n){let e=eL;for(let t of n)e=e.add(t);return e}var tL=new pt(Ee);function nL(){return tL}function Wv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gc(e)?"-0":e}}function RT(n){return{integerValue:""+n}}function rL(n,e){return RF(e)?RT(e):Wv(n,e)}var gs=class{constructor(){this._=void 0}};function iL(n,e,t){return n instanceof ms?function(i,o){let s={fields:{[fT]:{stringValue:dT},[pT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&hf(o)&&(o=pf(o)),o&&(s.fields[hT]=o),{mapValue:s}}(t,e):n instanceof Wi?NT(n,e):n instanceof Ki?OT(n,e):function(i,o){let s=PT(i,o),c=bI(s)+bI(i.Ae);return Cy(s)&&Cy(i.Ae)?RT(c):Wv(i.serializer,c)}(n,e)}function oL(n,e,t){return n instanceof Wi?NT(n,e):n instanceof Ki?OT(n,e):t}function PT(n,e){return n instanceof ys?function(r){return Cy(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var ms=class extends gs{},Wi=class extends gs{constructor(e){super(),this.elements=e}};function NT(n,e){let t=kT(e);for(let r of n.elements)t.some(i=>Xn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ki=class extends gs{constructor(e){super(),this.elements=e}};function OT(n,e){let t=kT(e);for(let r of n.elements)t=t.filter(i=>!Xn(i,r));return{arrayValue:{values:t}}}var ys=class extends gs{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function bI(n){return Ue(n.integerValue||n.doubleValue)}function kT(n){return zv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function sL(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Wi&&i instanceof Wi||r instanceof Ki&&i instanceof Ki?us(r.elements,i.elements,Xn):r instanceof ys&&i instanceof ys?Xn(r.Ae,i.Ae):r instanceof ms&&i instanceof ms}(n.transform,e.transform)}var Py=class{constructor(e,t){this.version=e,this.transformResults=t}},Qr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function xd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var vs=class{};function VT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new _c(n.key,Qr.none()):new Qi(n.key,n.data,Qr.none());{let t=n.data,r=fn.empty(),i=new pt(Gt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Tr(n.key,r,new Gn(i.toArray()),Qr.none())}}function aL(n,e,t){n instanceof Qi?function(i,o,s){let c=i.value.clone(),l=DI(i.fieldTransforms,o,s.transformResults);c.setAll(l),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Tr?function(i,o,s){if(!xd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=DI(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(FT(i)),l.setAll(c),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function hc(n,e,t,r){return n instanceof Qi?function(o,s,c,l){if(!xd(o.precondition,s))return c;let u=o.value.clone(),f=II(o.fieldTransforms,l,s);return u.setAll(f),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Tr?function(o,s,c,l){if(!xd(o.precondition,s))return c;let u=II(o.fieldTransforms,l,s),f=s.data;return f.setAll(FT(o)),f.setAll(u),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,c){return xd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c}(n,e,t)}function cL(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=PT(r.transform,i||null);o!=null&&(t===null&&(t=fn.empty()),t.set(r.field,o))}return t||null}function EI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&us(r,i,(o,s)=>sL(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Qi=class extends vs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Tr=class extends vs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function FT(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function DI(n,e,t){let r=new Map;ke(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,oL(s,c,t[i]))}return r}function II(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,iL(o,s,e))}return r}var _c=class extends vs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ny=class extends vs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Oy=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&aL(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=hc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=hc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=AT();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=t.has(i.key)?null:c;let l=VT(s,c);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ce())}isEqual(e){return this.batchId===e.batchId&&us(this.mutations,e.mutations,(t,r)=>EI(t,r))&&us(this.baseMutations,e.baseMutations,(t,r)=>EI(t,r))}},ky=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return XF}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Vy=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Fy=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var nt,Se;function lL(n){switch(n){case F.OK:return ee(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ee(15467,{code:n})}}function LT(n){if(n===void 0)return wr("GRPC error has no .code"),F.UNKNOWN;switch(n){case nt.OK:return F.OK;case nt.CANCELLED:return F.CANCELLED;case nt.UNKNOWN:return F.UNKNOWN;case nt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case nt.INTERNAL:return F.INTERNAL;case nt.UNAVAILABLE:return F.UNAVAILABLE;case nt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case nt.NOT_FOUND:return F.NOT_FOUND;case nt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case nt.ABORTED:return F.ABORTED;case nt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case nt.DATA_LOSS:return F.DATA_LOSS;default:return ee(39323,{code:n})}}(Se=nt||(nt={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";var uL=null;function dL(){return new TextEncoder}var fL=new yr([4294967295,4294967295],0);function TI(n){let e=dL().encode(n),t=new ry;return t.update(e),new Uint8Array(t.digest())}function SI(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new yr([t,r],0),new yr([i,o],0)]}var Ly=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ui(`Invalid padding: ${t}`);if(r<0)throw new Ui(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ui(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ui(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=yr.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(yr.fromNumber(r)));return i.compare(fL)===1&&(i=new yr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=TI(e),[r,i]=SI(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.ge===0)return;let t=TI(e),[r,i]=SI(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.be(s)}}be(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ui=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ud=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,wc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ce.min(),i,new Ge(Ee),Ir(),Ce())}},wc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ce(),Ce(),Ce())}};var ls=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=i}},$d=class{constructor(e,t){this.targetId=e,this.Ce=t}},Hd=class{constructor(e,t,r=wt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},zd=class{constructor(){this.ve=0,this.Fe=xI(),this.Me=wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ce(),t=Ce(),r=Ce();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ee(38017,{changeType:o})}}),new wc(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=xI()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ke(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},jy=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ir(),this.He=Dd(),this.Je=Dd(),this.Ze=new Ge(Ee)}Xe(e){for(let t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ee(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(Ry(o))if(r===0){let s=new X(o.path);this.et(t,s,Sn.newNoDocument(s,ce.min()))}else ke(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let c=this.ut(e),l=c?this.ct(c,e,s):1;if(l!==0){this.it(t);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,u)}uL?.lt(function(f,p,_,m,x){let O={localCacheCount:f,existenceFilterCount:p.count,databaseId:_.database,projectId:_.projectId},L=p.unchangedNames;return L&&(O.bloomFilter={applied:x===0,hashCount:L?.hashCount??0,bitmapLength:L?.bits?.bitmap?.length??0,padding:L?.bits?.padding??0,mightContain:q=>m?.mightContain(q)??!1}),O}(s,e.Ce,this.Ge.ht(),c,l))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,c;try{s=Er(r).toUint8Array()}catch(l){if(l instanceof Fd)return Cr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Ly(s,i,o)}catch(l){return Cr(l instanceof Ui?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let c=this.ot(s);if(c){if(o.current&&Ry(c.target)){let l=new X(c.target.path);this.It(l).has(s)||this.Et(s,l)||this.et(s,l,Sn.newNoDocument(l,e))}o.Be&&(t.set(s,o.ke()),o.Ke())}});let r=Ce();this.Je.forEach((o,s)=>{let c=!0;s.forEachWhile(l=>{let u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Ud(e,t,this.Ze,this.je,r);return this.je=Ir(),this.He=Dd(),this.Je=Dd(),this.Ze=new Ge(Ee),i}Ye(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.qe(t,1):i.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new zd,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new pt(Ee),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new pt(Ee),this.He=this.He.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||z("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zd),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Dd(){return new Ge(X.comparator)}function xI(){return new Ge(X.comparator)}var hL={asc:"ASCENDING",desc:"DESCENDING"},pL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gL={and:"AND",or:"OR"},By=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Uy(n,e){return n.useProto3Json||ff(e)?e:{value:e}}function qd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function mL(n,e){return qd(n,e.toTimestamp())}function Yn(n){return ke(!!n,49232),ce.fromTimestamp(function(t){let r=br(t);return new Ye(r.seconds,r.nanos)}(n))}function Kv(n,e){return $y(n,e).canonicalString()}function $y(n,e){let t=function(i){return new qe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function BT(n){let e=qe.fromString(n);return ke(qT(e),10190,{key:e.toString()}),e}function Hy(n,e){return Kv(n.databaseId,e.path)}function uy(n,e){let t=BT(e);if(t.get(1)!==n.databaseId.projectId)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new X($T(t))}function UT(n,e){return Kv(n.databaseId,e)}function yL(n){let e=BT(n);return e.length===4?qe.emptyPath():$T(e)}function zy(n){return new qe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $T(n){return ke(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function MI(n,e,t){return{name:Hy(n,e),fields:t.value.mapValue.fields}}function vL(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ee(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,f){return u.useProto3Json?(ke(f===void 0||typeof f=="string",58123),wt.fromBase64String(f||"")):(ke(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),wt.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&function(u){let f=u.code===void 0?F.UNKNOWN:LT(u.code);return new W(f,u.message||"")}(s);t=new Hd(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=uy(n,r.document.name),o=Yn(r.document.updateTime),s=r.document.createTime?Yn(r.document.createTime):ce.min(),c=new fn({mapValue:{fields:r.document.fields}}),l=Sn.newFoundDocument(i,o,s,c),u=r.targetIds||[],f=r.removedTargetIds||[];t=new ls(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=uy(n,r.document),o=r.readTime?Yn(r.readTime):ce.min(),s=Sn.newNoDocument(i,o),c=r.removedTargetIds||[];t=new ls([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=uy(n,r.document),o=r.removedTargetIds||[];t=new ls([],o,i,null)}else{if(!("filter"in e))return ee(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Fy(i,o),c=r.targetId;t=new $d(c,s)}}return t}function _L(n,e){let t;if(e instanceof Qi)t={update:MI(n,e.key,e.value)};else if(e instanceof _c)t={delete:Hy(n,e.key)};else if(e instanceof Tr)t={update:MI(n,e.key,e.data),updateMask:xL(e.fieldMask)};else{if(!(e instanceof Ny))return ee(16599,{dt:e.type});t={verify:Hy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let c=s.transform;if(c instanceof ms)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Wi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ki)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ys)return{fieldPath:s.field.canonicalString(),increment:c.Ae};throw ee(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:mL(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ee(27497)}(n,e.precondition)),t}function wL(n,e){return n&&n.length>0?(ke(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Yn(i.updateTime):Yn(o);return s.isEqual(ce.min())&&(s=Yn(o)),new Py(s,i.transformResults||[])}(t,e))):[]}function CL(n,e){return{documents:[UT(n,e.path)]}}function bL(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=UT(n,i);let o=function(u){if(u.length!==0)return zT(xn.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(f=>function(_){return{field:os(_.field),direction:IL(_.dir)}}(f))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let c=Uy(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:t,parent:i}}function EL(n){let e=yL(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ke(r===1,65062);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=function(p){let _=HT(p);return _ instanceof xn&&CT(_)?_.getFilters():[_]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(_=>function(x){return new Gi(ss(x.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(_))}(t.orderBy));let c=null;t.limit&&(c=function(p){let _;return _=typeof p=="object"?p.value:p,ff(_)?null:_}(t.limit));let l=null;t.startAt&&(l=function(p){let _=!!p.before,m=p.values||[];return new qi(m,_)}(t.startAt));let u=null;return t.endAt&&(u=function(p){let _=!p.before,m=p.values||[];return new qi(m,_)}(t.endAt)),WF(e,i,s,o,c,"F",l,u)}function DL(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function HT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ss(t.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ss(t.unaryFilter.field);return it.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ss(t.unaryFilter.field);return it.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ss(t.unaryFilter.field);return it.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ee(61313);default:return ee(60726)}}(n):n.fieldFilter!==void 0?function(t){return it.create(ss(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ee(58110);default:return ee(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return xn.create(t.compositeFilter.filters.map(r=>HT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ee(1026)}}(t.compositeFilter.op))}(n):ee(30097,{filter:n})}function IL(n){return hL[n]}function TL(n){return pL[n]}function SL(n){return gL[n]}function os(n){return{fieldPath:n.canonicalString()}}function ss(n){return Gt.fromServerFormat(n.fieldPath)}function zT(n){return n instanceof it?function(t){if(t.op==="=="){if(yI(t.value))return{unaryFilter:{field:os(t.field),op:"IS_NAN"}};if(mI(t.value))return{unaryFilter:{field:os(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(yI(t.value))return{unaryFilter:{field:os(t.field),op:"IS_NOT_NAN"}};if(mI(t.value))return{unaryFilter:{field:os(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:os(t.field),op:TL(t.op),value:t.value}}}(n):n instanceof xn?function(t){let r=t.getFilters().map(i=>zT(i));return r.length===1?r[0]:{compositeFilter:{op:SL(t.op),filters:r}}}(n):ee(54877,{filter:n})}function xL(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function GT(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}var Cc=class n{constructor(e,t,r,i,o=ce.min(),s=ce.min(),c=wt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var qy=class{constructor(e){this.yt=e}};function WT(n){let e=EL({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Bd(e,e.limit,"L"):e}var Gd=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ue(e.integerValue));else if("doubleValue"in e){let r=Ue(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),gc(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=br(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Er(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?vT(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):yT(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):ee(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=ds,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Ue(o)),this.Ot(i,t),this.Ct(r[i],t)}qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),X.fromName(e).path.forEach(r=>{this.Ft(t,60),this.$t(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Gd.Wt=new Gd;var Gy=class{constructor(){this.Sn=new Wy}addToCollectionParentIndex(e,t){return this.Sn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(zi.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(zi.min())}updateCollectionGroup(e,t,r){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}},Wy=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new pt(qe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pt(qe.comparator)).toArray()}};var Z9=new Uint8Array(0);var AI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KT=41943040,dn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(KT,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);var bc=class n{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new n(0)}static ar(){return new n(-1)}};var RI="LruGarbageCollector",ML=1048576;function PI([n,e],[t,r]){let i=Ee(n,t);return i===0?Ee(e,r):i}var Ky=class{constructor(e){this.Pr=e,this.buffer=new pt(PI),this.Tr=0}Ir(){return++this.Tr}Er(e){let t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();PI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Qy=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){z(RI,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>V(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Is(t)?z(RI,"Ignoring IndexedDB error during garbage collection: ",t):yield Ds(t)}yield this.Ar(3e5)}))}},Yy=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return j.resolve(Bv.ce);let r=new Ky(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(AI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AI):this.gr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,i,o,s,c,l,u,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),rs()<=Te.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(l-c)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function AL(n,e){return new Yy(n,e)}var Zy=class{constructor(){this.changes=new Dr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?j.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Jy=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Xy=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&hc(r.mutation,i,Gn.empty(),Ye.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ce()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ce()){let i=Bi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=uc();return o.forEach((c,l)=>{s=s.insert(c,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Bi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ce()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{t.set(s,c)})})}computeViews(e,t,r,i){let o=Ir(),s=fc(),c=function(){return fc()}();return t.forEach((l,u)=>{let f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof Tr)?o=o.insert(u.key,u):f!==void 0?(s.set(u.key,f.mutation.getFieldMask()),hc(f.mutation,u,f.mutation.getFieldMask(),Ye.now())):s.set(u.key,Gn.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,f)=>s.set(u,f)),t.forEach((u,f)=>c.set(u,new Jy(f,s.get(u)??null))),c))}recalculateAndSaveOverlays(e,t){let r=fc(),i=new Ge((s,c)=>s-c),o=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let c of s)c.keys().forEach(l=>{let u=t.get(l);if(u===null)return;let f=r.get(l)||Gn.empty();f=c.applyToLocalView(u,f),r.set(l,f);let p=(i.get(c.batchId)||Ce()).add(l);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),u=l.key,f=l.value,p=AT();f.forEach(_=>{if(!o.has(_)){let m=VT(t.get(_),r.get(_));m!==null&&p.set(_,m),o=o.add(_)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,p))}return j.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return KF(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):IT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):j.resolve(Bi()),c=pc,l=o;return s.next(u=>j.forEach(u,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(f)?j.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{l=l.insert(f,_)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,Ce())).next(f=>({batchId:c,changes:MT(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new X(t)).next(r=>{let i=uc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=uc();return this.indexManager.getCollectionParents(e,o).next(c=>j.forEach(c,l=>{let u=function(p,_){return new ps(_,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(f=>{f.forEach((p,_)=>{s=s.insert(p,_)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((l,u)=>{let f=u.getKey();s.get(f)===null&&(s=s.insert(f,Sn.newInvalidDocument(f)))});let c=uc();return s.forEach((l,u)=>{let f=o.get(l);f!==void 0&&hc(f.mutation,u,Gn.empty(),Ye.now()),mf(t,u)&&(c=c.insert(l,u))}),c})}};var ev=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return j.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Yn(i.createTime)}}(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,function(i){return{name:i.name,query:WT(i.bundledQuery),readTime:Yn(i.readTime)}}(t)),j.resolve()}};var tv=class{constructor(){this.overlays=new Ge(X.comparator),this.Lr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Bi();return j.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.bt(e,t,o)}),j.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Lr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Lr.delete(r)),j.resolve()}getOverlaysForCollection(e,t,r){let i=Bi(),o=t.length+1,s=new X(t.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let l=c.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return j.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ge((u,f)=>u-f),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let f=o.get(u.largestBatchId);f===null&&(f=Bi(),o=o.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}let c=Bi(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,f)=>c.set(u,f)),!(c.size()>=i)););return j.resolve(c)}bt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Vy(t,r));let o=this.Lr.get(t);o===void 0&&(o=Ce(),this.Lr.set(t,o)),this.Lr.set(t,o.add(r.key))}};var nv=class{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}};var Ec=class{constructor(){this.kr=new pt(rt.Kr),this.qr=new pt(rt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){let r=new rt(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new rt(e,t))}Qr(e,t){e.forEach(r=>this.removeReference(r,t))}Gr(e){let t=new X(new qe([])),r=new rt(t,e),i=new rt(t,e+1),o=[];return this.qr.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let t=new X(new qe([])),r=new rt(t,e),i=new rt(t,e+1),o=Ce();return this.qr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new rt(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},rt=class{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return X.comparator(e.key,t.key)||Ee(e.Hr,t.Hr)}static Ur(e,t){return Ee(e.Hr,t.Hr)||X.comparator(e.key,t.key)}};var rv=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new pt(rt.Kr)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Oy(o,t,r,i);this.mutationQueue.push(s);for(let c of i)this.Jr=this.Jr.add(new rt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return j.resolve(s)}lookupMutationBatch(e,t){return j.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return j.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?Uv:this.Yn-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new rt(t,0),i=new rt(t,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([r,i],s=>{let c=this.Zr(s.Hr);o.push(c)}),j.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pt(Ee);return t.forEach(i=>{let o=new rt(i,0),s=new rt(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,s],c=>{r=r.add(c.Hr)})}),j.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;X.isDocumentKey(o)||(o=o.child(""));let s=new rt(new X(o),0),c=new pt(Ee);return this.Jr.forEachWhile(l=>{let u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(c=c.add(l.Hr)),!0)},s),j.resolve(this.Yr(c))}Yr(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ke(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return j.forEach(t.mutations,i=>{let o=new rt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,t){let r=new rt(t,0),i=this.Jr.firstAfterOrEqual(r);return j.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var iv=class{constructor(e){this.ti=e,this.docs=function(){return new Ge(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return j.resolve(r?r.document.mutableCopy():Sn.newInvalidDocument(t))}getEntries(e,t){let r=Ir();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Sn.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ir(),s=t.path,c=new X(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:u,value:{document:f}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||xF(SF(f),r)<=0||(i.has(f.key)||mf(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return j.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ee(9500)}ni(e,t){return j.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ov(this)}getSize(e){return j.resolve(this.size)}},ov=class extends Zy{constructor(e){super(),this.Mr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),j.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}};var sv=class{constructor(e){this.persistence=e,this.ri=new Dr(t=>qv(t),Gv),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.ii=0,this.si=new Ec,this.targetCount=0,this.oi=bc._r()}forEachTarget(e,t){return this.ri.forEach((r,i)=>t(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),j.resolve()}lr(e){this.ri.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.oi=new bc(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.lr(t),j.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ri.forEach((s,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.ri.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),j.waitFor(o).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){let r=this.ri.get(t)||null;return j.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),j.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),j.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),j.resolve()}getMatchingKeysForTargetId(e,t){let r=this.si.jr(t);return j.resolve(r)}containsKey(e,t){return j.resolve(this.si.containsKey(t))}};var Wd=class{constructor(e,t){this._i={},this.overlays={},this.ai=new Bv(0),this.ui=!1,this.ui=!0,this.ci=new nv,this.referenceDelegate=e(this),this.li=new sv(this),this.indexManager=new Gy,this.remoteDocumentCache=function(i){return new iv(i)}(r=>this.referenceDelegate.hi(r)),this.serializer=new qy(t),this.Pi=new ev(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new rv(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){z("MemoryPersistence","Starting transaction:",e);let i=new av(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(o=>this.referenceDelegate.Ii(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return j.or(Object.values(this._i).map(r=>()=>r.containsKey(e,t)))}},av=class extends vy{constructor(e){super(),this.currentSequenceNumber=e}},cv=class n{constructor(e){this.persistence=e,this.Ri=new Ec,this.Ai=null}static Vi(e){return new n(e)}get di(){if(this.Ai)return this.Ai;throw ee(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),j.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),j.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ti(){this.Ai=new Set}Ii(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.di,r=>{let i=X.fromPath(r);return this.mi(e,i).next(o=>{o||t.removeEntry(i,ce.min())})}).next(()=>(this.Ai=null,t.apply(e)))}updateLimboDocument(e,t){return this.mi(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}hi(e){return 0}mi(e,t){return j.or([()=>j.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Kd=class n{constructor(e,t){this.persistence=e,this.fi=new Dr(r=>PF(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=AL(this,t)}static Vi(e,t){return new n(e,t)}Ti(){}Ii(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}pr(e){let t=0;return this.mr(e,r=>{t++}).next(()=>t)}mr(e,t){return j.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(o=>o?j.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ni(e,s=>this.wr(e,s,t).next(c=>{c||(r++,o.removeEntry(s,ce.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),j.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Td(e.data.value)),t}wr(e,t,r){return j.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.fi.get(t);return j.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var lv=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=i}static Es(e,t){let r=Ce(),i=Ce();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var uv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var dv=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return BD()?8:AF(jD())>0?6:4}()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.gs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ps(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new uv;return this.ys(e,t,s).next(c=>{if(o.result=c,this.As)return this.ws(e,t,s,c.size)})}).next(()=>o.result)}ws(e,t,r,i){return r.documentReadCount<this.Vs?(rs()<=Te.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",is(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),j.resolve()):(rs()<=Te.DEBUG&&z("QueryEngine","Query:",is(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(rs()<=Te.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",is(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qn(t))):j.resolve())}gs(e,t){if(CI(t))return j.resolve(null);let r=Qn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Bd(t,null,"F"),r=Qn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ce(...o);return this.fs.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{let u=this.bs(t,c);return this.Ss(t,u,s,l.readTime)?this.gs(e,Bd(t,null,"F")):this.Ds(e,u,t,l)}))})))}ps(e,t,r,i){return CI(t)||i.isEqual(ce.min())?j.resolve(null):this.fs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ss(t,s,r,i)?j.resolve(null):(rs()<=Te.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),is(t)),this.Ds(e,s,t,TF(i,pc)).next(c=>c))})}bs(e,t){let r=new pt(ST(e));return t.forEach((i,o)=>{mf(e,o)&&(r=r.add(o))}),r}Ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ys(e,t,r){return rs()<=Te.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",is(t)),this.fs.getDocumentsMatchingQuery(e,t,zi.min(),r)}Ds(e,t,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Qv="LocalStore",RL=3e8,fv=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new Ge(Ee),this.Fs=new Dr(o=>qv(o),Gv),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xy(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.vs))}};function PL(n,e,t,r){return new fv(n,e,t,r)}function QT(n,e){return V(this,null,function*(){let t=se(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Os(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],l=Ce();for(let u of i){s.push(u.batchId);for(let f of u.mutations)l=l.add(f.key)}for(let u of o){c.push(u.batchId);for(let f of u.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(r,l).next(u=>({Ns:u,removedBatchIds:s,addedBatchIds:c}))})})})}function NL(n,e){let t=se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.xs.newChangeBuffer({trackRemovals:!0});return function(c,l,u,f){let p=u.batch,_=p.keys(),m=j.resolve();return _.forEach(x=>{m=m.next(()=>f.getEntry(l,x)).next(O=>{let L=u.docVersions.get(x);ke(L!==null,48541),O.version.compareTo(L)<0&&(p.applyToRemoteDocument(O,u),O.isValidDocument()&&(O.setReadTime(u.commitVersion),f.addEntry(O)))})}),m.next(()=>c.mutationQueue.removeMutationBatch(l,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let l=Ce();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function YT(n){let e=se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.li.getLastRemoteSnapshotVersion(t))}function OL(n,e){let t=se(n),r=e.snapshotVersion,i=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.xs.newChangeBuffer({trackRemovals:!0});i=t.vs;let c=[];e.targetChanges.forEach((f,p)=>{let _=i.get(p);if(!_)return;c.push(t.li.removeMatchingKeys(o,f.removedDocuments,p).next(()=>t.li.addMatchingKeys(o,f.addedDocuments,p)));let m=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(wt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):f.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(f.resumeToken,r)),i=i.insert(p,m),function(O,L,q){return O.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=RL?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(_,m,f)&&c.push(t.li.updateTargetData(o,m))});let l=Ir(),u=Ce();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(kL(o,s,e.documentUpdates).next(f=>{l=f.Bs,u=f.Ls})),!r.isEqual(ce.min())){let f=t.li.getLastRemoteSnapshotVersion(o).next(p=>t.li.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(f)}return j.waitFor(c).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(t.vs=i,o))}function kL(n,e,t){let r=Ce(),i=Ce();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Ir();return t.forEach((c,l)=>{let u=o.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(c)),l.isNoDocument()&&l.version.isEqual(ce.min())?(e.removeEntry(c,l.readTime),s=s.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(c,l)):z(Qv,"Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)}),{Bs:s,Ls:i}})}function VL(n,e){let t=se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Uv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function FL(n,e){let t=se(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.li.getTargetData(r,e).next(o=>o?(i=o,j.resolve(i)):t.li.allocateTargetId(r).next(s=>(i=new Cc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r})}function hv(n,e,t){return V(this,null,function*(){let r=se(n),i=r.vs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Is(s))throw s;z(Qv,`Failed to update sequence numbers for target ${e}: ${s}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)})}function NI(n,e,t){let r=se(n),i=ce.min(),o=Ce();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,f){let p=se(l),_=p.Fs.get(f);return _!==void 0?j.resolve(p.vs.get(_)):p.li.getTargetData(u,f)}(r,s,Qn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(s,c.targetId).next(l=>{o=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:ce.min(),t?o:Ce())).next(c=>(LL(r,YF(e),c),{documents:c,ks:o})))}function LL(n,e,t){let r=n.Ms.get(e)||ce.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Ms.set(e,r)}var Qd=class{constructor(){this.activeTargetIds=nL()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var pv=class{constructor(){this.vo=new Qd,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Qd,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var gv=class{Mo(e){}shutdown(){}};var OI="ConnectivityMonitor",Yd=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){z(OI,"Network connectivity changed: AVAILABLE");for(let e of this.Lo)e(0)}Bo(){z(OI,"Network connectivity changed: UNAVAILABLE");for(let e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Id=null;function mv(){return Id===null?Id=function(){return 268435456+Math.round(2147483648*Math.random())}():Id++,"0x"+Id.toString(16)}var dy="RestConnection",jL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"},yv=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Ld?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=mv(),c=this.Qo(e,t.toUriEncodedString());z(dy,`Sending RPC '${e}' ${s}:`,c,r);let l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(l,i,o);let{host:u}=new URL(c),f=yd(u);return this.zo(e,c,l,r,f).then(p=>(z(dy,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Cr(dy,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}Go(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Qo(e,t){let r=jL[e],i=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}};var vv=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}};var At="WebChannelConnection",lc=(n,e,t)=>{n.listen(e,r=>{try{t(r)}catch(i){setTimeout(()=>{throw i},0)}})},Zd=class n extends yv{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!n.c_){let e=ay();lc(e,sy.STAT_EVENT,t=>{t.stat===bd.PROXY?z(At,"STAT_EVENT: detected buffering proxy"):t.stat===bd.NOPROXY&&z(At,"STAT_EVENT: detected no buffering proxy")}),n.c_=!0}}zo(e,t,r,i,o){let s=mv();return new Promise((c,l)=>{let u=new iy;u.setWithCredentials(!0),u.listenOnce(oy.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case cc.NO_ERROR:let p=u.getResponseJson();z(At,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case cc.TIMEOUT:z(At,`RPC '${e}' ${s} timed out`),l(new W(F.DEADLINE_EXCEEDED,"Request time out"));break;case cc.HTTP_ERROR:let _=u.getStatus();if(z(At,`RPC '${e}' ${s} failed with status:`,_,"response text:",u.getResponseText()),_>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let x=m?.error;if(x&&x.status&&x.message){let O=function(q){let J=q.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(J)>=0?J:F.UNKNOWN}(x.status);l(new W(O,x.message))}else l(new W(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new W(F.UNAVAILABLE,"Connection failed."));break;default:ee(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{z(At,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);z(At,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",f,r,15)})}T_(e,t,r){let i=mv(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let u=o.join("");z(At,`Creating RPC '${e}' stream ${i}: ${u}`,c);let f=s.createWebChannel(u,c);this.I_(f);let p=!1,_=!1,m=new vv({Ho:x=>{_?z(At,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(p||(z(At,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),z(At,`RPC '${e}' stream ${i} sending:`,x),f.send(x))},Jo:()=>f.close()});return lc(f,ns.EventType.OPEN,()=>{_||(z(At,`RPC '${e}' stream ${i} transport opened.`),m.i_())}),lc(f,ns.EventType.CLOSE,()=>{_||(_=!0,z(At,`RPC '${e}' stream ${i} transport closed`),m.o_(),this.E_(f))}),lc(f,ns.EventType.ERROR,x=>{_||(_=!0,Cr(At,`RPC '${e}' stream ${i} transport errored. Name:`,x.name,"Message:",x.message),m.o_(new W(F.UNAVAILABLE,"The operation could not be completed")))}),lc(f,ns.EventType.MESSAGE,x=>{if(!_){let O=x.data[0];ke(!!O,16349);let L=O,q=L?.error||L[0]?.error;if(q){z(At,`RPC '${e}' stream ${i} received error:`,q);let J=q.status,le=function(mt){let I=nt[mt];if(I!==void 0)return LT(I)}(J),Ct=q.message;J==="NOT_FOUND"&&Ct.includes("database")&&Ct.includes("does not exist")&&Ct.includes(this.databaseId.database)&&Cr(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),le===void 0&&(le=F.INTERNAL,Ct="Unknown error status: "+J+" with message "+q.message),_=!0,m.o_(new W(le,Ct)),f.close()}else z(At,`RPC '${e}' stream ${i} received:`,O),m.__(O)}}),n.u_(),setTimeout(()=>{m.s_()},0),m}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(t=>t===e)}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return cy()}};function BL(n){return new Zd(n)}function fy(){return typeof document<"u"?document:null}function Ac(n){return new By(n,!0)}Zd.c_=!1;var Jd=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=i,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}};var kI="PersistentStream",Xd=class{constructor(e,t,r,i,o,s,c,l){this.Ci=e,this.b_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Jd(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return V(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}k_(){return V(this,null,function*(){if(this.O_())return this.close(0)})}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return V(this,null,function*(){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(wr(t.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.t_(t)})}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new W(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>V(this,null,function*(){this.state=0,this.start()}))}z_(e){return z(kI,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget(()=>this.D_===e?t():(z(kI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},_v=class extends Xd{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=vL(this.serializer,e),r=function(o){if(!("targetChange"in o))return ce.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ce.min():s.readTime?Yn(s.readTime):ce.min()}(e);return this.listener.J_(t,r)}Z_(e){let t={};t.database=zy(this.serializer),t.addTarget=function(o,s){let c,l=s.target;if(c=Ry(l)?{documents:CL(o,l)}:{query:bL(o,l).ft},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=jT(o,s.resumeToken);let u=Uy(o,s.expectedCount);u!==null&&(c.expectedCount=u)}else if(s.snapshotVersion.compareTo(ce.min())>0){c.readTime=qd(o,s.snapshotVersion.toTimestamp());let u=Uy(o,s.expectedCount);u!==null&&(c.expectedCount=u)}return c}(this.serializer,e);let r=DL(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){let t={};t.database=zy(this.serializer),t.removeTarget=e,this.K_(t)}},wv=class extends Xd{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=wL(e.writeResults,e.commitTime),r=Yn(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=zy(this.serializer),this.K_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>_L(this.serializer,r))};this.K_(t)}};var Cv=class{},bv=class extends Cv{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,$y(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(F.UNKNOWN,o.toString())})}jo(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.jo(e,$y(t,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(F.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}};function UL(n,e,t,r){return new bv(n,e,t,r)}var Ev=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wr(t),this.aa=!1):z("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Yi="RemoteStore",Dv=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo(s=>{r.enqueueAndForget(()=>V(this,null,function*(){Xi(this)&&(z(Yi,"Restarting streams for network reachability change."),yield function(l){return V(this,null,function*(){let u=se(l);u.Ea.add(4),yield Rc(u),u.Va.set("Unknown"),u.Ea.delete(4),yield yf(u)})}(this))}))}),this.Va=new Ev(r,i)}};function yf(n){return V(this,null,function*(){if(Xi(n))for(let e of n.Ra)yield e(!0)})}function Rc(n){return V(this,null,function*(){for(let e of n.Ra)yield e(!1)})}function ZT(n,e){let t=se(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Xv(t)?Jv(t):Ts(t).O_()&&Zv(t,e))}function Yv(n,e){let t=se(n),r=Ts(t);t.Ia.delete(e),r.O_()&&JT(t,e),t.Ia.size===0&&(r.O_()?r.L_():Xi(t)&&t.Va.set("Unknown"))}function Zv(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ts(n).Z_(e)}function JT(n,e){n.da.$e(e),Ts(n).X_(e)}function Jv(n){n.da=new jy({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ts(n).start(),n.Va.ua()}function Xv(n){return Xi(n)&&!Ts(n).x_()&&n.Ia.size>0}function Xi(n){return se(n).Ea.size===0}function XT(n){n.da=void 0}function $L(n){return V(this,null,function*(){n.Va.set("Online")})}function HL(n){return V(this,null,function*(){n.Ia.forEach((e,t)=>{Zv(n,e)})})}function zL(n,e){return V(this,null,function*(){XT(n),Xv(n)?(n.Va.ha(e),Jv(n)):n.Va.set("Unknown")})}function qL(n,e,t){return V(this,null,function*(){if(n.Va.set("Online"),e instanceof Hd&&e.state===2&&e.cause)try{yield function(i,o){return V(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i.Ia.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i.Ia.delete(c),i.da.removeTarget(c))})}(n,e)}catch(r){z(Yi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ef(n,r)}else if(e instanceof ls?n.da.Xe(e):e instanceof $d?n.da.st(e):n.da.tt(e),!t.isEqual(ce.min()))try{let r=yield YT(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let c=o.da.Tt(s);return c.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let f=o.Ia.get(u);f&&o.Ia.set(u,f.withResumeToken(l.resumeToken,s))}}),c.targetMismatches.forEach((l,u)=>{let f=o.Ia.get(l);if(!f)return;o.Ia.set(l,f.withResumeToken(wt.EMPTY_BYTE_STRING,f.snapshotVersion)),JT(o,l);let p=new Cc(f.target,l,u,f.sequenceNumber);Zv(o,p)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){z(Yi,"Failed to raise snapshot:",r),yield ef(n,r)}})}function ef(n,e,t){return V(this,null,function*(){if(!Is(e))throw e;n.Ea.add(1),yield Rc(n),n.Va.set("Offline"),t||(t=()=>YT(n.localStore)),n.asyncQueue.enqueueRetryable(()=>V(null,null,function*(){z(Yi,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield yf(n)}))})}function eS(n,e){return e().catch(t=>ef(n,t,e))}function vf(n){return V(this,null,function*(){let e=se(n),t=Zr(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Uv;for(;GL(e);)try{let i=yield VL(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,WL(e,i)}catch(i){yield ef(e,i)}tS(e)&&nS(e)})}function GL(n){return Xi(n)&&n.Ta.length<10}function WL(n,e){n.Ta.push(e);let t=Zr(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function tS(n){return Xi(n)&&!Zr(n).x_()&&n.Ta.length>0}function nS(n){Zr(n).start()}function KL(n){return V(this,null,function*(){Zr(n).ra()})}function QL(n){return V(this,null,function*(){let e=Zr(n);for(let t of n.Ta)e.ea(t.mutations)})}function YL(n,e,t){return V(this,null,function*(){let r=n.Ta.shift(),i=ky.from(r,e,t);yield eS(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield vf(n)})}function ZL(n,e){return V(this,null,function*(){e&&Zr(n).Y_&&(yield function(r,i){return V(this,null,function*(){if(function(s){return lL(s)&&s!==F.ABORTED}(i.code)){let o=r.Ta.shift();Zr(r).B_(),yield eS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield vf(r)}})}(n,e)),tS(n)&&nS(n)})}function VI(n,e){return V(this,null,function*(){let t=se(n);t.asyncQueue.verifyOperationInProgress(),z(Yi,"RemoteStore received new credentials");let r=Xi(t);t.Ea.add(3),yield Rc(t),r&&t.Va.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield yf(t)})}function JL(n,e){return V(this,null,function*(){let t=se(n);e?(t.Ea.delete(2),yield yf(t)):e||(t.Ea.add(2),yield Rc(t),t.Va.set("Unknown"))})}function Ts(n){return n.ma||(n.ma=function(t,r,i){let o=se(t);return o.sa(),new _v(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:$L.bind(null,n),Yo:HL.bind(null,n),t_:zL.bind(null,n),J_:qL.bind(null,n)}),n.Ra.push(e=>V(null,null,function*(){e?(n.ma.B_(),Xv(n)?Jv(n):n.Va.set("Unknown")):(yield n.ma.stop(),XT(n))}))),n.ma}function Zr(n){return n.fa||(n.fa=function(t,r,i){let o=se(t);return o.sa(),new wv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:KL.bind(null,n),t_:ZL.bind(null,n),ta:QL.bind(null,n),na:YL.bind(null,n)}),n.Ra.push(e=>V(null,null,function*(){e?(n.fa.B_(),yield vf(n)):(yield n.fa.stop(),n.Ta.length>0&&(z(Yi,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}var Iv=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,c=new n(e,t,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function e_(n,e){if(wr("AsyncQueue",`${e}: ${n}`),Is(n))return new W(F.UNAVAILABLE,`${e}: ${n}`);throw n}var Dc=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||X.comparator(t.key,r.key):(t,r)=>X.comparator(t.key,r.key),this.keyedMap=uc(),this.sortedSet=new Ge(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var tf=class{constructor(){this.ga=new Ge(X.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ee(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Zi=class n{constructor(e,t,r,i,o,s,c,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new n(e,t,Dc.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Tv=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}},Sv=class{constructor(){this.queries=FI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=se(t),o=i.queries;i.queries=FI(),o.forEach((s,c)=>{for(let l of c.ba)l.onError(r)})})(this,new W(F.ABORTED,"Firestore shutting down"))}};function FI(){return new Dr(n=>TT(n),gf)}function rS(n,e){return V(this,null,function*(){let t=se(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.Da()&&(r=2):(o=new Tv,r=e.Da()?0:1);try{switch(r){case 0:o.wa=yield t.onListen(i,!0);break;case 1:o.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let c=e_(s,`Initialization of query '${is(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.ba.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&t_(t)})}function iS(n,e){return V(this,null,function*(){let t=se(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.ba.indexOf(e);s>=0&&(o.ba.splice(s,1),o.ba.length===0?i=e.Da()?0:1:!o.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function XL(n,e){let t=se(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let c of s.ba)c.Fa(i)&&(r=!0);s.wa=i}}r&&t_(t)}function e2(n,e,t){let r=se(n),i=r.queries.get(e);if(i)for(let o of i.ba)o.onError(t);r.queries.delete(e)}function t_(n){n.Ca.forEach(e=>{e.next()})}var xv,LI;(LI=xv||(xv={})).Ma="default",LI.Cache="cache";var nf=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Zi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Zi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==xv.Cache}};var rf=class{constructor(e){this.key=e}},of=class{constructor(e){this.key=e}},Mv=class{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ce(),this.mutatedKeys=Ce(),this.eu=ST(e),this.tu=new Dc(this.eu)}get nu(){return this.Za}ru(e,t){let r=t?t.iu:new tf,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,c=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let _=i.get(f),m=mf(this.query,p)?p:null,x=!!_&&this.mutatedKeys.has(_.key),O=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),L=!1;_&&m?_.data.isEqual(m.data)?x!==O&&(r.track({type:3,doc:m}),L=!0):this.su(_,m)||(r.track({type:2,doc:m}),L=!0,(l&&this.eu(m,l)>0||u&&this.eu(m,u)<0)&&(c=!0)):!_&&m?(r.track({type:0,doc:m}),L=!0):_&&!m&&(r.track({type:1,doc:_}),L=!0,(l||u)&&(c=!0)),L&&(m?(s=s.add(m),o=O?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Ss:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((f,p)=>function(m,x){let O=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee(20277,{Vt:L})}};return O(m)-O(x)}(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(r),i=i??!1;let c=t&&!i?this._u():[],l=this.Ya.size===0&&this.current&&!i?1:0,u=l!==this.Xa;return this.Xa=l,s.length!==0||u?{snapshot:new Zi(this.query,e.tu,o,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new tf,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Za=this.Za.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Za=this.Za.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=Ce(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});let t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new of(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new rf(r))}),t}cu(e){this.Za=e.ks,this.Ya=Ce();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Zi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},n_="SyncEngine",Av=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Rv=class{constructor(e){this.key=e,this.hu=!1}},Pv=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Dr(c=>TT(c),gf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ge(X.comparator),this.Au=new Map,this.Vu=new Ec,this.du={},this.mu=new Map,this.fu=bc.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function t2(n,e,t=!0){return V(this,null,function*(){let r=uS(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=yield oS(r,e,t,!0),i})}function n2(n,e){return V(this,null,function*(){let t=uS(n);yield oS(t,e,!0,!1)})}function oS(n,e,t,r){return V(this,null,function*(){let i=yield FL(n.localStore,Qn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),c;return r&&(c=yield r2(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&ZT(n.remoteStore,i),c})}function r2(n,e,t,r,i){return V(this,null,function*(){n.pu=(p,_,m)=>function(O,L,q,J){return V(this,null,function*(){let le=L.view.ru(q);le.Ss&&(le=yield NI(O.localStore,L.query,!1).then(({documents:I})=>L.view.ru(I,le)));let Ct=J&&J.targetChanges.get(L.targetId),pn=J&&J.targetMismatches.get(L.targetId)!=null,mt=L.view.applyChanges(le,O.isPrimaryClient,Ct,pn);return BI(O,L.targetId,mt.au),mt.snapshot})}(n,p,_,m);let o=yield NI(n.localStore,e,!0),s=new Mv(e,o.ks),c=s.ru(o.documents),l=wc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(c,n.isPrimaryClient,l);BI(n,t,u.au);let f=new Av(e,t,s);return n.Tu.set(e,f),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot})}function i2(n,e,t){return V(this,null,function*(){let r=se(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!gf(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield hv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Yv(r.remoteStore,i.targetId),Nv(r,i.targetId)}).catch(Ds))):(Nv(r,i.targetId),yield hv(r.localStore,i.targetId,!0))})}function o2(n,e){return V(this,null,function*(){let t=se(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Yv(t.remoteStore,r.targetId))})}function s2(n,e,t){return V(this,null,function*(){let r=h2(n);try{let i=yield function(s,c){let l=se(s),u=Ye.now(),f=c.reduce((m,x)=>m.add(x.key),Ce()),p,_;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let x=Ir(),O=Ce();return l.xs.getEntries(m,f).next(L=>{x=L,x.forEach((q,J)=>{J.isValidDocument()||(O=O.add(q))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,x)).next(L=>{p=L;let q=[];for(let J of c){let le=cL(J,p.get(J.key).overlayedDocument);le!=null&&q.push(new Tr(J.key,le,_T(le.value.mapValue),Qr.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,q,c)}).next(L=>{_=L;let q=L.applyToLocalDocumentSet(p,O);return l.documentOverlayCache.saveOverlays(m,L.batchId,q)})}).then(()=>({batchId:_.batchId,changes:MT(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,l){let u=s.du[s.currentUser.toKey()];u||(u=new Ge(Ee)),u=u.insert(c,l),s.du[s.currentUser.toKey()]=u}(r,i.batchId,t),yield Pc(r,i.changes),yield vf(r.remoteStore)}catch(i){let o=e_(i,"Failed to persist write");t.reject(o)}})}function sS(n,e){return V(this,null,function*(){let t=se(n);try{let r=yield OL(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?ke(s.hu,14607):i.removedDocuments.size>0&&(ke(s.hu,42227),s.hu=!1))}),yield Pc(t,r,e)}catch(r){yield Ds(r)}})}function jI(n,e,t){let r=se(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(s,c){let l=se(s);l.onlineState=c;let u=!1;l.queries.forEach((f,p)=>{for(let _ of p.ba)_.va(c)&&(u=!0)}),u&&t_(l)}(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function a2(n,e,t){return V(this,null,function*(){let r=se(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Ge(X.comparator);s=s.insert(o,Sn.newNoDocument(o,ce.min()));let c=Ce().add(o),l=new Ud(ce.min(),new Map,new Ge(Ee),s,c);yield sS(r,l),r.Ru=r.Ru.remove(o),r.Au.delete(e),r_(r)}else yield hv(r.localStore,e,!1).then(()=>Nv(r,e,t)).catch(Ds)})}function c2(n,e){return V(this,null,function*(){let t=se(n),r=e.batch.batchId;try{let i=yield NL(t.localStore,e);cS(t,r,null),aS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Pc(t,i)}catch(i){yield Ds(i)}})}function l2(n,e,t){return V(this,null,function*(){let r=se(n);try{let i=yield function(s,c){let l=se(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return l.mutationQueue.lookupMutationBatch(u,c).next(p=>(ke(p!==null,37113),f=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>l.localDocuments.getDocuments(u,f))})}(r.localStore,e);cS(r,e,t),aS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Pc(r,i)}catch(i){yield Ds(i)}})}function aS(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function cS(n,e,t){let r=se(n),i=r.du[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function Nv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach(r=>{n.Vu.containsKey(r)||lS(n,r)})}function lS(n,e){n.Eu.delete(e.path.canonicalString());let t=n.Ru.get(e);t!==null&&(Yv(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),r_(n))}function BI(n,e,t){for(let r of t)r instanceof rf?(n.Vu.addReference(r.key,e),u2(n,r)):r instanceof of?(z(n_,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||lS(n,r.key)):ee(19791,{wu:r})}function u2(n,e){let t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(z(n_,"New document in limbo: "+t),n.Eu.add(r),r_(n))}function r_(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new X(qe.fromString(e)),r=n.fu.next();n.Au.set(r,new Rv(t)),n.Ru=n.Ru.insert(t,r),ZT(n.remoteStore,new Cc(Qn(Mc(t.path)),r,"TargetPurposeLimboResolution",Bv.ce))}}function Pc(n,e,t){return V(this,null,function*(){let r=se(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((c,l)=>{s.push(r.pu(l,e,t).then(u=>{if((u||t)&&r.isPrimaryClient){let f=u?!u.fromCache:t?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);let f=lv.Es(l.targetId,u);o.push(f)}}))}),yield Promise.all(s),r.Pu.J_(i),yield function(l,u){return V(this,null,function*(){let f=se(l);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>j.forEach(u,_=>j.forEach(_.Ts,m=>f.persistence.referenceDelegate.addReference(p,_.targetId,m)).next(()=>j.forEach(_.Is,m=>f.persistence.referenceDelegate.removeReference(p,_.targetId,m)))))}catch(p){if(!Is(p))throw p;z(Qv,"Failed to update sequence numbers: "+p)}for(let p of u){let _=p.targetId;if(!p.fromCache){let m=f.vs.get(_),x=m.snapshotVersion,O=m.withLastLimboFreeSnapshotVersion(x);f.vs=f.vs.insert(_,O)}}})}(r.localStore,o))})}function d2(n,e){return V(this,null,function*(){let t=se(n);if(!t.currentUser.isEqual(e)){z(n_,"User change. New user:",e.toKey());let r=yield QT(t.localStore,e);t.currentUser=e,function(o,s){o.mu.forEach(c=>{c.forEach(l=>{l.reject(new W(F.CANCELLED,s))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pc(t,r.Ns)}})}function f2(n,e){let t=se(n),r=t.Au.get(e);if(r&&r.hu)return Ce().add(r.key);{let i=Ce(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let c=t.Tu.get(s);i=i.unionWith(c.view.nu)}return i}}function uS(n){let e=se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=f2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=a2.bind(null,e),e.Pu.J_=XL.bind(null,e.eventManager),e.Pu.yu=e2.bind(null,e.eventManager),e}function h2(n){let e=se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=c2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=l2.bind(null,e),e}var i_=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return V(this,null,function*(){this.serializer=Ac(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return PL(this.persistence,new dv,t.initialUser,this.serializer)}Cu(t){return new Wd(cv.Vi,this.serializer)}Du(t){return new pv}terminate(){return V(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),sf=class extends i_{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ke(this.persistence.referenceDelegate instanceof Kd,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Qy(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new Wd(r=>Kd.Vi(r,t),this.serializer)}};var dS=(()=>{class n{initialize(t,r){return V(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>jI(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=d2.bind(null,this.syncEngine),yield JL(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Sv}()}createDatastore(t){let r=Ac(t.databaseInfo.databaseId),i=BL(t.databaseInfo);return UL(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,c,l){return new Dv(i,o,s,c,l)}(this.localStore,this.datastore,t.asyncQueue,r=>jI(this.syncEngine,r,0),function(){return Yd.v()?new Yd:new gv}())}createSyncEngine(t,r){return function(o,s,c,l,u,f,p){let _=new Pv(o,s,c,l,u,f);return p&&(_.gu=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return V(this,null,function*(){yield function(r){return V(this,null,function*(){let i=se(r);z(Yi,"RemoteStore shutting down."),i.Ea.add(5),yield Rc(i),i.Aa.shutdown(),i.Va.set("Unknown")})}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var af=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Jr="FirestoreClient",Ov=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=i,this.user=ht.UNAUTHENTICATED,this.clientId=Hi.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>V(this,null,function*(){z(Jr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(z(Jr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>V(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=e_(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function hy(n,e){return V(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),z(Jr,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>V(null,null,function*(){r.isEqual(i)||(yield QT(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function UI(n,e){return V(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield p2(n);z(Jr,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>VI(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>VI(e.remoteStore,i)),n._onlineComponents=e})}function p2(n){return V(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){z(Jr,"Using user provided OfflineComponentProvider");try{yield hy(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Cr("Error using user provided cache. Falling back to memory cache: "+t),yield hy(n,new i_)}}else z(Jr,"Using default OfflineComponentProvider"),yield hy(n,new sf(void 0));return n._offlineComponents})}function fS(n){return V(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(z(Jr,"Using user provided OnlineComponentProvider"),yield UI(n,n._uninitializedComponentsProvider._online)):(z(Jr,"Using default OnlineComponentProvider"),yield UI(n,new dS))),n._onlineComponents})}function g2(n){return fS(n).then(e=>e.syncEngine)}function kv(n){return V(this,null,function*(){let e=yield fS(n),t=e.eventManager;return t.onListen=t2.bind(null,e.syncEngine),t.onUnlisten=i2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=n2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=o2.bind(null,e.syncEngine),t})}function hS(n,e,t,r){let i=new af(r),o=new nf(e,i,t);return n.asyncQueue.enqueueAndForget(()=>V(null,null,function*(){return rS(yield kv(n),o)})),()=>{i.Nu(),n.asyncQueue.enqueueAndForget(()=>V(null,null,function*(){return iS(yield kv(n),o)}))}}function pS(n,e,t={}){let r=new Wn;return n.asyncQueue.enqueueAndForget(()=>V(null,null,function*(){return function(o,s,c,l,u){let f=new af({next:_=>{f.Nu(),s.enqueueAndForget(()=>iS(o,p));let m=_.docs.has(c);!m&&_.fromCache?u.reject(new W(F.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&_.fromCache&&l&&l.source==="server"?u.reject(new W(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(_)},error:_=>u.reject(_)}),p=new nf(Mc(c.path),f,{includeMetadataChanges:!0,Ka:!0});return rS(o,p)}(yield kv(n),n.asyncQueue,e,t,r)})),r.promise}function gS(n,e){let t=new Wn;return n.asyncQueue.enqueueAndForget(()=>V(null,null,function*(){return s2(yield g2(n),e,t)})),t.promise}function mS(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var m2="ComponentProvider",$I=new Map;function y2(n,e,t,r,i){return new _y(n,e,t,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,mS(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}var yS="firestore.googleapis.com",HI=!0,cf=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yS,this.ssl=HI}else this.host=e.host,this.ssl=e.ssl??HI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=KT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ML)throw new W(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mS(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ic=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ad;switch(r.type){case"firstParty":return new my(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return V(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=$I.get(t);r&&(z(m2,"Removing Datastore"),$I.delete(t),r.terminate())}(this),Promise.resolve()}};function vS(n,e,t,r={}){n=er(n,Ic);let i=yd(e),o=n._getSettings(),s=G(N({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;i&&(VD(`https://${c}`),LD("Firestore",!0)),o.host!==yS&&o.host!==c&&Cr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=G(N({},o),{host:c,ssl:i,emulatorOptions:r});if(!Fi(l,s)&&(n._setSettings(l),r.mockUserToken)){let u,f;if(typeof r.mockUserToken=="string")u=r.mockUserToken,f=ht.MOCK_USER;else{u=FD(r.mockUserToken,n._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new W(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ht(p)}n._authCredentials=new py(new Md(u,f))}}var _s=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},gt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Es(t,n._jsonSchema))return new n(e,r||null,new X(qe.fromString(t.referencePath)))}};gt._jsonSchemaVersion="firestore/documentReference/1.0",gt._jsonSchema={type:Qe("string",gt._jsonSchemaVersion),referencePath:Qe("string")};var ws=class n extends _s{constructor(e,t,r){super(e,t,Mc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new X(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Ss(n,e,...t){if(n=Li(n),arguments.length===1&&(e=Hi.newId()),IF("doc","path",e),n instanceof Ic){let r=qe.fromString(e,...t);return lI(r),new gt(n,null,new X(r))}{if(!(n instanceof gt||n instanceof ws))throw new W(F.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(qe.fromString(e,...t));return lI(r),new gt(n.firestore,n instanceof ws?n.converter:null,new X(r))}}var zI="AsyncQueue",lf=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Jd(this,"async_queue_retry"),this._c=()=>{let r=fy();r&&z(zI,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=fy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=fy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Wn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}lc(){return V(this,null,function*(){if(this.Yu.length!==0){try{yield this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Is(e))throw e;z(zI,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,wr("INTERNAL UNHANDLED ERROR: ",qI(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=Iv.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&ee(47125,{Pc:qI(this.nc)})}verifyOperationInProgress(){}Tc(){return V(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function qI(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var Sr=class extends Ic{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new lf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return V(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new lf(e),this._firestoreClient=void 0,yield e}})}};function o_(n,e){let t=typeof n=="object"?n:rI(),r=typeof n=="string"?n:e||Ld,i=eI(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=kD("firestore");o&&vS(i,...o)}return i}function Nc(n){if(n._terminated)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||v2(n),n._firestoreClient}function v2(n){let e=n._freezeSettings(),t=y2(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Ov(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(n._componentsProvider))}var Zn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(wt.fromBase64String(e))}catch(t){throw new W(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Es(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Zn._jsonSchemaVersion="firestore/bytes/1.0",Zn._jsonSchema={type:Qe("string",Zn._jsonSchemaVersion),bytes:Qe("string")};var Cs=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new W(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Tc=class{constructor(e){this._methodName=e}};var _r=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new W(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new W(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Es(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};_r._jsonSchemaVersion="firestore/geoPoint/1.0",_r._jsonSchema={type:Qe("string",_r._jsonSchemaVersion),latitude:Qe("number"),longitude:Qe("number")};var Jn=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Es(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new W(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Jn._jsonSchemaVersion="firestore/vectorValue/1.0",Jn._jsonSchema={type:Qe("string",Jn._jsonSchemaVersion),vectorValues:Qe("object")};var _2=/^__.*__$/,Vv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Tr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qi(e,this.data,t,this.fieldTransforms)}};function _S(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee(40011,{dataSource:n})}}var Fv=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new n(N(N({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){let t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){let t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return uf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(_S(this.dataSource)&&_2.test(e))throw this.createError('Document fields cannot begin and end with "__"')}},Lv=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ac(e)}createContext(e,t,r,i=!1){return new Fv({dataSource:e,methodName:t,targetDoc:r,path:Gt.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function wS(n){let e=n._freezeSettings(),t=Ac(n._databaseId);return new Lv(n._databaseId,!!e.ignoreUndefinedProperties,t)}function CS(n,e,t,r,i,o={}){let s=n.createContext(o.merge||o.mergeFields?2:0,e,t,i);IS("Data must be an object, but it was:",s,r);let c=ES(r,s),l,u;if(o.merge)l=new Gn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let _=_f(e,p,t);if(!s.contains(_))throw new W(F.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);C2(f,_)||f.push(_)}l=new Gn(f),u=s.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=s.fieldTransforms;return new Vv(new fn(c),l,u)}function bS(n,e){if(DS(n=Li(n)))return IS("Unsupported field value:",e,n),ES(n,e);if(n instanceof Tc)return function(r,i){if(!_S(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let c of r){let l=bS(c,i.childContextForArray(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Li(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ye.fromDate(r);return{timestampValue:qd(i.serializer,o)}}if(r instanceof Ye){let o=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qd(i.serializer,o)}}if(r instanceof _r)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zn)return{bytesValue:jT(i.serializer,r._byteString)};if(r instanceof gt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Kv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Jn)return function(s,c){let l=s instanceof Jn?s.toArray():s;return{mapValue:{fields:{[$v]:{stringValue:Hv},[ds]:{arrayValue:{values:l.map(f=>{if(typeof f!="number")throw c.createError("VectorValues must only contain numeric values.");return Wv(c.serializer,f)})}}}}}}(r,i);if(GT(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${df(r)}`)}(n,e)}function ES(n,e){let t={};return uT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ji(n,(r,i)=>{let o=bS(i,e.childContextForField(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function DS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ye||n instanceof _r||n instanceof Zn||n instanceof gt||n instanceof Tc||n instanceof Jn||GT(n))}function IS(n,e,t){if(!DS(t)||!QI(t)){let r=df(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function _f(n,e,t){if((e=Li(e))instanceof Cs)return e._internalPath;if(typeof e=="string")return TS(n,e);throw uf("Field path arguments must be of type string or ",n,!1,void 0,t)}var w2=new RegExp("[~\\*/\\[\\]]");function TS(n,e,t){if(e.search(w2)>=0)throw uf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cs(...e.split("."))._internalPath}catch{throw uf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function uf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new W(F.INVALID_ARGUMENT,c+n+l)}function C2(n,e){return n.some(t=>t.isEqual(e))}var Sc=class{convertValue(e,t="none"){switch(Yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Er(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ji(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[ds].arrayValue?.values?.map(r=>Ue(r.doubleValue));return new Jn(t)}convertGeoPoint(e){return new _r(Ue(e.latitude),Ue(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=pf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(mc(e));default:return null}}convertTimestamp(e){let t=br(e);return new Ye(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=qe.fromString(e);ke(qT(r),9688,{name:e});let i=new yc(r.get(1),r.get(3)),o=new X(r.popFirst(5));return i.isEqual(t)||wr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};var xc=class extends Sc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,t)}};var SS="@firebase/firestore",xS="4.11.0";function MS(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var wf=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new s_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let t=this._document.data.field(_f("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},s_=class extends wf{data(){return super.data()}};function I2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new W(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function T2(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var eo=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},to=class n extends wf{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new xs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(_f("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};to._jsonSchemaVersion="firestore/documentSnapshot/1.0",to._jsonSchema={type:Qe("string",to._jsonSchemaVersion),bundleSource:Qe("string","DocumentSnapshot"),bundleName:Qe("string"),bundle:Qe("string")};var xs=class extends to{data(e={}){return super.data(e)}},Ms=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new eo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new xs(this._firestore,this._userDataWriter,r.key,r,new eo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new W(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let l=new xs(i._firestore,i._userDataWriter,c.doc.key,c.doc,new eo(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let l=new xs(i._firestore,i._userDataWriter,c.doc.key,c.doc,new eo(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,f=-1;return c.type!==0&&(u=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),f=s.indexOf(c.doc.key)),{type:S2(c.type),doc:l,oldIndex:u,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Hi.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function S2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee(61501,{type:n})}}Ms._jsonSchemaVersion="firestore/querySnapshot/1.0",Ms._jsonSchema={type:Qe("string",Ms._jsonSchemaVersion),bundleSource:Qe("string","QuerySnapshot"),bundleName:Qe("string"),bundle:Qe("string")};function AS(n){n=er(n,gt);let e=er(n.firestore,Sr),t=Nc(e);return pS(t,n._key).then(r=>NS(e,n,r))}function RS(n,e,t){n=er(n,gt);let r=er(n.firestore,Sr),i=T2(n.converter,e,t),o=wS(r);return x2(r,[CS(o,"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Qr.none())])}function PS(n,...e){n=Li(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||MS(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(MS(e[r])){let u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let o,s,c;if(n instanceof gt)s=er(n.firestore,Sr),c=Mc(n._key.path),o={next:u=>{e[r]&&e[r](NS(s,n,u))},error:e[r+1],complete:e[r+2]};else{let u=er(n,_s);s=er(u.firestore,Sr),c=u._query;let f=new xc(s);o={next:p=>{e[r]&&e[r](new Ms(s,f,u,p))},error:e[r+1],complete:e[r+2]},I2(n._query)}let l=Nc(s);return hS(l,c,i,o)}function x2(n,e){let t=Nc(n);return gS(t,e)}function NS(n,e,t){let r=t.docs.get(e._key),i=new xc(n);return new to(n,i,e._key,r,new eo(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){GI(nI),sc(new gr("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new Sr(new Rd(r.getProvider("auth-internal")),new Nd(s,r.getProvider("app-check-internal")),gT(s,i),s);return o=N({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Kr(SS,xS,e),Kr(SS,xS,"esm2020")})();var OS={apiKey:"YOUR_API_KEY",authDomain:"YOUR_PROJECT_ID.firebaseapp.com",projectId:"YOUR_PROJECT_ID",storageBucket:"YOUR_PROJECT_ID.appspot.com",messagingSenderId:"YOUR_MESSAGING_SENDER_ID",appId:"YOUR_APP_ID"},Cf=class n{constructor(){this.app=null;this.db=null;this.unsubscribe=null;this.isInitialized=!1}initialize(){if(!this.isInitialized)try{let e=this.getFirebaseConfig();if(!e||!e.projectId||e.projectId==="YOUR_PROJECT_ID"){console.warn("Firebase not configured. Using localStorage only.");return}this.app=ny(e),this.db=o_(this.app),this.isInitialized=!0}catch(e){console.error("Firebase initialization error:",e)}}getFirebaseConfig(){let e=localStorage.getItem("firebase-config");if(e)try{return JSON.parse(e)}catch{return OS}return OS}setFirebaseConfig(e){localStorage.setItem("firebase-config",JSON.stringify(e)),this.isInitialized=!1,this.initialize()}saveApartments(e,t){return V(this,null,function*(){if(!this.db||!this.isInitialized)throw new Error("Firebase not initialized");try{let r=Ss(this.db,"users",t);yield RS(r,{apartments:e,lastUpdated:new Date().toISOString()})}catch(r){throw console.error("Error saving to Firebase:",r),r}})}loadApartments(e){return V(this,null,function*(){if(!this.db||!this.isInitialized)return null;try{let t=Ss(this.db,"users",e),r=yield AS(t);return r.exists()&&r.data().apartments||null}catch(t){return console.error("Error loading from Firebase:",t),null}})}subscribeToApartments(e,t){if(!(!this.db||!this.isInitialized)){this.unsubscribe&&this.unsubscribe();try{let r=Ss(this.db,"users",e);this.unsubscribe=PS(r,i=>{if(i.exists()){let o=i.data();t(o.apartments||[])}})}catch(r){console.error("Error subscribing to Firebase:",r)}}}unsubscribeFromApartments(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)}isConfigured(){return this.isInitialized&&this.db!==null}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}};var kS="apartment-manager-user-id",a_="cloud-sync-enabled",bf=class n{constructor(e){this.firebase=e;this.syncEnabled=Y(this.loadSyncEnabled());this.userId=this.getOrCreateUserId();this.isSyncing=!1;this.syncEnabled$=this.syncEnabled.asReadonly();this.firebase.initialize(),Ai(()=>{this.syncEnabled()?this.setupRealtimeSync():this.firebase.unsubscribeFromApartments()})}getOrCreateUserId(){let e=localStorage.getItem(kS);return e||(e=gd(),localStorage.setItem(kS,e)),e}loadSyncEnabled(){return localStorage.getItem(a_)==="true"}enableSync(e){e&&this.firebase.setFirebaseConfig(e),this.syncEnabled.set(!0),localStorage.setItem(a_,"true")}disableSync(){this.syncEnabled.set(!1),localStorage.setItem(a_,"false"),this.firebase.unsubscribeFromApartments()}syncToCloud(e){return V(this,null,function*(){if(!(!this.syncEnabled()||this.isSyncing)&&this.firebase.isConfigured()){this.isSyncing=!0;try{yield this.firebase.saveApartments(e,this.userId)}catch(t){console.error("Cloud sync error:",t)}finally{this.isSyncing=!1}}})}syncFromCloud(){return V(this,null,function*(){if(!this.syncEnabled()||!this.firebase.isConfigured())return null;try{return yield this.firebase.loadApartments(this.userId)}catch(e){return console.error("Cloud load error:",e),null}})}setupRealtimeSync(){this.firebase.isConfigured()&&this.firebase.subscribeToApartments(this.userId,e=>{if(!this.isSyncing&&e.length>0){let t=new CustomEvent("cloud-sync-update",{detail:e});window.dispatchEvent(t)}})}getUserId(){return this.userId}static{this.\u0275fac=function(t){return new(t||n)(ne(Cf))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}};var Oc=M0("App",{web:()=>import("./chunk-UD7QDXYL.js").then(n=>new n.AppWeb)});var VS="https://accounts.google.com/gsi/client",A2="https://accounts.google.com/o/oauth2/v2/auth",FS="https://www.googleapis.com/auth/drive.file",c_="part-manager.json",l_="gdrive-file-id",u_="gdrive-client-id",d_="gdrive-access-token",f_="gdrive_oauth_callback",kc="gdrive_code_verifier",R2="https://oauth2.googleapis.com/token",P2="838239311300-ji616dlcecp6upb9417t6jf0agqh7mt0.apps.googleusercontent.com",h_="gdrive-native-redirect-uri",LS="https://0x20cello.github.io/apt-manager/oauth-redirect",jS="com.apartmentmanager.app",p_="gdrive-config-loaded",Xr=class n{constructor(){this.platformId=k(Di);this.accessToken=this.loadAccessToken();this.tokenClient=null;this.fileId=this.loadFileId();this.connectedSignal=Y(!!this.accessToken);this.connected=this.connectedSignal.asReadonly();this.clientId=Y(this.loadClientId());this.nativeRedirectUri=Y(this.loadNativeRedirectUri());this.lastError=Y(null);this.isSaving=Y(!1);rm(this.platformId)&&(this.handleOAuthCallback(),window.addEventListener("hashchange",()=>this.handleOAuthCallback()),ai.isNativePlatform()&&Oc.addListener("appUrlOpen",e=>this.handleOAuthFromUrl(e.url)),this.accessToken&&(this.connectedSignal.set(!0),this.triggerConfigLoad()))}get isNative(){return ai.isNativePlatform()}applyOAuthParams(e){let t=e.get("access_token"),r=e.get("error");return r?(this.lastError.set(r),!0):t?(this.storeAccessToken(t),this.connectedSignal.set(!0),this.lastError.set(null),this.triggerConfigLoad(),!0):!1}exchangeCodeForToken(e,t){return V(this,null,function*(){let r=new URLSearchParams({code:e,code_verifier:t,client_id:this.clientId(),redirect_uri:this.getRedirectUri(),grant_type:"authorization_code"}),i=yield fetch(R2,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!i.ok){let s=yield i.json().catch(()=>({}));return this.lastError.set(s.error||`Token exchange failed: ${i.status}`),null}return(yield i.json()).access_token||null})}handleOAuthFromUrl(e){try{let t=new URL(e),r=t.hash?.slice(1),i=t.search?.slice(1),o=r||i;if(!o)return;let s=new URLSearchParams(o),c=s.get("code"),l=s.get("error");if(l){this.lastError.set(l);return}if(c){let u=sessionStorage.getItem(kc);sessionStorage.removeItem(kc),u&&this.exchangeCodeForToken(c,u).then(f=>{f&&(this.storeAccessToken(f),this.connectedSignal.set(!0),this.lastError.set(null),this.triggerConfigLoad())});return}if(this.applyOAuthParams(s))try{sessionStorage.removeItem(f_)}catch{}}catch{}}handleOAuthCallback(){let e=null;try{let r=sessionStorage.getItem(f_);r&&(e=new URLSearchParams(r),sessionStorage.removeItem(f_))}catch{}if(!e){let r=window.location.hash?.slice(1),i=window.location.search?.slice(1),o=r&&(r.includes("access_token=")||r.includes("error=")||r.includes("code="))?r:i&&(i.includes("access_token=")||i.includes("error=")||i.includes("code="))?i:null;if(!o)return;e=new URLSearchParams(o)}if(!e)return;let t=e.get("code");if(t){let r=sessionStorage.getItem(kc);sessionStorage.removeItem(kc),r&&this.exchangeCodeForToken(t,r).then(i=>{i&&(this.storeAccessToken(i),this.connectedSignal.set(!0),this.lastError.set(null),this.triggerConfigLoad()),typeof window<"u"&&window.history.replaceState(null,"",window.location.pathname||"/")});return}if(this.applyOAuthParams(e)&&typeof window<"u"){let r=(window.location.pathname||"/")+(window.location.search||"");window.history.replaceState(null,"",r)}}useRedirectFlow(){return ai.isNativePlatform()}randomString(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=new Uint8Array(e);return crypto.getRandomValues(r),Array.from(r,i=>t[i%t.length]).join("")}generateCodeChallenge(e){return V(this,null,function*(){let t=new TextEncoder().encode(e),r=yield crypto.subtle.digest("SHA-256",t);return btoa(String.fromCharCode(...new Uint8Array(r))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}loadFileId(){return localStorage.getItem(l_)}loadClientId(){return localStorage.getItem(u_)??P2}loadAccessToken(){return localStorage.getItem(d_)}setClientId(e){this.clientId.set(e),e?localStorage.setItem(u_,e):localStorage.removeItem(u_)}loadNativeRedirectUri(){return typeof localStorage<"u"&&localStorage.getItem(h_)||LS}setNativeRedirectUri(e){let t=e?.trim()??"";this.nativeRedirectUri.set(t),t?localStorage.setItem(h_,t):localStorage.removeItem(h_)}getRedirectUri(){return typeof window>"u"?"":ai.isNativePlatform()?this.nativeRedirectUri()||"":window.location.origin}storeFileId(e){this.fileId=e,e?localStorage.setItem(l_,e):localStorage.removeItem(l_)}storeAccessToken(e){this.accessToken=e,e?localStorage.setItem(d_,e):localStorage.removeItem(d_)}loadScript(){return V(this,null,function*(){if(!window.google?.accounts?.oauth2?.initTokenClient)return new Promise((e,t)=>{if(document.querySelector(`script[src="${VS}"]`)){window.google?.accounts?.oauth2?.initTokenClient?e():window.gapiLoad=()=>e();return}let i=document.createElement("script");i.src=VS,i.async=!0,i.onload=()=>{window.google?.accounts?.oauth2?.initTokenClient?e():window.gapiLoad=()=>e()},i.onerror=()=>t(new Error("Failed to load Google script")),document.head.appendChild(i)})})}initTokenClient(){let e=this.clientId();!e||this.tokenClient||(this.tokenClient=window.google.accounts.oauth2.initTokenClient({client_id:e,scope:FS,callback:t=>{if(t.error){this.lastError.set(t.error),this.connectedSignal.set(!1),this.storeAccessToken(null);return}this.lastError.set(null),this.storeAccessToken(t.access_token),this.connectedSignal.set(!0),this.triggerConfigLoad()}}))}triggerConfigLoad(){this.loadFromDrive().then(e=>{e&&typeof window<"u"&&window.dispatchEvent(new CustomEvent(p_,{detail:e}))})}connect(){return V(this,null,function*(){let e=this.clientId();if(!e.trim())return this.lastError.set("Enter your Google Client ID in settings"),!1;if(this.lastError.set(null),this.useRedirectFlow()){let t=this.getRedirectUri();if(!t||!t.startsWith("https://"))return this.lastError.set("Set Native redirect URL (https) in settings \u2014 your app URL + /oauth-redirect"),!1;let r=this.randomString(64),i=yield this.generateCodeChallenge(r);try{sessionStorage.setItem(kc,r)}catch{return this.lastError.set("Storage unavailable"),!1}let o=new URLSearchParams({client_id:e,redirect_uri:this.getRedirectUri(),response_type:"code",scope:FS,code_challenge:i,code_challenge_method:"S256",access_type:"offline"});return window.location.href=`${A2}?${o.toString()}`,!0}try{return yield this.loadScript(),this.initTokenClient(),this.tokenClient.requestAccessToken(),!0}catch(t){return this.lastError.set(t instanceof Error?t.message:"Failed to connect"),!1}})}tryRestoreSession(){return V(this,null,function*(){if(this.clientId()?.trim())try{if(yield this.loadScript(),this.initTokenClient(),!this.tokenClient)return;this.tokenClient.requestAccessToken({prompt:"none"})}catch{}})}requestTokenSilent(){this.tokenClient?.requestAccessToken({prompt:"none"})}disconnect(){this.accessToken&&window.google?.accounts?.oauth2?.revoke(this.accessToken,()=>{}),this.storeAccessToken(null),this.fileId=null,this.storeFileId(null),this.connectedSignal.set(!1),this.lastError.set(null)}loadFromDrive(){return V(this,null,function*(){if(!this.accessToken)return null;let e=this.accessToken,t=this.fileId;if(!t){let i=yield fetch(`https://www.googleapis.com/drive/v3/files?q=name%3D'${encodeURIComponent(c_)}'%20and%20'root'%20in%20parents&fields=files(id)`,{headers:{Authorization:`Bearer ${e}`}});if(i.status===401)return this.connectedSignal.set(!1),this.storeAccessToken(null),null;if(!i.ok)return null;let o=yield i.json();if(!o.files?.length)return null;t=o.files[0].id,this.fileId=t,this.storeFileId(t)}let r=yield fetch(`https://www.googleapis.com/drive/v3/files/${t}?alt=media`,{headers:{Authorization:`Bearer ${e}`}});return r.status===401?(this.connectedSignal.set(!1),this.storeAccessToken(null),null):r.ok?r.text():null})}saveToDrive(e){!this.connectedSignal()||!this.accessToken||(this.isSaving.set(!0),this.doSave(e).catch(()=>{}).finally(()=>this.isSaving.set(!1)))}doSave(e){return V(this,null,function*(){if(!this.accessToken)return;let t=this.accessToken;if(this.fileId){let f=yield fetch(`https://www.googleapis.com/upload/drive/v3/files/${this.fileId}?uploadType=media`,{method:"PATCH",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:e});if(f.status===401){this.connectedSignal.set(!1),this.storeAccessToken(null);return}if(!f.ok){this.lastError.set(`Save failed: ${f.status}`);return}this.lastError.set(null);return}let r=yield fetch(`https://www.googleapis.com/drive/v3/files?q=name%3D'${encodeURIComponent(c_)}'%20and%20'root'%20in%20parents&fields=files(id)`,{headers:{Authorization:`Bearer ${t}`}});if(r.status===401){this.connectedSignal.set(!1),this.storeAccessToken(null);return}if(!r.ok){this.lastError.set(`List failed: ${r.status}`);return}let i=yield r.json();if(i.files?.length>0){this.fileId=i.files[0].id,this.storeFileId(this.fileId),yield this.doSave(e);return}let o="part-manager-boundary-"+Date.now(),s=JSON.stringify({name:c_,parents:["root"]}),c=`--${o}\r
Content-Type: application/json; charset=UTF-8\r
\r
${s}\r
--${o}\r
Content-Type: application/json\r
\r
${e}\r
--${o}--`,l=yield fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":`multipart/related; boundary=${o}`},body:c});if(l.status===401){this.connectedSignal.set(!1),this.storeAccessToken(null);return}if(!l.ok){this.lastError.set(`Create failed: ${l.status}`);return}let u=yield l.json();this.fileId=u.id,this.storeFileId(this.fileId),this.lastError.set(null)})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}};function Ef(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate())}function ei(n){let e=n.split("-").map(Number);if(e.length!==3||e.some(o=>Number.isNaN(o)))return null;let[t,r,i]=e;return new Date(t,r-1,i)}function Df(n,e){if(!n.endDate)return!1;let t=ei(n.endDate),r=ei(e);return!t||!r?!1:Ef(r).getTime()>Ef(t).getTime()}function g_(n,e=new Date){if(!n.endDate)return!0;let t=ei(n.endDate);return t?Ef(t).getTime()>=Ef(e).getTime():!0}function Vc(n,e,t=new Date){return n.filter(r=>r.roomId===e&&g_(r,t))}var Fc="apartment-manager-data",m_="current-apartment-id",Rt=class n{constructor(){this.cloudSync=k(bf);this.googleDrive=k(Xr);this.apartmentsSignal=Y(this.loadFromStorage());this.currentApartmentIdSignal=Y(this.loadCurrentApartmentId());this.apartments=this.apartmentsSignal.asReadonly();this.currentApartmentId=this.currentApartmentIdSignal.asReadonly();this.currentApartment=Lt(()=>{let e=this.currentApartmentIdSignal();return e&&this.apartmentsSignal().find(t=>t.id===e)||null});this.isSyncingToCloud=!1;this.initializeCloudSync(),window.addEventListener(p_,e=>{let t=e.detail;if(t)try{let r=JSON.parse(t);if(Array.isArray(r)&&r.length>=0){this.isSyncingToCloud=!0;let i=r.map(s=>G(N({},s),{tenants:s.tenants||[]}));this.apartmentsSignal.set(i),localStorage.setItem(Fc,JSON.stringify(i));let o=this.currentApartmentIdSignal();o&&this.setCurrentApartment(o),setTimeout(()=>{this.isSyncingToCloud=!1},100)}}catch{}}),Ai(()=>{let e=this.apartmentsSignal();this.isSyncingToCloud||this.cloudSync.syncToCloud(e)})}initializeCloudSync(){return V(this,null,function*(){window.addEventListener("cloud-sync-update",t=>{let r=t.detail;if(r&&r.length>=0){this.isSyncingToCloud=!0;let i=this.currentApartmentIdSignal();this.apartmentsSignal.set(r),localStorage.setItem(Fc,JSON.stringify(r)),i&&this.setCurrentApartment(i),setTimeout(()=>{this.isSyncingToCloud=!1},100)}});let e=yield this.cloudSync.syncFromCloud();if(e&&e.length>0){let t=this.apartmentsSignal();(t.length===0||this.isCloudDataNewer(e,t))&&(this.isSyncingToCloud=!0,this.apartmentsSignal.set(e),localStorage.setItem(Fc,JSON.stringify(e)),setTimeout(()=>{this.isSyncingToCloud=!1},100))}})}isCloudDataNewer(e,t){return e.length>t.length}loadFromStorage(){let e=localStorage.getItem(Fc);return(e?JSON.parse(e):[]).map(r=>G(N({},r),{tenants:r.tenants||[]}))}loadCurrentApartmentId(){return localStorage.getItem(m_)}saveToStorage(){let e=JSON.stringify(this.apartmentsSignal());localStorage.setItem(Fc,e),this.googleDrive.connected()&&this.googleDrive.saveToDrive(this.exportData())}saveCurrentApartmentId(e){e?localStorage.setItem(m_,e):localStorage.removeItem(m_)}generateId(){return gd()}parseYmdDate(e){if(!e)return null;let t=e.split("-").map(Number);if(t.length!==3||t.some(s=>Number.isNaN(s)))return null;let[r,i,o]=t;return new Date(r,i-1,o)}sanitizeDisabledDates(e){let t=e.disabledDates||[];if(t.length===0)return;let r=this.parseYmdDate(e.startDate)?.getTime(),i=this.parseYmdDate(e.endDate)?.getTime(),o=t.filter(c=>{let l=this.parseYmdDate(c)?.getTime();return!(l===void 0||r!==void 0&&l<r||i!==void 0&&l>i)}),s=Array.from(new Set(o));return s.length>0?s:void 0}withSanitizedDisabledDates(e){let t=this.sanitizeDisabledDates(e);return G(N({},e),{disabledDates:t})}getCurrentApartment(){return this.currentApartment()}setCurrentApartment(e){this.currentApartmentIdSignal.set(e),this.saveCurrentApartmentId(e)}addApartment(e){let t={id:this.generateId(),name:e,rooms:[],expenses:[],tenants:[]};this.apartmentsSignal.update(r=>[...r,t]),this.saveToStorage(),this.currentApartmentIdSignal()||this.setCurrentApartment(t.id)}removeApartment(e){if(this.apartmentsSignal.update(t=>t.filter(r=>r.id!==e)),this.saveToStorage(),this.currentApartmentIdSignal()===e){let t=this.apartmentsSignal();this.setCurrentApartment(t.length>0?t[0].id:null)}}updateApartmentName(e,t){this.apartmentsSignal.update(r=>r.map(i=>i.id===e?G(N({},i),{name:t}):i)),this.saveToStorage()}addRoom(e,t){let r=G(N({},t),{id:this.generateId()});this.apartmentsSignal.update(i=>i.map(o=>o.id===e?G(N({},o),{rooms:[...o.rooms,r]}):o)),this.saveToStorage()}updateRoom(e,t,r){this.apartmentsSignal.update(i=>i.map(o=>o.id===e?G(N({},o),{rooms:o.rooms.map(s=>s.id===t?N(N({},s),r):s)}):o)),this.saveToStorage()}removeRoom(e,t){this.apartmentsSignal.update(r=>r.map(i=>i.id===e?G(N({},i),{rooms:i.rooms.filter(o=>o.id!==t)}):i)),this.saveToStorage()}addExpense(e,t){let r=G(N({},t),{id:this.generateId()});this.apartmentsSignal.update(i=>i.map(o=>o.id===e?G(N({},o),{expenses:[...o.expenses,r]}):o)),this.saveToStorage()}updateExpense(e,t,r){this.apartmentsSignal.update(i=>i.map(o=>o.id===e?G(N({},o),{expenses:o.expenses.map(s=>s.id===t?N(N({},s),r):s)}):o)),this.saveToStorage()}removeExpense(e,t){this.apartmentsSignal.update(r=>r.map(i=>i.id===e?G(N({},i),{expenses:i.expenses.filter(o=>o.id!==t)}):i)),this.saveToStorage()}calculateMetrics(e){let t=new Set(e.rooms.filter(J=>Vc(e.tenants,J.id).length>0).map(J=>J.id)),r=e.rooms.filter(J=>t.has(J.id)),i=r.reduce((J,le)=>J+(le.rentMin+le.rentMax)/2,0),o=r.reduce((J,le)=>J+le.rentMin,0),s=r.reduce((J,le)=>J+le.rentMax,0),c=e.expenses.reduce((J,le)=>J+(le.cadence==="monthly"?le.amount:le.amount/12),0),l=i*12,u=c*12,f=i-c,p=l-u,_=o*12,m=s*12,x=o-c,O=s-c,L=_-u,q=m-u;return{monthlyRevenue:i,yearlyRevenue:l,monthlyCosts:c,yearlyCosts:u,monthlyProfit:f,yearlyProfit:p,minMonthlyRevenue:o,maxMonthlyRevenue:s,minYearlyRevenue:_,maxYearlyRevenue:m,minMonthlyProfit:x,maxMonthlyProfit:O,minYearlyProfit:L,maxYearlyProfit:q}}exportData(){return JSON.stringify(this.apartmentsSignal(),null,2)}importData(e){this.apartmentsSignal.set(e),this.saveToStorage()}addTenant(e,t){let r=this.withSanitizedDisabledDates(G(N({},t),{id:this.generateId()}));this.apartmentsSignal.update(i=>i.map(o=>o.id===e?G(N({},o),{tenants:[...o.tenants,r]}):o)),this.saveToStorage()}updateTenant(e,t,r){this.apartmentsSignal.update(i=>i.map(o=>o.id===e?G(N({},o),{tenants:o.tenants.map(s=>s.id===t?this.withSanitizedDisabledDates(N(N({},s),r)):s)}):o)),this.saveToStorage()}removeTenant(e,t){this.apartmentsSignal.update(r=>r.map(i=>i.id===e?G(N({},i),{tenants:i.tenants.filter(o=>o.id!==t)}):i)),this.saveToStorage()}toggleTenantOccupancyDate(e,t,r,i){this.apartmentsSignal.update(o=>o.map(s=>s.id===e?G(N({},s),{tenants:s.tenants.map(c=>{if(c.id!==t)return c;let l=c.disabledDates||[],u;return i?u=l.includes(r)?l:[...l,r]:u=l.filter(f=>f!==r),this.withSanitizedDisabledDates(G(N({},c),{disabledDates:u}))})}):s)),this.saveToStorage()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}};var N2=(n,e)=>e.id;function O2(n,e){n&1&&(v(0,"option",3),E(1,"Select an apartment"),y())}function k2(n,e){if(n&1&&(v(0,"option",4),E(1),y()),n&2){let t=e.$implicit;fe("value",t.id),R(),Me(t.name)}}var If=class n{constructor(){this.apartmentService=k(Rt);this.apartments=this.apartmentService.apartments;this.currentApartmentId=this.apartmentService.currentApartmentId}onApartmentChange(e){let t=e.target;this.apartmentService.setCurrentApartment(t.value||null)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ve({type:n,selectors:[["app-apartment-selector"]],decls:7,vars:2,consts:[[1,"apartment-selector"],[1,"selector-label"],[1,"apartment-select",3,"change","value"],["value",""],[3,"value"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"label",1),E(2,"Apartment:"),y(),v(3,"select",2),$("change",function(o){return r.onApartmentChange(o)}),ie(4,O2,2,0,"option",3),Tt(5,k2,2,2,"option",4,N2),y()()),t&2&&(R(3),fe("value",r.currentApartmentId()||""),R(),te(r.currentApartmentId()?-1:4),R(),St(r.apartments()))},styles:[".apartment-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}.selector-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:var(--color-text-secondary)}.apartment-select[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);min-height:44px;border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease;min-width:180px}@media (max-width: 768px){.apartment-selector[_ngcontent-%COMP%]{width:100%}.apartment-select[_ngcontent-%COMP%]{flex:1;min-width:0}}.apartment-select[_ngcontent-%COMP%]:hover{border-color:var(--color-primary-light)}.apartment-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #2563eb1a}"],changeDetection:0})}};var ti=class n{constructor(){this.mobileMenuOpen=Y(!1);this.showGoogleDriveModal=Y(!1)}toggleMobileMenu(){this.mobileMenuOpen.update(e=>!e)}closeMobileMenu(){this.mobileMenuOpen.set(!1)}openGoogleDriveModal(){this.showGoogleDriveModal.set(!0)}closeGoogleDriveModal(){this.showGoogleDriveModal.set(!1)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}};var Tf=class n{constructor(){this.layout=k(ti)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ve({type:n,selectors:[["app-header"]],decls:9,vars:0,consts:[[1,"app-header"],[1,"header-left"],["type","button","aria-label","Open menu",1,"menu-btn",3,"click"],[1,"menu-icon"],[1,"header-right"]],template:function(t,r){t&1&&(v(0,"header",0)(1,"div",1)(2,"button",2),$("click",function(){return r.layout.toggleMobileMenu()}),Ke(3,"span",3)(4,"span",3)(5,"span",3),y(),Ke(6,"app-logo"),y(),v(7,"div",4),Ke(8,"app-apartment-selector"),y()())},dependencies:[pd,If],styles:[".app-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-lg) var(--spacing-xl);padding-top:max(var(--spacing-lg),env(safe-area-inset-top));padding-left:max(var(--spacing-lg),env(safe-area-inset-left));padding-right:max(var(--spacing-xl),env(safe-area-inset-right));background:var(--color-card-bg);border-bottom:1px solid var(--color-border);box-shadow:var(--shadow-sm)}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md)}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1;min-width:0;justify-content:flex-end}.menu-btn[_ngcontent-%COMP%]{display:none;flex-direction:column;justify-content:center;gap:5px;width:44px;height:44px;padding:0;border:none;border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-primary);cursor:pointer;transition:background .2s ease}.menu-btn[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.menu-icon[_ngcontent-%COMP%]{display:block;width:20px;height:2px;background:currentColor;border-radius:1px}@media (max-width: 768px){.menu-btn[_ngcontent-%COMP%]{display:flex}.app-header[_ngcontent-%COMP%]{flex-wrap:wrap;gap:var(--spacing-md)}.header-right[_ngcontent-%COMP%]{width:100%;order:3}}@media (min-width: 769px){.menu-btn[_ngcontent-%COMP%]{display:none}}"],changeDetection:0})}};var QS=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Ie(ur),Ie(Jt))};static \u0275dir=We({type:n})}return n})(),Rf=(()=>{class n extends QS{static \u0275fac=(()=>{let t;return function(i){return(t||(t=En(n)))(i||n)}})();static \u0275dir=We({type:n,features:[ln]})}return n})(),Hc=new Z("");var V2={provide:Hc,useExisting:wn(()=>Wt),multi:!0};function F2(){let n=un()?un().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var L2=new Z(""),Wt=(()=>{class n extends QS{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!F2())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Ie(ur),Ie(Jt),Ie(L2,8))};static \u0275dir=We({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&$("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[dr([V2]),ln]})}return n})();function j2(n){return n==null||B2(n)===0}function B2(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Pf=new Z(""),U2=new Z("");function $2(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function H2(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function z2(n){return j2(n.value)?{required:!0}:null}function BS(n){return null}function YS(n){return n!=null}function ZS(n){return Uo(n)?$e(n):n}function JS(n){let e={};return n.forEach(t=>{e=t!=null?N(N({},e),t):e}),Object.keys(e).length===0?null:e}function XS(n,e){return e.map(t=>t(n))}function q2(n){return!n.validate}function ex(n){return n.map(e=>q2(e)?e:t=>e.validate(t))}function G2(n){if(!n)return null;let e=n.filter(YS);return e.length==0?null:function(t){return JS(XS(t,e))}}function tx(n){return n!=null?G2(ex(n)):null}function W2(n){if(!n)return null;let e=n.filter(YS);return e.length==0?null:function(t){let r=XS(t,e).map(ZS);return Gh(r).pipe(me(JS))}}function nx(n){return n!=null?W2(ex(n)):null}function US(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function K2(n){return n._rawValidators}function Q2(n){return n._rawAsyncValidators}function y_(n){return n?Array.isArray(n)?n:[n]:[]}function xf(n,e){return Array.isArray(n)?n.includes(e):n===e}function $S(n,e){let t=y_(e);return y_(n).forEach(i=>{xf(t,i)||t.push(i)}),t}function HS(n,e){return y_(e).filter(t=>!xf(n,t))}var Mf=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=tx(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=nx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},v_=class extends Mf{name;get formDirective(){return null}get path(){return null}},$c=class extends Mf{_parent=null;name=null;valueAccessor=null},__=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Y2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},_7=G(N({},Y2),{"[class.ng-submitted]":"isSubmitted"}),hn=(()=>{class n extends __{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Ie($c,2))};static \u0275dir=We({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Xt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[ln]})}return n})();var Lc="VALID",Sf="INVALID",As="PENDING",jc="DISABLED",Ps=class{},Af=class extends Ps{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Bc=class extends Ps{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Uc=class extends Ps{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Rs=class extends Ps{status;source;constructor(e,t){super(),this.status=e,this.source=t}};function Z2(n){return(Nf(n)?n.validators:n)||null}function J2(n){return Array.isArray(n)?tx(n):n||null}function X2(n,e){return(Nf(e)?e.asyncValidators:n)||null}function ej(n){return Array.isArray(n)?nx(n):n||null}function Nf(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var w_=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Mi(this.statusReactive)}set status(e){Mi(()=>this.statusReactive.set(e))}_status=Lt(()=>this.statusReactive());statusReactive=Y(void 0);get valid(){return this.status===Lc}get invalid(){return this.status===Sf}get pending(){return this.status==As}get disabled(){return this.status===jc}get enabled(){return this.status!==jc}errors;get pristine(){return Mi(this.pristineReactive)}set pristine(e){Mi(()=>this.pristineReactive.set(e))}_pristine=Lt(()=>this.pristineReactive());pristineReactive=Y(!0);get dirty(){return!this.pristine}get touched(){return Mi(this.touchedReactive)}set touched(e){Mi(()=>this.touchedReactive.set(e))}_touched=Lt(()=>this.touchedReactive());touchedReactive=Y(!1);get untouched(){return!this.touched}_events=new Be;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators($S(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators($S(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(HS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(HS(e,this._rawAsyncValidators))}hasValidator(e){return xf(this._rawValidators,e)}hasAsyncValidator(e){return xf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(G(N({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Uc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Uc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(G(N({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Bc(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Bc(!0,r))}markAsPending(e={}){this.status=As;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rs(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(G(N({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=jc,this.errors=null,this._forEachChild(i=>{i.disable(G(N({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Af(this.value,r)),this._events.next(new Rs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(G(N({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Lc,this._forEachChild(r=>{r.enable(G(N({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(G(N({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Lc||this.status===As)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Af(this.value,t)),this._events.next(new Rs(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(G(N({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?jc:Lc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=As,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=ZS(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Rs(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new at,this.statusChanges=new at}_calculateStatus(){return this._allControlsDisabled()?jc:this.errors?Sf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(As)?As:this._anyControlsHaveStatus(Sf)?Sf:Lc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Bc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Uc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Nf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=J2(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=ej(this._rawAsyncValidators)}};var rx=new Z("",{providedIn:"root",factory:()=>C_}),C_="always";function tj(n,e){return[...e.path,n]}function nj(n,e,t=C_){ij(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),oj(n,e),aj(n,e),sj(n,e),rj(n,e)}function zS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function rj(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function ij(n,e){let t=K2(n);e.validator!==null?n.setValidators(US(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Q2(n);e.asyncValidator!==null?n.setAsyncValidators(US(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();zS(e._rawValidators,i),zS(e._rawAsyncValidators,i)}function oj(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&ix(n,e)})}function sj(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&ix(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function ix(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function aj(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function cj(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function lj(n){return Object.getPrototypeOf(n.constructor)===Rf}function uj(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Wt?t=o:lj(o)?r=o:i=o}),i||r||t||null}function qS(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function GS(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var dj=class extends w_{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Z2(t),X2(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Nf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(GS(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){qS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){qS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){GS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var fj={provide:$c,useExisting:wn(()=>nn)},WS=Promise.resolve(),nn=(()=>{class n extends $c{_changeDetectorRef;callSetDisabledState;control=new dj;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new at;constructor(t,r,i,o,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=uj(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),cj(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){nj(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){WS.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&xi(r);WS.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?tj(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(Ie(v_,9),Ie(Pf,10),Ie(U2,10),Ie(Hc,10),Ie(Si,8),Ie(rx,8))};static \u0275dir=We({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[dr([fj]),ln,lr]})}return n})();var hj={provide:Hc,useExisting:wn(()=>xr),multi:!0},xr=(()=>{class n extends Rf{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=En(n)))(i||n)}})();static \u0275dir=We({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&$("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[dr([hj]),ln]})}return n})();var pj={provide:Hc,useExisting:wn(()=>Ns),multi:!0};function ox(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function gj(n){return n.split(":")[0]}var Ns=(()=>{class n extends Rf{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=ox(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=gj(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=En(n)))(i||n)}})();static \u0275dir=We({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&$("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[dr([pj]),ln]})}return n})(),Of=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(ox(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Ie(Jt),Ie(ur),Ie(Ns,9))};static \u0275dir=We({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),mj={provide:Hc,useExisting:wn(()=>sx),multi:!0};function KS(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function yj(n){return n.split(":")[0]}var sx=(()=>{class n extends Rf{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let c=0;c<s.length;c++){let l=s[c],u=this._getOptionValue(l.value);i.push(u)}}else{let s=r.options;for(let c=0;c<s.length;c++){let l=s[c];if(l.selected){let u=this._getOptionValue(l.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=yj(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=En(n)))(i||n)}})();static \u0275dir=We({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&$("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[dr([mj]),ln]})}return n})(),kf=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(KS(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(KS(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Ie(Jt),Ie(ur),Ie(sx,9))};static \u0275dir=We({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function ax(n){return typeof n=="number"?n:parseFloat(n)}var b_=(()=>{class n{_validator=BS;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):BS,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=We({type:n,features:[lr]})}return n})(),vj={provide:Pf,useExisting:wn(()=>E_),multi:!0},E_=(()=>{class n extends b_{max;inputName="max";normalizeInput=t=>ax(t);createValidator=t=>H2(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=En(n)))(i||n)}})();static \u0275dir=We({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ii("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[dr([vj]),ln]})}return n})(),_j={provide:Pf,useExisting:wn(()=>Mr),multi:!0},Mr=(()=>{class n extends b_{min;inputName="min";normalizeInput=t=>ax(t);createValidator=t=>$2(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=En(n)))(i||n)}})();static \u0275dir=We({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ii("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[dr([_j]),ln]})}return n})(),wj={provide:Pf,useExisting:wn(()=>D_),multi:!0};var D_=(()=>{class n extends b_{required;inputName="required";normalizeInput=xi;createValidator=t=>z2;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=En(n)))(i||n)}})();static \u0275dir=We({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ii("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[dr([wj]),ln]})}return n})();var Cj=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hr({type:n});static \u0275inj=$r({})}return n})();var Kt=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:rx,useValue:t.callSetDisabledState??C_}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hr({type:n});static \u0275inj=$r({imports:[Cj]})}return n})();var bj=()=>({exact:!0});function Ej(n,e){n&1&&Ke(0,"span",21)}var Vf=class n{constructor(){this.apartmentService=k(Rt);this.googleDrive=k(Xr);this.layout=k(ti);this.newApartmentName=Y("");this.showGoogleDrive=Y(!1);this.gdriveConnected=this.googleDrive.connected}addApartment(){let e=this.newApartmentName().trim();e&&(this.apartmentService.addApartment(e),this.newApartmentName.set(""))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ve({type:n,selectors:[["app-sidebar"]],decls:49,vars:7,consts:[[1,"sidebar"],[1,"sidebar-nav"],[1,"nav-section-title"],[1,"nav-list"],[1,"nav-item"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-link",3,"click","routerLinkActiveOptions"],[1,"nav-icon"],["routerLink","/expenses","routerLinkActive","active",1,"nav-link",3,"click"],["routerLink","/rooms","routerLinkActive","active",1,"nav-link",3,"click"],["routerLink","/tenants","routerLinkActive","active",1,"nav-link",3,"click"],["routerLink","/bill-calculator","routerLinkActive","active",1,"nav-link",3,"click"],[1,"sidebar-forms"],[1,"form-section"],[1,"form-section-title"],[1,"input-group"],["type","text","placeholder","Apartment name...",3,"ngModelChange","keydown.enter","ngModel"],[1,"btn-primary",3,"click","disabled"],[1,"icon"],[1,"form-section","settings-section"],[1,"settings-actions"],[1,"btn-settings",3,"click"],[1,"sync-indicator"]],template:function(t,r){t&1&&(v(0,"aside",0)(1,"nav",1)(2,"h3",2),E(3,"Navigation"),y(),v(4,"ul",3)(5,"li",4)(6,"a",5),$("click",function(){return r.layout.closeMobileMenu()}),v(7,"span",6),E(8,"\u{1F4CA}"),y(),E(9," Dashboard "),y()(),v(10,"li",4)(11,"a",7),$("click",function(){return r.layout.closeMobileMenu()}),v(12,"span",6),E(13,"\u{1F4BC}"),y(),E(14," Expenses "),y()(),v(15,"li",4)(16,"a",8),$("click",function(){return r.layout.closeMobileMenu()}),v(17,"span",6),E(18,"\u{1F6AA}"),y(),E(19," Rooms "),y()(),v(20,"li",4)(21,"a",9),$("click",function(){return r.layout.closeMobileMenu()}),v(22,"span",6),E(23,"\u{1F465}"),y(),E(24," Tenants "),y()(),v(25,"li",4)(26,"a",10),$("click",function(){return r.layout.closeMobileMenu()}),v(27,"span",6),E(28,"\u{1F4B0}"),y(),E(29," Bill Calculator "),y()()()(),v(30,"div",11)(31,"section",12)(32,"h3",13),E(33,"Add Apartment"),y(),v(34,"div",14)(35,"input",15),Re("ngModelChange",function(o){return Ne(r.newApartmentName,o)||(r.newApartmentName=o),o}),$("keydown.enter",function(){return r.addApartment()}),y(),v(36,"button",16),$("click",function(){return r.addApartment()}),v(37,"span",17),E(38,"+"),y(),E(39," Add "),y()()(),v(40,"section",18)(41,"h3",13),E(42,"Data"),y(),v(43,"div",19)(44,"button",20),$("click",function(){return r.layout.openGoogleDriveModal()}),v(45,"span",17),E(46,"\u{1F4C1}"),y(),E(47," Save to Drive "),ie(48,Ej,1,0,"span",21),y()()()()()),t&2&&(R(6),fe("routerLinkActiveOptions",vE(6,bj)),R(29),Ae("ngModel",r.newApartmentName),R(),fe("disabled",!r.newApartmentName().trim()),R(8),Xt("active",r.gdriveConnected()),R(4),te(r.gdriveConnected()?48:-1))},dependencies:[Kt,Wt,hn,nn,es,km],styles:[".sidebar[_ngcontent-%COMP%]{width:280px;max-width:85vw;background:var(--color-card-bg);border-right:1px solid var(--color-border);display:flex;flex-direction:column;height:100%;overflow-y:auto;flex-shrink:0}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;bottom:0;z-index:1001;transform:translate(-100%);transition:transform .2s ease;box-shadow:var(--shadow-xl);padding-top:env(safe-area-inset-top)}.sidebar-open[_nghost-%COMP%]   .sidebar[_ngcontent-%COMP%], .sidebar-open   [_nghost-%COMP%]   .sidebar[_ngcontent-%COMP%]{transform:translate(0)}}.sidebar-nav[_ngcontent-%COMP%]{padding:var(--spacing-lg);border-bottom:1px solid var(--color-border)}.nav-section-title[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;color:var(--color-text-secondary);text-transform:uppercase;letter-spacing:.05em;margin:0 0 var(--spacing-md) 0}.nav-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.nav-item[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xs)}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-md) var(--spacing-lg);min-height:44px;color:var(--color-text-secondary);text-decoration:none;border-radius:var(--border-radius-md);transition:all .2s ease;font-size:.9rem}.nav-link[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);color:var(--color-text-primary)}.nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff}.nav-icon[_ngcontent-%COMP%]{font-size:1.1rem}.sidebar-forms[_ngcontent-%COMP%]{padding:var(--spacing-lg);flex:1}.form-section[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.form-section-title[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text-primary);margin:0 0 var(--spacing-md) 0}.input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-family:inherit;transition:all .2s ease}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #2563eb1a}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--color-text-tertiary)}.btn-primary[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--spacing-sm);padding:var(--spacing-md) var(--spacing-lg);min-height:44px;border:none;border-radius:var(--border-radius-md);background:var(--color-primary);color:#fff;font-size:.9rem;font-weight:600;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-primary-dark);transform:translateY(-1px)}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.icon[_ngcontent-%COMP%]{font-size:1rem}.settings-section[_ngcontent-%COMP%]{border-top:1px solid var(--color-border);padding-top:var(--spacing-lg);margin-top:var(--spacing-lg)}.settings-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.btn-settings[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-md) var(--spacing-lg);min-height:44px;border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.875rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease;text-align:left}.btn-settings[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);border-color:var(--color-primary-light)}.btn-settings.active[_ngcontent-%COMP%]{background:#10b9811a;border-color:var(--color-success)}.sync-indicator[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:var(--color-success);margin-left:auto}.empty-state[_ngcontent-%COMP%]{padding:var(--spacing-md);text-align:center;color:var(--color-text-tertiary);font-size:.9rem}"],changeDetection:0})}};function Dj(n,e){if(n&1&&(v(0,"p",10),E(1),y()),n&2){let t=P();R(),Me(t.lastError())}}function Ij(n,e){n&1&&(v(0,"span",14),E(1,"Saving\u2026"),y())}function Tj(n,e){if(n&1){let t=xe();v(0,"div",12),Ke(1,"span",13),v(2,"span"),E(3,"Connected to Google Drive"),y(),ie(4,Ij,2,0,"span",14),y(),v(5,"div",11)(6,"button",15),$("click",function(){B(t);let i=P();return U(i.disconnect())}),E(7,"Disconnect"),y(),v(8,"button",16),$("click",function(){B(t);let i=P();return U(i.close.emit())}),E(9,"Close"),y()()}if(n&2){let t=P();R(4),te(t.isSaving()?4:-1)}}function Sj(n,e){if(n&1){let t=xe();v(0,"div",11)(1,"button",17),$("click",function(){B(t);let i=P();return U(i.connect())}),E(2,"Connect Google Drive"),y(),v(3,"button",16),$("click",function(){B(t);let i=P();return U(i.close.emit())}),E(4,"Cancel"),y()()}}var Ff=class n{constructor(){this.gdrive=k(Xr);this.clientIdInput=Y("");this.connected=this.gdrive.connected;this.lastError=this.gdrive.lastError;this.isSaving=this.gdrive.isSaving;this.close=tt();Ai(()=>{let e=this.gdrive.clientId();this.clientIdInput.set(e)})}get redirectUri(){return this.gdrive.getRedirectUri()}ngOnInit(){this.gdrive.tryRestoreSession()}connect(){let e=this.clientIdInput().trim();e&&this.gdrive.setClientId(e),this.gdrive.connect()}disconnect(){this.gdrive.disconnect()}onBackdropClick(e){e.target===e.currentTarget&&this.close.emit()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ve({type:n,selectors:[["app-google-drive-settings"]],outputs:{close:"close"},decls:24,vars:4,consts:[[1,"gdrive-modal",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"help-text"],[1,"form-group"],["type","text","placeholder","xxx.apps.googleusercontent.com",3,"ngModelChange","ngModel"],[1,"redirect-uri-help"],[1,"redirect-uri-value"],[1,"error-text"],[1,"form-actions"],[1,"status","connected"],[1,"status-dot"],[1,"saving"],["type","button",1,"btn-danger",3,"click"],["type","button",1,"btn-secondary",3,"click"],["type","button",1,"btn-primary",3,"click"]],template:function(t,r){t&1&&(v(0,"div",0),$("click",function(o){return r.onBackdropClick(o)}),v(1,"div",1),$("click",function(o){return o.stopPropagation()}),v(2,"div",2)(3,"h2"),E(4,"Google Drive"),y(),v(5,"button",3),$("click",function(){return r.close.emit()}),E(6,"\u2715"),y()(),v(7,"div",4)(8,"p",5),E(9," Save part-manager.json to your Google Drive root. After connecting, every save will sync to Drive in the background. "),y(),v(10,"div",6)(11,"label"),E(12,"Google Client ID"),y(),v(13,"input",7),$("ngModelChange",function(o){return r.clientIdInput.set(o)}),y()(),v(14,"p",8),E(15," Add this to "),v(16,"strong"),E(17,"Authorized redirect URIs"),y(),E(18,": "),v(19,"code",9),E(20),y()(),ie(21,Dj,2,1,"p",10)(22,Tj,10,1)(23,Sj,5,0,"div",11),y()()()),t&2&&(R(13),fe("ngModel",r.clientIdInput()),R(7),Me(r.redirectUri),R(),te(r.lastError()?21:-1),R(),te(r.connected()?22:23))},dependencies:[Kt,Wt,hn,nn],styles:[".gdrive-modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1100;padding:var(--spacing-lg)}.modal-content[_ngcontent-%COMP%]{background:var(--color-card-bg);border-radius:var(--border-radius-xl);box-shadow:var(--shadow-xl);max-width:480px;width:100%}@media (max-width: 768px){.gdrive-modal[_ngcontent-%COMP%]{padding:var(--spacing-md);padding-left:max(var(--spacing-md),env(safe-area-inset-left));padding-right:max(var(--spacing-md),env(safe-area-inset-right));align-items:flex-start}.modal-content[_ngcontent-%COMP%]{max-height:calc(100vh - 2 * var(--spacing-md) - env(safe-area-inset-top) - env(safe-area-inset-bottom));overflow-y:auto}.btn-close[_ngcontent-%COMP%]{min-width:44px;min-height:44px}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-lg);border-bottom:1px solid var(--color-border)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700;color:var(--color-text-primary)}.btn-close[_ngcontent-%COMP%]{width:32px;height:32px;border:none;border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-secondary);font-size:1.2rem;cursor:pointer}.btn-close[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);color:var(--color-text-primary)}.modal-body[_ngcontent-%COMP%]{padding:var(--spacing-lg)}.help-text[_ngcontent-%COMP%]{color:var(--color-text-secondary);margin:0 0 var(--spacing-lg) 0;font-size:.9rem;line-height:1.5}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:var(--spacing-xs);font-size:.875rem;font-weight:500;color:var(--color-text-primary)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-family:inherit}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary)}.field-help[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-secondary);margin:var(--spacing-xs) 0 0 0;line-height:1.4}.field-help[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-family:JetBrains Mono,monospace;font-size:.7rem}.redirect-uri-help[_ngcontent-%COMP%]{font-size:.8rem;color:var(--color-text-secondary);margin:0 0 var(--spacing-md) 0;line-height:1.5}.redirect-uri-value[_ngcontent-%COMP%]{display:inline-block;padding:var(--spacing-xs) var(--spacing-sm);background:var(--color-bg-secondary);border-radius:var(--border-radius-sm);font-family:JetBrains Mono,monospace;font-size:.75rem;word-break:break-all}.error-text[_ngcontent-%COMP%]{color:var(--color-error);font-size:.875rem;margin:0 0 var(--spacing-md) 0}.status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-md);border-radius:var(--border-radius-md);background:var(--color-bg-secondary);margin-bottom:var(--spacing-lg)}.status.connected[_ngcontent-%COMP%]{background:#10b9811a}.status-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;background:var(--color-text-tertiary)}.status.connected[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:var(--color-success)}.saving[_ngcontent-%COMP%]{margin-left:auto;font-size:.85rem;color:var(--color-text-secondary)}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-md);justify-content:flex-end}.btn-primary[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);border:none;border-radius:var(--border-radius-md);background:var(--color-primary);color:#fff;font-size:.9rem;font-weight:600;cursor:pointer}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark)}.btn-secondary[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-secondary);font-size:.9rem;cursor:pointer}.btn-secondary[_ngcontent-%COMP%]:hover{border-color:var(--color-border-light);color:var(--color-text-primary)}.btn-danger[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);border:none;border-radius:var(--border-radius-md);background:var(--color-error);color:#fff;font-size:.9rem;font-weight:600;cursor:pointer}.btn-danger[_ngcontent-%COMP%]:hover{background:var(--color-error-dark)}"],changeDetection:0})}};function xj(n,e){if(n&1){let t=xe();v(0,"app-google-drive-settings",4),$("close",function(){B(t);let i=P();return U(i.layout.closeGoogleDriveModal())}),y()}}var Lf=class n{constructor(){this.layout=k(ti)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ve({type:n,selectors:[["app-root"]],decls:8,vars:3,consts:[[1,"app-container"],[1,"backdrop",3,"click"],[1,"app-layout"],[1,"app-main"],[3,"close"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1),$("click",function(){return r.layout.closeMobileMenu()}),y(),Ke(2,"app-header"),v(3,"div",2),Ke(4,"app-sidebar"),v(5,"main",3),Ke(6,"router-outlet"),y()()(),ie(7,xj,1,0,"app-google-drive-settings")),t&2&&(Xt("sidebar-open",r.layout.mobileMenuOpen()),R(7),te(r.layout.showGoogleDriveModal()?7:-1))},dependencies:[Xa,Tf,Vf,Ff],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;min-height:100dvh;background:var(--color-bg-primary)}.app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;height:100dvh;overflow:hidden}.backdrop[_ngcontent-%COMP%]{display:none;position:fixed;inset:0;z-index:1000;background:#00000080;opacity:0;pointer-events:none;transition:opacity .2s ease}@media (max-width: 768px){.app-container.sidebar-open[_ngcontent-%COMP%]   .backdrop[_ngcontent-%COMP%]{display:block;opacity:1;pointer-events:auto}}@media (min-width: 769px){.backdrop[_ngcontent-%COMP%]{display:none!important}}.app-layout[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden}.app-main[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;background:var(--color-bg-secondary)}@media (max-width: 768px){.app-main[_ngcontent-%COMP%]{padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);padding-bottom:env(safe-area-inset-bottom)}}"],changeDetection:0})}};function Mj(n,e){if(n&1&&(v(0,"span",3),E(1),y()),n&2){let t=P();R(),Ti("",t.formatCurrency(t.minValue())," - ",t.formatCurrency(t.maxValue()),"")}}var jf=class n{constructor(){this.label=ze.required();this.value=ze.required();this.type=ze("revenue");this.minValue=ze(0);this.maxValue=ze(0);this.showRange=ze(!1);this.isNegative=ze(!1)}formatCurrency(e){return new Intl.NumberFormat("en-AE",{style:"currency",currency:"AED",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ve({type:n,selectors:[["app-metrics-card"]],inputs:{label:[1,"label"],value:[1,"value"],type:[1,"type"],minValue:[1,"minValue"],maxValue:[1,"maxValue"],showRange:[1,"showRange"],isNegative:[1,"isNegative"]},decls:6,vars:7,consts:[[1,"metric-card"],[1,"metric-label"],[1,"metric-value"],[1,"metric-range"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"span",1),E(2),y(),v(3,"span",2),E(4),y(),ie(5,Mj,2,2,"span",3),y()),t&2&&(iE(r.type()),Xt("negative",r.isNegative()),R(2),Me(r.label()),R(2),Me(r.formatCurrency(r.value())),R(),te(r.showRange()&&r.minValue()!==r.maxValue()?5:-1))},styles:[".metric-card[_ngcontent-%COMP%]{padding:var(--spacing-md);border-radius:var(--border-radius-lg);display:flex;flex-direction:column;gap:var(--spacing-xs);border:1px solid var(--color-border);background:var(--color-card-bg);box-shadow:var(--shadow-sm);transition:all .2s ease}.metric-card[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-md);transform:translateY(-1px)}.metric-card.revenue[_ngcontent-%COMP%]{border-left:3px solid var(--color-success)}.metric-card.costs[_ngcontent-%COMP%]{border-left:3px solid var(--color-warning)}.metric-card.profit[_ngcontent-%COMP%]{border-left:3px solid var(--color-primary)}.metric-card.profit.negative[_ngcontent-%COMP%]{border-left-color:var(--color-error)}.metric-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-secondary);text-transform:uppercase;letter-spacing:.05em;font-weight:600}.metric-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;font-family:JetBrains Mono,monospace;color:var(--color-text-primary)}.metric-card.revenue[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{color:var(--color-success-dark)}.metric-card.costs[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{color:var(--color-warning-dark)}.metric-card.profit[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{color:var(--color-primary)}.metric-card.profit.negative[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{color:var(--color-error)}.metric-range[_ngcontent-%COMP%]{font-size:.7rem;color:var(--color-text-tertiary);font-family:JetBrains Mono,monospace}"],changeDetection:0})}};var Aj=(n,e)=>e.id;function Rj(n,e){n&1&&(v(0,"div",1)(1,"div",3),E(2,"\u{1F3E0}"),y(),v(3,"h3"),E(4,"No apartment selected"),y(),v(5,"p"),E(6,"Select an apartment from the dropdown above or add a new apartment from the sidebar"),y()())}function Pj(n,e){n&1&&(v(0,"p",19),E(1,"No upcoming rent collections this month"),y())}function Nj(n,e){if(n&1&&(v(0,"span",30),E(1),y()),n&2){let t=P().$implicit,r=P(3);R(),Ti(" (",r.formatCurrency(t.amountMin)," - ",r.formatCurrency(t.amountMax),") ")}}function Oj(n,e){if(n&1&&(v(0,"div",21)(1,"div",22)(2,"span",23),E(3),y(),v(4,"span",24),E(5),y()(),v(6,"div",25)(7,"div",26),E(8),y(),v(9,"div",27),E(10),y()(),v(11,"div",28)(12,"span",29),E(13),y(),ie(14,Nj,2,2,"span",30),y()()),n&2){let t=e.$implicit,r=P(3);R(3),Me(t.day),R(2),Me(t.monthName),R(3),Me(t.tenantName),R(2),xt("Room: ",t.roomName,""),R(3),Me(r.formatCurrency(t.amount)),R(),te(t.amountMin!==t.amountMax?14:-1)}}function kj(n,e){if(n&1&&(v(0,"div",20),Tt(1,Oj,15,6,"div",21,Aj),y()),n&2){P();let t=mE(29);R(),St(t)}}function Vj(n,e){if(n&1){let t=xe();v(0,"div",2)(1,"div",4)(2,"input",5),$("blur",function(i){B(t);let o=P();return U(o.onApartmentNameChange(i))})("keydown.enter",function(i){B(t);let o=P();return U(o.blurTarget(i))}),y()(),v(3,"section",6)(4,"h3",7),E(5,"Financial Summary"),y(),$o(6),v(7,"div",8)(8,"div",9)(9,"h4",10),E(10,"Revenue"),y(),v(11,"div",11),Ke(12,"app-metrics-card",12)(13,"app-metrics-card",13),y()(),v(14,"div",9)(15,"h4",10),E(16,"Costs"),y(),v(17,"div",11),Ke(18,"app-metrics-card",14)(19,"app-metrics-card",15),y()(),v(20,"div",9)(21,"h4",10),E(22,"Profit"),y(),v(23,"div",11),Ke(24,"app-metrics-card",16)(25,"app-metrics-card",17),y()()()(),v(26,"section",18)(27,"h3",7),E(28,"Upcoming Rent Collections"),y(),$o(29),ie(30,Pj,2,0,"p",19)(31,kj,3,0,"div",20),y()()}if(n&2){let t=P();R(2),fe("value",t.currentApartment().name);let r=t.getMetrics();R(10),fe("value",r.monthlyRevenue)("minValue",r.minMonthlyRevenue)("maxValue",r.maxMonthlyRevenue)("showRange",!0),R(),fe("value",r.yearlyRevenue)("minValue",r.minYearlyRevenue)("maxValue",r.maxYearlyRevenue)("showRange",!0),R(5),fe("value",r.monthlyCosts),R(),fe("value",r.yearlyCosts),R(5),fe("value",r.monthlyProfit)("isNegative",r.monthlyProfit<0)("minValue",r.minMonthlyProfit)("maxValue",r.maxMonthlyProfit)("showRange",!0),R(),fe("value",r.yearlyProfit)("isNegative",r.yearlyProfit<0)("minValue",r.minYearlyProfit)("maxValue",r.maxYearlyProfit)("showRange",!0),R(4);let i=gE(t.getUpcomingRentCollections());R(),te(i.length===0?30:31)}}var Bf=class n{constructor(){this.apartmentService=k(Rt);this.currentApartment=this.apartmentService.currentApartment}getMetrics(){let e=this.currentApartment();return e?this.apartmentService.calculateMetrics(e):{monthlyRevenue:0,yearlyRevenue:0,monthlyCosts:0,yearlyCosts:0,monthlyProfit:0,yearlyProfit:0,minMonthlyRevenue:0,maxMonthlyRevenue:0,minYearlyRevenue:0,maxYearlyRevenue:0,minMonthlyProfit:0,maxMonthlyProfit:0,minYearlyProfit:0,maxYearlyProfit:0}}getUpcomingRentCollections(){let e=this.currentApartment();if(!e)return[];let t=new Date,r=t.getMonth(),i=t.getFullYear(),o=new Date(i,r+1,0).getDate(),s=t.getDate(),c=[];for(let l of e.tenants){if(!l.rentCollectionDay||!g_(l,t))continue;let u=l.rentCollectionDay,f=e.rooms.find(p=>p.id===l.roomId);if(f&&u>=s&&u<=o){let _=new Date(i,r,u).toLocaleDateString("en-US",{month:"short"}),m=(f.rentMin+f.rentMax)/2;c.push({id:`${l.id}-${u}`,day:u,monthName:_,tenantName:l.name,roomName:f.name,amount:m,amountMin:f.rentMin,amountMax:f.rentMax})}}return c.sort((l,u)=>l.day-u.day)}formatCurrency(e){return new Intl.NumberFormat("en-AE",{style:"currency",currency:"AED",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}onApartmentNameChange(e){let t=this.currentApartment();if(!t)return;let r=e.target,i=r.value.trim();i&&i!==t.name?this.apartmentService.updateApartmentName(t.id,i):r.value=t.name}blurTarget(e){e.target.blur()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ve({type:n,selectors:[["app-dashboard"]],decls:3,vars:1,consts:[[1,"dashboard-container"],[1,"empty-state"],[1,"dashboard-content"],[1,"empty-icon"],[1,"dashboard-header"],["type","text",1,"apartment-title-input",3,"blur","keydown.enter","value"],[1,"metrics-section"],[1,"section-title"],[1,"metrics-columns"],[1,"metrics-column"],[1,"column-title"],[1,"column-cards"],["label","Monthly Revenue","type","revenue",3,"value","minValue","maxValue","showRange"],["label","Yearly Revenue","type","revenue",3,"value","minValue","maxValue","showRange"],["label","Monthly Costs","type","costs",3,"value"],["label","Yearly Costs","type","costs",3,"value"],["label","Monthly Profit","type","profit",3,"value","isNegative","minValue","maxValue","showRange"],["label","Yearly Profit","type","profit",3,"value","isNegative","minValue","maxValue","showRange"],[1,"rent-collections-section"],[1,"no-collections"],[1,"collections-list"],[1,"collection-item"],[1,"collection-date"],[1,"date-day"],[1,"date-month"],[1,"collection-details"],[1,"collection-tenant"],[1,"collection-room"],[1,"collection-amount"],[1,"amount-value"],[1,"amount-range"]],template:function(t,r){t&1&&(v(0,"div",0),ie(1,Rj,7,0,"div",1)(2,Vj,32,23,"div",2),y()),t&2&&(R(),te(r.currentApartment()?2:1))},dependencies:[jf,Kt],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:var(--spacing-xl);min-height:100%}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-2xl) var(--spacing-xl);color:var(--color-text-secondary)}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--color-text-secondary)}.dashboard-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.dashboard-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.apartment-title-input[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text-primary);margin:0;background:transparent;border:2px solid transparent;border-radius:var(--border-radius-md);padding:var(--spacing-xs) var(--spacing-sm);font-family:inherit;width:100%;max-width:600px;transition:all .2s ease}.apartment-title-input[_ngcontent-%COMP%]:hover{border-color:var(--color-border);background:var(--color-bg-secondary)}.apartment-title-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);background:var(--color-card-bg);box-shadow:0 0 0 3px #2563eb1a}.metrics-section[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-text-primary);margin:0 0 var(--spacing-lg) 0}.metrics-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:var(--spacing-xl)}.metrics-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md);align-items:stretch}.column-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--color-text-secondary);margin:0 0 var(--spacing-xs) 0;padding-left:calc(3px + var(--spacing-md));text-transform:uppercase;letter-spacing:.05em}.column-cards[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}@media (max-width: 1024px){.metrics-columns[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:var(--spacing-md);padding-left:max(var(--spacing-md),env(safe-area-inset-left));padding-right:max(var(--spacing-md),env(safe-area-inset-right))}.apartment-title-input[_ngcontent-%COMP%]{font-size:1.5rem}.metrics-columns[_ngcontent-%COMP%]{grid-template-columns:1fr}.collection-item[_ngcontent-%COMP%]{flex-wrap:wrap;gap:var(--spacing-md)}.collection-amount[_ngcontent-%COMP%]{width:100%;align-items:flex-start}}.rent-collections-section[_ngcontent-%COMP%]{margin-top:var(--spacing-xl)}.no-collections[_ngcontent-%COMP%]{color:var(--color-text-secondary);text-align:center;padding:var(--spacing-lg);margin:0}.collections-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.collection-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-lg);padding:var(--spacing-md);background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);transition:all .2s ease}.collection-item[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);border-color:var(--color-primary-light)}.collection-date[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-width:60px;padding:var(--spacing-sm);background:var(--color-primary);border-radius:var(--border-radius-md);color:#fff}.date-day[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;line-height:1}.date-month[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;text-transform:uppercase;opacity:.9}.collection-details[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:var(--spacing-xs)}.collection-tenant[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--color-text-primary)}.collection-room[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-text-secondary)}.collection-amount[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:var(--spacing-xs)}.amount-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--color-primary)}.amount-range[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-secondary)}"],changeDetection:0})}};var Fj=(n,e)=>e.id;function Lj(n,e){if(n&1){let t=xe();v(0,"div",2)(1,"input",5),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.newExpenseName,i)||(o.newExpenseName=i),U(i)}),y(),v(2,"div",6)(3,"input",7),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.newExpenseAmount,i)||(o.newExpenseAmount=i),U(i)}),y(),v(4,"select",8),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.newExpenseCadence,i)||(o.newExpenseCadence=i),U(i)}),v(5,"option",9),E(6,"Monthly"),y(),v(7,"option",10),E(8,"Yearly"),y()()(),v(9,"div",11)(10,"button",12),$("click",function(){B(t);let i=P();return U(i.handleAdd())}),E(11,"Add"),y(),v(12,"button",13),$("click",function(){B(t);let i=P();return U(i.showAddForm.set(!1))}),E(13,"Cancel"),y()()()}if(n&2){let t=P();R(),Ae("ngModel",t.newExpenseName),R(2),Ae("ngModel",t.newExpenseAmount),R(),Ae("ngModel",t.newExpenseCadence)}}function jj(n,e){n&1&&(v(0,"p",3),E(1,"No expenses added yet"),y())}function Bj(n,e){if(n&1){let t=xe();v(0,"div",14)(1,"div",15)(2,"input",16),$("blur",function(i){let o=B(t).$implicit,s=P(2);return U(s.onExpenseNameChange(o.id,i))})("keydown.enter",function(i){B(t);let o=P(2);return U(o.blurTarget(i))}),y(),v(3,"div",17)(4,"input",18),$("blur",function(i){let o=B(t).$implicit,s=P(2);return U(s.onAmountChange(o.id,i))})("keydown.enter",function(i){B(t);let o=P(2);return U(o.blurTarget(i))}),y(),v(5,"select",19),$("change",function(i){let o=B(t).$implicit,s=P(2);return U(s.onCadenceChange(o.id,i))}),v(6,"option",9),E(7,"Monthly"),y(),v(8,"option",10),E(9,"Yearly"),y()()()(),v(10,"button",20),$("click",function(){let i=B(t).$implicit,o=P(2);return U(o.onRemove(i.id))}),E(11,"\u2715"),y()()}if(n&2){let t=e.$implicit;R(2),fe("value",t.name),R(2),fe("value",t.amount),R(),fe("value",t.cadence)}}function Uj(n,e){if(n&1&&(v(0,"div",4),Tt(1,Bj,12,3,"div",14,Fj),y()),n&2){let t=P();R(),St(t.expenses())}}var Uf=class n{constructor(){this.expenses=ze.required();this.expenseAdded=tt();this.expenseUpdated=tt();this.expenseRemoved=tt();this.showAddForm=Y(!1);this.newExpenseName=Y("");this.newExpenseAmount=Y(0);this.newExpenseCadence=Y("monthly")}handleAdd(){let e=this.newExpenseName().trim();e&&(this.expenseAdded.emit({name:e,amount:this.newExpenseAmount(),cadence:this.newExpenseCadence()}),this.newExpenseName.set(""),this.newExpenseAmount.set(0),this.newExpenseCadence.set("monthly"),this.showAddForm.set(!1))}onExpenseNameChange(e,t){let r=t.target;this.expenseUpdated.emit({id:e,updates:{name:r.value}})}onAmountChange(e,t){let r=t.target;this.expenseUpdated.emit({id:e,updates:{amount:+r.value}})}onCadenceChange(e,t){let r=t.target;this.expenseUpdated.emit({id:e,updates:{cadence:r.value}})}onRemove(e){this.expenseRemoved.emit(e)}blurTarget(e){e.target.blur()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ve({type:n,selectors:[["app-expense-list"]],inputs:{expenses:[1,"expenses"]},outputs:{expenseAdded:"expenseAdded",expenseUpdated:"expenseUpdated",expenseRemoved:"expenseRemoved"},decls:8,vars:2,consts:[[1,"section-header"],[1,"btn-add-small",3,"click"],[1,"add-form"],[1,"empty-list"],[1,"expenses-list"],["type","text","placeholder","Expense name",3,"ngModelChange","ngModel"],[1,"expense-inputs"],["type","number","placeholder","Amount","min","0",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","monthly"],["value","yearly"],[1,"form-actions"],[1,"btn-confirm",3,"click"],[1,"btn-cancel",3,"click"],[1,"expense-item"],[1,"expense-info"],["type","text",1,"inline-edit",3,"blur","keydown.enter","value"],[1,"expense-amount"],["type","number","min","0",1,"inline-number",3,"blur","keydown.enter","value"],[3,"change","value"],[1,"btn-delete-small",3,"click"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"h3"),E(2,"Expenses"),y(),v(3,"button",1),$("click",function(){return r.showAddForm.set(!0)}),E(4,"+ Add Expense"),y()(),ie(5,Lj,14,3,"div",2)(6,jj,2,0,"p",3)(7,Uj,3,0,"div",4)),t&2&&(R(5),te(r.showAddForm()?5:-1),R(),te(r.expenses().length===0?6:7))},dependencies:[Kt,Of,kf,Wt,xr,Ns,hn,Mr,nn],styles:[".section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-md)}@media (max-width: 768px){.section-header[_ngcontent-%COMP%]{flex-wrap:wrap;gap:var(--spacing-sm)}.expense-inputs[_ngcontent-%COMP%]{flex-wrap:wrap}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{min-height:44px}}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--color-text-primary);font-size:1rem;font-weight:600;margin:0}.btn-add-small[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-primary-light);border-radius:var(--border-radius-md);background:transparent;color:var(--color-primary);font-size:.85rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-add-small[_ngcontent-%COMP%]:hover{background:var(--color-primary-lighter);background-opacity:.1;border-color:var(--color-primary)}.add-form[_ngcontent-%COMP%]{background:var(--color-bg-secondary);border:1px solid var(--color-primary-light);border-radius:var(--border-radius-lg);padding:var(--spacing-md);margin-bottom:var(--spacing-md);display:flex;flex-direction:column;gap:var(--spacing-sm)}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:var(--spacing-sm);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-family:inherit;transition:all .2s ease}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary)}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--color-text-tertiary)}.expense-inputs[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:center}.expense-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1}.expense-inputs[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:120px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);justify-content:flex-end}.btn-confirm[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:none;border-radius:var(--border-radius-md);background:var(--color-primary);color:#fff;font-size:.85rem;font-weight:600;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-confirm[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark);transform:translateY(-1px)}.btn-cancel[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-secondary);font-size:.85rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-cancel[_ngcontent-%COMP%]:hover{border-color:var(--color-border-light);color:var(--color-text-primary)}.empty-list[_ngcontent-%COMP%]{color:var(--color-text-tertiary);font-size:.9rem;text-align:center;padding:var(--spacing-md);margin:0}.expenses-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.expense-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-sm) var(--spacing-md);background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);transition:all .2s ease}.expense-item[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.expense-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs);flex:1}.inline-edit[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--color-text-primary);font-size:.95rem;font-weight:500;font-family:inherit;padding:var(--spacing-xs);border-radius:var(--border-radius-sm);width:100%;transition:all .2s ease}.inline-edit[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.inline-edit[_ngcontent-%COMP%]:focus{outline:none;background:var(--color-bg-secondary)}.expense-amount[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);color:var(--color-text-secondary);font-size:.85rem}.inline-number[_ngcontent-%COMP%]{width:70px;background:transparent;border:none;color:var(--color-text-secondary);font-size:.85rem;font-family:JetBrains Mono,monospace;padding:var(--spacing-xs);border-radius:var(--border-radius-sm);transition:all .2s ease}.inline-number[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.inline-number[_ngcontent-%COMP%]:focus{outline:none;background:var(--color-bg-secondary);color:var(--color-text-primary)}.inline-number[_ngcontent-%COMP%]::-webkit-inner-spin-button, .inline-number[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.expense-amount[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);border:1px solid var(--color-border);border-radius:var(--border-radius-sm);background:var(--color-card-bg);color:var(--color-text-secondary);font-size:.8rem;font-family:inherit;cursor:pointer}.expense-amount[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary)}.btn-delete-small[_ngcontent-%COMP%]{width:28px;height:28px;border:none;border-radius:var(--border-radius-sm);background:transparent;color:var(--color-text-tertiary);font-size:.8rem;cursor:pointer;transition:all .2s ease}.btn-delete-small[_ngcontent-%COMP%]:hover{background:#ef44441a;color:var(--color-error)}"],changeDetection:0})}};function $j(n,e){n&1&&(v(0,"div",3)(1,"div",5),E(2,"\u{1F4BC}"),y(),v(3,"h3"),E(4,"No apartment selected"),y(),v(5,"p"),E(6,"Select an apartment from the dropdown above to manage expenses"),y()())}function Hj(n,e){if(n&1){let t=xe();v(0,"div",4)(1,"app-expense-list",6),$("expenseAdded",function(i){B(t);let o=P();return U(o.onExpenseAdded(i))})("expenseUpdated",function(i){B(t);let o=P();return U(o.onExpenseUpdated(i))})("expenseRemoved",function(i){B(t);let o=P();return U(o.onExpenseRemoved(i))}),y()()}if(n&2){let t=P();R(),fe("expenses",t.currentApartment().expenses)}}var $f=class n{constructor(){this.apartmentService=k(Rt);this.currentApartment=this.apartmentService.currentApartment}onExpenseAdded(e){let t=this.currentApartment();t&&this.apartmentService.addExpense(t.id,e)}onExpenseUpdated(e){let t=this.currentApartment();t&&this.apartmentService.updateExpense(t.id,e.id,e.updates)}onExpenseRemoved(e){let t=this.currentApartment();t&&this.apartmentService.removeExpense(t.id,e)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ve({type:n,selectors:[["app-expenses"]],decls:8,vars:2,consts:[[1,"expenses-page"],[1,"page-header"],[1,"page-subtitle"],[1,"empty-state"],[1,"expenses-content"],[1,"empty-icon"],[3,"expenseAdded","expenseUpdated","expenseRemoved","expenses"]],template:function(t,r){if(t&1&&(v(0,"div",0)(1,"div",1)(2,"h1"),E(3,"Expenses"),y(),v(4,"p",2),E(5),y()(),ie(6,$j,7,0,"div",3)(7,Hj,2,1,"div",4),y()),t&2){let i;R(5),xt("Manage expenses for ",((i=r.currentApartment())==null?null:i.name)||"selected apartment",""),R(),te(r.currentApartment()?7:6)}},dependencies:[Uf],styles:[".expenses-page[_ngcontent-%COMP%]{padding:var(--spacing-xl);min-height:100%}.page-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.page-subtitle[_ngcontent-%COMP%]{color:var(--color-text-secondary);margin:0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-2xl) var(--spacing-xl);color:var(--color-text-secondary)}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--color-text-secondary)}.expenses-content[_ngcontent-%COMP%]{max-width:800px}@media (max-width: 768px){.expenses-page[_ngcontent-%COMP%]{padding:var(--spacing-md);padding-left:max(var(--spacing-md),env(safe-area-inset-left));padding-right:max(var(--spacing-md),env(safe-area-inset-right))}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}"],changeDetection:0})}};var zj=(n,e)=>e.id;function qj(n,e){if(n&1){let t=xe();v(0,"div",2)(1,"input",5),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.newRoomName,i)||(o.newRoomName=i),U(i)}),y(),v(2,"div",6)(3,"input",7),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.newRoomRentMin,i)||(o.newRoomRentMin=i),U(i)}),y(),v(4,"span",8),E(5,"-"),y(),v(6,"input",9),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.newRoomRentMax,i)||(o.newRoomRentMax=i),U(i)}),y()(),v(7,"div",10)(8,"button",11),$("click",function(){B(t);let i=P();return U(i.handleAdd())}),E(9,"Add"),y(),v(10,"button",12),$("click",function(){B(t);let i=P();return U(i.showAddForm.set(!1))}),E(11,"Cancel"),y()()()}if(n&2){let t=P();R(),Ae("ngModel",t.newRoomName),R(2),Ae("ngModel",t.newRoomRentMin),R(3),Ae("ngModel",t.newRoomRentMax)}}function Gj(n,e){n&1&&(v(0,"p",3),E(1,"No rooms added yet"),y())}function Wj(n,e){if(n&1&&(v(0,"span",18),E(1),y()),n&2){let t=P().$implicit,r=P(2);R(),Me(r.getTenantNames(t.id).join(", "))}}function Kj(n,e){n&1&&(v(0,"span",19),E(1,"\u2014"),y())}function Qj(n,e){n&1&&(v(0,"span",20),E(1,"Taken"),y())}function Yj(n,e){n&1&&(v(0,"span",21),E(1,"Available"),y())}function Zj(n,e){if(n&1){let t=xe();v(0,"tr")(1,"td")(2,"input",15),$("blur",function(i){let o=B(t).$implicit,s=P(2);return U(s.onRoomNameChange(o.id,i))})("keydown.enter",function(i){B(t);let o=P(2);return U(o.blurTarget(i))}),y()(),v(3,"td")(4,"div",16)(5,"input",17),$("blur",function(i){let o=B(t).$implicit,s=P(2);return U(s.onRentMinChange(o.id,i))})("keydown.enter",function(i){B(t);let o=P(2);return U(o.blurTarget(i))}),y(),v(6,"span"),E(7,"-"),y(),v(8,"input",17),$("blur",function(i){let o=B(t).$implicit,s=P(2);return U(s.onRentMaxChange(o.id,i))})("keydown.enter",function(i){B(t);let o=P(2);return U(o.blurTarget(i))}),y()()(),v(9,"td"),ie(10,Wj,2,1,"span",18)(11,Kj,2,0,"span",19),y(),v(12,"td"),ie(13,Qj,2,0,"span",20)(14,Yj,2,0,"span",21),y(),v(15,"td")(16,"button",22),$("click",function(){let i=B(t).$implicit,o=P(2);return U(o.onRemove(i.id))}),E(17,"\u2715"),y()()()}if(n&2){let t=e.$implicit,r=P(2);Xt("taken-row",r.isRoomTaken(t.id)),R(2),fe("value",t.name),R(3),fe("value",t.rentMin),R(3),fe("value",t.rentMax),R(2),te(r.getTenantNames(t.id).length>0?10:11),R(3),te(r.isRoomTaken(t.id)?13:14)}}function Jj(n,e){if(n&1&&(v(0,"div",4)(1,"table",13)(2,"thead")(3,"tr")(4,"th"),E(5,"Room"),y(),v(6,"th"),E(7,"Rent (AED/mo)"),y(),v(8,"th"),E(9,"Tenants"),y(),v(10,"th"),E(11,"Taken"),y(),v(12,"th"),E(13,"Actions"),y()()(),v(14,"tbody"),Tt(15,Zj,18,7,"tr",14,zj),y()()()),n&2){let t=P();R(15),St(t.rooms())}}var Hf=class n{constructor(){this.rooms=ze.required();this.tenants=ze([]);this.roomAdded=tt();this.roomUpdated=tt();this.roomRemoved=tt();this.showAddForm=Y(!1);this.newRoomName=Y("");this.newRoomRentMin=Y(0);this.newRoomRentMax=Y(0)}handleAdd(){let e=this.newRoomName().trim();e&&(this.roomAdded.emit({name:e,rentMin:this.newRoomRentMin(),rentMax:this.newRoomRentMax()}),this.newRoomName.set(""),this.newRoomRentMin.set(0),this.newRoomRentMax.set(0),this.showAddForm.set(!1))}onRoomNameChange(e,t){let r=t.target;this.roomUpdated.emit({id:e,updates:{name:r.value}})}onRentMinChange(e,t){let r=t.target;this.roomUpdated.emit({id:e,updates:{rentMin:+r.value}})}onRentMaxChange(e,t){let r=t.target;this.roomUpdated.emit({id:e,updates:{rentMax:+r.value}})}getTenantNames(e){return Vc(this.tenants(),e).map(t=>t.name)}isRoomTaken(e){return Vc(this.tenants(),e).length>0}onRemove(e){this.roomRemoved.emit(e)}blurTarget(e){e.target.blur()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ve({type:n,selectors:[["app-room-list"]],inputs:{rooms:[1,"rooms"],tenants:[1,"tenants"]},outputs:{roomAdded:"roomAdded",roomUpdated:"roomUpdated",roomRemoved:"roomRemoved"},decls:8,vars:2,consts:[[1,"section-header"],[1,"btn-add-small",3,"click"],[1,"add-form"],[1,"empty-list"],[1,"rooms-table-wrapper"],["type","text","placeholder","Room name",3,"ngModelChange","ngModel"],[1,"rent-inputs"],["type","number","placeholder","Min rent","min","0",3,"ngModelChange","ngModel"],[1,"separator"],["type","number","placeholder","Max rent","min","0",3,"ngModelChange","ngModel"],[1,"form-actions"],[1,"btn-confirm",3,"click"],[1,"btn-cancel",3,"click"],[1,"rooms-table"],[3,"taken-row"],["type","text",1,"inline-edit",3,"blur","keydown.enter","value"],[1,"rent-display"],["type","number","min","0",1,"inline-number",3,"blur","keydown.enter","value"],[1,"tenant-list"],[1,"text-muted"],[1,"taken-pill"],[1,"not-taken-pill"],[1,"btn-delete-small",3,"click"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"h3"),E(2,"Rooms"),y(),v(3,"button",1),$("click",function(){return r.showAddForm.set(!0)}),E(4,"+ Add Room"),y()(),ie(5,qj,12,3,"div",2)(6,Gj,2,0,"p",3)(7,Jj,17,0,"div",4)),t&2&&(R(5),te(r.showAddForm()?5:-1),R(),te(r.rooms().length===0?6:7))},dependencies:[Kt,Wt,xr,hn,Mr,nn],styles:[".section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-md)}@media (max-width: 768px){.section-header[_ngcontent-%COMP%]{flex-wrap:wrap;gap:var(--spacing-sm)}.rooms-table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-height:44px}}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--color-text-primary);font-size:1rem;font-weight:600;margin:0}.btn-add-small[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-primary-light);border-radius:var(--border-radius-md);background:transparent;color:var(--color-primary);font-size:.85rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-add-small[_ngcontent-%COMP%]:hover{background:var(--color-primary-lighter);background-opacity:.1;border-color:var(--color-primary)}.add-form[_ngcontent-%COMP%]{background:var(--color-bg-secondary);border:1px solid var(--color-primary-light);border-radius:var(--border-radius-lg);padding:var(--spacing-md);margin-bottom:var(--spacing-md);display:flex;flex-direction:column;gap:var(--spacing-sm)}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:var(--spacing-sm);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-family:inherit;transition:all .2s ease}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary)}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--color-text-tertiary)}.rent-inputs[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:center}.rent-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1}.separator[_ngcontent-%COMP%]{color:var(--color-text-tertiary)}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);justify-content:flex-end}.btn-confirm[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:none;border-radius:var(--border-radius-md);background:var(--color-primary);color:#fff;font-size:.85rem;font-weight:600;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-confirm[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark);transform:translateY(-1px)}.btn-cancel[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-secondary);font-size:.85rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-cancel[_ngcontent-%COMP%]:hover{border-color:var(--color-border-light);color:var(--color-text-primary)}.empty-list[_ngcontent-%COMP%]{color:var(--color-text-tertiary);font-size:.9rem;text-align:center;padding:var(--spacing-md);margin:0}.rooms-table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);-webkit-overflow-scrolling:touch}.rooms-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.rooms-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:var(--color-bg-secondary)}.rooms-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:var(--spacing-md);text-align:left;font-size:.875rem;font-weight:600;color:var(--color-text-primary);border-bottom:2px solid var(--color-border)}.rooms-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:var(--spacing-md);border-bottom:1px solid var(--color-border);font-size:.9rem;color:var(--color-text-primary);vertical-align:middle}.rooms-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.rooms-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.taken-row[_ngcontent-%COMP%]{background:#10b9810d}.inline-edit[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--color-text-primary);font-size:.95rem;font-weight:600;font-family:inherit;padding:var(--spacing-xs);border-radius:var(--border-radius-sm);min-width:140px;transition:all .2s ease}.inline-edit[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.inline-edit[_ngcontent-%COMP%]:focus{outline:none;background:var(--color-bg-secondary)}.rent-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-xs);color:var(--color-text-secondary);font-size:.85rem}.inline-number[_ngcontent-%COMP%]{width:78px;background:transparent;border:none;color:var(--color-text-secondary);font-size:.85rem;font-family:JetBrains Mono,monospace;padding:var(--spacing-xs);border-radius:var(--border-radius-sm);transition:all .2s ease}.inline-number[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.inline-number[_ngcontent-%COMP%]:focus{outline:none;background:var(--color-bg-secondary);color:var(--color-text-primary)}.inline-number[_ngcontent-%COMP%]::-webkit-inner-spin-button, .inline-number[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.tenant-list[_ngcontent-%COMP%]{color:var(--color-text-secondary)}.text-muted[_ngcontent-%COMP%]{color:var(--color-text-tertiary);font-style:italic}.taken-pill[_ngcontent-%COMP%], .not-taken-pill[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:90px;padding:var(--spacing-xs) var(--spacing-sm);border-radius:999px;font-size:.8rem;font-weight:600}.taken-pill[_ngcontent-%COMP%]{color:var(--color-success-dark);background:#10b98126}.not-taken-pill[_ngcontent-%COMP%]{color:var(--color-text-secondary);background:var(--color-bg-secondary)}.btn-delete-small[_ngcontent-%COMP%]{width:28px;height:28px;border:none;border-radius:var(--border-radius-sm);background:transparent;color:var(--color-text-tertiary);font-size:.8rem;cursor:pointer;transition:all .2s ease}.btn-delete-small[_ngcontent-%COMP%]:hover{background:#ef44441a;color:var(--color-error)}"],changeDetection:0})}};function Xj(n,e){n&1&&(v(0,"div",3)(1,"div",5),E(2,"\u{1F6AA}"),y(),v(3,"h3"),E(4,"No apartment selected"),y(),v(5,"p"),E(6,"Select an apartment from the dropdown above to manage rooms"),y()())}function eB(n,e){if(n&1){let t=xe();v(0,"div",4)(1,"app-room-list",6),$("roomAdded",function(i){B(t);let o=P();return U(o.onRoomAdded(i))})("roomUpdated",function(i){B(t);let o=P();return U(o.onRoomUpdated(i))})("roomRemoved",function(i){B(t);let o=P();return U(o.onRoomRemoved(i))}),y()()}if(n&2){let t=P();R(),fe("rooms",t.currentApartment().rooms)("tenants",t.currentApartment().tenants)}}var zf=class n{constructor(){this.apartmentService=k(Rt);this.currentApartment=this.apartmentService.currentApartment}onRoomAdded(e){let t=this.currentApartment();t&&this.apartmentService.addRoom(t.id,{name:e.name,rentMin:e.rentMin,rentMax:e.rentMax,isTaken:!1})}onRoomUpdated(e){let t=this.currentApartment();t&&this.apartmentService.updateRoom(t.id,e.id,e.updates)}onRoomRemoved(e){let t=this.currentApartment();t&&this.apartmentService.removeRoom(t.id,e)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ve({type:n,selectors:[["app-rooms"]],decls:8,vars:2,consts:[[1,"rooms-page"],[1,"page-header"],[1,"page-subtitle"],[1,"empty-state"],[1,"rooms-content"],[1,"empty-icon"],[3,"roomAdded","roomUpdated","roomRemoved","rooms","tenants"]],template:function(t,r){if(t&1&&(v(0,"div",0)(1,"div",1)(2,"h1"),E(3,"Rooms"),y(),v(4,"p",2),E(5),y()(),ie(6,Xj,7,0,"div",3)(7,eB,2,2,"div",4),y()),t&2){let i;R(5),xt("Manage rooms for ",((i=r.currentApartment())==null?null:i.name)||"selected apartment",""),R(),te(r.currentApartment()?7:6)}},dependencies:[Hf],styles:[".rooms-page[_ngcontent-%COMP%]{padding:var(--spacing-xl);min-height:100%}.page-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.page-subtitle[_ngcontent-%COMP%]{color:var(--color-text-secondary);margin:0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-2xl) var(--spacing-xl);color:var(--color-text-secondary)}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--color-text-secondary)}.rooms-content[_ngcontent-%COMP%]{max-width:800px}@media (max-width: 768px){.rooms-page[_ngcontent-%COMP%]{padding:var(--spacing-md);padding-left:max(var(--spacing-md),env(safe-area-inset-left));padding-right:max(var(--spacing-md),env(safe-area-inset-right))}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}"],changeDetection:0})}};var tB=(n,e)=>e.date||e.day;function nB(n,e){if(n&1){let t=xe();v(0,"div",8),$("click",function(){B(t);let i=P().$implicit,o=P();return U(o.toggleDate(i.date))}),v(1,"span",9),E(2),y()()}if(n&2){let t=P().$implicit,r=P();Xt("outside-range",!r.isInRange(t.date))("disabled",r.isDisabled(t.date))("today",r.isToday(t.date)),fe("title",r.getDayTitle(t.date)),R(2),Me(t.day)}}function rB(n,e){n&1&&Ke(0,"div",7)}function iB(n,e){if(n&1&&ie(0,nB,3,8,"div",6)(1,rB,1,0,"div",7),n&2){let t=e.$implicit;te(t.isCurrentMonth?0:1)}}var qf=class n{constructor(){this.tenant=ze.required();this.dateToggled=tt();this.currentDate=new Date;this.currentYear=Y(this.currentDate.getFullYear());this.currentMonth=Y(this.currentDate.getMonth());this.monthYear=Lt(()=>new Date(this.currentYear(),this.currentMonth()).toLocaleDateString("en-US",{month:"long",year:"numeric"}));this.calendarDays=Lt(()=>{let e=this.currentYear(),t=this.currentMonth(),r=new Date(e,t,1),i=new Date(e,t+1,0),o=r.getDay(),s=i.getDate(),c=[];for(let p=0;p<o;p++)c.push({day:0,date:"",isCurrentMonth:!1});let l=new Date(r);for(;l<=i;){let p=this.formatDate(l);c.push({day:l.getDate(),date:p,isCurrentMonth:!0}),l.setDate(l.getDate()+1)}let f=(7-c.length%7)%7;for(let p=0;p<f;p++)c.push({day:0,date:"",isCurrentMonth:!1});return c})}isInRange(e){let t=this.tenant(),r=this.parseDate(e);if(t.startDate){let i=ei(t.startDate);if(!i)return!0;if(i.setHours(0,0,0,0),r<i)return!1}return!0}isDisabled(e){if(!this.isInRange(e))return!1;let t=this.tenant();return Df(t,e)?!0:t.disabledDates?.includes(e)||!1}isToday(e){let t=this.formatDate(new Date);return e===t}toggleDate(e){if(!this.isInRange(e)||Df(this.tenant(),e))return;let t=this.isDisabled(e);this.dateToggled.emit({date:e,disabled:!t})}previousMonth(){this.currentMonth()===0?(this.currentMonth.set(11),this.currentYear.update(t=>t-1)):this.currentMonth.update(t=>t-1)}nextMonth(){this.currentMonth()===11?(this.currentMonth.set(0),this.currentYear.update(t=>t+1)):this.currentMonth.update(t=>t+1)}getDayTitle(e){let r=this.parseDate(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return this.isInRange(e)?Df(this.tenant(),e)?`${r} - Contract ended`:this.isDisabled(e)?`${r} - Not occupied`:`${r} - Occupied`:`${r} - Outside contract period`}formatDate(e){return e.toISOString().split("T")[0]}parseDate(e){return new Date(e+"T00:00:00")}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ve({type:n,selectors:[["app-tenant-calendar"]],inputs:{tenant:[1,"tenant"]},outputs:{dateToggled:"dateToggled"},decls:25,vars:1,consts:[[1,"tenant-calendar"],[1,"calendar-header"],[1,"btn-nav",3,"click"],[1,"month-year"],[1,"calendar-grid"],[1,"day-header"],[1,"calendar-day",3,"outside-range","disabled","today","title"],[1,"calendar-day","empty-day"],[1,"calendar-day",3,"click","title"],[1,"day-number"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"button",2),$("click",function(){return r.previousMonth()}),E(3,"\u2039"),y(),v(4,"h3",3),E(5),y(),v(6,"button",2),$("click",function(){return r.nextMonth()}),E(7,"\u203A"),y()(),v(8,"div",4)(9,"div",5),E(10,"Sun"),y(),v(11,"div",5),E(12,"Mon"),y(),v(13,"div",5),E(14,"Tue"),y(),v(15,"div",5),E(16,"Wed"),y(),v(17,"div",5),E(18,"Thu"),y(),v(19,"div",5),E(20,"Fri"),y(),v(21,"div",5),E(22,"Sat"),y(),Tt(23,iB,2,1,null,null,tB),y()()),t&2&&(R(5),Me(r.monthYear()),R(18),St(r.calendarDays()))},styles:[".tenant-calendar[_ngcontent-%COMP%]{background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);padding:var(--spacing-lg)}.calendar-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-lg)}.btn-nav[_ngcontent-%COMP%]{width:32px;height:32px;border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:1.2rem;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.btn-nav[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);border-color:var(--color-primary)}.month-year[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:600;color:var(--color-text-primary)}.calendar-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:var(--spacing-xs)}.day-header[_ngcontent-%COMP%]{text-align:center;font-size:.75rem;font-weight:600;color:var(--color-text-secondary);text-transform:uppercase;padding:var(--spacing-sm)}.calendar-day[_ngcontent-%COMP%]{aspect-ratio:1;display:flex;align-items:center;justify-content:center;border:1px solid var(--color-border);border-radius:var(--border-radius-sm);background:var(--color-primary);cursor:pointer;transition:all .2s ease;position:relative}.calendar-day[_ngcontent-%COMP%]:hover:not(.outside-range){transform:scale(1.05);border-color:var(--color-primary-dark)}.calendar-day.outside-range[_ngcontent-%COMP%]{background:var(--color-bg-secondary);border-color:transparent;cursor:not-allowed;opacity:.3}.calendar-day.disabled[_ngcontent-%COMP%]{background:#fff;border-color:var(--color-border)}.calendar-day.today[_ngcontent-%COMP%]{border:2px solid var(--color-primary)}.day-number[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#fff}.calendar-day.outside-range[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{color:var(--color-text-secondary)}.calendar-day.disabled[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{color:var(--color-text-primary)}.calendar-day.empty-day[_ngcontent-%COMP%]{background:transparent;border:none;cursor:default;pointer-events:none}"],changeDetection:0})}};function oB(n,e){if(n&1){let t=xe();v(0,"app-tenant-calendar",6),$("dateToggled",function(i){B(t);let o=P();return U(o.onDateToggled(i))}),y()}if(n&2){let t=P();fe("tenant",t.tenant())}}var Gf=class n{constructor(){this.tenant=ze(null);this.close=tt();this.dateToggled=tt()}onBackdropClick(e){e.target===e.currentTarget&&this.close.emit()}onDateToggled(e){this.dateToggled.emit(e)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ve({type:n,selectors:[["app-tenant-calendar-modal"]],inputs:{tenant:[1,"tenant"]},outputs:{close:"close",dateToggled:"dateToggled"},decls:9,vars:2,consts:[[1,"modal-backdrop",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"modal-body"],[3,"tenant"],[3,"dateToggled","tenant"]],template:function(t,r){if(t&1&&(v(0,"div",0),$("click",function(o){return r.onBackdropClick(o)}),v(1,"div",1),$("click",function(o){return o.stopPropagation()}),v(2,"div",2)(3,"h2"),E(4),y(),v(5,"button",3),$("click",function(){return r.close.emit()}),E(6,"\u2715"),y()(),v(7,"div",4),ie(8,oB,1,1,"app-tenant-calendar",5),y()()()),t&2){let i;R(4),xt("Presence Calendar - ",(i=r.tenant())==null?null:i.name,""),R(4),te(r.tenant()?8:-1)}},dependencies:[qf],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:var(--spacing-lg)}.modal-content[_ngcontent-%COMP%]{background:var(--color-card-bg);border-radius:var(--border-radius-lg);box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;max-width:600px;width:100%;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-lg);border-bottom:1px solid var(--color-border)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:var(--color-text-primary)}.btn-close[_ngcontent-%COMP%]{width:32px;height:32px;border:none;border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-secondary);font-size:1.2rem;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.btn-close[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);color:var(--color-text-primary)}.modal-body[_ngcontent-%COMP%]{padding:var(--spacing-lg)}@media (max-width: 768px){.modal-backdrop[_ngcontent-%COMP%]{padding:max(var(--spacing-md),env(safe-area-inset-top)) max(var(--spacing-md),env(safe-area-inset-right)) max(var(--spacing-md),env(safe-area-inset-bottom)) max(var(--spacing-md),env(safe-area-inset-left));align-items:flex-start}.modal-content[_ngcontent-%COMP%]{max-height:90dvh}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem}}"],changeDetection:0})}};var I_=(n,e)=>e.id;function sB(n,e){if(n&1&&(v(0,"option",12),E(1),y()),n&2){let t=e.$implicit;fe("value",t.id),R(),Me(t.name)}}function aB(n,e){if(n&1){let t=xe();v(0,"div",2)(1,"input",7),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.newTenantName,i)||(o.newTenantName=i),U(i)}),y(),v(2,"input",8),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.newTenantEmail,i)||(o.newTenantEmail=i),U(i)}),y(),v(3,"input",9),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.newTenantPhone,i)||(o.newTenantPhone=i),U(i)}),y(),v(4,"select",10),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.newTenantRoomId,i)||(o.newTenantRoomId=i),U(i)}),v(5,"option",11),E(6,"Select a room"),y(),Tt(7,sB,2,2,"option",12,I_),y(),v(9,"div",13)(10,"input",14),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.newTenantStartDate,i)||(o.newTenantStartDate=i),U(i)}),y(),v(11,"input",15),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.newTenantEndDate,i)||(o.newTenantEndDate=i),U(i)}),y()(),v(12,"input",16),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.newTenantRentCollectionDay,i)||(o.newTenantRentCollectionDay=i),U(i)}),y(),v(13,"textarea",17),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.newTenantNotes,i)||(o.newTenantNotes=i),U(i)}),y(),v(14,"div",18)(15,"button",19),$("click",function(){B(t);let i=P();return U(i.handleAdd())}),E(16,"Add"),y(),v(17,"button",20),$("click",function(){B(t);let i=P();return U(i.showAddForm.set(!1))}),E(18,"Cancel"),y()()()}if(n&2){let t=P();R(),Ae("ngModel",t.newTenantName),R(),Ae("ngModel",t.newTenantEmail),R(),Ae("ngModel",t.newTenantPhone),R(),Ae("ngModel",t.newTenantRoomId),R(3),St(t.rooms()),R(3),Ae("ngModel",t.newTenantStartDate),R(),Ae("ngModel",t.newTenantEndDate),R(),Ae("ngModel",t.newTenantRentCollectionDay),R(),Ae("ngModel",t.newTenantNotes)}}function cB(n,e){n&1&&(v(0,"p",3),E(1,"No tenants added yet"),y())}function lB(n,e){if(n&1&&(v(0,"span",24),E(1),y()),n&2){let t=P().$implicit;R(),Me(t.email)}}function uB(n,e){n&1&&(v(0,"span",25),E(1,"\u2014"),y())}function dB(n,e){if(n&1){let t=xe();v(0,"a",33),$("click",function(i){return B(t),U(i.stopPropagation())}),E(1),y()}if(n&2){let t=P().$implicit,r=P(2);fe("href",r.getWhatsAppUrl(t.phone),kg),R(),xt(" ",t.phone," ")}}function fB(n,e){n&1&&(v(0,"span",25),E(1,"\u2014"),y())}function hB(n,e){if(n&1&&(v(0,"span",27),E(1),y()),n&2){let t=P().$implicit,r=P(2);R(),Me(r.formatDate(t.startDate))}}function pB(n,e){n&1&&(v(0,"span",25),E(1,"\u2014"),y())}function gB(n,e){if(n&1&&(v(0,"span",27),E(1),y()),n&2){let t=P().$implicit,r=P(2);R(),Me(r.formatDate(t.endDate))}}function mB(n,e){n&1&&(v(0,"span",25),E(1,"\u2014"),y())}function yB(n,e){if(n&1&&(v(0,"span",28),E(1),y()),n&2){let t=P().$implicit;fe("title",t.notes),R(),Me(t.notes.length>30?t.notes.substring(0,30)+"...":t.notes)}}function vB(n,e){n&1&&(v(0,"span",25),E(1,"\u2014"),y())}function _B(n,e){if(n&1){let t=xe();v(0,"button",34),$("click",function(){B(t);let i=P().$implicit,o=P(2);return U(o.openCalendar(i))}),E(1," \u{1F4C5} "),y()}}function wB(n,e){if(n&1){let t=xe();v(0,"tr")(1,"td")(2,"input",22),$("blur",function(i){let o=B(t).$implicit,s=P(2);return U(s.onTenantNameChange(o.id,i))})("keydown.enter",function(i){B(t);let o=P(2);return U(o.blurTarget(i))}),y()(),v(3,"td"),$o(4),v(5,"span",23),E(6),y()(),v(7,"td"),ie(8,lB,2,1,"span",24)(9,uB,2,0,"span",25),y(),v(10,"td"),ie(11,dB,2,2,"a",26)(12,fB,2,0,"span",25),y(),v(13,"td"),ie(14,hB,2,1,"span",27)(15,pB,2,0,"span",25),y(),v(16,"td"),ie(17,gB,2,1,"span",27)(18,mB,2,0,"span",25),y(),v(19,"td"),ie(20,yB,2,2,"span",28)(21,vB,2,0,"span",25),y(),v(22,"td")(23,"div",29)(24,"button",30),$("click",function(){let i=B(t).$implicit,o=P(2);return U(o.openEditModal(i))}),E(25,"\u270F\uFE0F"),y(),ie(26,_B,2,0,"button",31),v(27,"button",32),$("click",function(){let i=B(t).$implicit,o=P(2);return U(o.onRemove(i.id))}),E(28,"\u2715"),y()()()()}if(n&2){let t=e.$implicit;R(2),fe("value",t.name);let r=P(2).getRoomName(t.roomId);R(4),Me(r||"Unknown"),R(2),te(t.email?8:9),R(3),te(t.phone?11:12),R(3),te(t.startDate?14:15),R(3),te(t.endDate?17:18),R(3),te(t.notes?20:21),R(6),te(t.startDate?26:-1)}}function CB(n,e){if(n&1&&(v(0,"div",4)(1,"table",21)(2,"thead")(3,"tr")(4,"th"),E(5,"Name"),y(),v(6,"th"),E(7,"Room"),y(),v(8,"th"),E(9,"Email"),y(),v(10,"th"),E(11,"Phone"),y(),v(12,"th"),E(13,"Start Date"),y(),v(14,"th"),E(15,"End Date"),y(),v(16,"th"),E(17,"Notes"),y(),v(18,"th"),E(19,"Actions"),y()()(),v(20,"tbody"),Tt(21,wB,29,8,"tr",null,I_),y()()()),n&2){let t=P();R(21),St(t.tenants())}}function bB(n,e){if(n&1){let t=xe();v(0,"app-tenant-calendar-modal",35),$("close",function(){B(t);let i=P();return U(i.closeCalendar())})("dateToggled",function(i){B(t);let o=P();return U(o.onOccupancyToggle(o.selectedTenantForCalendar().id,i))}),y()}if(n&2){let t=P();fe("tenant",t.selectedTenantForCalendar())}}function EB(n,e){if(n&1&&(v(0,"option",12),E(1),y()),n&2){let t=e.$implicit;fe("value",t.id),R(),Me(t.name)}}function DB(n,e){if(n&1){let t=xe();v(0,"div",36),$("click",function(){B(t);let i=P();return U(i.closeEditModal())}),v(1,"div",37),$("click",function(i){return B(t),U(i.stopPropagation())}),v(2,"div",38)(3,"h2"),E(4,"Edit Tenant"),y(),v(5,"button",39),$("click",function(){B(t);let i=P();return U(i.closeEditModal())}),E(6,"\u2715"),y()(),v(7,"div",40)(8,"div",41)(9,"div",42)(10,"label"),E(11,"Name *"),y(),v(12,"input",7),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.editTenantName,i)||(o.editTenantName=i),U(i)}),y()(),v(13,"div",42)(14,"label"),E(15,"Room *"),y(),v(16,"select",10),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.editTenantRoomId,i)||(o.editTenantRoomId=i),U(i)}),v(17,"option",11),E(18,"Select a room"),y(),Tt(19,EB,2,2,"option",12,I_),y()(),v(21,"div",42)(22,"label"),E(23,"Email"),y(),v(24,"input",8),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.editTenantEmail,i)||(o.editTenantEmail=i),U(i)}),y()(),v(25,"div",42)(26,"label"),E(27,"Phone"),y(),v(28,"input",9),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.editTenantPhone,i)||(o.editTenantPhone=i),U(i)}),y()(),v(29,"div",43)(30,"div",42)(31,"label"),E(32,"Start Date"),y(),v(33,"input",44),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.editTenantStartDate,i)||(o.editTenantStartDate=i),U(i)}),y()(),v(34,"div",42)(35,"label"),E(36,"End Date"),y(),v(37,"input",44),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.editTenantEndDate,i)||(o.editTenantEndDate=i),U(i)}),y()()(),v(38,"div",42)(39,"label"),E(40,"Rent Collection Day"),y(),v(41,"input",45),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.editTenantRentCollectionDay,i)||(o.editTenantRentCollectionDay=i),U(i)}),y()(),v(42,"div",42)(43,"label"),E(44,"Notes"),y(),v(45,"textarea",17),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.editTenantNotes,i)||(o.editTenantNotes=i),U(i)}),y()(),v(46,"div",18)(47,"button",19),$("click",function(){B(t);let i=P();return U(i.saveEdit())}),E(48,"Save"),y(),v(49,"button",20),$("click",function(){B(t);let i=P();return U(i.closeEditModal())}),E(50,"Cancel"),y()()()()()()}if(n&2){let t=P();R(12),Ae("ngModel",t.editTenantName),R(4),Ae("ngModel",t.editTenantRoomId),R(3),St(t.rooms()),R(5),Ae("ngModel",t.editTenantEmail),R(4),Ae("ngModel",t.editTenantPhone),R(5),Ae("ngModel",t.editTenantStartDate),R(4),Ae("ngModel",t.editTenantEndDate),R(4),Ae("ngModel",t.editTenantRentCollectionDay),R(4),Ae("ngModel",t.editTenantNotes)}}var Wf=class n{constructor(){this.tenants=ze.required();this.rooms=ze.required();this.tenantAdded=tt();this.tenantUpdated=tt();this.tenantRemoved=tt();this.tenantOccupancyToggled=tt();this.showAddForm=Y(!1);this.newTenantName=Y("");this.newTenantEmail=Y("");this.newTenantPhone=Y("");this.newTenantRoomId=Y("");this.newTenantStartDate=Y("");this.newTenantEndDate=Y("");this.newTenantRentCollectionDay=Y(void 0);this.newTenantNotes=Y("");this.selectedTenantForCalendarId=Y(null);this.selectedTenantForCalendar=Lt(()=>{let e=this.selectedTenantForCalendarId();return e&&this.tenants().find(t=>t.id===e)||null});this.selectedTenantForEdit=Y(null);this.editTenantName=Y("");this.editTenantEmail=Y("");this.editTenantPhone=Y("");this.editTenantRoomId=Y("");this.editTenantStartDate=Y("");this.editTenantEndDate=Y("");this.editTenantRentCollectionDay=Y(void 0);this.editTenantNotes=Y("")}getRoomName(e){return this.rooms().find(t=>t.id===e)?.name||""}handleAdd(){let e=this.newTenantName().trim(),t=this.newTenantRoomId();if(e&&t){let r=this.newTenantRentCollectionDay();this.tenantAdded.emit({name:e,email:this.newTenantEmail().trim()||void 0,phone:this.newTenantPhone().trim()||void 0,roomId:t,startDate:this.newTenantStartDate()||void 0,endDate:this.newTenantEndDate()||void 0,rentCollectionDay:r&&r>=1&&r<=31?r:void 0,notes:this.newTenantNotes().trim()||void 0}),this.newTenantName.set(""),this.newTenantEmail.set(""),this.newTenantPhone.set(""),this.newTenantRoomId.set(""),this.newTenantStartDate.set(""),this.newTenantEndDate.set(""),this.newTenantRentCollectionDay.set(void 0),this.newTenantNotes.set(""),this.showAddForm.set(!1)}}onTenantNameChange(e,t){let r=t.target;this.tenantUpdated.emit({id:e,updates:{name:r.value}})}onRemove(e){this.tenantRemoved.emit(e)}formatDate(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""}blurTarget(e){e.target.blur()}onOccupancyToggle(e,t){this.tenantOccupancyToggled.emit({id:e,date:t.date,disabled:t.disabled})}openCalendar(e){this.selectedTenantForCalendarId.set(e.id)}closeCalendar(){this.selectedTenantForCalendarId.set(null)}getWhatsAppUrl(e){return`https://wa.me/${e.replace(/[^\d+]/g,"").replace(/^\+/,"")}`}openEditModal(e){this.selectedTenantForEdit.set(e),this.editTenantName.set(e.name),this.editTenantEmail.set(e.email||""),this.editTenantPhone.set(e.phone||""),this.editTenantRoomId.set(e.roomId),this.editTenantStartDate.set(e.startDate||""),this.editTenantEndDate.set(e.endDate||""),this.editTenantRentCollectionDay.set(e.rentCollectionDay),this.editTenantNotes.set(e.notes||"")}closeEditModal(){this.selectedTenantForEdit.set(null),this.editTenantName.set(""),this.editTenantEmail.set(""),this.editTenantPhone.set(""),this.editTenantRoomId.set(""),this.editTenantStartDate.set(""),this.editTenantEndDate.set(""),this.editTenantRentCollectionDay.set(void 0),this.editTenantNotes.set("")}saveEdit(){let e=this.selectedTenantForEdit();if(!e)return;let t=this.editTenantName().trim(),r=this.editTenantRoomId();if(t&&r){let i=this.editTenantRentCollectionDay();this.tenantUpdated.emit({id:e.id,updates:{name:t,email:this.editTenantEmail().trim()||void 0,phone:this.editTenantPhone().trim()||void 0,roomId:r,startDate:this.editTenantStartDate()||void 0,endDate:this.editTenantEndDate()||void 0,rentCollectionDay:i&&i>=1&&i<=31?i:void 0,notes:this.editTenantNotes().trim()||void 0}}),this.closeEditModal()}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ve({type:n,selectors:[["app-tenant-list"]],inputs:{tenants:[1,"tenants"],rooms:[1,"rooms"]},outputs:{tenantAdded:"tenantAdded",tenantUpdated:"tenantUpdated",tenantRemoved:"tenantRemoved",tenantOccupancyToggled:"tenantOccupancyToggled"},decls:10,vars:4,consts:[[1,"section-header"],[1,"btn-add-small",3,"click"],[1,"add-form"],[1,"empty-list"],[1,"tenants-table-wrapper"],[3,"tenant"],[1,"modal-backdrop"],["type","text","placeholder","Tenant name","required","",3,"ngModelChange","ngModel"],["type","email","placeholder","Email (optional)",3,"ngModelChange","ngModel"],["type","tel","placeholder","Phone (optional)",3,"ngModelChange","ngModel"],["required","",3,"ngModelChange","ngModel"],["value",""],[3,"value"],[1,"date-inputs"],["type","date","placeholder","Start date (optional)",3,"ngModelChange","ngModel"],["type","date","placeholder","End date (optional)",3,"ngModelChange","ngModel"],["type","number","placeholder","Rent collection day (1-31, optional)","min","1","max","31",3,"ngModelChange","ngModel"],["placeholder","Notes (optional)","rows","3",3,"ngModelChange","ngModel"],[1,"form-actions"],[1,"btn-confirm",3,"click"],[1,"btn-cancel",3,"click"],[1,"tenants-table"],["type","text",1,"inline-edit","tenant-name",3,"blur","keydown.enter","value"],[1,"tenant-room"],[1,"tenant-email"],[1,"text-muted"],["target","_blank","rel","noopener noreferrer",1,"tenant-phone","phone-link",3,"href"],[1,"tenant-date"],[1,"tenant-notes",3,"title"],[1,"table-actions"],["title","Edit Tenant",1,"btn-edit",3,"click"],["title","Edit Presence",1,"btn-calendar"],["title","Delete",1,"btn-delete",3,"click"],["target","_blank","rel","noopener noreferrer",1,"tenant-phone","phone-link",3,"click","href"],["title","Edit Presence",1,"btn-calendar",3,"click"],[3,"close","dateToggled","tenant"],[1,"modal-backdrop",3,"click"],[1,"modal-content","edit-modal",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"modal-body"],[1,"edit-form"],[1,"form-group"],[1,"form-row"],["type","date",3,"ngModelChange","ngModel"],["type","number","placeholder","Day of month (1-31)","min","1","max","31",3,"ngModelChange","ngModel"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"h3"),E(2,"Tenants"),y(),v(3,"button",1),$("click",function(){return r.showAddForm.set(!0)}),E(4,"+ Add Tenant"),y()(),ie(5,aB,19,8,"div",2)(6,cB,2,0,"p",3)(7,CB,23,0,"div",4)(8,bB,1,1,"app-tenant-calendar-modal",5)(9,DB,51,8,"div",6)),t&2&&(R(5),te(r.showAddForm()?5:-1),R(),te(r.tenants().length===0?6:7),R(2),te(r.selectedTenantForCalendar()?8:-1),R(),te(r.selectedTenantForEdit()?9:-1))},dependencies:[Kt,Of,kf,Wt,xr,Ns,hn,D_,Mr,E_,nn,Gf],styles:[".section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-md)}@media (max-width: 768px){.section-header[_ngcontent-%COMP%]{flex-wrap:wrap;gap:var(--spacing-sm)}.modal-backdrop[_ngcontent-%COMP%]{padding:max(var(--spacing-md),env(safe-area-inset-top)) max(var(--spacing-md),env(safe-area-inset-right)) max(var(--spacing-md),env(safe-area-inset-bottom)) max(var(--spacing-md),env(safe-area-inset-left))}.edit-modal[_ngcontent-%COMP%]{max-height:90dvh}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .add-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:44px}}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--color-text-primary);font-size:1rem;font-weight:600;margin:0}.btn-add-small[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-primary-light);border-radius:var(--border-radius-md);background:transparent;color:var(--color-primary);font-size:.85rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-add-small[_ngcontent-%COMP%]:hover{background:var(--color-primary-lighter);background-opacity:.1;border-color:var(--color-primary)}.add-form[_ngcontent-%COMP%]{background:var(--color-bg-secondary);border:1px solid var(--color-primary-light);border-radius:var(--border-radius-lg);padding:var(--spacing-md);margin-bottom:var(--spacing-md);display:flex;flex-direction:column;gap:var(--spacing-sm)}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .add-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:var(--spacing-sm);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-family:inherit;transition:all .2s ease}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .add-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary)}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .add-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:var(--color-text-tertiary)}.date-inputs[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-sm)}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);justify-content:flex-end}.btn-confirm[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:none;border-radius:var(--border-radius-md);background:var(--color-primary);color:#fff;font-size:.85rem;font-weight:600;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-confirm[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark);transform:translateY(-1px)}.btn-cancel[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-secondary);font-size:.85rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-cancel[_ngcontent-%COMP%]:hover{border-color:var(--color-border-light);color:var(--color-text-primary)}.empty-list[_ngcontent-%COMP%]{color:var(--color-text-tertiary);font-size:.9rem;text-align:center;padding:var(--spacing-md);margin:0}.tenants-table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);-webkit-overflow-scrolling:touch}.tenants-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.tenants-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:var(--color-bg-secondary)}.tenants-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:var(--spacing-md);text-align:left;font-size:.875rem;font-weight:600;color:var(--color-text-primary);border-bottom:2px solid var(--color-border)}.tenants-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:var(--spacing-md);border-bottom:1px solid var(--color-border);font-size:.9rem;color:var(--color-text-primary)}.tenants-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.tenants-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.tenant-name[_ngcontent-%COMP%]{background:transparent;border:1px solid transparent;color:var(--color-text-primary);font-size:.9rem;font-weight:600;font-family:inherit;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius-sm);width:100%;min-width:120px;transition:all .2s ease}.tenant-name[_ngcontent-%COMP%]:hover{border-color:var(--color-border);background:var(--color-bg-secondary)}.tenant-name[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);background:var(--color-card-bg)}.tenant-room[_ngcontent-%COMP%]{font-weight:500;color:var(--color-primary)}.tenant-email[_ngcontent-%COMP%]{color:var(--color-text-secondary)}.phone-link[_ngcontent-%COMP%]{color:var(--color-primary);text-decoration:none;cursor:pointer;transition:all .2s ease}.phone-link[_ngcontent-%COMP%]:hover{color:var(--color-primary-dark);text-decoration:underline}.tenant-date[_ngcontent-%COMP%]{color:var(--color-text-secondary);font-size:.85rem}.tenant-notes[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-text-secondary);font-style:italic;max-width:200px}.text-muted[_ngcontent-%COMP%]{color:var(--color-text-tertiary);font-style:italic}.table-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-xs);align-items:center}.btn-edit[_ngcontent-%COMP%], .btn-calendar[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{width:32px;height:32px;border:none;border-radius:var(--border-radius-sm);background:transparent;color:var(--color-text-tertiary);font-size:1rem;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.btn-edit[_ngcontent-%COMP%]:hover{background:#10b9811a;color:var(--color-success)}.btn-calendar[_ngcontent-%COMP%]:hover{background:#2563eb1a;color:var(--color-primary)}.btn-delete[_ngcontent-%COMP%]:hover{background:#ef44441a;color:var(--color-error)}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:var(--spacing-lg)}.edit-modal[_ngcontent-%COMP%]{background:var(--color-card-bg);border-radius:var(--border-radius-lg);box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;max-width:600px;width:100%;max-height:90vh;overflow-y:auto}.edit-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-lg);border-bottom:1px solid var(--color-border)}.edit-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:var(--color-text-primary)}.edit-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{width:32px;height:32px;border:none;border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-secondary);font-size:1.2rem;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.edit-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);color:var(--color-text-primary)}.edit-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:var(--spacing-lg)}.edit-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text-primary)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-family:inherit;transition:all .2s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #2563eb1a}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-md)}"],changeDetection:0})}};function IB(n,e){n&1&&(v(0,"div",3)(1,"div",5),E(2,"\u{1F465}"),y(),v(3,"h3"),E(4,"No apartment selected"),y(),v(5,"p"),E(6,"Select an apartment from the dropdown above to manage tenants"),y()())}function TB(n,e){if(n&1){let t=xe();v(0,"div",4)(1,"app-tenant-list",6),$("tenantAdded",function(i){B(t);let o=P();return U(o.onTenantAdded(i))})("tenantUpdated",function(i){B(t);let o=P();return U(o.onTenantUpdated(i))})("tenantRemoved",function(i){B(t);let o=P();return U(o.onTenantRemoved(i))})("tenantOccupancyToggled",function(i){B(t);let o=P();return U(o.onOccupancyToggle(i))}),y()()}if(n&2){let t=P();R(),fe("tenants",t.currentApartment().tenants)("rooms",t.currentApartment().rooms)}}var Kf=class n{constructor(){this.apartmentService=k(Rt);this.currentApartment=this.apartmentService.currentApartment}onTenantAdded(e){let t=this.currentApartment();t&&this.apartmentService.addTenant(t.id,e)}onTenantUpdated(e){let t=this.currentApartment();t&&this.apartmentService.updateTenant(t.id,e.id,e.updates)}onTenantRemoved(e){let t=this.currentApartment();t&&this.apartmentService.removeTenant(t.id,e)}onOccupancyToggle(e){let t=this.currentApartment();t&&this.apartmentService.toggleTenantOccupancyDate(t.id,e.id,e.date,e.disabled)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ve({type:n,selectors:[["app-tenants"]],decls:8,vars:2,consts:[[1,"tenants-page"],[1,"page-header"],[1,"page-subtitle"],[1,"empty-state"],[1,"tenants-content"],[1,"empty-icon"],[3,"tenantAdded","tenantUpdated","tenantRemoved","tenantOccupancyToggled","tenants","rooms"]],template:function(t,r){if(t&1&&(v(0,"div",0)(1,"div",1)(2,"h1"),E(3,"Tenants"),y(),v(4,"p",2),E(5),y()(),ie(6,IB,7,0,"div",3)(7,TB,2,2,"div",4),y()),t&2){let i;R(5),xt("Manage tenants for ",((i=r.currentApartment())==null?null:i.name)||"selected apartment",""),R(),te(r.currentApartment()?7:6)}},dependencies:[Wf],styles:[".tenants-page[_ngcontent-%COMP%]{padding:var(--spacing-xl);min-height:100%}.page-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.page-subtitle[_ngcontent-%COMP%]{color:var(--color-text-secondary);margin:0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-2xl) var(--spacing-xl);color:var(--color-text-secondary)}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--color-text-secondary)}.tenants-content[_ngcontent-%COMP%]{max-width:800px}@media (max-width: 768px){.tenants-page[_ngcontent-%COMP%]{padding:var(--spacing-md);padding-left:max(var(--spacing-md),env(safe-area-inset-left));padding-right:max(var(--spacing-md),env(safe-area-inset-right))}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}"],changeDetection:0})}};var SB=(n,e)=>e.tenant.id;function xB(n,e){n&1&&(v(0,"div",3)(1,"div",5),E(2,"\u{1F4B0}"),y(),v(3,"h3"),E(4,"No apartment selected"),y(),v(5,"p"),E(6,"Select an apartment from the dropdown above to calculate bills"),y()())}function MB(n,e){n&1&&(v(0,"span",21),E(1,"Copied"),y())}function AB(n,e){n&1&&(v(0,"span",22),E(1,"Copy failed"),y())}function RB(n,e){n&1&&(v(0,"p",24),E(1,"No tenants with presence in this period"),y())}function PB(n,e){if(n&1&&(v(0,"div",26)(1,"div",27)(2,"span",28),E(3),y(),v(4,"span",29),E(5),y()(),v(6,"div",30),E(7),y()()),n&2){let t=e.$implicit,r=P(4);R(3),Me(t.tenant.name),R(2),Ti("",t.days," day",t.days!==1?"s":"",""),R(2),xt(" ",r.formatCurrency(t.amount)," ")}}function NB(n,e){if(n&1&&(v(0,"div",25),Tt(1,PB,8,4,"div",26,SB),y()),n&2){let t=P(3);R(),St(t.tenantBills())}}function OB(n,e){if(n&1){let t=xe();v(0,"div",14)(1,"div",15)(2,"h3"),E(3,"Summary"),y(),v(4,"div",16)(5,"span",17),E(6,"Total Days of Presence:"),y(),v(7,"span",18),E(8),y()(),v(9,"div",16)(10,"span",17),E(11,"Cost per Day:"),y(),v(12,"span",18),E(13),y()(),v(14,"div",16)(15,"span",17),E(16,"Bill Total:"),y(),v(17,"span",18),E(18),y()(),v(19,"div",19)(20,"button",20),$("click",function(){B(t);let i=P(2);return U(i.copyCalculatorAsText())}),E(21," Copy as TXT "),y(),ie(22,MB,2,0,"span",21)(23,AB,2,0,"span",22),y()(),v(24,"div",23)(25,"h3"),E(26,"Tenant Breakdown"),y(),ie(27,RB,2,0,"p",24)(28,NB,3,0,"div",25),y()()}if(n&2){let t=P(2);R(8),Me(t.totalDaysOfPresence()),R(5),Me(t.formatCurrency(t.costPerDay())),R(5),Me(t.formatCurrency(t.billTotal())),R(4),te(t.copyState()==="success"?22:t.copyState()==="error"?23:-1),R(5),te(t.tenantBills().length===0?27:28)}}function kB(n,e){if(n&1){let t=xe();v(0,"div",4)(1,"div",6)(2,"div",7)(3,"label",8),E(4,"Bill Total (AED)"),y(),v(5,"input",9),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.billTotal,i)||(o.billTotal=i),U(i)}),y()(),v(6,"div",7)(7,"label",10),E(8,"Start Date"),y(),v(9,"input",11),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.startDate,i)||(o.startDate=i),U(i)}),y()(),v(10,"div",7)(11,"label",12),E(12,"End Date"),y(),v(13,"input",13),Re("ngModelChange",function(i){B(t);let o=P();return Ne(o.endDate,i)||(o.endDate=i),U(i)}),y()()(),ie(14,OB,29,5,"div",14),y()}if(n&2){let t=P();R(5),Ae("ngModel",t.billTotal),R(4),Ae("ngModel",t.startDate),R(4),Ae("ngModel",t.endDate),R(),te(t.billTotal()>0&&t.startDate()&&t.endDate()?14:-1)}}var Qf=class n{constructor(){this.apartmentService=k(Rt);this.currentApartment=this.apartmentService.currentApartment;this.today=new Date;this.billTotal=Y(0);this.startDate=Y("");this.endDate=Y("");this.copyState=Y("idle");this.totalDaysOfPresence=Lt(()=>{let e=this.currentApartment();if(!e)return 0;let t=this.parseDate(this.startDate()),r=this.parseDate(this.endDate());if(!t||!r||r<t)return 0;let i=0;for(let o of e.tenants)i+=this.calculateTenantPresenceDays(o,t,r);return i});this.costPerDay=Lt(()=>{let e=this.totalDaysOfPresence(),t=this.billTotal();return e===0||t===0?0:t/e});this.tenantBills=Lt(()=>{let e=this.currentApartment();if(!e)return[];let t=this.parseDate(this.startDate()),r=this.parseDate(this.endDate());if(!t||!r||r<t)return[];let i=this.costPerDay(),o=[];for(let s of e.tenants){let c=this.calculateTenantPresenceDays(s,t,r);c>0&&o.push({tenant:s,days:c,amount:c*i})}return o.sort((s,c)=>c.amount-s.amount)});this.thirtyDaysAgo=new Date(this.today),this.thirtyDaysAgo.setDate(this.thirtyDaysAgo.getDate()-30),this.startDate.set(this.formatDateInput(this.thirtyDaysAgo)),this.endDate.set(this.formatDateInput(this.today))}calculateTenantPresenceDays(e,t,r){let i=e.startDate?ei(e.startDate):null,o=e.endDate?ei(e.endDate):null,s=i&&i>t?i:t,c=o&&o<r?o:r;if(s>c)return 0;let l=new Set(e.disabledDates||[]),u=0,f=new Date(s);for(;f<=c;){let p=this.formatDate(f);l.has(p)||u++,f.setDate(f.getDate()+1)}return u}formatCurrency(e){return new Intl.NumberFormat("en-AE",{style:"currency",currency:"AED",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}copyCalculatorAsText(){return V(this,null,function*(){let e=this.getCalculatorText();if(!e){this.copyState.set("error"),this.clearCopyStateLater();return}try{navigator.clipboard?.writeText?yield navigator.clipboard.writeText(e):this.copyWithFallback(e),this.copyState.set("success")}catch{this.copyState.set("error")}this.clearCopyStateLater()})}getCalculatorText(){let e=this.currentApartment();if(!e)return"";let t=[];t.push(`Apartment: ${e.name}`),t.push(""),t.push("Input"),t.push(`- Bill Total: ${this.formatCurrency(this.billTotal())}`),t.push(`- Start Date: ${this.startDate()||"N/A"}`),t.push(`- End Date: ${this.endDate()||"N/A"}`),t.push(""),t.push("Output"),t.push(`- Total Days of Presence: ${this.totalDaysOfPresence()}`),t.push(`- Cost per Day: ${this.formatCurrency(this.costPerDay())}`),t.push(`- Bill Total: ${this.formatCurrency(this.billTotal())}`),t.push(""),t.push("Tenant Breakdown");let r=this.tenantBills();if(r.length===0)t.push("- No tenants with presence in this period");else for(let i of r)t.push(`- ${i.tenant.name}: ${i.days} day${i.days!==1?"s":""} - ${this.formatCurrency(i.amount)}`);return t.join(`
`)}copyWithFallback(e){let t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}clearCopyStateLater(){window.setTimeout(()=>this.copyState.set("idle"),2e3)}formatDateInput(e){return e.toISOString().split("T")[0]}parseDate(e){return e?new Date(e+"T00:00:00"):null}formatDate(e){return e.toISOString().split("T")[0]}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ve({type:n,selectors:[["app-bill-calculator"]],decls:8,vars:1,consts:[[1,"bill-calculator-page"],[1,"page-header"],[1,"page-subtitle"],[1,"empty-state"],[1,"bill-calculator-content"],[1,"empty-icon"],[1,"calculator-form"],[1,"form-group"],["for","billTotal"],["type","number","id","billTotal","placeholder","0.00","step","0.01","min","0",3,"ngModelChange","ngModel"],["for","startDate"],["type","date","id","startDate",3,"ngModelChange","ngModel"],["for","endDate"],["type","date","id","endDate",3,"ngModelChange","ngModel"],[1,"calculation-results"],[1,"summary-card"],[1,"summary-item"],[1,"summary-label"],[1,"summary-value"],[1,"summary-actions"],[1,"btn-copy",3,"click"],[1,"copy-feedback","success"],[1,"copy-feedback","error"],[1,"tenants-list"],[1,"no-tenants"],[1,"tenant-bills"],[1,"tenant-bill-item"],[1,"tenant-info"],[1,"tenant-name"],[1,"tenant-days"],[1,"tenant-amount"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"h1"),E(3,"Bill Calculator"),y(),v(4,"p",2),E(5,"Calculate bill distribution based on tenant occupancy"),y()(),ie(6,xB,7,0,"div",3)(7,kB,15,4,"div",4),y()),t&2&&(R(6),te(r.currentApartment()?7:6))},dependencies:[Kt,Wt,xr,hn,Mr,nn],styles:[".bill-calculator-page[_ngcontent-%COMP%]{padding:var(--spacing-xl);min-height:100%}.page-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.page-subtitle[_ngcontent-%COMP%]{color:var(--color-text-secondary);margin:0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-2xl) var(--spacing-xl);color:var(--color-text-secondary)}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--color-text-secondary)}.bill-calculator-content[_ngcontent-%COMP%]{max-width:800px}.calculator-form[_ngcontent-%COMP%]{background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);padding:var(--spacing-lg);margin-bottom:var(--spacing-xl)}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:600;color:var(--color-text-primary);margin-bottom:var(--spacing-xs)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-family:inherit;transition:all .2s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #2563eb1a}.calculation-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-lg)}.summary-card[_ngcontent-%COMP%]{background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);padding:var(--spacing-lg)}.summary-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:var(--color-text-primary);margin:0 0 var(--spacing-md) 0}.summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-sm) 0;border-bottom:1px solid var(--color-border)}.summary-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.summary-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);margin-top:var(--spacing-md)}.btn-copy[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.85rem;font-weight:600;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-copy[_ngcontent-%COMP%]:hover{border-color:var(--color-primary);background:var(--color-bg-secondary)}.copy-feedback[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600}.copy-feedback.success[_ngcontent-%COMP%]{color:var(--color-success)}.copy-feedback.error[_ngcontent-%COMP%]{color:var(--color-error)}.summary-label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--color-text-secondary)}.summary-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--color-text-primary)}.tenants-list[_ngcontent-%COMP%]{background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);padding:var(--spacing-lg)}.tenants-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:var(--color-text-primary);margin:0 0 var(--spacing-md) 0}.no-tenants[_ngcontent-%COMP%]{color:var(--color-text-secondary);text-align:center;padding:var(--spacing-md);margin:0}.tenant-bills[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.tenant-bill-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-sm) var(--spacing-md);background:var(--color-bg-secondary);border:1px solid var(--color-border);border-radius:var(--border-radius-md)}.tenant-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md)}.tenant-name[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:var(--color-text-primary)}.tenant-days[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-text-secondary)}.tenant-amount[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:var(--color-primary)}@media (max-width: 768px){.bill-calculator-page[_ngcontent-%COMP%]{padding:var(--spacing-md);padding-left:max(var(--spacing-md),env(safe-area-inset-left));padding-right:max(var(--spacing-md),env(safe-area-inset-right))}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-height:44px}}"],changeDetection:0})}};var Yf=class n{ngOnInit(){let e=typeof window<"u"?window.location.search:"",t=`${jS}://localhost${e||""}`;typeof window<"u"&&(window.location.href=t)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ve({type:n,selectors:[["app-oauth-redirect"]],decls:3,vars:0,consts:[[1,"oauth-redirect"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"p"),E(2,"Redirecting to app\u2026"),y()())},styles:[".oauth-redirect[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;font-family:inherit;color:var(--color-text-secondary)}"],changeDetection:0})}};var cx=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"oauth-redirect",component:Yf},{path:"dashboard",component:Bf},{path:"expenses",component:$f},{path:"rooms",component:zf},{path:"tenants",component:Kf},{path:"bill-calculator",component:Qf},{path:"**",redirectTo:"/dashboard"}];var T_="Service workers are disabled or not supported by this browser",ks=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new _e(r=>r.error(new K(5601,!1)));else{let r=null,i=new Be;this.worker=new _e(u=>(r!==null&&u.next(r),i.subscribe(f=>u.next(f))));let o=()=>{let{controller:u}=e;u!==null&&(r=u,i.next(r))};e.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(Et(()=>e.getRegistration()));let s=new Be;this.events=s.asObservable();let c=u=>{let{data:f}=u;f?.type&&s.next(f)};e.addEventListener("message",c),t?.get(Ln,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",o),e.removeEventListener("message",c)})}}postMessage(e,t){return new Promise(r=>{this.worker.pipe(kt(1)).subscribe(i=>{i.postMessage(N({action:e},t)),r()})})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,t);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(Ot(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(kt(1))}waitForOperationCompleted(e){return new Promise((t,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(Ot(i=>i.nonce===e),kt(1),me(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:t,error:r})})}get isEnabled(){return!!this.serviceWorker}},VB=(()=>{class n{sw;messages;notificationClicks;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new Be;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=fi,this.notificationClicks=fi,this.subscription=fi;return}this.messages=this.sw.eventsOfType("PUSH").pipe(me(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(me(i=>i.data)),this.pushManager=this.sw.registration.pipe(me(i=>i.pushManager));let r=this.pushManager.pipe(Et(i=>i.getSubscription()));this.subscription=new _e(i=>{let o=r.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(T_));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,c)=>{this.pushManager.pipe(Et(l=>l.subscribe(r)),kt(1)).subscribe({next:l=>{this.subscriptionChanges.next(l),s(l)},error:c})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(T_));let t=r=>{if(r===null)throw new K(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new K(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(kt(1),Et(t)).subscribe({next:r,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||n)(ne(ks))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),FB=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=fi,this.unrecoverable=fi;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(T_));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new K(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||n)(ne(ks))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();var ux=new Z("");function LB(){let n=k(zc);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=k(ux),t=k(lt),r=k(Ln);t.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),t.runOutsideAngular(()=>{let i,{registrationStrategy:o}=n;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...c]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=lx(+c[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),lx(+c[0])]);break;default:throw new K(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:n.scope}).catch(s=>console.error(mu(5604,!1)))})})}function lx(n){return new Promise(e=>setTimeout(e,n))}function jB(n,e){return new ks(n.enabled!==!1?navigator.serviceWorker:void 0,e)}var zc=class{enabled;scope;registrationStrategy};function dx(n,e={}){return Ta([VB,FB,{provide:ux,useValue:n},{provide:zc,useValue:e},{provide:ks,useFactory:jB,deps:[zc,an]},Zg(LB)])}ai.isNativePlatform()&&Oc.addListener("backButton",({canGoBack:n})=>{n?window.history.back():Oc.exitApp()});dm(Lf,{providers:[Vm(cx,Fm()),dx("ngsw-worker.js",{enabled:!CE(),registrationStrategy:"registerWhenStable:30000"})]}).catch(n=>console.error(n));
