import{a as N,b as G,c as V,d as li,e as P0}from"./chunk-NX5AMF3I.js";function xh(n,e){return Object.is(n,e)}var ct=null,ll=!1,Mh=1,rn=Symbol("SIGNAL");function de(n){let e=ct;return ct=n,e}function Ah(){return ct}var oo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Xs(n){if(ll)throw new Error("");if(ct===null)return;ct.consumerOnSignalRead(n);let e=ct.nextProducerIndex++;if(pl(ct),e<ct.producerNode.length&&ct.producerNode[e]!==n&&Js(ct)){let t=ct.producerNode[e];hl(t,ct.producerIndexOfThis[e])}ct.producerNode[e]!==n&&(ct.producerNode[e]=n,ct.producerIndexOfThis[e]=Js(ct)?O0(n,ct,e):0),ct.producerLastReadVersion[e]=n.version}function N0(){Mh++}function Rh(n){if(!(Js(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Mh)){if(!n.producerMustRecompute(n)&&!fl(n)){Sh(n);return}n.producerRecomputeValue(n),Sh(n)}}function Ph(n){if(n.liveConsumerNode===void 0)return;let e=ll;ll=!0;try{for(let t of n.liveConsumerNode)t.dirty||qx(t)}finally{ll=e}}function Nh(){return ct?.consumerAllowSignalWrites!==!1}function qx(n){n.dirty=!0,Ph(n),n.consumerMarkedDirty?.(n)}function Sh(n){n.dirty=!1,n.lastCleanEpoch=Mh}function ea(n){return n&&(n.nextProducerIndex=0),de(n)}function dl(n,e){if(de(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Js(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)hl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function fl(n){pl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Rh(t),r!==t.version))return!0}return!1}function ta(n){if(pl(n),Js(n))for(let e=0;e<n.producerNode.length;e++)hl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function O0(n,e,t){if(k0(n),n.liveConsumerNode.length===0&&V0(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=O0(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function hl(n,e){if(k0(n),n.liveConsumerNode.length===1&&V0(n))for(let r=0;r<n.producerNode.length;r++)hl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];pl(i),i.producerIndexOfThis[r]=e}}function Js(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function pl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function k0(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function V0(n){return n.producerNode!==void 0}function Oh(n,e){let t=Object.create(Gx);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Rh(t),Xs(t),t.value===ul)throw t.error;return t.value};return r[rn]=t,r}var Ih=Symbol("UNSET"),Th=Symbol("COMPUTING"),ul=Symbol("ERRORED"),Gx=G(N({},oo),{value:Ih,dirty:!0,error:null,equal:xh,kind:"computed",producerMustRecompute(n){return n.value===Ih||n.value===Th},producerRecomputeValue(n){if(n.value===Th)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Th;let t=ea(n),r,i=!1;try{r=n.computation(),de(null),i=e!==Ih&&e!==ul&&r!==ul&&n.equal(e,r)}catch(o){r=ul,n.error=o}finally{dl(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function Wx(){throw new Error}var F0=Wx;function L0(n){F0(n)}function kh(n){F0=n}var Kx=null;function Vh(n,e){let t=Object.create(ml);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(Xs(t),t.value);return r[rn]=t,r}function na(n,e){Nh()||L0(n),n.equal(n.value,e)||(n.value=e,Qx(n))}function Fh(n,e){Nh()||L0(n),na(n,e(n.value))}var ml=G(N({},oo),{equal:xh,value:void 0,kind:"signal"});function Qx(n){n.version++,N0(),Ph(n),Kx?.()}function Lh(n){let e=de(null);try{return n()}finally{de(e)}}var jh;function ra(){return jh}function tr(n){let e=jh;return jh=n,e}var gl=Symbol("NotFound");function ce(n){return typeof n=="function"}function so(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var yl=so(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ia(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var et=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ce(r))try{r()}catch(o){e=o instanceof yl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{j0(o)}catch(s){e=e??[],s instanceof yl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new yl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)j0(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ia(t,e)}remove(e){let{_finalizers:t}=this;t&&ia(t,e),e instanceof n&&e._removeParent(this)}};et.EMPTY=(()=>{let n=new et;return n.closed=!0,n})();var Bh=et.EMPTY;function vl(n){return n instanceof et||n&&"closed"in n&&ce(n.remove)&&ce(n.add)&&ce(n.unsubscribe)}function j0(n){ce(n)?n():n.unsubscribe()}var mn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ao={setTimeout(n,e,...t){let{delegate:r}=ao;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ao;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function _l(n){ao.setTimeout(()=>{let{onUnhandledError:e}=mn;if(e)e(n);else throw n})}function ui(){}var B0=Uh("C",void 0,void 0);function U0(n){return Uh("E",void 0,n)}function $0(n){return Uh("N",n,void 0)}function Uh(n,e,t){return{kind:n,value:e,error:t}}var di=null;function co(n){if(mn.useDeprecatedSynchronousErrorHandling){let e=!di;if(e&&(di={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=di;if(di=null,t)throw r}}else n()}function H0(n){mn.useDeprecatedSynchronousErrorHandling&&di&&(di.errorThrown=!0,di.error=n)}var fi=class extends et{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,vl(e)&&e.add(this)):this.destination=tM}static create(e,t,r){return new lo(e,t,r)}next(e){this.isStopped?Hh($0(e),this):this._next(e)}error(e){this.isStopped?Hh(U0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Hh(B0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Xx=Function.prototype.bind;function $h(n,e){return Xx.call(n,e)}var zh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){wl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){wl(r)}else wl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){wl(t)}}},lo=class extends fi{constructor(e,t,r){super();let i;if(ce(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&mn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&$h(e.next,o),error:e.error&&$h(e.error,o),complete:e.complete&&$h(e.complete,o)}):i=e}this.destination=new zh(i)}};function wl(n){mn.useDeprecatedSynchronousErrorHandling?H0(n):_l(n)}function eM(n){throw n}function Hh(n,e){let{onStoppedNotification:t}=mn;t&&ao.setTimeout(()=>t(n,e))}var tM={closed:!0,next:ui,error:eM,complete:ui};var uo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Zt(n){return n}function qh(...n){return Gh(n)}function Gh(n){return n.length===0?Zt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ce=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=rM(t)?t:new lo(t,r,i);return co(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=z0(r),new r((i,o)=>{let s=new lo({next:c=>{try{t(c)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[uo](){return this}pipe(...t){return Gh(t)(this)}toPromise(t){return t=z0(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function z0(n){var e;return(e=n??mn.Promise)!==null&&e!==void 0?e:Promise}function nM(n){return n&&ce(n.next)&&ce(n.error)&&ce(n.complete)}function rM(n){return n&&n instanceof fi||nM(n)&&vl(n)}function Wh(n){return ce(n?.lift)}function Te(n){return e=>{if(Wh(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function De(n,e,t,r,i){return new Kh(n,e,t,r,i)}var Kh=class extends fi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(c){try{t(c)}catch(l){e.error(l)}}:super._next,this._error=i?function(c){try{i(c)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function fo(){return Te((n,e)=>{let t=null;n._refCount++;let r=De(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ho=class extends Ce{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Wh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new et;let t=this.getSubject();e.add(this.source.subscribe(De(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=et.EMPTY)}return e}refCount(){return fo()(this)}};var q0=so(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ue=(()=>{class n extends Ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Cl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new q0}next(t){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Bh:(this.currentObservers=null,o.push(t),new et(()=>{this.currentObservers=null,ia(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Ce;return t.source=this,t}}return n.create=(e,t)=>new Cl(e,t),n})(),Cl=class extends Ue{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Bh}};var Dt=class extends Ue{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ut=new Ce(n=>n.complete());function G0(n){return n&&ce(n.schedule)}function W0(n){return n[n.length-1]}function bl(n){return ce(W0(n))?n.pop():void 0}function jr(n){return G0(W0(n))?n.pop():void 0}function Q0(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(f){try{u(r.next(f))}catch(p){s(p)}}function l(f){try{u(r.throw(f))}catch(p){s(p)}}function u(f){f.done?o(f.value):i(f.value).then(c,l)}u((r=r.apply(n,e||[])).next())})}function K0(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hi(n){return this instanceof hi?(this.v=n,this):new hi(n)}function Y0(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(_){return function(M){return Promise.resolve(M).then(_,p)}}function c(_,M){r[_]&&(i[_]=function(O){return new Promise(function(L,z){o.push([_,O,L,z])>1||l(_,O)})},M&&(i[_]=M(i[_])))}function l(_,M){try{u(r[_](M))}catch(O){v(o[0][3],O)}}function u(_){_.value instanceof hi?Promise.resolve(_.value.v).then(f,p):v(o[0][2],_)}function f(_){l("next",_)}function p(_){l("throw",_)}function v(_,M){_(M),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Z0(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof K0=="function"?K0(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(c,l){s=n[o](s),i(c,l,s.done,s.value)})}}function i(o,s,c,l){Promise.resolve(l).then(function(u){o({value:u,done:c})},s)}}var El=n=>n&&typeof n.length=="number"&&typeof n!="function";function Dl(n){return ce(n?.then)}function Il(n){return ce(n[uo])}function Tl(n){return Symbol.asyncIterator&&ce(n?.[Symbol.asyncIterator])}function Sl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function iM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var xl=iM();function Ml(n){return ce(n?.[xl])}function Al(n){return Y0(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield hi(t.read());if(i)return yield hi(void 0);yield yield hi(r)}}finally{t.releaseLock()}})}function Rl(n){return ce(n?.getReader)}function tt(n){if(n instanceof Ce)return n;if(n!=null){if(Il(n))return oM(n);if(El(n))return sM(n);if(Dl(n))return aM(n);if(Tl(n))return J0(n);if(Ml(n))return cM(n);if(Rl(n))return lM(n)}throw Sl(n)}function oM(n){return new Ce(e=>{let t=n[uo]();if(ce(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function sM(n){return new Ce(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function aM(n){return new Ce(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,_l)})}function cM(n){return new Ce(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function J0(n){return new Ce(e=>{uM(n,e).catch(t=>e.error(t))})}function lM(n){return J0(Al(n))}function uM(n,e){var t,r,i,o;return Q0(this,void 0,void 0,function*(){try{for(t=Z0(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function $t(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Pl(n,e=0){return Te((t,r)=>{t.subscribe(De(r,i=>$t(r,n,()=>r.next(i),e),()=>$t(r,n,()=>r.complete(),e),i=>$t(r,n,()=>r.error(i),e)))})}function Nl(n,e=0){return Te((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function X0(n,e){return tt(n).pipe(Nl(e),Pl(e))}function ew(n,e){return tt(n).pipe(Nl(e),Pl(e))}function tw(n,e){return new Ce(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function nw(n,e){return new Ce(t=>{let r;return $t(t,e,()=>{r=n[xl](),$t(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ce(r?.return)&&r.return()})}function Ol(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ce(t=>{$t(t,e,()=>{let r=n[Symbol.asyncIterator]();$t(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function rw(n,e){return Ol(Al(n),e)}function iw(n,e){if(n!=null){if(Il(n))return X0(n,e);if(El(n))return tw(n,e);if(Dl(n))return ew(n,e);if(Tl(n))return Ol(n,e);if(Ml(n))return nw(n,e);if(Rl(n))return rw(n,e)}throw Sl(n)}function He(n,e){return e?iw(n,e):tt(n)}function oe(...n){let e=jr(n);return He(n,e)}function po(n,e){let t=ce(n)?n:()=>n,r=i=>i.error(t());return new Ce(e?i=>e.schedule(r,0,i):r)}function Qh(n){return!!n&&(n instanceof Ce||ce(n.lift)&&ce(n.subscribe))}var nr=so(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ye(n,e){return Te((t,r)=>{let i=0;t.subscribe(De(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:dM}=Array;function fM(n,e){return dM(e)?n(...e):n(e)}function kl(n){return ye(e=>fM(n,e))}var{isArray:hM}=Array,{getPrototypeOf:pM,prototype:mM,keys:gM}=Object;function Vl(n){if(n.length===1){let e=n[0];if(hM(e))return{args:e,keys:null};if(yM(e)){let t=gM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function yM(n){return n&&typeof n=="object"&&pM(n)===mM}function Fl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Ll(...n){let e=jr(n),t=bl(n),{args:r,keys:i}=Vl(n);if(r.length===0)return He([],e);let o=new Ce(vM(r,e,i?s=>Fl(i,s):Zt));return t?o.pipe(kl(t)):o}function vM(n,e,t=Zt){return r=>{ow(e,()=>{let{length:i}=n,o=new Array(i),s=i,c=i;for(let l=0;l<i;l++)ow(e,()=>{let u=He(n[l],e),f=!1;u.subscribe(De(r,p=>{o[l]=p,f||(f=!0,c--),c||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function ow(n,e,t){n?$t(t,n,e):e()}function sw(n,e,t,r,i,o,s,c){let l=[],u=0,f=0,p=!1,v=()=>{p&&!l.length&&!u&&e.complete()},_=O=>u<r?M(O):l.push(O),M=O=>{o&&e.next(O),u++;let L=!1;tt(t(O,f++)).subscribe(De(e,z=>{i?.(z),o?_(z):e.next(z)},()=>{L=!0},void 0,()=>{if(L)try{for(u--;l.length&&u<r;){let z=l.shift();s?$t(e,s,()=>M(z)):M(z)}v()}catch(z){e.error(z)}}))};return n.subscribe(De(e,_,()=>{p=!0,v()})),()=>{c?.()}}function nt(n,e,t=1/0){return ce(e)?nt((r,i)=>ye((o,s)=>e(r,o,i,s))(tt(n(r,i))),t):(typeof e=="number"&&(t=e),Te((r,i)=>sw(r,i,n,t)))}function mo(n=1/0){return nt(Zt,n)}function aw(){return mo(1)}function go(...n){return aw()(He(n,jr(n)))}function jl(n){return new Ce(e=>{tt(n()).subscribe(e)})}function Yh(...n){let e=bl(n),{args:t,keys:r}=Vl(n),i=new Ce(o=>{let{length:s}=t;if(!s){o.complete();return}let c=new Array(s),l=s,u=s;for(let f=0;f<s;f++){let p=!1;tt(t[f]).subscribe(De(o,v=>{p||(p=!0,u--),c[f]=v},()=>l--,void 0,()=>{(!l||!p)&&(u||o.next(r?Fl(r,c):c),o.complete())}))}});return e?i.pipe(kl(e)):i}var pi=new Ce(ui);function Vt(n,e){return Te((t,r)=>{let i=0;t.subscribe(De(r,o=>n.call(e,o,i++)&&r.next(o)))})}function rr(n){return Te((e,t)=>{let r=null,i=!1,o;r=e.subscribe(De(t,void 0,void 0,s=>{o=tt(n(s,rr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function cw(n,e,t,r,i){return(o,s)=>{let c=t,l=e,u=0;o.subscribe(De(s,f=>{let p=u++;l=c?n(l,f,p):(c=!0,f),r&&s.next(l)},i&&(()=>{c&&s.next(l),s.complete()})))}}function mi(n,e){return ce(e)?nt(n,e,1):nt(n,1)}function Br(n){return Te((e,t)=>{let r=!1;e.subscribe(De(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ft(n){return n<=0?()=>Ut:Te((e,t)=>{let r=0;e.subscribe(De(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Bl(n=_M){return Te((e,t)=>{let r=!1;e.subscribe(De(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function _M(){return new nr}function oa(n){return Te((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ir(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Vt((i,o)=>n(i,o,r)):Zt,Ft(1),t?Br(e):Bl(()=>new nr))}function yo(n){return n<=0?()=>Ut:Te((e,t)=>{let r=[];e.subscribe(De(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Zh(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Vt((i,o)=>n(i,o,r)):Zt,yo(1),t?Br(e):Bl(()=>new nr))}function Jh(n,e){return Te(cw(n,e,arguments.length>=2,!0))}function Xh(...n){let e=jr(n);return Te((t,r)=>{(e?go(n,t,e):go(n,t)).subscribe(r)})}function Mt(n,e){return Te((t,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();t.subscribe(De(r,l=>{i?.unsubscribe();let u=0,f=o++;tt(n(l,f)).subscribe(i=De(r,p=>r.next(e?e(l,p,f,u++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function ep(n){return Te((e,t)=>{tt(n).subscribe(De(t,()=>t.complete(),ui)),!t.closed&&e.subscribe(t)})}function It(n,e,t){let r=ce(n)||e||t?{next:n,error:e,complete:t}:n;return r?Te((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(De(o,l=>{var u;(u=r.next)===null||u===void 0||u.call(r,l),o.next(l)},()=>{var l;c=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var u;c=!1,(u=r.error)===null||u===void 0||u.call(r,l),o.error(l)},()=>{var l,u;c&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Zt}var Gw="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Q=class extends Error{code;constructor(e,t){super(vu(e,t)),this.code=e}};function wM(n){return`NG0${Math.abs(n)}`}function vu(n,e){return`${wM(n)}${e?": "+e:""}`}var Ww=Symbol("InputSignalNode#UNSET"),CM=G(N({},ml),{transformFn:void 0,applyValueToInputSignal(n,e){na(n,e)}});function Kw(n,e){let t=Object.create(CM);t.value=n,t.transformFn=e?.transform;function r(){if(Xs(t),t.value===Ww){let i=null;throw new Q(-950,i)}return t.value}return r[rn]=t,r}function _u(n){return{toString:n}.toString()}var gp=globalThis;function Fe(n){for(let e in n)if(n[e]===Fe)return e;throw Error("Could not find renamed property on target object.")}function bM(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function zt(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(zt).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function yp(n,e){return n?e?`${n} ${e}`:n:e||""}var EM=Fe({__forward_ref__:Fe});function wn(n){return n.__forward_ref__=wn,n.toString=function(){return zt(this())},n}function Lt(n){return Qw(n)?n():n}function Qw(n){return typeof n=="function"&&n.hasOwnProperty(EM)&&n.__forward_ref__===wn}function Y(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function zr(n){return{providers:n.providers||[],imports:n.imports||[]}}function wu(n){return lw(n,Zw)||lw(n,Jw)}function Yw(n){return wu(n)!==null}function lw(n,e){return n.hasOwnProperty(e)?n[e]:null}function DM(n){let e=n&&(n[Zw]||n[Jw]);return e||null}function uw(n){return n&&(n.hasOwnProperty(dw)||n.hasOwnProperty(IM))?n[dw]:null}var Zw=Fe({\u0275prov:Fe}),dw=Fe({\u0275inj:Fe}),Jw=Fe({ngInjectableDef:Fe}),IM=Fe({ngInjectorDef:Fe}),J=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Y({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Xw(n){return n&&!!n.\u0275providers}var TM=Fe({\u0275cmp:Fe}),SM=Fe({\u0275dir:Fe}),xM=Fe({\u0275pipe:Fe}),MM=Fe({\u0275mod:Fe}),Ql=Fe({\u0275fac:Fe}),la=Fe({__NG_ELEMENT_ID__:Fe}),fw=Fe({__NG_ENV_ID__:Fe});function bo(n){return typeof n=="string"?n:n==null?"":String(n)}function AM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():bo(n)}function eC(n,e){throw new Q(-200,n)}function pm(n,e){throw new Q(-201,!1)}var me=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(me||{}),vp;function tC(){return vp}function on(n){let e=vp;return vp=n,e}function nC(n,e,t){let r=wu(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&me.Optional)return null;if(e!==void 0)return e;pm(n,"Injector")}var RM={},gi=RM,PM="__NG_DI_FLAG__",Yl=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?gl:gi,r)}},Zl="ngTempTokenPath",NM="ngTokenPath",OM=/\n/gm,kM="\u0275",hw="__source";function VM(n,e=me.Default){if(ra()===void 0)throw new Q(-203,!1);if(ra()===null)return nC(n,void 0,e);{let t=ra(),r;return t instanceof Yl?r=t.injector:r=t,r.get(n,e&me.Optional?null:void 0,e)}}function re(n,e=me.Default){return(tC()||VM)(Lt(n),e)}function k(n,e=me.Default){return re(n,Cu(e))}function Cu(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function _p(n){let e=[];for(let t=0;t<n.length;t++){let r=Lt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Q(900,!1);let i,o=me.Default;for(let s=0;s<r.length;s++){let c=r[s],l=FM(c);typeof l=="number"?l===-1?i=c.token:o|=l:i=c}e.push(re(i,o))}else e.push(re(r))}return e}function FM(n){return n[PM]}function LM(n,e,t,r){let i=n[Zl];throw e[hw]&&i.unshift(e[hw]),n.message=jM(`
`+n.message,i,t,r),n[NM]=i,n[Zl]=null,n}function jM(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==kM?n.slice(2):n;let i=zt(e);if(Array.isArray(e))i=e.map(zt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let c=e[s];o.push(s+":"+(typeof c=="string"?JSON.stringify(c):zt(c)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(OM,`
  `)}`}function Eo(n,e){let t=n.hasOwnProperty(Ql);return t?n[Ql]:null}function BM(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function UM(n){return n.flat(Number.POSITIVE_INFINITY)}function mm(n,e){n.forEach(t=>Array.isArray(t)?mm(t,e):e(t))}function rC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Jl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function $M(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function gm(n,e,t){let r=Ia(n,e);return r>=0?n[r|1]=t:(r=~r,$M(n,r,e,t)),r}function tp(n,e){let t=Ia(n,e);if(t>=0)return n[t|1]}function Ia(n,e){return HM(n,e,1)}function HM(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var vi={},Ht=[],ua=new J(""),iC=new J("",-1),oC=new J(""),Xl=class{get(e,t=gi){if(t===gi){let r=new Error(`NullInjectorError: No provider for ${zt(e)}!`);throw r.name="NullInjectorError",r}return t}};function sC(n,e){let t=n[MM]||null;if(!t&&e===!0)throw new Error(`Type ${zt(n)} does not have '\u0275mod' property.`);return t}function Do(n){return n[TM]||null}function zM(n){return n[SM]||null}function qM(n){return n[xM]||null}function Ta(n){return{\u0275providers:n}}function GM(...n){return{\u0275providers:aC(!0,n),\u0275fromNgModule:!0}}function aC(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return mm(e,s=>{let c=s;wp(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&cC(i,o),t}function cC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];ym(i,o=>{e(o,r)})}}function wp(n,e,t,r){if(n=Lt(n),!n)return!1;let i=null,o=uw(n),s=!o&&Do(n);if(!o&&!s){let l=n.ngModule;if(o=uw(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)wp(u,e,t,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let u;try{mm(o.imports,f=>{wp(f,e,t,r)&&(u||=[],u.push(f))})}finally{}u!==void 0&&cC(u,e)}if(!c){let u=Eo(i)||(()=>new i);e({provide:i,useFactory:u,deps:Ht},i),e({provide:oC,useValue:i,multi:!0},i),e({provide:ua,useValue:()=>re(i),multi:!0},i)}let l=o.providers;if(l!=null&&!c){let u=n;ym(l,f=>{e(f,u)})}}else return!1;return i!==n&&n.providers!==void 0}function ym(n,e){for(let t of n)Xw(t)&&(t=t.\u0275providers),Array.isArray(t)?ym(t,e):e(t)}var WM=Fe({provide:String,useValue:Fe});function lC(n){return n!==null&&typeof n=="object"&&WM in n}function KM(n){return!!(n&&n.useExisting)}function QM(n){return!!(n&&n.useFactory)}function Io(n){return typeof n=="function"}function YM(n){return!!n.useClass}var bu=new J(""),Hl={},pw={},np;function vm(){return np===void 0&&(np=new Xl),np}var Jt=class{},da=class extends Jt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,bp(e,s=>this.processProvider(s)),this.records.set(iC,vo(void 0,this)),i.has("environment")&&this.records.set(Jt,vo(void 0,this));let o=this.records.get(bu);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(oC,Ht,me.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?gl:gi,r)}destroy(){aa(this),this._destroyed=!0;let e=de(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),de(e)}}onDestroy(e){return aa(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){aa(this);let t=tr(this),r=on(void 0),i;try{return e()}finally{tr(t),on(r)}}get(e,t=gi,r=me.Default){if(aa(this),e.hasOwnProperty(fw))return e[fw](this);r=Cu(r);let i,o=tr(this),s=on(void 0);try{if(!(r&me.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=tA(e)&&wu(e);u&&this.injectableDefInScope(u)?l=vo(Cp(e),Hl):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,r)}let c=r&me.Self?vm():this.parent;return t=r&me.Optional&&t===gi?null:t,c.get(e,t)}catch(c){if(c.name==="NullInjectorError"){if((c[Zl]=c[Zl]||[]).unshift(zt(e)),o)throw c;return LM(c,e,"R3InjectorError",this.source)}else throw c}finally{on(s),tr(o)}}resolveInjectorInitializers(){let e=de(null),t=tr(this),r=on(void 0),i;try{let o=this.get(ua,Ht,me.Self);for(let s of o)s()}finally{tr(t),on(r),de(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(zt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Lt(e);let t=Io(e)?e:Lt(e&&e.provide),r=JM(e);if(!Io(e)&&e.multi===!0){let i=this.records.get(t);i||(i=vo(void 0,Hl,!0),i.factory=()=>_p(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=de(null);try{return t.value===pw?eC(zt(e)):t.value===Hl&&(t.value=pw,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&eA(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{de(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Lt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Cp(n){let e=wu(n),t=e!==null?e.factory:Eo(n);if(t!==null)return t;if(n instanceof J)throw new Q(204,!1);if(n instanceof Function)return ZM(n);throw new Q(204,!1)}function ZM(n){if(n.length>0)throw new Q(204,!1);let t=DM(n);return t!==null?()=>t.factory(n):()=>new n}function JM(n){if(lC(n))return vo(void 0,n.useValue);{let e=uC(n);return vo(e,Hl)}}function uC(n,e,t){let r;if(Io(n)){let i=Lt(n);return Eo(i)||Cp(i)}else if(lC(n))r=()=>Lt(n.useValue);else if(QM(n))r=()=>n.useFactory(..._p(n.deps||[]));else if(KM(n))r=(i,o)=>re(Lt(n.useExisting),o!==void 0&&o&me.Optional?me.Optional:void 0);else{let i=Lt(n&&(n.useClass||n.provide));if(XM(n))r=()=>new i(..._p(n.deps));else return Eo(i)||Cp(i)}return r}function aa(n){if(n.destroyed)throw new Q(205,!1)}function vo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function XM(n){return!!n.deps}function eA(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function tA(n){return typeof n=="function"||typeof n=="object"&&n instanceof J}function bp(n,e){for(let t of n)Array.isArray(t)?bp(t,e):t&&Xw(t)?bp(t.\u0275providers,e):e(t)}function Cn(n,e){let t;n instanceof da?(aa(n),t=n):t=new Yl(n);let r,i=tr(t),o=on(void 0);try{return e()}finally{tr(i),on(o)}}function dC(){return tC()!==void 0||ra()!=null}function nA(n){if(!dC())throw new Q(-203,!1)}function rA(n){return typeof n=="function"}var ar=0,fe=1,se=2,Rt=3,vn=4,bn=5,fa=6,eu=7,ut=8,To=9,or=10,rt=11,ha=12,mw=13,Po=14,_n=15,_i=16,_o=17,sr=18,Eu=19,fC=20,Ur=21,rp=22,wi=23,sn=24,ip=25,qt=26,hC=1;var Ci=7,tu=8,So=9,At=10;function $r(n){return Array.isArray(n)&&typeof n[hC]=="object"}function cr(n){return Array.isArray(n)&&n[hC]===!0}function pC(n){return(n.flags&4)!==0}function No(n){return n.componentOffset>-1}function _m(n){return(n.flags&1)===1}function Pn(n){return!!n.template}function nu(n){return(n[se]&512)!==0}function Oo(n){return(n[se]&256)===256}var Ep=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function mC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var lr=(()=>{let n=()=>gC;return n.ngInherit=!0,n})();function gC(n){return n.type.prototype.ngOnChanges&&(n.setInput=oA),iA}function iA(){let n=vC(this),e=n?.current;if(e){let t=n.previous;if(t===vi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function oA(n,e,t,r,i){let o=this.declaredInputs[r],s=vC(n)||sA(n,{previous:vi,current:null}),c=s.current||(s.current={}),l=s.previous,u=l[o];c[o]=new Ep(u&&u.currentValue,t,l===vi),mC(n,e,i,t)}var yC="__ngSimpleChanges__";function vC(n){return n[yC]||null}function sA(n,e){return n[yC]=e}var gw=null;var Le=function(n,e=null,t){gw?.(n,e,t)},aA="svg",cA="math";function Nn(n){for(;Array.isArray(n);)n=n[ar];return n}function _C(n,e){return Nn(e[n])}function jn(n,e){return Nn(e[n.index])}function wm(n,e){return n.data[e]}function lA(n,e){return n[e]}function wC(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function On(n,e){let t=e[n];return $r(t)?t:t[ar]}function uA(n){return(n[se]&4)===4}function Cm(n){return(n[se]&128)===128}function dA(n){return cr(n[Rt])}function xo(n,e){return e==null?null:n[e]}function CC(n){n[_o]=0}function bC(n){n[se]&1024||(n[se]|=1024,Cm(n)&&Sa(n))}function fA(n,e){for(;n>0;)e=e[Po],n--;return e}function Du(n){return!!(n[se]&9216||n[sn]?.dirty)}function Dp(n){n[or].changeDetectionScheduler?.notify(8),n[se]&64&&(n[se]|=1024),Du(n)&&Sa(n)}function Sa(n){n[or].changeDetectionScheduler?.notify(0);let e=bi(n);for(;e!==null&&!(e[se]&8192||(e[se]|=8192,!Cm(e)));)e=bi(e)}function EC(n,e){if(Oo(n))throw new Q(911,!1);n[Ur]===null&&(n[Ur]=[]),n[Ur].push(e)}function hA(n,e){if(n[Ur]===null)return;let t=n[Ur].indexOf(e);t!==-1&&n[Ur].splice(t,1)}function bi(n){let e=n[Rt];return cr(e)?e[Rt]:e}function bm(n){return n[eu]??=[]}function Em(n){return n.cleanup??=[]}function pA(n,e,t,r){let i=bm(e);i.push(t),n.firstCreatePass&&Em(n).push(r,i.length-1)}var ve={lFrame:RC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Ip=!1;function mA(){return ve.lFrame.elementDepthCount}function gA(){ve.lFrame.elementDepthCount++}function yA(){ve.lFrame.elementDepthCount--}function DC(){return ve.bindingsEnabled}function vA(){return ve.skipHydrationRootTNode!==null}function _A(n){return ve.skipHydrationRootTNode===n}function wA(){ve.skipHydrationRootTNode=null}function be(){return ve.lFrame.lView}function ft(){return ve.lFrame.tView}function j(n){return ve.lFrame.contextLView=n,n[ut]}function B(n){return ve.lFrame.contextLView=null,n}function jt(){let n=IC();for(;n!==null&&n.type===64;)n=n.parent;return n}function IC(){return ve.lFrame.currentTNode}function CA(){let n=ve.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ko(n,e){let t=ve.lFrame;t.currentTNode=n,t.isParent=e}function TC(){return ve.lFrame.isParent}function bA(){ve.lFrame.isParent=!1}function EA(){return ve.lFrame.contextLView}function SC(){return Ip}function ru(n){let e=Ip;return Ip=n,e}function DA(){let n=ve.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function IA(){return ve.lFrame.bindingIndex}function TA(n){return ve.lFrame.bindingIndex=n}function Vo(){return ve.lFrame.bindingIndex++}function Dm(n){let e=ve.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function SA(){return ve.lFrame.inI18n}function xA(n,e){let t=ve.lFrame;t.bindingIndex=t.bindingRootIndex=n,Tp(e)}function MA(){return ve.lFrame.currentDirectiveIndex}function Tp(n){ve.lFrame.currentDirectiveIndex=n}function AA(n){let e=ve.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function xC(){return ve.lFrame.currentQueryIndex}function Im(n){ve.lFrame.currentQueryIndex=n}function RA(n){let e=n[fe];return e.type===2?e.declTNode:e.type===1?n[bn]:null}function MC(n,e,t){if(t&me.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&me.Host);)if(i=RA(o),i===null||(o=o[Po],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ve.lFrame=AC();return r.currentTNode=e,r.lView=n,!0}function Tm(n){let e=AC(),t=n[fe];ve.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function AC(){let n=ve.lFrame,e=n===null?null:n.child;return e===null?RC(n):e}function RC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function PC(){let n=ve.lFrame;return ve.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var NC=PC;function Sm(){let n=PC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function PA(n){return(ve.lFrame.contextLView=fA(n,ve.lFrame.contextLView))[ut]}function Bn(){return ve.lFrame.selectedIndex}function Ei(n){ve.lFrame.selectedIndex=n}function xm(){let n=ve.lFrame;return wm(n.tView,n.selectedIndex)}function NA(){return ve.lFrame.currentNamespace}var OC=!0;function Mm(){return OC}function Am(n){OC=n}function OA(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=gC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function kC(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function zl(n,e,t){VC(n,e,3,t)}function ql(n,e,t,r){(n[se]&3)===t&&VC(n,e,t,r)}function op(n,e){let t=n[se];(t&3)===e&&(t&=16383,t+=1,n[se]=t)}function VC(n,e,t,r){let i=r!==void 0?n[_o]&65535:0,o=r??-1,s=e.length-1,c=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(c=e[l],r!=null&&c>=r)break}else e[l]<0&&(n[_o]+=65536),(c<o||o==-1)&&(kA(n,t,e,l),n[_o]=(n[_o]&4294901760)+l+2),l++}function yw(n,e){Le(4,n,e);let t=de(null);try{e.call(n)}finally{de(t),Le(5,n,e)}}function kA(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],c=n[s];i?n[se]>>14<n[_o]>>16&&(n[se]&3)===e&&(n[se]+=16384,yw(c,o)):yw(c,o)}var Co=-1,Di=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function VA(n){return(n.flags&8)!==0}function FA(n){return(n.flags&16)!==0}function LA(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],c=t[r++];n.setAttribute(e,s,c,o)}else{let o=i,s=t[++r];jA(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function FC(n){return n===3||n===4||n===6}function jA(n){return n.charCodeAt(0)===64}function pa(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?vw(n,t,i,null,e[++r]):vw(n,t,i,null,null))}}return n}function vw(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let c=n[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<n.length;){let c=n[o];if(typeof c=="number")break;if(c===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function LC(n){return n!==Co}function iu(n){return n&32767}function BA(n){return n>>16}function ou(n,e){let t=BA(n),r=e;for(;t>0;)r=r[Po],t--;return r}var Sp=!0;function _w(n){let e=Sp;return Sp=n,e}var UA=256,jC=UA-1,BC=5,$A=0,Rn={};function HA(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(la)&&(r=t[la]),r==null&&(r=t[la]=$A++);let i=r&jC,o=1<<i;e.data[n+(i>>BC)]|=o}function su(n,e){let t=UC(n,e);if(t!==-1)return t;let r=e[fe];r.firstCreatePass&&(n.injectorIndex=e.length,sp(r.data,n),sp(e,null),sp(r.blueprint,null));let i=Rm(n,e),o=n.injectorIndex;if(LC(i)){let s=iu(i),c=ou(i,e),l=c[fe].data;for(let u=0;u<8;u++)e[o+u]=c[s+u]|l[s+u]}return e[o+8]=i,o}function sp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function UC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Rm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=GC(i),r===null)return Co;if(t++,i=i[Po],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Co}function xp(n,e,t){HA(n,e,t)}function zA(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(FC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function $C(n,e,t){if(t&me.Optional||n!==void 0)return n;pm(e,"NodeInjector")}function HC(n,e,t,r){if(t&me.Optional&&r===void 0&&(r=null),(t&(me.Self|me.Host))===0){let i=n[To],o=on(void 0);try{return i?i.get(e,r,t&me.Optional):nC(e,r,t&me.Optional)}finally{on(o)}}return $C(r,e,t)}function zC(n,e,t,r=me.Default,i){if(n!==null){if(e[se]&2048&&!(r&me.Self)){let s=KA(n,e,t,r,Rn);if(s!==Rn)return s}let o=qC(n,e,t,r,Rn);if(o!==Rn)return o}return HC(e,t,r,i)}function qC(n,e,t,r,i){let o=GA(t);if(typeof o=="function"){if(!MC(e,n,r))return r&me.Host?$C(i,t,r):HC(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&me.Optional))pm(t);else return s}finally{NC()}}else if(typeof o=="number"){let s=null,c=UC(n,e),l=Co,u=r&me.Host?e[_n][bn]:null;for((c===-1||r&me.SkipSelf)&&(l=c===-1?Rm(n,e):e[c+8],l===Co||!Cw(r,!1)?c=-1:(s=e[fe],c=iu(l),e=ou(l,e)));c!==-1;){let f=e[fe];if(ww(o,c,f.data)){let p=qA(c,e,t,s,r,u);if(p!==Rn)return p}l=e[c+8],l!==Co&&Cw(r,e[fe].data[c+8]===u)&&ww(o,c,e)?(s=f,c=iu(l),e=ou(l,e)):c=-1}}return i}function qA(n,e,t,r,i,o){let s=e[fe],c=s.data[n+8],l=r==null?No(c)&&Sp:r!=s&&(c.type&3)!==0,u=i&me.Host&&o===c,f=Gl(c,s,t,l,u);return f!==null?ma(e,s,f,c,i):Rn}function Gl(n,e,t,r,i){let o=n.providerIndexes,s=e.data,c=o&1048575,l=n.directiveStart,u=n.directiveEnd,f=o>>20,p=r?c:c+f,v=i?c+f:u;for(let _=p;_<v;_++){let M=s[_];if(_<l&&t===M||_>=l&&M.type===t)return _}if(i){let _=s[l];if(_&&Pn(_)&&_.type===t)return l}return null}function ma(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Di){let c=o;c.resolving&&eC(AM(s[t]));let l=_w(c.canSeeViewProviders);c.resolving=!0;let u,f=c.injectImpl?on(c.injectImpl):null,p=MC(n,r,me.Default);try{o=n[t]=c.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&OA(t,s[t],e)}finally{f!==null&&on(f),_w(l),c.resolving=!1,NC()}}return o}function GA(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(la)?n[la]:void 0;return typeof e=="number"?e>=0?e&jC:WA:e}function ww(n,e,t){let r=1<<n;return!!(t[e+(n>>BC)]&r)}function Cw(n,e){return!(n&me.Self)&&!(n&me.Host&&e)}var yi=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return zC(this._tNode,this._lView,e,Cu(r),t)}};function WA(){return new yi(jt(),be())}function En(n){return _u(()=>{let e=n.prototype.constructor,t=e[Ql]||Mp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Ql]||Mp(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Mp(n){return Qw(n)?()=>{let e=Mp(Lt(n));return e&&e()}:Eo(n)}function KA(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[se]&2048&&!nu(s);){let c=qC(o,s,t,r|me.Self,Rn);if(c!==Rn)return c;let l=o.parent;if(!l){let u=s[fC];if(u){let f=u.get(t,Rn,r);if(f!==Rn)return f}l=GC(s),s=s[Po]}o=l}return i}function GC(n){let e=n[fe],t=e.type;return t===2?e.declTNode:t===1?n[bn]:null}function Pm(n){return zA(jt(),n)}function bw(n,e=null,t=null,r){let i=WC(n,e,t,r);return i.resolveInjectorInitializers(),i}function WC(n,e=null,t=null,r,i=new Set){let o=[t||Ht,GM(n)];return r=r||(typeof n=="object"?void 0:zt(n)),new da(o,e||vm(),r||null,i)}var an=class n{static THROW_IF_NOT_FOUND=gi;static NULL=new Xl;static create(e,t){if(Array.isArray(e))return bw({name:""},t,e,"");{let r=e.name??"";return bw({name:r},e.parent,e.providers,r)}}static \u0275prov=Y({token:n,providedIn:"any",factory:()=>re(iC)});static __NG_ELEMENT_ID__=-1};var QA=new J("");QA.__NG_ELEMENT_ID__=n=>{let e=jt();if(e===null)throw new Q(204,!1);if(e.type&2)return e.value;if(n&me.Optional)return null;throw new Q(204,!1)};var KC=!1,Fo=(()=>{class n{static __NG_ELEMENT_ID__=YA;static __NG_ENV_ID__=t=>t}return n})(),au=class extends Fo{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return Oo(t)?(e(),()=>{}):(EC(t,e),()=>hA(t,e))}};function YA(){return new au(be())}var Mo=class{},QC=new J("",{providedIn:"root",factory:()=>!1});var YC=new J(""),ZC=new J(""),Lo=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Dt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=Y({token:n,providedIn:"root",factory:()=>new n})}return n})();var Ap=class extends Ue{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,dC()&&(this.destroyRef=k(Fo,{optional:!0})??void 0,this.pendingTasks=k(Lo,{optional:!0})??void 0)}emit(e){let t=de(null);try{super.next(e)}finally{de(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof et&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},lt=Ap;function ga(...n){}function JC(n){let e,t;function r(){n=ga;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Ew(n){return queueMicrotask(()=>n()),()=>{n=ga}}var Nm="isAngularZone",cu=Nm+"_ID",ZA=0,dt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new lt(!1);onMicrotaskEmpty=new lt(!1);onStable=new lt(!1);onError=new lt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=KC}=e;if(typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,e1(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Nm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Q(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,JA,ga,ga);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},JA={};function Om(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function XA(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){JC(()=>{n.callbackScheduled=!1,Rp(n),n.isCheckStableRunning=!0,Om(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Rp(n)}function e1(n){let e=()=>{XA(n)},t=ZA++;n._inner=n._inner.fork({name:"angular",properties:{[Nm]:!0,[cu]:t,[cu+t]:!0},onInvokeTask:(r,i,o,s,c,l)=>{if(t1(l))return r.invokeTask(o,s,c,l);try{return Dw(n),r.invokeTask(o,s,c,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Iw(n)}},onInvoke:(r,i,o,s,c,l,u)=>{try{return Dw(n),r.invoke(o,s,c,l,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!n1(l)&&e(),Iw(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Rp(n),Om(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Rp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Dw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Iw(n){n._nesting--,Om(n)}var Pp=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new lt;onMicrotaskEmpty=new lt;onStable=new lt;onError=new lt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function t1(n){return XC(n,"__ignore_ng_zone__")}function n1(n){return XC(n,"__scheduler_tick__")}function XC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var kn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},r1=new J("",{providedIn:"root",factory:()=>{let n=k(dt),e=k(kn);return t=>n.runOutsideAngular(()=>e.handleError(t))}}),Np=class{destroyed=!1;listeners=null;errorHandler=k(kn,{optional:!0});destroyRef=k(Fo);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new Q(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let t=this.listeners?.indexOf(e);t!==void 0&&t!==-1&&this.listeners?.splice(t,1)}}}emit(e){if(this.destroyed){console.warn(vu(953,!1));return}if(this.listeners===null)return;let t=de(null);try{for(let r of this.listeners)try{r(e)}catch(i){this.errorHandler?.handleError(i)}}finally{de(t)}}};function ze(n){return new Np}function Tw(n,e){return Kw(n,e)}function i1(n){return Kw(Ww,n)}var je=(Tw.required=i1,Tw);function o1(){return jo(jt(),be())}function jo(n,e){return new Xt(jn(n,e))}var Xt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=o1}return n})();function s1(n){return n instanceof Xt?n.nativeElement:n}function a1(n){return typeof n=="function"&&n[rn]!==void 0}function W(n,e){let t=Vh(n,e?.equal),r=t[rn];return t.set=i=>na(r,i),t.update=i=>Fh(r,i),t.asReadonly=c1.bind(t),t}function c1(){let n=this[rn];if(n.readonlyFn===void 0){let e=()=>this();e[rn]=n,n.readonlyFn=e}return n.readonlyFn}function eb(n){return a1(n)&&typeof n.set=="function"}function l1(){return this._results[Symbol.iterator]()}var Op=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ue}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=UM(e);(this._changesDetected=!BM(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=l1};function tb(n){return(n.flags&128)===128}var nb=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(nb||{}),rb=new Map,u1=0;function d1(){return u1++}function f1(n){rb.set(n[Eu],n)}function kp(n){rb.delete(n[Eu])}var Sw="__ngContext__";function xa(n,e){$r(e)?(n[Sw]=e[Eu],f1(e)):n[Sw]=e}function ib(n){return sb(n[ha])}function ob(n){return sb(n[vn])}function sb(n){for(;n!==null&&!cr(n);)n=n[vn];return n}var Vp;function ab(n){Vp=n}function h1(){if(Vp!==void 0)return Vp;if(typeof document<"u")return document;throw new Q(210,!1)}var km=new J("",{providedIn:"root",factory:()=>p1}),p1="ng",Vm=new J(""),Ti=new J("",{providedIn:"platform",factory:()=>"unknown"});var Fm=new J("",{providedIn:"root",factory:()=>h1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var m1="h",g1="b";var cb=!1,y1=new J("",{providedIn:"root",factory:()=>cb});var lb=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(lb||{}),Iu=new J(""),xw=new Set;function Ma(n){xw.has(n)||(xw.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var ub=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=v1}return n})();function v1(){return new ub(be(),jt())}var _1=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Y({token:n,providedIn:"root",factory:()=>new n})}return n})();var w1=(n,e,t,r)=>{};function C1(n,e,t,r){w1(n,e,t,r)}var b1=()=>null;function db(n,e,t=!1){return b1(n,e,t)}function fb(n,e){let t=n.contentQueries;if(t!==null){let r=de(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let c=n.data[s];Im(o),c.contentQueries(2,e[s],s)}}}finally{de(r)}}}function Fp(n,e,t){Im(0);let r=de(null);try{e(n,t)}finally{de(r)}}function hb(n,e,t){if(pC(e)){let r=de(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=n.data[s];if(c.contentQueries){let l=t[s];c.contentQueries(1,l,s)}}}finally{de(r)}}}var Vn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Vn||{});var Ul;function E1(){if(Ul===void 0&&(Ul=null,gp.trustedTypes))try{Ul=gp.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ul}function Mw(n){return E1()?.createScriptURL(n)||n}var lu=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Gw})`}};function Tu(n){return n instanceof lu?n.changingThisBreaksApplicationSecurity:n}function pb(n,e){let t=D1(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Gw})`)}return t===e}function D1(n){return n instanceof lu&&n.getTypeName()||null}var I1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function T1(n){return n=String(n),n.match(I1)?n:"unsafe:"+n}function S1(n,e){return n.createText(e)}function x1(n,e,t){n.setValue(e,t)}function mb(n,e,t){return n.createElement(e,t)}function uu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function gb(n,e,t){n.appendChild(e,t)}function Aw(n,e,t,r,i){r!==null?uu(n,e,t,r,i):gb(n,e,t)}function M1(n,e,t){n.removeChild(null,e,t)}function A1(n,e,t){n.setAttribute(e,"style",t)}function R1(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function yb(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&LA(n,e,r),i!==null&&R1(n,e,i),o!==null&&A1(n,e,o)}var Lm=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Lm||{});function jm(n){let e=_b();return e?e.sanitize(Lm.URL,n)||"":pb(n,"URL")?Tu(n):T1(bo(n))}function P1(n){let e=_b();if(e)return Mw(e.sanitize(Lm.RESOURCE_URL,n)||"");if(pb(n,"ResourceURL"))return Mw(Tu(n));throw new Q(904,!1)}var N1=new Set(["embed","frame","iframe","media","script"]),O1=new Set(["base","link","script"]);function k1(n,e){return e==="src"&&N1.has(n)||e==="href"&&O1.has(n)||e==="xlink:href"&&n==="script"?P1:jm}function vb(n,e,t){return k1(e,t)(n)}function _b(){let n=be();return n&&n[or].sanitizer}function wb(n){return n instanceof Function?n():n}function V1(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var Cb="ng-template";function F1(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&V1(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Bm(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Bm(n){return n.type===4&&n.value!==Cb}function L1(n,e,t){let r=n.type===4&&!t?Cb:n.value;return e===r}function j1(n,e,t){let r=4,i=n.attrs,o=i!==null?$1(i):0,s=!1;for(let c=0;c<e.length;c++){let l=e[c];if(typeof l=="number"){if(!s&&!gn(r)&&!gn(l))return!1;if(s&&gn(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!L1(n,l,t)||l===""&&e.length===1){if(gn(r))return!1;s=!0}}else if(r&8){if(i===null||!F1(n,i,l,t)){if(gn(r))return!1;s=!0}}else{let u=e[++c],f=B1(l,i,Bm(n),t);if(f===-1){if(gn(r))return!1;s=!0;continue}if(u!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&u!==p){if(gn(r))return!1;s=!0}}}}return gn(r)||s}function gn(n){return(n&1)===0}function B1(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return H1(e,n)}function U1(n,e,t=!1){for(let r=0;r<e.length;r++)if(j1(n,e[r],t))return!0;return!1}function $1(n){for(let e=0;e<n.length;e++){let t=n[e];if(FC(t))return e}return n.length}function H1(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Rw(n,e){return n?":not("+e.trim()+")":e}function z1(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let c=n[++t];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!gn(s)&&(e+=Rw(o,i),i=""),r=s,o=o||!gn(r);t++}return i!==""&&(e+=Rw(o,i)),e}function q1(n){return n.map(z1).join(",")}function G1(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!gn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var cn={};function Um(n,e,t,r,i,o,s,c,l,u,f){let p=qt+r,v=p+i,_=W1(p,v),M=typeof u=="function"?u():u;return _[fe]={type:n,blueprint:_,template:t,queries:null,viewQuery:c,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:M,incompleteFirstPass:!1,ssrId:f}}function W1(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:cn);return t}function K1(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Um(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function $m(n,e,t,r,i,o,s,c,l,u,f){let p=e.blueprint.slice();return p[ar]=i,p[se]=r|4|128|8|64|1024,(u!==null||n&&n[se]&2048)&&(p[se]|=2048),CC(p),p[Rt]=p[Po]=n,p[ut]=t,p[or]=s||n&&n[or],p[rt]=c||n&&n[rt],p[To]=l||n&&n[To]||null,p[bn]=o,p[Eu]=d1(),p[fa]=f,p[fC]=u,p[_n]=e.type==2?n[_n]:p,p}function Q1(n,e,t){let r=jn(e,n),i=K1(t),o=n[or].rendererFactory,s=Hm(n,$m(n,i,null,bb(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function bb(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function Eb(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Hm(n,e){return n[ha]?n[mw][vn]=e:n[ha]=e,n[mw]=e,e}function x(n=1){Db(ft(),be(),Bn()+n,!1)}function Db(n,e,t,r){if(!r)if((e[se]&3)===3){let o=n.preOrderCheckHooks;o!==null&&zl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&ql(e,o,0,t)}Ei(t)}var Su=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Su||{});function Lp(n,e,t,r){let i=de(null);try{let[o,s,c]=n.inputs[t],l=null;(s&Su.SignalBased)!==0&&(l=e[o][rn]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):c!==null&&(r=c.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,o):mC(e,l,o,r)}finally{de(i)}}function Ib(n,e,t,r,i){let o=Bn(),s=r&2;try{Ei(-1),s&&e.length>qt&&Db(n,e,qt,!1),Le(s?2:0,i),t(r,i)}finally{Ei(o),Le(s?3:1,i)}}function zm(n,e,t){tR(n,e,t),(t.flags&64)===64&&nR(n,e,t)}function Tb(n,e,t=jn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?t(e,n):n[s];n[i++]=c}}}function Y1(n,e,t,r){let o=r.get(y1,cb)||t===Vn.ShadowDom,s=n.selectRootElement(e,o);return Z1(s),s}function Z1(n){J1(n)}var J1=()=>null;function X1(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Sb(n,e,t,r,i,o,s,c){if(!c&&qm(e,n,t,r,i)){No(e)&&eR(t,e.index);return}if(e.type&3){let l=jn(e,t);r=X1(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(l,r,i)}else e.type&12}function eR(n,e){let t=On(e,n);t[se]&16||(t[se]|=64)}function tR(n,e,t){let r=t.directiveStart,i=t.directiveEnd;No(t)&&Q1(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||su(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let c=n.data[s],l=ma(e,n,s,t);if(xa(l,e),o!==null&&sR(e,s-r,l,c,t,o),Pn(c)){let u=On(t.index,e);u[ut]=ma(e,n,s,t)}}}function nR(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=MA();try{Ei(o);for(let c=r;c<i;c++){let l=n.data[c],u=e[c];Tp(c),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&rR(l,u)}}finally{Ei(-1),Tp(s)}}function rR(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function xb(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];U1(e,o.selectors,!1)&&(r??=[],Pn(o)?r.unshift(o):r.push(o))}return r}function iR(n,e,t,r,i,o){let s=jn(n,e);oR(e[rt],s,o,n.value,t,r,i)}function oR(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let c=s==null?bo(o):s(o,r||"",i);n.setAttribute(e,i,c,t)}}function sR(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1];Lp(r,t,l,u)}}function aR(n,e){let t=n[To],r=t?t.get(kn,null):null;r&&r.handleError(e)}function qm(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],c=!1;if(s)for(let l=0;l<s.length;l+=2){let u=s[l],f=s[l+1],p=e.data[u];Lp(p,t[u],f,i),c=!0}if(o)for(let l of o){let u=t[l],f=e.data[l];Lp(f,u,r,i),c=!0}return c}function cR(n,e){let t=On(e,n),r=t[fe];lR(r,t);let i=t[ar];i!==null&&t[fa]===null&&(t[fa]=db(i,t[To])),Le(18),Gm(r,t,t[ut]),Le(19,t[ut])}function lR(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Gm(n,e,t){Tm(e);try{let r=n.viewQuery;r!==null&&Fp(1,r,t);let i=n.template;i!==null&&Ib(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[sr]?.finishViewCreation(n),n.staticContentQueries&&fb(n,e),n.staticViewQueries&&Fp(2,n.viewQuery,t);let o=n.components;o!==null&&uR(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[se]&=-5,Sm()}}function uR(n,e){for(let t=0;t<e.length;t++)cR(n,e[t])}function xu(n,e,t,r){let i=de(null);try{let o=e.tView,c=n[se]&4096?4096:16,l=$m(n,o,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];l[_i]=u;let f=n[sr];return f!==null&&(l[sr]=f.createEmbeddedView(o)),Gm(o,l,t),l}finally{de(i)}}function ya(n,e){return!e||e.firstChild===null||tb(n)}var dR;function Wm(n,e){return dR(n,e)}var Hr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Hr||{});function Mb(n){return(n.flags&32)===32}function wo(n,e,t,r,i){if(r!=null){let o,s=!1;cr(r)?o=r:$r(r)&&(s=!0,r=r[ar]);let c=Nn(r);n===0&&t!==null?i==null?gb(e,t,c):uu(e,t,c,i||null,!0):n===1&&t!==null?uu(e,t,c,i||null,!0):n===2?M1(e,c,s):n===3&&e.destroyNode(c),o!=null&&ER(e,n,o,t,i)}}function fR(n,e){Ab(n,e),e[ar]=null,e[bn]=null}function hR(n,e,t,r,i,o){r[ar]=i,r[bn]=e,Au(n,r,t,1,i,o)}function Ab(n,e){e[or].changeDetectionScheduler?.notify(9),Au(n,e,e[rt],2,null,null)}function pR(n){let e=n[ha];if(!e)return ap(n[fe],n);for(;e;){let t=null;if($r(e))t=e[ha];else{let r=e[At];r&&(t=r)}if(!t){for(;e&&!e[vn]&&e!==n;)$r(e)&&ap(e[fe],e),e=e[Rt];e===null&&(e=n),$r(e)&&ap(e[fe],e),t=e&&e[vn]}e=t}}function Km(n,e){let t=n[So],r=t.indexOf(e);t.splice(r,1)}function Mu(n,e){if(Oo(e))return;let t=e[rt];t.destroyNode&&Au(n,e,t,3,null,null),pR(e)}function ap(n,e){if(Oo(e))return;let t=de(null);try{e[se]&=-129,e[se]|=256,e[sn]&&ta(e[sn]),gR(n,e),mR(n,e),e[fe].type===1&&e[rt].destroy();let r=e[_i];if(r!==null&&cr(e[Rt])){r!==e[Rt]&&Km(r,e);let i=e[sr];i!==null&&i.detachView(n)}kp(e)}finally{de(t)}}function mR(n,e){let t=n.cleanup,r=e[eu];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let c=t[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[t[s+1]];t[s].call(c)}r!==null&&(e[eu]=null);let i=e[Ur];if(i!==null){e[Ur]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[wi];if(o!==null){e[wi]=null;for(let s of o)s.destroy()}}function gR(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Di)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],l=o[s+1];Le(4,c,l);try{l.call(c)}finally{Le(5,c,l)}}else{Le(4,i,o);try{o.call(i)}finally{Le(5,i,o)}}}}}function yR(n,e,t){return vR(n,e.parent,t)}function vR(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ar];if(No(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Vn.None||i===Vn.Emulated)return null}return jn(r,t)}function _R(n,e,t){return CR(n,e,t)}function wR(n,e,t){return n.type&40?jn(n,t):null}var CR=wR,Pw;function Qm(n,e,t,r){let i=yR(n,r,e),o=e[rt],s=r.parent||e[bn],c=_R(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)Aw(o,i,t[l],c,!1);else Aw(o,i,t,c,!1);Pw!==void 0&&Pw(o,r,e,t,i)}function ca(n,e){if(e!==null){let t=e.type;if(t&3)return jn(e,n);if(t&4)return jp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ca(n,r);{let i=n[e.index];return cr(i)?jp(-1,i):Nn(i)}}else{if(t&128)return ca(n,e.next);if(t&32)return Wm(e,n)()||Nn(n[e.index]);{let r=Rb(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=bi(n[_n]);return ca(i,r)}else return ca(n,e.next)}}}return null}function Rb(n,e){if(e!==null){let r=n[_n][bn],i=e.projection;return r.projection[i]}return null}function jp(n,e){let t=At+n+1;if(t<e.length){let r=e[t],i=r[fe].firstChild;if(i!==null)return ca(r,i)}return e[Ci]}function Ym(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(s&&e===0&&(c&&xa(Nn(c),r),t.flags|=2),!Mb(t))if(l&8)Ym(n,e,t.child,r,i,o,!1),wo(e,n,i,c,o);else if(l&32){let u=Wm(t,r),f;for(;f=u();)wo(e,n,i,f,o);wo(e,n,i,c,o)}else l&16?bR(n,e,r,t,i,o):wo(e,n,i,c,o);t=s?t.projectionNext:t.next}}function Au(n,e,t,r,i,o){Ym(t,r,n.firstChild,e,i,o,!1)}function bR(n,e,t,r,i,o){let s=t[_n],l=s[bn].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let f=l[u];wo(e,n,i,f,o)}else{let u=l,f=s[Rt];tb(r)&&(u.flags|=128),Ym(n,e,u,f,i,o,!0)}}function ER(n,e,t,r,i){let o=t[Ci],s=Nn(t);o!==s&&wo(e,n,r,o,i);for(let c=At;c<t.length;c++){let l=t[c];Au(l[fe],l,n,e,r,o)}}function DR(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Hr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Hr.Important),n.setStyle(t,r,i,o))}}function du(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Nn(o)),cr(o)&&IR(o,r);let s=t.type;if(s&8)du(n,e,t.child,r);else if(s&32){let c=Wm(t,e),l;for(;l=c();)r.push(l)}else if(s&16){let c=Rb(e,t);if(Array.isArray(c))r.push(...c);else{let l=bi(e[_n]);du(l[fe],l,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function IR(n,e){for(let t=At;t<n.length;t++){let r=n[t],i=r[fe].firstChild;i!==null&&du(r[fe],r,i,e)}n[Ci]!==n[ar]&&e.push(n[Ci])}function Pb(n){if(n[ip]!==null){for(let e of n[ip])e.impl.addSequence(e);n[ip].length=0}}var Nb=[];function TR(n){return n[sn]??SR(n)}function SR(n){let e=Nb.pop()??Object.create(MR);return e.lView=n,e}function xR(n){n.lView[sn]!==n&&(n.lView=null,Nb.push(n))}var MR=G(N({},oo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Sa(n.lView)},consumerOnSignalRead(){this.lView[sn]=this}});function AR(n){let e=n[sn]??Object.create(RR);return e.lView=n,e}var RR=G(N({},oo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=bi(n.lView);for(;e&&!Ob(e[fe]);)e=bi(e);e&&bC(e)},consumerOnSignalRead(){this.lView[sn]=this}});function Ob(n){return n.type!==2}function kb(n){if(n[wi]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[wi])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[se]&8192)}}var PR=100;function Vb(n,e=!0,t=0){let i=n[or].rendererFactory,o=!1;o||i.begin?.();try{NR(n,t)}catch(s){throw e&&aR(n,s),s}finally{o||i.end?.()}}function NR(n,e){let t=SC();try{ru(!0),Bp(n,e);let r=0;for(;Du(n);){if(r===PR)throw new Q(103,!1);r++,Bp(n,1)}}finally{ru(t)}}function OR(n,e,t,r){if(Oo(e))return;let i=e[se],o=!1,s=!1;Tm(e);let c=!0,l=null,u=null;o||(Ob(n)?(u=TR(e),l=ea(u)):Ah()===null?(c=!1,u=AR(e),l=ea(u)):e[sn]&&(ta(e[sn]),e[sn]=null));try{CC(e),TA(n.bindingStartIndex),t!==null&&Ib(n,e,t,2,r);let f=(i&3)===3;if(!o)if(f){let _=n.preOrderCheckHooks;_!==null&&zl(e,_,null)}else{let _=n.preOrderHooks;_!==null&&ql(e,_,0,null),op(e,0)}if(s||kR(e),kb(e),Fb(e,0),n.contentQueries!==null&&fb(n,e),!o)if(f){let _=n.contentCheckHooks;_!==null&&zl(e,_)}else{let _=n.contentHooks;_!==null&&ql(e,_,1),op(e,1)}FR(n,e);let p=n.components;p!==null&&jb(e,p,0);let v=n.viewQuery;if(v!==null&&Fp(2,v,r),!o)if(f){let _=n.viewCheckHooks;_!==null&&zl(e,_)}else{let _=n.viewHooks;_!==null&&ql(e,_,2),op(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[rp]){for(let _ of e[rp])_();e[rp]=null}o||(Pb(e),e[se]&=-73)}catch(f){throw o||Sa(e),f}finally{u!==null&&(dl(u,l),c&&xR(u)),Sm()}}function Fb(n,e){for(let t=ib(n);t!==null;t=ob(t))for(let r=At;r<t.length;r++){let i=t[r];Lb(i,e)}}function kR(n){for(let e=ib(n);e!==null;e=ob(e)){if(!(e[se]&2))continue;let t=e[So];for(let r=0;r<t.length;r++){let i=t[r];bC(i)}}}function VR(n,e,t){Le(18);let r=On(e,n);Lb(r,t),Le(19,r[ut])}function Lb(n,e){Cm(n)&&Bp(n,e)}function Bp(n,e){let r=n[fe],i=n[se],o=n[sn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&fl(o)),s||=!1,o&&(o.dirty=!1),n[se]&=-9217,s)OR(r,n,r.template,n[ut]);else if(i&8192){kb(n),Fb(n,1);let c=r.components;c!==null&&jb(n,c,1),Pb(n)}}function jb(n,e,t){for(let r=0;r<e.length;r++)VR(n,e[r],t)}function FR(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ei(~i);else{let o=i,s=t[++r],c=t[++r];xA(s,o);let l=e[o];Le(24,l),c(2,l),Le(25,l)}}}finally{Ei(-1)}}function Zm(n,e){let t=SC()?64:1088;for(n[or].changeDetectionScheduler?.notify(e);n;){n[se]|=t;let r=bi(n);if(nu(n)&&!r)return n;n=r}return null}function Bb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Ub(n,e){let t=At+e;if(t<n.length)return n[t]}function Ru(n,e,t,r=!0){let i=e[fe];if(LR(i,e,n,t),r){let s=jp(t,n),c=e[rt],l=c.parentNode(n[Ci]);l!==null&&hR(i,n[bn],c,e,l,s)}let o=e[fa];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function $b(n,e){let t=va(n,e);return t!==void 0&&Mu(t[fe],t),t}function va(n,e){if(n.length<=At)return;let t=At+e,r=n[t];if(r){let i=r[_i];i!==null&&i!==n&&Km(i,r),e>0&&(n[t-1][vn]=r[vn]);let o=Jl(n,At+e);fR(r[fe],r);let s=o[sr];s!==null&&s.detachView(o[fe]),r[Rt]=null,r[vn]=null,r[se]&=-129}return r}function LR(n,e,t,r){let i=At+r,o=t.length;r>0&&(t[i-1][vn]=e),r<o-At?(e[vn]=t[i],rC(t,At+r,e)):(t.push(e),e[vn]=null),e[Rt]=t;let s=e[_i];s!==null&&t!==s&&Hb(s,e);let c=e[sr];c!==null&&c.insertView(n),Dp(e),e[se]|=128}function Hb(n,e){let t=n[So],r=e[Rt];if($r(r))n[se]|=2;else{let i=r[Rt][_n];e[_n]!==i&&(n[se]|=2)}t===null?n[So]=[e]:t.push(e)}var _a=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[fe];return du(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[ut]}set context(e){this._lView[ut]=e}get destroyed(){return Oo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Rt];if(cr(e)){let t=e[tu],r=t?t.indexOf(this):-1;r>-1&&(va(e,r),Jl(t,r))}this._attachedToViewContainer=!1}Mu(this._lView[fe],this._lView)}onDestroy(e){EC(this._lView,e)}markForCheck(){Zm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[se]&=-129}reattach(){Dp(this._lView),this._lView[se]|=128}detectChanges(){this._lView[se]|=1024,Vb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=nu(this._lView),t=this._lView[_i];t!==null&&!e&&Km(t,this._lView),Ab(this._lView[fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e;let t=nu(this._lView),r=this._lView[_i];r!==null&&!t&&Hb(r,this._lView),Dp(this._lView)}};var wa=(()=>{class n{static __NG_ELEMENT_ID__=UR}return n})(),jR=wa,BR=class extends jR{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=xu(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new _a(i)}};function UR(){return Jm(jt(),be())}function Jm(n,e){return n.type&4?new BR(e,n,jo(n,e)):null}function Pu(n,e,t,r,i){let o=n.data[e];if(o===null)o=$R(n,e,t,r,i),SA()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=CA();o.injectorIndex=s===null?-1:s.injectorIndex}return ko(o,!0),o}function $R(n,e,t,r,i){let o=IC(),s=TC(),c=s?o:o&&o.parent,l=n.data[e]=zR(n,c,t,e,r,i);return HR(n,l,o,s),l}function HR(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function zR(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,c=0;return vA()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var rH=new RegExp(`^(\\d+)*(${g1}|${m1})*(.*)`);var qR=()=>null;function Ca(n,e){return qR(n,e)}var GR=class{},zb=class{},Up=class{resolveComponentFactory(e){throw Error(`No component factory found for ${zt(e)}.`)}},Nu=class{static NULL=new Up},Ao=class{},ur=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>WR()}return n})();function WR(){let n=be(),e=jt(),t=On(e.index,n);return($r(t)?t:n)[rt]}var KR=(()=>{class n{static \u0275prov=Y({token:n,providedIn:"root",factory:()=>null})}return n})();var cp={},$p=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Cu(r);let i=this.injector.get(e,cp,r);return i!==cp||t===cp?i:this.parentInjector.get(e,t,r)}};function Nw(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=yp(i,c);else if(o==2){let l=c,u=e[++s];r=yp(r,l+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Se(n,e=me.Default){let t=be();if(t===null)return re(n,e);let r=jt();return zC(r,t,Lt(n),e)}function qb(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let c,l=null,u=null,f=YR(s);f===null?c=s:[c,l,u]=f,XR(n,e,t,c,o,l,u)}o!==null&&r!==null&&QR(t,r,o)}function QR(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Q(-301,!1);r.push(e[i],o)}}function YR(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let c=n[s];if(s===0&&Pn(c)&&(e=c),c.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,ZR(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function ZR(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function JR(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function XR(n,e,t,r,i,o,s){let c=r.length,l=!1;for(let v=0;v<c;v++){let _=r[v];!l&&Pn(_)&&(l=!0,JR(n,t,v)),xp(su(t,e),n,_.type)}oP(t,n.data.length,c);for(let v=0;v<c;v++){let _=r[v];_.providersResolver&&_.providersResolver(_)}let u=!1,f=!1,p=Eb(n,e,c,null);c>0&&(t.directiveToIndex=new Map);for(let v=0;v<c;v++){let _=r[v];if(t.mergedAttrs=pa(t.mergedAttrs,_.hostAttrs),tP(n,t,e,p,_),iP(p,_,i),s!==null&&s.has(_)){let[O,L]=s.get(_);t.directiveToIndex.set(_.type,[p,O+t.directiveStart,L+t.directiveStart])}else(o===null||!o.has(_))&&t.directiveToIndex.set(_.type,p);_.contentQueries!==null&&(t.flags|=4),(_.hostBindings!==null||_.hostAttrs!==null||_.hostVars!==0)&&(t.flags|=64);let M=_.type.prototype;!u&&(M.ngOnChanges||M.ngOnInit||M.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!f&&(M.ngOnChanges||M.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),p++}eP(n,t,o)}function eP(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))Ow(0,e,i,r),Ow(1,e,i,r),Vw(e,r,!1);else{let o=t.get(i);kw(0,e,o,r),kw(1,e,o,r),Vw(e,r,!0)}}}function Ow(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),Gb(e,o)}}function kw(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;n===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),Gb(e,s)}}function Gb(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function Vw(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Bm(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let l=r[c];if(l===0){c+=4;continue}else if(l===5){c+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let u=i[l];for(let f of u)if(f===e){s??=[],s.push(l,r[c+1]);break}}else if(t&&o.hasOwnProperty(l)){let u=o[l];for(let f=0;f<u.length;f+=2)if(u[f]===e){s??=[],s.push(u[f+1],r[c+1]);break}}c+=2}n.initialInputs??=[],n.initialInputs.push(s)}function tP(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Eo(i.type,!0)),s=new Di(o,Pn(i),Se);n.blueprint[r]=s,t[r]=s,nP(n,e,r,Eb(n,t,i.hostVars,cn),i)}function nP(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let c=~e.index;rP(s)!=c&&s.push(c),s.push(t,r,o)}}function rP(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function iP(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Pn(e)&&(t[""]=n)}}function oP(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Wb(n,e,t,r,i,o,s,c){let l=e.consts,u=xo(l,s),f=Pu(e,n,2,r,u);return o&&qb(e,t,f,xo(l,c),i),f.mergedAttrs=pa(f.mergedAttrs,f.attrs),f.attrs!==null&&Nw(f,f.attrs,!1),f.mergedAttrs!==null&&Nw(f,f.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,f),f}function Kb(n,e){kC(n,e),pC(e)&&n.queries.elementEnd(e)}var fu=class extends Nu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Do(e);return new ba(t,this.ngModule)}};function sP(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Su.SignalBased)!==0};return i&&(o.transform=i),o})}function aP(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function cP(n,e,t){let r=e instanceof Jt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new $p(t,r):t}function lP(n){let e=n.get(Ao,null);if(e===null)throw new Q(407,!1);let t=n.get(KR,null),r=n.get(Mo,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function uP(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return mb(e,t,t==="svg"?aA:t==="math"?cA:null)}var ba=class extends zb{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=sP(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=aP(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=q1(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){Le(22);let o=de(null);try{let s=this.componentDef,c=r?["ng-version","19.2.18"]:G1(this.componentDef.selectors[0]),l=Um(0,null,null,1,0,null,null,null,null,[c],null),u=cP(s,i||this.ngModule,e),f=lP(u),p=f.rendererFactory.createRenderer(null,s),v=r?Y1(p,r,s.encapsulation,u):uP(s,p),_=$m(null,l,null,512|bb(s),null,null,f,p,u,null,db(v,u,!0));_[qt]=v,Tm(_);let M=null;try{let O=Wb(qt,l,_,"#host",()=>[this.componentDef],!0,0);v&&(yb(p,v,O),xa(v,_)),zm(l,_,O),hb(l,O,_),Kb(l,O),t!==void 0&&dP(O,this.ngContentSelectors,t),M=On(O.index,_),_[ut]=M[ut],Gm(l,_,null)}catch(O){throw M!==null&&kp(M),kp(_),O}finally{Le(23),Sm()}return new Hp(this.componentType,_)}finally{de(o)}}},Hp=class extends GR{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=wm(t[fe],qt),this.location=jo(this._tNode,t),this.instance=On(this._tNode.index,t)[ut],this.hostView=this.changeDetectorRef=new _a(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=qm(r,i[fe],i,e,t);this.previousInputValues.set(e,t);let s=On(r.index,i);Zm(s,1)}get injector(){return new yi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function dP(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Bo=(()=>{class n{static __NG_ELEMENT_ID__=fP}return n})();function fP(){let n=jt();return Yb(n,be())}var hP=Bo,Qb=class extends hP{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return jo(this._hostTNode,this._hostLView)}get injector(){return new yi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Rm(this._hostTNode,this._hostLView);if(LC(e)){let t=ou(e,this._hostLView),r=iu(e),i=t[fe].data[r+8];return new yi(i,t)}else return new yi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Fw(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-At}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Ca(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(c,i,ya(this._hostTNode,s)),c}createComponent(e,t,r,i,o){let s=e&&!rA(e),c;if(s)c=t;else{let M=t||{};c=M.index,r=M.injector,i=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef}let l=s?e:new ba(Do(e)),u=r||this.parentInjector;if(!o&&l.ngModule==null){let O=(s?u:this.parentInjector).get(Jt,null);O&&(o=O)}let f=Do(l.componentType??{}),p=Ca(this._lContainer,f?.id??null),v=p?.firstChild??null,_=l.create(u,i,v,o);return this.insertImpl(_.hostView,c,ya(this._hostTNode,p)),_}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(dA(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let l=i[Rt],u=new Qb(l,l[bn],l[Rt]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Ru(s,i,o,r),e.attachToViewContainerRef(),rC(lp(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Fw(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=va(this._lContainer,t);r&&(Jl(lp(this._lContainer),t),Mu(r[fe],r))}detach(e){let t=this._adjustIndex(e,-1),r=va(this._lContainer,t);return r&&Jl(lp(this._lContainer),t)!=null?new _a(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Fw(n){return n[tu]}function lp(n){return n[tu]||(n[tu]=[])}function Yb(n,e){let t,r=e[n.index];return cr(r)?t=r:(t=Bb(r,e,null,n),e[n.index]=t,Hm(e,t)),mP(t,e,n,r),new Qb(t,n,e)}function pP(n,e){let t=n[rt],r=t.createComment(""),i=jn(e,n),o=t.parentNode(i);return uu(t,o,r,t.nextSibling(i),!1),r}var mP=vP,gP=()=>!1;function yP(n,e,t){return gP(n,e,t)}function vP(n,e,t,r){if(n[Ci])return;let i;t.type&8?i=Nn(r):i=pP(e,t),n[Ci]=i}var zp=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},qp=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),c=this.queries[s.indexInDeclarationView];i.push(c.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Xm(e,t).matches!==null&&this.queries[t].setDirty()}},Gp=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=TP(e):this.predicate=e}},Wp=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Kp=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,_P(t,o)),this.matchTNodeWithReadOption(e,t,Gl(t,e,o,!1,!1))}else r===wa?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Gl(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Xt||i===Bo||i===wa&&t.type&4)this.addMatch(t.index,-2);else{let o=Gl(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function _P(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function wP(n,e){return n.type&11?jo(n,e):n.type&4?Jm(n,e):null}function CP(n,e,t,r){return t===-1?wP(e,n):t===-2?bP(n,e,r):ma(n,n[fe],t,e)}function bP(n,e,t){if(t===Xt)return jo(e,n);if(t===wa)return Jm(e,n);if(t===Bo)return Yb(e,n)}function Zb(n,e,t,r){let i=e[sr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,c=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)c.push(null);else{let f=o[u];c.push(CP(e,f,s[l+1],t.metadata.read))}}i.matches=c}return i.matches}function Qp(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=Zb(n,e,i,t);for(let c=0;c<o.length;c+=2){let l=o[c];if(l>0)r.push(s[c/2]);else{let u=o[c+1],f=e[-l];for(let p=At;p<f.length;p++){let v=f[p];v[_i]===v[Rt]&&Qp(v[fe],v,u,r)}if(f[So]!==null){let p=f[So];for(let v=0;v<p.length;v++){let _=p[v];Qp(_[fe],_,u,r)}}}}}return r}function EP(n,e){return n[sr].queries[e].queryList}function DP(n,e,t){let r=new Op((t&4)===4);return pA(n,e,r,r.destroy),(e[sr]??=new qp).queries.push(new zp(r))-1}function IP(n,e,t,r){let i=ft();if(i.firstCreatePass){let o=jt();SP(i,new Gp(e,t,r),o.index),xP(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return DP(i,be(),t)}function TP(n){return n.split(",").map(e=>e.trim())}function SP(n,e,t){n.queries===null&&(n.queries=new Wp),n.queries.track(new Kp(e,t))}function xP(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function Xm(n,e){return n.queries.getByIndex(e)}function MP(n,e){let t=n[fe],r=Xm(t,e);return r.crossesNgTemplate?Qp(t,n,e,[]):Zb(t,n,r,e)}var Ea=class{},eg=class{};var Yp=class extends Ea{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new fu(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=sC(e);this._bootstrapComponents=wb(o.bootstrap),this._r3Injector=WC(e,t,[{provide:Ea,useValue:this},{provide:Nu,useValue:this.componentFactoryResolver},...r],zt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Zp=class extends eg{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Yp(this.moduleType,e,[])}};var hu=class extends Ea{injector;componentFactoryResolver=new fu(this);instance=null;constructor(e){super();let t=new da([...e.providers,{provide:Ea,useValue:this},{provide:Nu,useValue:this.componentFactoryResolver}],e.parent||vm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ou(n,e,t=null){return new hu({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var AP=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=aC(!1,t.type),i=r.length>0?Ou([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Y({token:n,providedIn:"environment",factory:()=>new n(re(Jt))})}return n})();function he(n){return _u(()=>{let e=Jb(n),t=G(N({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===nb.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(AP).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Vn.Emulated,styles:n.styles||Ht,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ma("NgStandalone"),Xb(t);let r=n.dependencies;return t.directiveDefs=Lw(r,!1),t.pipeDefs=Lw(r,!0),t.id=kP(t),t})}function RP(n){return Do(n)||zM(n)}function PP(n){return n!==null}function qr(n){return _u(()=>({type:n.type,bootstrap:n.bootstrap||Ht,declarations:n.declarations||Ht,imports:n.imports||Ht,exports:n.exports||Ht,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function NP(n,e){if(n==null)return vi;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,c,l;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,l=i[3]||null):(o=i,s=i,c=Su.None,l=null),t[o]=[r,c,l],e[o]=s}return t}function OP(n){if(n==null)return vi;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Qe(n){return _u(()=>{let e=Jb(n);return Xb(e),e})}function Jb(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||vi,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Ht,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:NP(n.inputs,e),outputs:OP(n.outputs),debugInfo:null}}function Xb(n){n.features?.forEach(e=>e(n))}function Lw(n,e){if(!n)return null;let t=e?qM:RP;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(PP)}function kP(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function VP(n){return Object.getPrototypeOf(n.prototype).constructor}function ln(n){let e=VP(n.type),t=!0,r=[n];for(;e;){let i;if(Pn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Q(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=up(n.inputs),s.declaredInputs=up(n.declaredInputs),s.outputs=up(n.outputs);let c=i.hostBindings;c&&UP(n,c);let l=i.viewQuery,u=i.contentQueries;if(l&&jP(n,l),u&&BP(n,u),FP(n,i),bM(n.outputs,i.outputs),Pn(i)&&i.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let c=o[s];c&&c.ngInherit&&c(n),c===ln&&(t=!1)}}e=Object.getPrototypeOf(e)}LP(r)}function FP(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function LP(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=pa(i.hostAttrs,t=pa(t,i.hostAttrs))}}function up(n){return n===vi?{}:n===Ht?[]:n}function jP(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function BP(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function UP(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function $P(n,e,t){return n[e]=t}function HP(n,e){return n[e]}function Fn(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function zP(n,e,t,r){let i=Fn(n,e,t);return Fn(n,e+1,r)||i}function qP(n,e,t,r,i,o,s,c,l){let u=e.consts,f=Pu(e,n,4,s||null,c||null);DC()&&qb(e,t,f,xo(u,l),xb),f.mergedAttrs=pa(f.mergedAttrs,f.attrs),kC(e,f);let p=f.tView=Um(2,f,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}function Jp(n,e,t,r,i,o,s,c,l,u){let f=t+qt,p=e.firstCreatePass?qP(f,e,n,r,i,o,s,c,l):e.data[f];ko(p,!1);let v=GP(e,n,p,t);Mm()&&Qm(e,n,v,p),xa(v,n);let _=Bb(v,n,v,p);return n[f]=_,Hm(n,_),yP(_,p,n),_m(p)&&zm(e,n,p),l!=null&&Tb(n,p,u),p}function X(n,e,t,r,i,o,s,c){let l=be(),u=ft(),f=xo(u.consts,o);return Jp(l,u,n,e,t,r,i,f,s,c),X}var GP=WP;function WP(n,e,t,r){return Am(!0),e[rt].createComment("")}var eE=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var tE=new J("");var nE=(()=>{class n{static \u0275prov=Y({token:n,providedIn:"root",factory:()=>new Xp})}return n})(),Xp=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Uo(n){return!!n&&typeof n.then=="function"}function KP(n){return!!n&&typeof n.subscribe=="function"}var rE=new J("");function tg(n){return Ta([{provide:rE,multi:!0,useValue:n}])}var iE=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=k(rE,{optional:!0})??[];injector=k(an);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Cn(this.injector,i);if(Uo(o))t.push(o);else if(KP(o)){let s=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ng=new J("");function QP(){kh(()=>{throw new Q(600,!1)})}function YP(n){return n.isBoundToModule}var ZP=10;var Ln=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(r1);afterRenderManager=k(_1);zonelessEnabled=k(QC);rootEffectScheduler=k(nE);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Ue;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=k(Lo).hasPendingTasks.pipe(ye(t=>!t));constructor(){k(Iu,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=k(Jt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=an.NULL){Le(10);let o=t instanceof zb;if(!this._injector.get(iE).done){let _="";throw new Q(405,_)}let c;o?c=t:c=this._injector.get(Nu).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=YP(c)?void 0:this._injector.get(Ea),u=r||c.selector,f=c.create(i,[],u,l),p=f.location.nativeElement,v=f.injector.get(tE,null);return v?.registerApplication(p),f.onDestroy(()=>{this.detachView(f.hostView),Wl(this.components,f),v?.unregisterApplication(p)}),this._loadComponent(f),Le(11,f),f}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Le(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(lb.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Q(101,!1);let t=de(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,de(t),this.afterTick.next(),Le(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ao,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<ZP;)Le(14),this.synchronizeOnce(),Le(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)JP(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Du(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Wl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(ng,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Wl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Q(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Wl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function JP(n,e,t,r){if(!t&&!Du(n))return;Vb(n,e,t&&!r?0:1)}function dr(n,e,t,r){let i=be(),o=Vo();if(Fn(i,o,e)){let s=ft(),c=xm();iR(c,i,n,e,t,r)}return dr}function XP(n,e,t,r){return Fn(n,Vo(),t)?e+bo(t)+r:cn}function eN(n,e,t,r,i,o){let s=IA(),c=zP(n,s,t,i);return Dm(2),c?e+bo(t)+r+bo(i)+o:cn}function $l(n,e){return n<<17|e<<2}function Ii(n){return n>>17&32767}function tN(n){return(n&2)==2}function nN(n,e){return n&131071|e<<17}function em(n){return n|2}function Ro(n){return(n&131068)>>2}function dp(n,e){return n&-131069|e<<2}function rN(n){return(n&1)===1}function tm(n){return n|1}function iN(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,c=Ii(s),l=Ro(s);n[r]=t;let u=!1,f;if(Array.isArray(t)){let p=t;f=p[1],(f===null||Ia(p,f)>0)&&(u=!0)}else f=t;if(i)if(l!==0){let v=Ii(n[c+1]);n[r+1]=$l(v,c),v!==0&&(n[v+1]=dp(n[v+1],r)),n[c+1]=nN(n[c+1],r)}else n[r+1]=$l(c,0),c!==0&&(n[c+1]=dp(n[c+1],r)),c=r;else n[r+1]=$l(l,0),c===0?c=r:n[l+1]=dp(n[l+1],r),l=r;u&&(n[r+1]=em(n[r+1])),jw(n,f,r,!0),jw(n,f,r,!1),oN(e,f,n,r,o),s=$l(c,l),o?e.classBindings=s:e.styleBindings=s}function oN(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Ia(o,e)>=0&&(t[r+1]=tm(t[r+1]))}function jw(n,e,t,r){let i=n[t+1],o=e===null,s=r?Ii(i):Ro(i),c=!1;for(;s!==0&&(c===!1||o);){let l=n[s],u=n[s+1];sN(l,e)&&(c=!0,n[s+1]=r?tm(u):em(u)),s=r?Ii(u):Ro(u)}c&&(n[t+1]=r?em(i):tm(i))}function sN(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ia(n,e)>=0:!1}var yn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function aN(n){return n.substring(yn.key,yn.keyEnd)}function cN(n){return lN(n),oE(n,sE(n,0,yn.textEnd))}function oE(n,e){let t=yn.textEnd;return t===e?-1:(e=yn.keyEnd=uN(n,yn.key=e,t),sE(n,e,t))}function lN(n){yn.key=0,yn.keyEnd=0,yn.value=0,yn.valueEnd=0,yn.textEnd=n.length}function sE(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function uN(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function ie(n,e,t){let r=be(),i=Vo();if(Fn(r,i,e)){let o=ft(),s=xm();Sb(o,s,r,n,e,r[rt],t,!1)}return ie}function nm(n,e,t,r,i){qm(e,n,t,i?"class":"style",r)}function yt(n,e){return fN(n,e,null,!0),yt}function Aa(n){hN(_N,dN,n,!0)}function dN(n,e){for(let t=cN(e);t>=0;t=oE(e,t))gm(n,aN(e),!0)}function fN(n,e,t,r){let i=be(),o=ft(),s=Dm(2);if(o.firstUpdatePass&&cE(o,n,s,r),e!==cn&&Fn(i,s,e)){let c=o.data[Bn()];lE(o,c,i,i[rt],n,i[s+1]=CN(e,t),r,s)}}function hN(n,e,t,r){let i=ft(),o=Dm(2);i.firstUpdatePass&&cE(i,null,o,r);let s=be();if(t!==cn&&Fn(s,o,t)){let c=i.data[Bn()];if(uE(c,r)&&!aE(i,o)){let l=r?c.classesWithoutHost:c.stylesWithoutHost;l!==null&&(t=yp(l,t||"")),nm(i,c,s,t,r)}else wN(i,c,s,s[rt],s[o+1],s[o+1]=vN(n,e,t),r,o)}}function aE(n,e){return e>=n.expandoStartIndex}function cE(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Bn()],s=aE(n,t);uE(o,r)&&e===null&&!s&&(e=!1),e=pN(i,o,e,r),iN(i,o,e,t,s,r)}}function pN(n,e,t,r){let i=AA(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=fp(null,n,e,t,r),t=Da(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=fp(i,n,e,t,r),o===null){let l=mN(n,e,r);l!==void 0&&Array.isArray(l)&&(l=fp(null,n,e,l[1],r),l=Da(l,e.attrs,r),gN(n,e,r,l))}else o=yN(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function mN(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ro(r)!==0)return n[Ii(r)]}function gN(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ii(i)]=r}function yN(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Da(r,s,t)}return Da(r,e.attrs,t)}function fp(n,e,t,r,i){let o=null,s=t.directiveEnd,c=t.directiveStylingLast;for(c===-1?c=t.directiveStart:c++;c<s&&(o=e[c],r=Da(r,o.hostAttrs,i),o!==n);)c++;return n!==null&&(t.directiveStylingLast=c),r}function Da(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),gm(n,s,t?!0:e[++o]))}return n===void 0?null:n}function vN(n,e,t){if(t==null||t==="")return Ht;let r=[],i=Tu(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function _N(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&gm(n,r,t)}function wN(n,e,t,r,i,o,s,c){i===cn&&(i=Ht);let l=0,u=0,f=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;f!==null||p!==null;){let v=l<i.length?i[l+1]:void 0,_=u<o.length?o[u+1]:void 0,M=null,O;f===p?(l+=2,u+=2,v!==_&&(M=p,O=_)):p===null||f!==null&&f<p?(l+=2,M=f):(u+=2,M=p,O=_),M!==null&&lE(n,e,t,r,M,O,s,c),f=l<i.length?i[l]:null,p=u<o.length?o[u]:null}}function lE(n,e,t,r,i,o,s,c){if(!(e.type&3))return;let l=n.data,u=l[c+1],f=rN(u)?Bw(l,e,t,i,Ro(u),s):void 0;if(!pu(f)){pu(o)||tN(u)&&(o=Bw(l,null,t,i,c,s));let p=_C(Bn(),t);DR(r,s,p,i,o)}}function Bw(n,e,t,r,i,o){let s=e===null,c;for(;i>0;){let l=n[i],u=Array.isArray(l),f=u?l[1]:l,p=f===null,v=t[i+1];v===cn&&(v=p?Ht:void 0);let _=p?tp(v,r):f===r?v:void 0;if(u&&!pu(_)&&(_=tp(l,r)),pu(_)&&(c=_,s))return c;let M=n[i+1];i=s?Ii(M):Ro(M)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(c=tp(l,r))}return c}function pu(n){return n!==void 0}function CN(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=zt(Tu(n)))),n}function uE(n,e){return(n.flags&(e?8:16))!==0}var rm=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function hp(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function bN(n,e,t){let r,i,o=0,s=n.length-1,c=void 0;if(Array.isArray(e)){let l=e.length-1;for(;o<=s&&o<=l;){let u=n.at(o),f=e[o],p=hp(o,u,o,f,t);if(p!==0){p<0&&n.updateValue(o,f),o++;continue}let v=n.at(s),_=e[l],M=hp(s,v,l,_,t);if(M!==0){M<0&&n.updateValue(s,_),s--,l--;continue}let O=t(o,u),L=t(s,v),z=t(o,f);if(Object.is(z,L)){let ee=t(l,_);Object.is(ee,O)?(n.swap(o,s),n.updateValue(s,_),l--,s--):n.move(s,o),n.updateValue(o,f),o++;continue}if(r??=new mu,i??=$w(n,o,s,t),im(n,r,o,z))n.updateValue(o,f),o++,s++;else if(i.has(z))r.set(O,n.detach(o)),s--;else{let ee=n.create(o,e[o]);n.attach(o,ee),o++,s++}}for(;o<=l;)Uw(n,r,t,o,e[o]),o++}else if(e!=null){let l=e[Symbol.iterator](),u=l.next();for(;!u.done&&o<=s;){let f=n.at(o),p=u.value,v=hp(o,f,o,p,t);if(v!==0)v<0&&n.updateValue(o,p),o++,u=l.next();else{r??=new mu,i??=$w(n,o,s,t);let _=t(o,p);if(im(n,r,o,_))n.updateValue(o,p),o++,s++,u=l.next();else if(!i.has(_))n.attach(o,n.create(o,p)),o++,s++,u=l.next();else{let M=t(o,f);r.set(M,n.detach(o)),s--}}}for(;!u.done;)Uw(n,r,t,n.length,u.value),u=l.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(l=>{n.destroy(l)})}function im(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function Uw(n,e,t,r,i){if(im(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function $w(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var mu=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function Z(n,e){Ma("NgControlFlow");let t=be(),r=Vo(),i=t[r]!==cn?t[r]:-1,o=i!==-1?gu(t,qt+i):void 0,s=0;if(Fn(t,r,n)){let c=de(null);try{if(o!==void 0&&$b(o,s),n!==-1){let l=qt+n,u=gu(t,l),f=cm(t[fe],l),p=Ca(u,f.tView.ssrId),v=xu(t,f,e,{dehydratedView:p});Ru(u,v,s,ya(f,p))}}finally{de(c)}}else if(o!==void 0){let c=Ub(o,s);c!==void 0&&(c[ut]=e)}}var om=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-At}};var sm=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function ht(n,e,t,r,i,o,s,c,l,u,f,p,v){Ma("NgControlFlow");let _=be(),M=ft(),O=l!==void 0,L=be(),z=c?s.bind(L[_n][ut]):s,ee=new sm(O,z);L[qt+n]=ee,Jp(_,M,n+1,e,t,r,i,xo(M.consts,o)),O&&Jp(_,M,n+2,l,u,f,p,xo(M.consts,v))}var am=class extends rm{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-At}at(e){return this.getLView(e)[ut].$implicit}attach(e,t){let r=t[fa];this.needsIndexUpdate||=e!==this.length,Ru(this.lContainer,t,e,ya(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,EN(this.lContainer,e)}create(e,t){let r=Ca(this.lContainer,this.templateTNode.tView.ssrId),i=xu(this.hostLView,this.templateTNode,new om(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Mu(e[fe],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[ut].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[ut].$index=e}getLView(e){return DN(this.lContainer,e)}};function pt(n){let e=de(null),t=Bn();try{let r=be(),i=r[fe],o=r[t],s=t+1,c=gu(r,s);if(o.liveCollection===void 0){let u=cm(i,s);o.liveCollection=new am(c,r,u)}else o.liveCollection.reset();let l=o.liveCollection;if(bN(l,n,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let u=Vo(),f=l.length===0;if(Fn(r,u,f)){let p=t+2,v=gu(r,p);if(f){let _=cm(i,p),M=Ca(v,_.tView.ssrId),O=xu(r,_,void 0,{dehydratedView:M});Ru(v,O,0,ya(_,M))}else $b(v,0)}}}finally{de(e)}}function gu(n,e){return n[e]}function EN(n,e){return va(n,e)}function DN(n,e){return Ub(n,e)}function cm(n,e){return wm(n,e)}function y(n,e,t,r){let i=be(),o=ft(),s=qt+n,c=i[rt],l=o.firstCreatePass?Wb(s,o,i,e,xb,DC(),t,r):o.data[s],u=IN(o,i,l,c,e,n);i[s]=u;let f=_m(l);return ko(l,!0),yb(c,u,l),!Mb(l)&&Mm()&&Qm(o,i,u,l),(mA()===0||f)&&xa(u,i),gA(),f&&(zm(o,i,l),hb(o,l,i)),r!==null&&Tb(i,l),y}function g(){let n=jt();TC()?bA():(n=n.parent,ko(n,!1));let e=n;_A(e)&&wA(),yA();let t=ft();return t.firstCreatePass&&Kb(t,e),e.classesWithoutHost!=null&&VA(e)&&nm(t,e,be(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&FA(e)&&nm(t,e,be(),e.stylesWithoutHost,!1),g}function Ye(n,e,t,r){return y(n,e,t,r),g(),Ye}var IN=(n,e,t,r,i,o)=>(Am(!0),mb(r,i,NA()));function we(){return be()}var yu="en-US";var TN=yu;function SN(n){typeof n=="string"&&(TN=n.toLowerCase().replace(/_/g,"-"))}function Hw(n,e,t){return function r(i){if(i===Function)return t;let o=No(n)?On(n.index,e):e;Zm(o,5);let s=e[ut],c=zw(e,s,t,i),l=r.__ngNextListenerFn__;for(;l;)c=zw(e,s,l,i)&&c,l=l.__ngNextListenerFn__;return c}}function zw(n,e,t,r){let i=de(null);try{return Le(6,e,t),t(r)!==!1}catch(o){return xN(n,o),!1}finally{Le(7,e,t),de(i)}}function xN(n,e){let t=n[To],r=t?t.get(kn,null):null;r&&r.handleError(e)}function qw(n,e,t,r,i,o){let s=e[t],c=e[fe],u=c.data[t].outputs[r],f=s[u],p=c.firstCreatePass?Em(c):null,v=bm(e),_=f.subscribe(o),M=v.length;v.push(o,_),p&&p.push(i,n.index,M,-(M+1))}function $(n,e,t,r){let i=be(),o=ft(),s=jt();return dE(o,i,i[rt],s,n,e,r),$}function MN(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let c=e[eu],l=i[o+2];return c.length>l?c[l]:null}typeof s=="string"&&(o+=2)}return null}function dE(n,e,t,r,i,o,s){let c=_m(r),u=n.firstCreatePass?Em(n):null,f=bm(e),p=!0;if(r.type&3||s){let v=jn(r,e),_=s?s(v):v,M=f.length,O=s?z=>s(Nn(z[r.index])):r.index,L=null;if(!s&&c&&(L=MN(n,e,i,r.index)),L!==null){let z=L.__ngLastListenerFn__||L;z.__ngNextListenerFn__=o,L.__ngLastListenerFn__=o,p=!1}else{o=Hw(r,e,o),C1(e,_,i,o);let z=t.listen(_,i,o);f.push(o,z),u&&u.push(i,O,M,M+1)}}else o=Hw(r,e,o);if(p){let v=r.outputs?.[i],_=r.hostDirectiveOutputs?.[i];if(_&&_.length)for(let M=0;M<_.length;M+=2){let O=_[M],L=_[M+1];qw(r,e,O,L,i,o)}if(v&&v.length)for(let M of v)qw(r,e,M,i,i,o)}}function P(n=1){return PA(n)}function fE(n,e,t,r){IP(n,e,t,r)}function hE(n){let e=be(),t=ft(),r=xC();Im(r+1);let i=Xm(t,r);if(n.dirty&&uA(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=MP(e,r);n.reset(o,s1),n.notifyOnChanges()}return!0}return!1}function pE(){return EP(be(),xC())}function C(n,e=""){let t=be(),r=ft(),i=n+qt,o=r.firstCreatePass?Pu(r,i,1,e,null):r.data[i],s=AN(r,t,o,e,n);t[i]=s,Mm()&&Qm(r,t,s,o),ko(o,!1)}var AN=(n,e,t,r,i)=>(Am(!0),S1(e[rt],r));function _e(n){return Ge("",n,""),_e}function Ge(n,e,t){let r=be(),i=XP(r,n,e,t);return i!==cn&&mE(r,Bn(),i),Ge}function Si(n,e,t,r,i){let o=be(),s=eN(o,n,e,t,r,i);return s!==cn&&mE(o,Bn(),s),Si}function mE(n,e,t){let r=_C(e,n);x1(n[rt],r,t)}function Re(n,e,t){eb(e)&&(e=e());let r=be(),i=Vo();if(Fn(r,i,e)){let o=ft(),s=xm();Sb(o,s,r,n,e,r[rt],t,!1)}return Re}function Ne(n,e){let t=eb(n);return t&&n.set(e),t}function Pe(n,e){let t=be(),r=ft(),i=jt();return dE(r,t,t[rt],i,n,e),Pe}var gE={};function $o(n){let e=ft(),t=be(),r=n+qt,i=Pu(e,r,128,null,null);return ko(i,!1),wC(e,t,r,gE),$o}function yE(n){Ma("NgLet");let e=ft(),t=be(),r=Bn();return wC(e,t,r,n),n}function vE(n){let e=EA(),t=lA(e,qt+n);if(t===gE)throw new Q(314,!1);return t}function RN(n,e,t){let r=ft();if(r.firstCreatePass){let i=Pn(n);lm(t,r.data,r.blueprint,i,!0),lm(e,r.data,r.blueprint,i,!1)}}function lm(n,e,t,r,i){if(n=Lt(n),Array.isArray(n))for(let o=0;o<n.length;o++)lm(n[o],e,t,r,i);else{let o=ft(),s=be(),c=jt(),l=Io(n)?n:Lt(n.provide),u=uC(n),f=c.providerIndexes&1048575,p=c.directiveStart,v=c.providerIndexes>>20;if(Io(n)||!n.multi){let _=new Di(u,i,Se),M=mp(l,e,i?f:f+v,p);M===-1?(xp(su(c,s),o,l),pp(o,n,e.length),e.push(l),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(_),s.push(_)):(t[M]=_,s[M]=_)}else{let _=mp(l,e,f+v,p),M=mp(l,e,f,f+v),O=_>=0&&t[_],L=M>=0&&t[M];if(i&&!L||!i&&!O){xp(su(c,s),o,l);let z=ON(i?NN:PN,t.length,i,r,u);!i&&L&&(t[M].providerFactory=z),pp(o,n,e.length,0),e.push(l),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(z),s.push(z)}else{let z=_E(t[i?M:_],u,!i&&r);pp(o,n,_>-1?_:M,z)}!i&&r&&L&&t[M].componentProviders++}}}function pp(n,e,t,r){let i=Io(e),o=YM(e);if(i||o){let l=(o?Lt(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let f=u.indexOf(t);f===-1?u.push(t,[r,l]):u[f+1].push(r,l)}else u.push(t,l)}}}function _E(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function mp(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function PN(n,e,t,r,i){return um(this.multi,[])}function NN(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let c=this.providerFactory.componentProviders,l=ma(r,r[fe],this.providerFactory.index,i);s=l.slice(0,c),um(o,s);for(let u=c;u<l.length;u++)s.push(l[u])}else s=[],um(o,s);return s}function um(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function ON(n,e,t,r,i){let o=new Di(n,t,Se);return o.multi=[],o.index=e,o.componentProviders=0,_E(o,i,r&&!t),o}function fr(n,e=[]){return t=>{t.providersResolver=(r,i)=>RN(r,i?i(n):n,e)}}function wE(n,e,t){let r=DA()+n,i=be();return i[r]===cn?$P(i,r,t?e.call(t):e()):HP(i,r)}var dm=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},CE=(()=>{class n{compileModuleSync(t){return new Zp(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=sC(t),o=wb(i.declarations).reduce((s,c)=>{let l=Do(c);return l&&s.push(new ba(l)),s},[]);return new dm(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var kN=(()=>{class n{zone=k(dt);changeDetectionScheduler=k(Mo);applicationRef=k(Ln);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function VN({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new dt(G(N({},FN()),{scheduleInRootZone:t})),[{provide:dt,useFactory:n},{provide:ua,multi:!0,useFactory:()=>{let r=k(kN,{optional:!0});return()=>r.initialize()}},{provide:ua,multi:!0,useFactory:()=>{let r=k(LN);return()=>{r.initialize()}}},e===!0?{provide:YC,useValue:!0}:[],{provide:ZC,useValue:t??KC}]}function FN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var LN=(()=>{class n{subscription=new et;initialized=!1;zone=k(dt);pendingTasks=k(Lo);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{dt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{dt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var jN=(()=>{class n{appRef=k(Ln);taskService=k(Lo);ngZone=k(dt);zonelessEnabled=k(QC);tracing=k(Iu,{optional:!0});disableScheduling=k(YC,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new et;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(cu):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(ZC,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Pp||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?Ew:JC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(cu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Ew(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function BN(){return typeof $localize<"u"&&$localize.locale||yu}var bE=new J("",{providedIn:"root",factory:()=>k(bE,me.Optional|me.SkipSelf)||BN()});var fm=new J(""),UN=new J("");function sa(n){return!n.moduleRef}function $N(n){let e=sa(n)?n.r3Injector:n.moduleRef.injector,t=e.get(dt);return t.run(()=>{sa(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(kn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),sa(n)){let o=()=>e.destroy(),s=n.platformInjector.get(fm);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(fm);s.add(o),n.moduleRef.onDestroy(()=>{Wl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return zN(r,t,()=>{let o=e.get(iE);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(bE,yu);if(SN(s||yu),!e.get(UN,!0))return sa(n)?e.get(Ln):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(sa(n)){let l=e.get(Ln);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return HN(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function HN(n,e){let t=n.injector.get(Ln);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Q(-403,!1);e.push(n)}function zN(n,e,t){try{let r=t();return Uo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Kl=null;function qN(n=[],e){return an.create({name:e,providers:[{provide:bu,useValue:"platform"},{provide:fm,useValue:new Set([()=>Kl=null])},...n]})}function GN(n=[]){if(Kl)return Kl;let e=qN(n);return Kl=e,QP(),WN(e),e}function WN(n){let e=n.get(Vm,null);Cn(n,()=>{e?.forEach(t=>t())})}function EE(){return!1}var xi=(()=>{class n{static __NG_ELEMENT_ID__=KN}return n})();function KN(n){return QN(jt(),be(),(n&16)===16)}function QN(n,e,t){if(No(n)&&!t){let r=On(n.index,e);return new _a(r,r)}else if(n.type&175){let r=e[_n];return new _a(r,e)}return null}function DE(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Le(8);try{let o=i?.injector??GN(r),s=[VN({}),{provide:Mo,useExisting:jN},...t||[]],c=new hu({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return $N({r3Injector:c.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Le(9)}}function Mi(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Ai(n){return Lh(n)}function Ze(n,e){return Oh(n,e?.equal)}var hm=class{[rn];constructor(e){this[rn]=e}destroy(){this[rn].destroy()}};function hr(n,e){!e?.injector&&nA(hr);let t=e?.injector??k(an),r=e?.manualCleanup!==!0?t.get(Fo):null,i,o=t.get(ub,null,{optional:!0}),s=t.get(Mo);return o!==null&&!e?.forceRoot?(i=JN(o.view,s,n),r instanceof au&&r._lView===o.view&&(r=null)):i=XN(n,t.get(nE),s),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new hm(i)}var IE=G(N({},oo),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:ga,run(){if(this.dirty=!1,this.hasRun&&!fl(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),e=ea(this),t=ru(!1);try{this.maybeCleanup(),this.fn(n)}finally{ru(t),dl(this,e)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),YN=G(N({},IE),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){ta(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),ZN=G(N({},IE),{consumerMarkedDirty(){this.view[se]|=8192,Sa(this.view),this.notifier.notify(13)},destroy(){ta(this),this.onDestroyFn(),this.maybeCleanup(),this.view[wi]?.delete(this)}});function JN(n,e,t){let r=Object.create(ZN);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=t,n[wi]??=new Set,n[wi].add(r),r.consumerMarkedDirty(r),r}function XN(n,e,t){let r=Object.create(YN);return r.fn=n,r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(12),r}var Pt=new J("");var xE=null;function un(){return xE}function rg(n){xE??=n}var Ra=class{},Pa=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:()=>k(ME),providedIn:"platform"})}return n})();var ME=(()=>{class n extends Pa{_location;_history;_doc=k(Pt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return un().getBaseHref(this._doc)}onPopState(t){let r=un().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=un().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function ku(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function TE(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Dn(n){return n&&n[0]!=="?"?`?${n}`:n}var Un=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:()=>k(ig),providedIn:"root"})}return n})(),Vu=new J(""),ig=(()=>{class n extends Un{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(Pt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ku(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Dn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Dn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Dn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(re(Pa),re(Vu,8))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ri=(()=>{class n{_subject=new Ue;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=nO(TE(SE(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Dn(r))}normalize(t){return n.stripTrailingSlash(tO(this._basePath,SE(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Dn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Dn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Dn;static joinWithSlash=ku;static stripTrailingSlash=TE;static \u0275fac=function(r){return new(r||n)(re(Un))};static \u0275prov=Y({token:n,factory:()=>eO(),providedIn:"root"})}return n})();function eO(){return new Ri(re(Un))}function tO(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function SE(n){return n.replace(/\/index.html$/,"")}function nO(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var og=(()=>{class n extends Un{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=ku(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Dn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Dn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(re(Pa),re(Vu,8))};static \u0275prov=Y({token:n,factory:n.\u0275fac})}return n})();function sg(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Fu="browser",AE="server";function ag(n){return n===Fu}function Lu(n){return n===AE}var Na=class{};var Uu=new J(""),dg=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Q(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(re(Uu),re(dt))};static \u0275prov=Y({token:n,factory:n.\u0275fac})}return n})(),Oa=class{_doc;constructor(e){this._doc=e}manager},ju="ng-app-id";function RE(n){for(let e of n)e.remove()}function PE(n,e){let t=e.createElement("style");return t.textContent=n,t}function aO(n,e,t,r){let i=n.head?.querySelectorAll(`style[${ju}="${e}"],link[${ju}="${e}"]`);if(i)for(let o of i)o.removeAttribute(ju),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function lg(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var fg=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Lu(o),aO(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,PE);r?.forEach(i=>this.addUsage(i,this.external,lg))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(RE(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])RE(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,PE(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,lg(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(ju,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(re(Pt),re(km),re(Fm,8),re(Ti))};static \u0275prov=Y({token:n,factory:n.\u0275fac})}return n})(),cg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},hg=/%COMP%/g;var OE="%COMP%",cO=`_nghost-${OE}`,lO=`_ngcontent-${OE}`,uO=!0,dO=new J("",{providedIn:"root",factory:()=>uO});function fO(n){return lO.replace(hg,n)}function hO(n){return cO.replace(hg,n)}function kE(n,e){return e.map(t=>t.replace(hg,n))}var pg=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,c,l,u=null,f=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=c,this.ngZone=l,this.nonce=u,this.tracingService=f,this.platformIsServer=Lu(c),this.defaultRenderer=new ka(t,s,l,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Vn.ShadowDom&&(r=G(N({},r),{encapsulation:Vn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Bu?i.applyToHost(t):i instanceof Va&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer,v=this.tracingService;switch(r.encapsulation){case Vn.Emulated:o=new Bu(l,u,r,this.appId,f,s,c,p,v);break;case Vn.ShadowDom:return new ug(l,u,t,r,s,c,this.nonce,p,v);default:o=new Va(l,u,r,f,s,c,p,v);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(re(dg),re(fg),re(km),re(dO),re(Pt),re(Ti),re(dt),re(Fm),re(Iu,8))};static \u0275prov=Y({token:n,factory:n.\u0275fac})}return n})(),ka=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(cg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(NE(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(NE(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Q(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=cg[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=cg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Hr.DashCase|Hr.Important)?e.style.setProperty(t,r,i&Hr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Hr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=un().getGlobalEventTarget(this.doc,e),!e))throw new Q(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function NE(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ug=class extends ka{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,c,l,u){super(e,o,s,l,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=i.styles;f=kE(i.id,f);for(let v of f){let _=document.createElement("style");c&&_.setAttribute("nonce",c),_.textContent=v,this.shadowRoot.appendChild(_)}let p=i.getExternalStyles?.();if(p)for(let v of p){let _=lg(v,o);c&&_.setAttribute("nonce",c),this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Va=class extends ka{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,c,l,u){super(e,o,s,c,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=u?kE(u,f):f,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Bu=class extends Va{contentAttr;hostAttr;constructor(e,t,r,i,o,s,c,l,u){let f=i+"-"+r.id;super(e,t,r,o,s,c,l,u,f),this.contentAttr=fO(f),this.hostAttr=hO(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var $u=class n extends Ra{supportsDOMEvents=!0;static makeCurrent(){rg(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=pO();return t==null?null:mO(t)}resetBaseElement(){Fa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return sg(document.cookie,e)}},Fa=null;function pO(){return Fa=Fa||document.head.querySelector("base"),Fa?Fa.getAttribute("href"):null}function mO(n){return new URL(n,document.baseURI).pathname}var gO=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac})}return n})(),FE=(()=>{class n extends Oa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(re(Pt))};static \u0275prov=Y({token:n,factory:n.\u0275fac})}return n})(),VE=["alt","control","meta","shift"],yO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vO={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},LE=(()=>{class n extends Oa{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),c=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>un().onAndCancel(t,s.domEventName,c,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),VE.forEach(u=>{let f=r.indexOf(u);f>-1&&(r.splice(f,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=yO[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),VE.forEach(s=>{if(s!==i){let c=vO[s];c(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(re(Pt))};static \u0275prov=Y({token:n,factory:n.\u0275fac})}return n})();function mg(n,e,t){return DE(N({rootComponent:n,platformRef:t?.platformRef},_O(e)))}function _O(n){return{appProviders:[...DO,...n?.providers??[]],platformProviders:EO}}function wO(){$u.makeCurrent()}function CO(){return new kn}function bO(){return ab(document),document}var EO=[{provide:Ti,useValue:Fu},{provide:Vm,useValue:wO,multi:!0},{provide:Pt,useFactory:bO}];var DO=[{provide:bu,useValue:"root"},{provide:kn,useFactory:CO},{provide:Uu,useClass:FE,multi:!0,deps:[Pt]},{provide:Uu,useClass:LE,multi:!0,deps:[Pt]},pg,fg,dg,{provide:Ao,useExisting:pg},{provide:Na,useClass:gO},[]];var jE=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(re(Pt))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var pe="primary",Za=Symbol("RouteTitle"),wg=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Oi(n){return new wg(n)}function WE(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],c=n[o];if(s[0]===":")i[s.substring(1)]=c;else if(s!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function TO(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!$n(n[t],e[t]))return!1;return!0}function $n(n,e){let t=n?Cg(n):void 0,r=e?Cg(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!KE(n[i],e[i]))return!1;return!0}function Cg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function KE(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function QE(n){return n.length>0?n[n.length-1]:null}function Kr(n){return Qh(n)?n:Uo(n)?He(Promise.resolve(n)):oe(n)}var SO={exact:ZE,subset:JE},YE={exact:xO,subset:MO,ignored:()=>!0};function BE(n,e,t){return SO[t.paths](n.root,e.root,t.matrixParams)&&YE[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function xO(n,e){return $n(n,e)}function ZE(n,e,t){if(!Pi(n.segments,e.segments)||!qu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!ZE(n.children[r],e.children[r],t))return!1;return!0}function MO(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>KE(n[t],e[t]))}function JE(n,e,t){return XE(n,e,e.segments,t)}function XE(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Pi(i,t)||e.hasChildren()||!qu(i,t,r))}else if(n.segments.length===t.length){if(!Pi(n.segments,t)||!qu(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!JE(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Pi(n.segments,i)||!qu(n.segments,i,r)||!n.children[pe]?!1:XE(n.children[pe],e,o,r)}}function qu(n,e,t){return e.every((r,i)=>YE[t](n[i].parameters,r.parameters))}var zn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Oe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Oi(this.queryParams),this._queryParamMap}toString(){return PO.serialize(this)}},Oe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gu(this)}},Gr=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Oi(this.parameters),this._parameterMap}toString(){return tD(this)}};function AO(n,e){return Pi(n,e)&&n.every((t,r)=>$n(t.parameters,e[r].parameters))}function Pi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function RO(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===pe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==pe&&(t=t.concat(e(i,r)))}),t}var Ja=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:()=>new ki,providedIn:"root"})}return n})(),ki=class{parse(e){let t=new Eg(e);return new zn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${La(e.root,!0)}`,r=kO(e.queryParams),i=typeof e.fragment=="string"?`#${NO(e.fragment)}`:"";return`${t}${r}${i}`}},PO=new ki;function Gu(n){return n.segments.map(e=>tD(e)).join("/")}function La(n,e){if(!n.hasChildren())return Gu(n);if(e){let t=n.children[pe]?La(n.children[pe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==pe&&r.push(`${i}:${La(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=RO(n,(r,i)=>i===pe?[La(n.children[pe],!1)]:[`${i}:${La(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[pe]!=null?`${Gu(n)}/${t[0]}`:`${Gu(n)}/(${t.join("//")})`}}function eD(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hu(n){return eD(n).replace(/%3B/gi,";")}function NO(n){return encodeURI(n)}function bg(n){return eD(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wu(n){return decodeURIComponent(n)}function UE(n){return Wu(n.replace(/\+/g,"%20"))}function tD(n){return`${bg(n.path)}${OO(n.parameters)}`}function OO(n){return Object.entries(n).map(([e,t])=>`;${bg(e)}=${bg(t)}`).join("")}function kO(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Hu(t)}=${Hu(i)}`).join("&"):`${Hu(t)}=${Hu(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var VO=/^[^\/()?;#]+/;function gg(n){let e=n.match(VO);return e?e[0]:""}var FO=/^[^\/()?;=#]+/;function LO(n){let e=n.match(FO);return e?e[0]:""}var jO=/^[^=?&#]+/;function BO(n){let e=n.match(jO);return e?e[0]:""}var UO=/^[^&#]+/;function $O(n){let e=n.match(UO);return e?e[0]:""}var Eg=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Oe([],{}):new Oe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[pe]=new Oe(e,t)),r}parseSegment(){let e=gg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new Gr(Wu(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=LO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=gg(this.remaining);i&&(r=i,this.capture(r))}e[Wu(t)]=Wu(r)}parseQueryParam(e){let t=BO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=$O(this.remaining);s&&(r=s,this.capture(r))}let i=UE(t),o=UE(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=gg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Q(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=pe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[pe]:new Oe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}};function nD(n){return n.segments.length>0?new Oe([],{[pe]:n}):n}function rD(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=rD(i);if(r===pe&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Oe(n.segments,e);return HO(t)}function HO(n){if(n.numberOfChildren===1&&n.children[pe]){let e=n.children[pe];return new Oe(n.segments.concat(e.segments),e.children)}return n}function Wr(n){return n instanceof zn}function iD(n,e,t=null,r=null){let i=oD(n);return sD(i,e,t,r)}function oD(n){let e;function t(o){let s={};for(let l of o.children){let u=t(l);s[l.outlet]=u}let c=new Oe(o.url,s);return o===n&&(e=c),c}let r=t(n.root),i=nD(r);return e??i}function sD(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return yg(i,i,i,t,r);let o=zO(e);if(o.toRoot())return yg(i,i,new Oe([],{}),t,r);let s=qO(o,i,n),c=s.processChildren?Ba(s.segmentGroup,s.index,o.commands):cD(s.segmentGroup,s.index,o.commands);return yg(i,s.segmentGroup,c,t,r)}function Qu(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function $a(n){return typeof n=="object"&&n!=null&&n.outlets}function yg(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`});let s;n===e?s=t:s=aD(n,e,t);let c=nD(rD(s));return new zn(c,o,i)}function aD(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=aD(o,e,t)}),new Oe(n.segments,r)}var Yu=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Qu(r[0]))throw new Q(4003,!1);let i=r.find($a);if(i&&i!==QE(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function zO(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Yu(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([l,u])=>{c[l]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new Yu(t,e,r)}var qo=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function qO(n,e,t){if(n.isAbsolute)return new qo(e,!0,0);if(!t)return new qo(e,!1,NaN);if(t.parent===null)return new qo(t,!0,0);let r=Qu(n.commands[0])?0:1,i=t.segments.length-1+r;return GO(t,i,n.numberOfDoubleDots)}function GO(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Q(4005,!1);i=r.segments.length}return new qo(r,!1,i-o)}function WO(n){return $a(n[0])?n[0].outlets:{[pe]:n}}function cD(n,e,t){if(n??=new Oe([],{}),n.segments.length===0&&n.hasChildren())return Ba(n,e,t);let r=KO(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Oe(n.segments.slice(0,r.pathIndex),{});return o.children[pe]=new Oe(n.segments.slice(r.pathIndex),n.children),Ba(o,0,i)}else return r.match&&i.length===0?new Oe(n.segments,{}):r.match&&!n.hasChildren()?Dg(n,e,t):r.match?Ba(n,0,i):Dg(n,e,t)}function Ba(n,e,t){if(t.length===0)return new Oe(n.segments,{});{let r=WO(t),i={};if(Object.keys(r).some(o=>o!==pe)&&n.children[pe]&&n.numberOfChildren===1&&n.children[pe].segments.length===0){let o=Ba(n.children[pe],e,t);return new Oe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=cD(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Oe(n.segments,i)}}function KO(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],c=t[r];if($a(c))break;let l=`${c}`,u=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!HE(l,u,s))return o;r+=2}else{if(!HE(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Dg(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if($a(o)){let l=QO(o.outlets);return new Oe(r,l)}if(i===0&&Qu(t[0])){let l=n.segments[e];r.push(new Gr(l.path,$E(t[0]))),i++;continue}let s=$a(o)?o.outlets[pe]:`${o}`,c=i<t.length-1?t[i+1]:null;s&&c&&Qu(c)?(r.push(new Gr(s,$E(c))),i+=2):(r.push(new Gr(s,{})),i++)}return new Oe(r,{})}function QO(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Dg(new Oe([],{}),0,r))}),e}function $E(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function HE(n,e,t){return n==t.path&&$n(e,t.parameters)}var Ku="imperative",vt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(vt||{}),tn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Vi=class extends tn{type=vt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Tn=class extends tn{urlAfterRedirects;type=vt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Gt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Gt||{}),Ha=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ha||{}),Hn=class extends tn{reason;code;type=vt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},pr=class extends tn{reason;code;type=vt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Wo=class extends tn{error;target;type=vt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},za=class extends tn{urlAfterRedirects;state;type=vt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zu=class extends tn{urlAfterRedirects;state;type=vt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ju=class extends tn{urlAfterRedirects;state;shouldActivate;type=vt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Xu=class extends tn{urlAfterRedirects;state;type=vt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ed=class extends tn{urlAfterRedirects;state;type=vt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},td=class{route;type=vt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},nd=class{route;type=vt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},rd=class{snapshot;type=vt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},id=class{snapshot;type=vt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},od=class{snapshot;type=vt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sd=class{snapshot;type=vt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var qa=class{},Ko=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function YO(n,e){return n.providers&&!n._injector&&(n._injector=Ou(n.providers,e,`Route: ${n.path}`)),n._injector??e}function In(n){return n.outlet||pe}function ZO(n,e){let t=n.filter(r=>In(r)===e);return t.push(...n.filter(r=>In(r)!==e)),t}function Xa(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var ad=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Xa(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Zo(this.rootInjector)}},Zo=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ad(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(re(Jt))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Ig(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Ig(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Tg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Tg(e,this._root).map(t=>t.value)}};function Ig(n,e){if(n===e.value)return e;for(let t of e.children){let r=Ig(n,t);if(r)return r}return null}function Tg(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Tg(n,t);if(r.length)return r.unshift(e),r}return[]}var en=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function zo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ga=class extends cd{snapshot;constructor(e,t){super(e),this.snapshot=t,Og(this,e)}toString(){return this.snapshot.toString()}};function lD(n){let e=JO(n),t=new Dt([new Gr("",{})]),r=new Dt({}),i=new Dt({}),o=new Dt({}),s=new Dt(""),c=new mr(t,r,o,s,i,pe,n,e.root);return c.snapshot=e.root,new Ga(new en(c,[]),e)}function JO(n){let e={},t={},r={},i="",o=new Ni([],e,r,i,t,pe,n,null,{});return new Wa("",new en(o,[]))}var mr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ye(u=>u[Za]))??oe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ye(e=>Oi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ye(e=>Oi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ld(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:N(N({},e.params),n.params),data:N(N({},e.data),n.data),resolve:N(N(N(N({},n.data),e.data),i?.data),n._resolvedData)}:r={params:N({},n.params),data:N({},n.data),resolve:N(N({},n.data),n._resolvedData??{})},i&&dD(i)&&(r.resolve[Za]=i.title),r}var Ni=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Za]}constructor(e,t,r,i,o,s,c,l,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=c,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Oi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Oi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Wa=class extends cd{url;constructor(e,t){super(t),this.url=e,Og(this,t)}toString(){return uD(this._root)}};function Og(n,e){e.value._routerState=n,e.children.forEach(t=>Og(n,t))}function uD(n){let e=n.children.length>0?` { ${n.children.map(uD).join(", ")} } `:"";return`${n.value}${e}`}function vg(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,$n(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),$n(e.params,t.params)||n.paramsSubject.next(t.params),TO(e.url,t.url)||n.urlSubject.next(t.url),$n(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Sg(n,e){let t=$n(n.params,e.params)&&AO(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Sg(n.parent,e.parent))}function dD(n){return typeof n.title=="string"||n.title===null}var fD=new J(""),ec=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=pe;activateEvents=new lt;deactivateEvents=new lt;attachEvents=new lt;detachEvents=new lt;routerOutletData=je(void 0);parentContexts=k(Zo);location=k(Bo);changeDetector=k(xi);inputBinder=k(hd,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new xg(t,c,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Qe({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[lr]})}return n})(),xg=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===mr?this.route:e===Zo?this.childContexts:e===fD?this.outletData:this.parent.get(e,t)}},hd=new J("");var kg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=he({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Ye(0,"router-outlet")},dependencies:[ec],encapsulation:2})}return n})();function Vg(n){let e=n.children&&n.children.map(Vg),t=e?G(N({},n),{children:e}):N({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==pe&&(t.component=kg),t}function XO(n,e,t){let r=Ka(n,e._root,t?t._root:void 0);return new Ga(r,e)}function Ka(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=ek(n,e,t);return new en(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>Ka(n,c)),s}}let r=tk(e.value),i=e.children.map(o=>Ka(n,o));return new en(r,i)}}function ek(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ka(n,r,i);return Ka(n,r)})}function tk(n){return new mr(new Dt(n.url),new Dt(n.params),new Dt(n.queryParams),new Dt(n.fragment),new Dt(n.data),n.outlet,n.component,n)}var Qo=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},hD="ngNavigationCancelingError";function ud(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Wr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=pD(!1,Gt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function pD(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[hD]=!0,t.cancellationCode=e,t}function nk(n){return mD(n)&&Wr(n.url)}function mD(n){return!!n&&n[hD]}var rk=(n,e,t,r)=>ye(i=>(new Mg(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Mg=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),vg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=zo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=zo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=zo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=zo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new sd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new id(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(vg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),vg(c.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},dd=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Go=class{component;route;constructor(e,t){this.component=e,this.route=t}};function ik(n,e,t){let r=n._root,i=e?e._root:null;return ja(r,i,t,[r.value])}function ok(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Jo(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Yw(n)?n:e.get(n):r}function ja(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=zo(e);return n.children.forEach(s=>{sk(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>Ua(c,t.getContext(s),i)),i}function sk(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=ak(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new dd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ja(n,e,c?c.children:null,r,i):ja(n,e,t,r,i),l&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Go(c.outlet.component,s))}else s&&Ua(e,c,i),i.canActivateChecks.push(new dd(r)),o.component?ja(n,null,c?c.children:null,r,i):ja(n,null,t,r,i);return i}function ak(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Pi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Pi(n.url,e.url)||!$n(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Sg(n,e)||!$n(n.queryParams,e.queryParams);case"paramsChange":default:return!Sg(n,e)}}function Ua(n,e,t){let r=zo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ua(s,e.children.getContext(o),t):Ua(s,null,t):Ua(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Go(e.outlet.component,i)):t.canDeactivateChecks.push(new Go(null,i)):t.canDeactivateChecks.push(new Go(null,i))}function tc(n){return typeof n=="function"}function ck(n){return typeof n=="boolean"}function lk(n){return n&&tc(n.canLoad)}function uk(n){return n&&tc(n.canActivate)}function dk(n){return n&&tc(n.canActivateChild)}function fk(n){return n&&tc(n.canDeactivate)}function hk(n){return n&&tc(n.canMatch)}function gD(n){return n instanceof nr||n?.name==="EmptyError"}var zu=Symbol("INITIAL_VALUE");function Yo(){return Mt(n=>Ll(n.map(e=>e.pipe(Ft(1),Xh(zu)))).pipe(ye(e=>{for(let t of e)if(t!==!0){if(t===zu)return zu;if(t===!1||pk(t))return t}return!0}),Vt(e=>e!==zu),Ft(1)))}function pk(n){return Wr(n)||n instanceof Qo}function mk(n,e){return nt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?oe(G(N({},t),{guardsResult:!0})):gk(s,r,i,n).pipe(nt(c=>c&&ck(c)?yk(r,o,n,e):oe(c)),ye(c=>G(N({},t),{guardsResult:c})))})}function gk(n,e,t,r){return He(n).pipe(nt(i=>bk(i.component,i.route,t,e,r)),ir(i=>i!==!0,!0))}function yk(n,e,t,r){return He(e).pipe(mi(i=>go(_k(i.route.parent,r),vk(i.route,r),Ck(n,i.path,t),wk(n,i.route,t))),ir(i=>i!==!0,!0))}function vk(n,e){return n!==null&&e&&e(new od(n)),oe(!0)}function _k(n,e){return n!==null&&e&&e(new rd(n)),oe(!0)}function wk(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return oe(!0);let i=r.map(o=>jl(()=>{let s=Xa(e)??t,c=Jo(o,s),l=uk(c)?c.canActivate(e,n):Cn(s,()=>c(e,n));return Kr(l).pipe(ir())}));return oe(i).pipe(Yo())}function Ck(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>ok(s)).filter(s=>s!==null).map(s=>jl(()=>{let c=s.guards.map(l=>{let u=Xa(s.node)??t,f=Jo(l,u),p=dk(f)?f.canActivateChild(r,n):Cn(u,()=>f(r,n));return Kr(p).pipe(ir())});return oe(c).pipe(Yo())}));return oe(o).pipe(Yo())}function bk(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return oe(!0);let s=o.map(c=>{let l=Xa(e)??i,u=Jo(c,l),f=fk(u)?u.canDeactivate(n,e,t,r):Cn(l,()=>u(n,e,t,r));return Kr(f).pipe(ir())});return oe(s).pipe(Yo())}function Ek(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return oe(!0);let o=i.map(s=>{let c=Jo(s,n),l=lk(c)?c.canLoad(e,t):Cn(n,()=>c(e,t));return Kr(l)});return oe(o).pipe(Yo(),yD(r))}function yD(n){return qh(It(e=>{if(typeof e!="boolean")throw ud(n,e)}),ye(e=>e===!0))}function Dk(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return oe(!0);let o=i.map(s=>{let c=Jo(s,n),l=hk(c)?c.canMatch(e,t):Cn(n,()=>c(e,t));return Kr(l)});return oe(o).pipe(Yo(),yD(r))}var Qa=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Ya=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ho(n){return po(new Qa(n))}function Ik(n){return po(new Q(4e3,!1))}function Tk(n){return po(pD(!1,Gt.GuardRejected))}var Ag=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return oe(r);if(i.numberOfChildren>1||!i.children[pe])return Ik(`${e.redirectTo}`);i=i.children[pe]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let c=t,{queryParams:l,fragment:u,routeConfig:f,url:p,outlet:v,params:_,data:M,title:O}=i,L=Cn(o,()=>c({params:_,data:M,queryParams:l,fragment:u,routeConfig:f,url:p,outlet:v,title:O}));if(L instanceof zn)throw new Ya(L);t=L}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Ya(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new zn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=t[c]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([c,l])=>{s[c]=this.createSegmentGroup(e,l,r,i)}),new Oe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Q(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Rg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Sk(n,e,t,r,i){let o=vD(n,e,t);return o.matched?(r=YO(e,r),Dk(r,e,t,i).pipe(ye(s=>s===!0?o:N({},Rg)))):oe(o)}function vD(n,e,t){if(e.path==="**")return xk(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?N({},Rg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||WE)(t,n,e);if(!i)return N({},Rg);let o={};Object.entries(i.posParams??{}).forEach(([c,l])=>{o[c]=l.path});let s=i.consumed.length>0?N(N({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function xk(n){return{matched:!0,parameters:n.length>0?QE(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function zE(n,e,t,r){return t.length>0&&Rk(n,t,r)?{segmentGroup:new Oe(e,Ak(r,new Oe(t,n.children))),slicedSegments:[]}:t.length===0&&Pk(n,t,r)?{segmentGroup:new Oe(n.segments,Mk(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Oe(n.segments,n.children),slicedSegments:t}}function Mk(n,e,t,r){let i={};for(let o of t)if(pd(n,e,o)&&!r[In(o)]){let s=new Oe([],{});i[In(o)]=s}return N(N({},r),i)}function Ak(n,e){let t={};t[pe]=e;for(let r of n)if(r.path===""&&In(r)!==pe){let i=new Oe([],{});t[In(r)]=i}return t}function Rk(n,e,t){return t.some(r=>pd(n,e,r)&&In(r)!==pe)}function Pk(n,e,t){return t.some(r=>pd(n,e,r))}function pd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Nk(n,e,t){return e.length===0&&!n.children[t]}var Pg=class{};function Ok(n,e,t,r,i,o,s="emptyOnly"){return new Ng(n,e,t,r,i,s,o).recognize()}var kk=31,Ng=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.applyRedirects=new Ag(this.urlSerializer,this.urlTree)}noMatchError(e){return new Q(4002,`'${e.segmentGroup}'`)}recognize(){let e=zE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ye(({children:t,rootSnapshot:r})=>{let i=new en(r,t),o=new Wa("",i),s=iD(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ni([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),pe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,pe,t).pipe(ye(r=>({children:r,rootSnapshot:t})),rr(r=>{if(r instanceof Ya)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Qa?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ye(s=>s instanceof en?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return He(o).pipe(mi(s=>{let c=r.children[s],l=ZO(t,s);return this.processSegmentGroup(e,l,c,s,i)}),Jh((s,c)=>(s.push(...c),s)),Br(null),Zh(),nt(s=>{if(s===null)return Ho(r);let c=_D(s);return Vk(c),oe(c)}))}processSegment(e,t,r,i,o,s,c){return He(t).pipe(mi(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,o,s,c).pipe(rr(u=>{if(u instanceof Qa)return oe(null);throw u}))),ir(l=>!!l),rr(l=>{if(gD(l))return Nk(r,i,o)?oe(new Pg):Ho(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,o,s,c,l){return In(r)!==s&&(s===pe||!pd(i,o,r))?Ho(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,l):Ho(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,c){let{matched:l,parameters:u,consumedSegments:f,positionalParamSegments:p,remainingSegments:v}=vD(t,i,o);if(!l)return Ho(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>kk&&(this.allowRedirects=!1));let _=new Ni(o,u,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,qE(i),In(i),i.component??i._loadedComponent??null,i,GE(i)),M=ld(_,c,this.paramsInheritanceStrategy);_.params=Object.freeze(M.params),_.data=Object.freeze(M.data);let O=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,_,e);return this.applyRedirects.lineralizeSegments(i,O).pipe(nt(L=>this.processSegment(e,r,t,L.concat(v),s,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let c=Sk(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(Mt(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Mt(({routes:u})=>{let f=r._loadedInjector??e,{parameters:p,consumedSegments:v,remainingSegments:_}=l,M=new Ni(v,p,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,qE(r),In(r),r.component??r._loadedComponent??null,r,GE(r)),O=ld(M,s,this.paramsInheritanceStrategy);M.params=Object.freeze(O.params),M.data=Object.freeze(O.data);let{segmentGroup:L,slicedSegments:z}=zE(t,v,_,u);if(z.length===0&&L.hasChildren())return this.processChildren(f,u,L,M).pipe(ye(ue=>new en(M,ue)));if(u.length===0&&z.length===0)return oe(new en(M,[]));let ee=In(r)===o;return this.processSegment(f,u,L,z,ee?pe:o,!0,M).pipe(ye(ue=>new en(M,ue instanceof en?[ue]:[])))}))):Ho(t)))}getChildConfig(e,t,r){return t.children?oe({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?oe({routes:t._loadedRoutes,injector:t._loadedInjector}):Ek(e,t,r,this.urlSerializer).pipe(nt(i=>i?this.configLoader.loadChildren(e,t).pipe(It(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Tk(t))):oe({routes:[],injector:e})}};function Vk(n){n.sort((e,t)=>e.value.outlet===pe?-1:t.value.outlet===pe?1:e.value.outlet.localeCompare(t.value.outlet))}function Fk(n){let e=n.value.routeConfig;return e&&e.path===""}function _D(n){let e=[],t=new Set;for(let r of n){if(!Fk(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=_D(r.children);e.push(new en(r.value,i))}return e.filter(r=>!t.has(r))}function qE(n){return n.data||{}}function GE(n){return n.resolve||{}}function Lk(n,e,t,r,i,o){return nt(s=>Ok(n,e,t,r,s.extractedUrl,i,o).pipe(ye(({state:c,tree:l})=>G(N({},s),{targetSnapshot:c,urlAfterRedirects:l}))))}function jk(n,e){return nt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return oe(t);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of wD(l))s.add(u);let c=0;return He(s).pipe(mi(l=>o.has(l)?Bk(l,r,n,e):(l.data=ld(l,l.parent,n).resolve,oe(void 0))),It(()=>c++),yo(1),nt(l=>c===s.size?oe(t):Ut))})}function wD(n){let e=n.children.map(t=>wD(t)).flat();return[n,...e]}function Bk(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!dD(i)&&(o[Za]=i.title),Uk(o,n,e,r).pipe(ye(s=>(n._resolvedData=s,n.data=ld(n,n.parent,t).resolve,null)))}function Uk(n,e,t,r){let i=Cg(n);if(i.length===0)return oe({});let o={};return He(i).pipe(nt(s=>$k(n[s],e,t,r).pipe(ir(),It(c=>{if(c instanceof Qo)throw ud(new ki,c);o[s]=c}))),yo(1),ye(()=>o),rr(s=>gD(s)?Ut:po(s)))}function $k(n,e,t,r){let i=Xa(e)??r,o=Jo(n,i),s=o.resolve?o.resolve(e,t):Cn(i,()=>o(e,t));return Kr(s)}function _g(n){return Mt(e=>{let t=n(e);return t?He(t).pipe(ye(()=>e)):oe(e)})}var Fg=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===pe);return r}getResolvedTitleForRoute(t){return t.data[Za]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:()=>k(CD),providedIn:"root"})}return n})(),CD=(()=>{class n extends Fg{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(re(jE))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nc=new J("",{providedIn:"root",factory:()=>({})}),rc=new J(""),bD=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(CE);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return oe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Kr(t.loadComponent()).pipe(ye(DD),It(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),oa(()=>{this.componentLoaders.delete(t)})),i=new ho(r,()=>new Ue).pipe(fo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return oe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=ED(r,this.compiler,t,this.onLoadEndListener).pipe(oa(()=>{this.childrenLoaders.delete(r)})),s=new ho(o,()=>new Ue).pipe(fo());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ED(n,e,t,r){return Kr(n.loadChildren()).pipe(ye(DD),nt(i=>i instanceof eg||Array.isArray(i)?oe(i):He(e.compileModuleAsync(i))),ye(i=>{r&&r(n);let o,s,c=!1;return Array.isArray(i)?(s=i,c=!0):(o=i.create(t).injector,s=o.get(rc,[],{optional:!0,self:!0}).flat()),{routes:s.map(Vg),injector:o}}))}function Hk(n){return n&&typeof n=="object"&&"default"in n}function DD(n){return Hk(n)?n.default:n}var md=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:()=>k(zk),providedIn:"root"})}return n})(),zk=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ID=new J("");var TD=new J(""),SD=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ue;transitionAbortSubject=new Ue;configLoader=k(bD);environmentInjector=k(Jt);destroyRef=k(Fo);urlSerializer=k(Ja);rootContexts=k(Zo);location=k(Ri);inputBindingEnabled=k(hd,{optional:!0})!==null;titleStrategy=k(Fg);options=k(nc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(md);createViewTransition=k(ID,{optional:!0});navigationErrorHandler=k(TD,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>oe(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new td(i)),r=i=>this.events.next(new nd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(G(N({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new Dt(null),this.transitions.pipe(Vt(r=>r!==null),Mt(r=>{let i=!1,o=!1;return oe(r).pipe(Mt(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Gt.SupersededByNewNavigation),Ut;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?G(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&l!=="reload"){let u="";return this.events.next(new pr(s.id,this.urlSerializer.serialize(s.rawUrl),u,Ha.IgnoredSameUrlNavigation)),s.resolve(!1),Ut}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return oe(s).pipe(Mt(u=>(this.events.next(new Vi(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Ut:Promise.resolve(u))),Lk(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),It(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=G(N({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let f=new za(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:u,extractedUrl:f,source:p,restoredState:v,extras:_}=s,M=new Vi(u,this.urlSerializer.serialize(f),p,v);this.events.next(M);let O=lD(this.rootComponentType).snapshot;return this.currentTransition=r=G(N({},s),{targetSnapshot:O,urlAfterRedirects:f,extras:G(N({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,oe(r)}else{let u="";return this.events.next(new pr(s.id,this.urlSerializer.serialize(s.extractedUrl),u,Ha.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Ut}}),It(s=>{let c=new Zu(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}),ye(s=>(this.currentTransition=r=G(N({},s),{guards:ik(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),mk(this.environmentInjector,s=>this.events.next(s)),It(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw ud(this.urlSerializer,s.guardsResult);let c=new Ju(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(c)}),Vt(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Gt.GuardRejected),!1)),_g(s=>{if(s.guards.canActivateChecks.length!==0)return oe(s).pipe(It(c=>{let l=new Xu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Mt(c=>{let l=!1;return oe(c).pipe(jk(this.paramsInheritanceStrategy,this.environmentInjector),It({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(c,"",Gt.NoDataFromResolver)}}))}),It(c=>{let l=new ed(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}))}),_g(s=>{let c=l=>{let u=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(l.routeConfig).pipe(It(f=>{l.component=f}),ye(()=>{})));for(let f of l.children)u.push(...c(f));return u};return Ll(c(s.targetSnapshot.root)).pipe(Br(null),Ft(1))}),_g(()=>this.afterPreactivation()),Mt(()=>{let{currentSnapshot:s,targetSnapshot:c}=r,l=this.createViewTransition?.(this.environmentInjector,s.root,c.root);return l?He(l).pipe(ye(()=>r)):oe(r)}),ye(s=>{let c=XO(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=G(N({},s),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,r}),It(()=>{this.events.next(new qa)}),rk(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Ft(1),It({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Tn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),ep(this.transitionAbortSubject.pipe(It(s=>{throw s}))),oa(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",Gt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),rr(s=>{if(this.destroyed)return r.resolve(!1),Ut;if(o=!0,mD(s))this.events.next(new Hn(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),nk(s)?this.events.next(new Ko(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let c=new Wo(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let l=Cn(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(l instanceof Qo){let{message:u,cancellationCode:f}=ud(this.urlSerializer,l);this.events.next(new Hn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,f)),this.events.next(new Ko(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(c),s}catch(l){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(l)}}return Ut}))}))}cancelNavigationTransition(t,r,i){let o=new Hn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qk(n){return n!==Ku}var xD=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:()=>k(Gk),providedIn:"root"})}return n})(),fd=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Gk=(()=>{class n extends fd{static \u0275fac=(()=>{let t;return function(i){return(t||(t=En(n)))(i||n)}})();static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),MD=(()=>{class n{urlSerializer=k(Ja);options=k(nc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(Ri);urlHandlingStrategy=k(md);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new zn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof zn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=lD(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:()=>k(Wk),providedIn:"root"})}return n})(),Wk=(()=>{class n extends MD{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Vi?this.updateStateMemento():t instanceof pr?this.commitTransition(r):t instanceof za?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof qa?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Hn&&(t.code===Gt.GuardRejected||t.code===Gt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Wo?this.restoreHistory(r,!0):t instanceof Tn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let c=this.browserPageId,l=N(N({},s),this.generateNgRouterState(i,c));this.location.replaceState(t,"",l)}else{let c=N(N({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",c)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=En(n)))(i||n)}})();static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Lg(n,e){n.events.pipe(Vt(t=>t instanceof Tn||t instanceof Hn||t instanceof Wo||t instanceof pr),ye(t=>t instanceof Tn||t instanceof pr?0:(t instanceof Hn?t.code===Gt.Redirect||t.code===Gt.SupersededByNewNavigation:!1)?2:1),Vt(t=>t!==2),Ft(1)).subscribe(()=>{e()})}var Kk={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Qk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Xo=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(eE);stateManager=k(MD);options=k(nc,{optional:!0})||{};pendingTasks=k(Lo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(SD);urlSerializer=k(Ja);location=k(Ri);urlHandlingStrategy=k(md);_events=new Ue;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(xD);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(rc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(hd,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new et;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Hn&&r.code!==Gt.Redirect&&r.code!==Gt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Tn)this.navigated=!0;else if(r instanceof Ko){let s=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=N({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||qk(i.source)},s);this.scheduleNavigation(c,Ku,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Zk(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ku,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=N({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Vg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:c,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:s,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=N(N({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let v=i?i.snapshot:this.routerState.snapshot.root;p=oD(v)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return sD(p,t,f,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Wr(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ku,null,r)}navigate(t,r={skipLocationChange:!1}){return Yk(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=N({},Kk):r===!1?i=N({},Qk):i=r,Wr(t))return BE(this.currentUrlTree,t,i);let o=this.parseUrl(t);return BE(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let c,l,u;s?(c=s.resolve,l=s.reject,u=s.promise):u=new Promise((p,v)=>{c=p,l=v});let f=this.pendingTasks.add();return Lg(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Yk(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Q(4008,!1)}function Zk(n){return!(n instanceof qa)&&!(n instanceof Ko)}var es=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ue;constructor(t,r,i,o,s,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=c;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof Tn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Wr(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:vb(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Wr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Se(Xo),Se(mr),Pm("tabindex"),Se(ur),Se(Xt),Se(Un))};static \u0275dir=Qe({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&$("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&dr("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Mi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Mi],replaceUrl:[2,"replaceUrl","replaceUrl",Mi],routerLink:"routerLink"},features:[lr]})}return n})(),jg=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new lt;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(c=>{c instanceof Tn&&this.update()})}ngAfterContentInit(){oe(this.links.changes,oe(null)).pipe(mo()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=He(t).pipe(mo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=Xk(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(Se(Xo),Se(Xt),Se(ur),Se(xi),Se(es,8))};static \u0275dir=Qe({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&fE(o,es,5),r&2){let s;hE(s=pE())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[lr]})}return n})();function Xk(n){return!!n.paths}var eV=new J("");function Bg(n,...e){return Ta([{provide:rc,multi:!0,useValue:n},[],{provide:mr,useFactory:tV,deps:[Xo]},{provide:ng,multi:!0,useFactory:rV},e.map(t=>t.\u0275providers)])}function tV(n){return n.routerState.root}function nV(n,e){return{\u0275kind:n,\u0275providers:e}}function rV(){let n=k(an);return e=>{let t=n.get(Ln);if(e!==t.components[0])return;let r=n.get(Xo),i=n.get(iV);n.get(oV)===1&&r.initialNavigation(),n.get(sV,null,me.Optional)?.setUpPreloading(),n.get(eV,null,me.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var iV=new J("",{factory:()=>new Ue}),oV=new J("",{providedIn:"root",factory:()=>1});var sV=new J("");function Ug(){return nV(6,[{provide:Un,useClass:og}])}var gd=class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-logo"]],decls:10,vars:0,consts:[[1,"logo-container"],[1,"logo-text"],[1,"logo-e"],[1,"logo-ampersand"],[1,"logo-d"],[1,"logo-subtitle"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"span",2),C(3,"E"),g(),y(4,"span",3),C(5,"&"),g(),y(6,"span",4),C(7,"D"),g()(),y(8,"div",5),C(9,"Hospitality"),g()())},styles:[".logo-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:.125rem}.logo-text[_ngcontent-%COMP%]{display:flex;align-items:baseline;font-size:1.5rem;font-weight:700;line-height:1;color:var(--color-text-primary)}.logo-e[_ngcontent-%COMP%]{color:var(--color-primary)}.logo-ampersand[_ngcontent-%COMP%]{color:var(--color-text-secondary);font-weight:400;margin:0 .125rem}.logo-d[_ngcontent-%COMP%]{color:#ec4899}.logo-subtitle[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;color:var(--color-text-secondary);letter-spacing:.05em;text-transform:uppercase}"],changeDetection:0})}};function yd(){if(typeof crypto<"u"&&typeof crypto.randomUUID=="function")return crypto.randomUUID();let n=new Uint8Array(16);crypto.getRandomValues(n),n[6]=n[6]&15|64,n[8]=n[8]&63|128;let e=Array.from(n,t=>t.toString(16).padStart(2,"0")).join("");return`${e.slice(0,8)}-${e.slice(8,12)}-${e.slice(12,16)}-${e.slice(16,20)}-${e.slice(20)}`}var AD=()=>{};var ND=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},aV=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],c=n[t++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},OD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,c=s?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,f=o>>2,p=(o&3)<<4|c>>4,v=(c&15)<<2|u>>6,_=u&63;l||(_=64,s||(v=64)),r.push(t[f],t[p],t[v],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ND(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):aV(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||u==null||p==null)throw new $g;let v=o<<2|c>>4;if(r.push(v),u!==64){let _=c<<4&240|u>>2;if(r.push(_),p!==64){let M=u<<6&192|p;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},$g=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},cV=function(n){let e=ND(n);return OD.encodeByteArray(e,!0)},oc=function(n){return cV(n).replace(/\./g,"")},kD=function(n){try{return OD.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function VD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var lV=()=>VD().__FIREBASE_DEFAULTS__,uV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},dV=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&kD(n[1]);return e&&JSON.parse(e)},Hg=()=>{try{return AD()||lV()||uV()||dV()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},fV=n=>Hg()?.emulatorHosts?.[n],FD=n=>{let e=fV(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},zg=()=>Hg()?.config;var vd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function _d(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function LD(n){return V(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function jD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=N({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[oc(JSON.stringify(t)),oc(JSON.stringify(s)),""].join(".")}var ic={};function hV(){let n={prod:[],emulator:[]};for(let e of Object.keys(ic))ic[e]?n.emulator.push(e):n.prod.push(e);return n}function pV(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var RD=!1;function BD(n,e){if(typeof window>"u"||typeof document>"u"||!_d(window.location.host)||ic[n]===e||ic[n]||RD)return;ic[n]=e;function t(v){return`__firebase__banner__${v}`}let r="__firebase__banner",o=hV().prod.length>0;function s(){let v=document.getElementById(r);v&&v.remove()}function c(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function l(v,_){v.setAttribute("width","24"),v.setAttribute("id",_),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function u(){let v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{RD=!0,s()},v}function f(v,_){v.setAttribute("id",_),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function p(){let v=pV(r),_=t("text"),M=document.getElementById(_)||document.createElement("span"),O=t("learnmore"),L=document.getElementById(O)||document.createElement("a"),z=t("preprendIcon"),ee=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){let ue=v.element;c(ue),f(L,O);let St=u();l(ee,z),ue.append(ee,M,L,St),document.body.appendChild(ue)}o?(M.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function UD(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mV(){let n=Hg()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $D(){return!mV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qg(){try{return typeof indexedDB=="object"}catch{return!1}}function HD(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var gV="FirebaseError",gr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=gV,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sc.prototype.create)}},sc=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?yV(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new gr(i,c,r)}};function yV(n,e){return n.replace(vV,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var vV=/\{\$([^}]+)}/g;function Fi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(PD(o)&&PD(s)){if(!Fi(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function PD(n){return n!==null&&typeof n=="object"}var E9=4*60*60*1e3;function Li(n){return n&&n._delegate?n._delegate:n}var yr=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ji="[DEFAULT]";var Gg=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new vd;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wV(e))try{this.getOrInitializeService({instanceIdentifier:ji})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ji){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return V(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ji){return this.instances.has(e)}getOptions(e=ji){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_V(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ji){return this.component?this.component.multipleInstances?e:ji:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function _V(n){return n===ji?void 0:n}function wV(n){return n.instantiationMode==="EAGER"}var wd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Gg(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var CV=[],Me=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Me||{}),bV={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},EV=Me.INFO,DV={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},IV=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=DV[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ts=class{constructor(e){this.name=e,this._logLevel=EV,this._logHandler=IV,this._userLogHandler=null,CV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}};var TV=(n,e)=>e.some(t=>n instanceof t),zD,qD;function SV(){return zD||(zD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xV(){return qD||(qD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var GD=new WeakMap,Kg=new WeakMap,WD=new WeakMap,Wg=new WeakMap,Yg=new WeakMap;function MV(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(qn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&GD.set(t,n)}).catch(()=>{}),Yg.set(e,n),e}function AV(n){if(Kg.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Kg.set(n,e)}var Qg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Kg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||WD.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return qn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function KD(n){Qg=n(Qg)}function RV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Cd(this),e,...t);return WD.set(r,e.sort?e.sort():[e]),qn(r)}:xV().includes(n)?function(...e){return n.apply(Cd(this),e),qn(GD.get(this))}:function(...e){return qn(n.apply(Cd(this),e))}}function PV(n){return typeof n=="function"?RV(n):(n instanceof IDBTransaction&&AV(n),TV(n,SV())?new Proxy(n,Qg):n)}function qn(n){if(n instanceof IDBRequest)return MV(n);if(Wg.has(n))return Wg.get(n);let e=PV(n);return e!==n&&(Wg.set(n,e),Yg.set(e,n)),e}var Cd=n=>Yg.get(n);function YD(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),c=qn(s);return r&&s.addEventListener("upgradeneeded",l=>{r(qn(s.result),l.oldVersion,l.newVersion,qn(s.transaction),l)}),t&&s.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}var NV=["get","getKey","getAll","getAllKeys","count"],OV=["put","add","delete","clear"],Zg=new Map;function QD(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Zg.get(e))return Zg.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=OV.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||NV.includes(t)))return;let o=function(s,...c){return V(this,null,function*(){let l=this.transaction(s,i?"readwrite":"readonly"),u=l.store;return r&&(u=u.index(c.shift())),(yield Promise.all([u[t](...c),i&&l.done]))[0]})};return Zg.set(e,o),o}KD(n=>G(N({},n),{get:(e,t,r)=>QD(e,t)||n.get(e,t,r),has:(e,t)=>!!QD(e,t)||n.has(e,t)}));var Xg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(kV(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function kV(n){return n.getComponent()?.type==="VERSION"}var ey="@firebase/app",ZD="0.14.8";var vr=new ts("@firebase/app"),VV="@firebase/app-compat",FV="@firebase/analytics-compat",LV="@firebase/analytics",jV="@firebase/app-check-compat",BV="@firebase/app-check",UV="@firebase/auth",$V="@firebase/auth-compat",HV="@firebase/database",zV="@firebase/data-connect",qV="@firebase/database-compat",GV="@firebase/functions",WV="@firebase/functions-compat",KV="@firebase/installations",QV="@firebase/installations-compat",YV="@firebase/messaging",ZV="@firebase/messaging-compat",JV="@firebase/performance",XV="@firebase/performance-compat",eF="@firebase/remote-config",tF="@firebase/remote-config-compat",nF="@firebase/storage",rF="@firebase/storage-compat",iF="@firebase/firestore",oF="@firebase/ai",sF="@firebase/firestore-compat",aF="firebase",cF="12.9.0";var ty="[DEFAULT]",lF={[ey]:"fire-core",[VV]:"fire-core-compat",[LV]:"fire-analytics",[FV]:"fire-analytics-compat",[BV]:"fire-app-check",[jV]:"fire-app-check-compat",[UV]:"fire-auth",[$V]:"fire-auth-compat",[HV]:"fire-rtdb",[zV]:"fire-data-connect",[qV]:"fire-rtdb-compat",[GV]:"fire-fn",[WV]:"fire-fn-compat",[KV]:"fire-iid",[QV]:"fire-iid-compat",[YV]:"fire-fcm",[ZV]:"fire-fcm-compat",[JV]:"fire-perf",[XV]:"fire-perf-compat",[eF]:"fire-rc",[tF]:"fire-rc-compat",[nF]:"fire-gcs",[rF]:"fire-gcs-compat",[iF]:"fire-fst",[sF]:"fire-fst-compat",[oF]:"fire-vertex","fire-js":"fire-js",[aF]:"fire-js-all"};var bd=new Map,uF=new Map,ny=new Map;function JD(n,e){try{n.container.addComponent(e)}catch(t){vr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ac(n){let e=n.name;if(ny.has(e))return vr.debug(`There were multiple attempts to register component ${e}.`),!1;ny.set(e,n);for(let t of bd.values())JD(t,n);for(let t of uF.values())JD(t,n);return!0}function nI(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function rI(n){return n==null?!1:n.settings!==void 0}var dF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qr=new sc("app","Firebase",dF);var ry=class{constructor(e,t,r){this._isDeleted=!1,this._options=N({},e),this._config=N({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qr.create("app-deleted",{appName:this._name})}};var iI=cF;function sy(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=N({name:ty,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Qr.create("bad-app-name",{appName:String(i)});if(t||(t=zg()),!t)throw Qr.create("no-options");let o=bd.get(i);if(o){if(Fi(t,o.options)&&Fi(r,o.config))return o;throw Qr.create("duplicate-app",{appName:i})}let s=new wd(i);for(let l of ny.values())s.addComponent(l);let c=new ry(t,r,s);return bd.set(i,c),c}function oI(n=ty){let e=bd.get(n);if(!e&&n===ty&&zg())return sy();if(!e)throw Qr.create("no-app",{appName:n});return e}function Yr(n,e,t){let r=lF[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vr.warn(s.join(" "));return}ac(new yr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var fF="firebase-heartbeat-database",hF=1,cc="firebase-heartbeat-store",Jg=null;function sI(){return Jg||(Jg=YD(fF,hF,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Qr.create("idb-open",{originalErrorMessage:n.message})})),Jg}function pF(n){return V(this,null,function*(){try{let t=(yield sI()).transaction(cc),r=yield t.objectStore(cc).get(aI(n));return yield t.done,r}catch(e){if(e instanceof gr)vr.warn(e.message);else{let t=Qr.create("idb-get",{originalErrorMessage:e?.message});vr.warn(t.message)}}})}function XD(n,e){return V(this,null,function*(){try{let r=(yield sI()).transaction(cc,"readwrite");yield r.objectStore(cc).put(e,aI(n)),yield r.done}catch(t){if(t instanceof gr)vr.warn(t.message);else{let r=Qr.create("idb-set",{originalErrorMessage:t?.message});vr.warn(r.message)}}})}function aI(n){return`${n.name}!${n.options.appId}`}var mF=1024,gF=30,iy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new oy(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return V(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=eI();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>gF){let i=vF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){vr.warn(e)}})}getHeartbeatsHeader(){return V(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=eI(),{heartbeatsToSend:t,unsentEntries:r}=yF(this._heartbeatsCache.heartbeats),i=oc(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return vr.warn(e),""}})}};function eI(){return new Date().toISOString().substring(0,10)}function yF(n,e=mF){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),tI(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),tI(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var oy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return V(this,null,function*(){return qg()?HD().then(()=>!0).catch(()=>!1):!1})}read(){return V(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield pF(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return V(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return XD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return V(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return XD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function tI(n){return oc(JSON.stringify({version:2,heartbeats:n})).length}function vF(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function _F(n){ac(new yr("platform-logger",e=>new Xg(e),"PRIVATE")),ac(new yr("heartbeat",e=>new iy(e),"PRIVATE")),Yr(ey,ZD,n),Yr(ey,ZD,"esm2020"),Yr("fire-js","")}_F("");var wF="firebase",CF="12.9.0";Yr(wF,CF,"app");var cI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lI={};var _r,ay;(function(){var n;function e(I,w){function E(){}E.prototype=w.prototype,I.F=w.prototype,I.prototype=new E,I.prototype.constructor=I,I.D=function(T,D,A){for(var b=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)b[Bt-2]=arguments[Bt];return w.prototype[D].apply(T,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,w,E){E||(E=0);let T=Array(16);if(typeof w=="string")for(var D=0;D<16;++D)T[D]=w.charCodeAt(E++)|w.charCodeAt(E++)<<8|w.charCodeAt(E++)<<16|w.charCodeAt(E++)<<24;else for(D=0;D<16;++D)T[D]=w[E++]|w[E++]<<8|w[E++]<<16|w[E++]<<24;w=I.g[0],E=I.g[1],D=I.g[2];let A=I.g[3],b;b=w+(A^E&(D^A))+T[0]+3614090360&4294967295,w=E+(b<<7&4294967295|b>>>25),b=A+(D^w&(E^D))+T[1]+3905402710&4294967295,A=w+(b<<12&4294967295|b>>>20),b=D+(E^A&(w^E))+T[2]+606105819&4294967295,D=A+(b<<17&4294967295|b>>>15),b=E+(w^D&(A^w))+T[3]+3250441966&4294967295,E=D+(b<<22&4294967295|b>>>10),b=w+(A^E&(D^A))+T[4]+4118548399&4294967295,w=E+(b<<7&4294967295|b>>>25),b=A+(D^w&(E^D))+T[5]+1200080426&4294967295,A=w+(b<<12&4294967295|b>>>20),b=D+(E^A&(w^E))+T[6]+2821735955&4294967295,D=A+(b<<17&4294967295|b>>>15),b=E+(w^D&(A^w))+T[7]+4249261313&4294967295,E=D+(b<<22&4294967295|b>>>10),b=w+(A^E&(D^A))+T[8]+1770035416&4294967295,w=E+(b<<7&4294967295|b>>>25),b=A+(D^w&(E^D))+T[9]+2336552879&4294967295,A=w+(b<<12&4294967295|b>>>20),b=D+(E^A&(w^E))+T[10]+4294925233&4294967295,D=A+(b<<17&4294967295|b>>>15),b=E+(w^D&(A^w))+T[11]+2304563134&4294967295,E=D+(b<<22&4294967295|b>>>10),b=w+(A^E&(D^A))+T[12]+1804603682&4294967295,w=E+(b<<7&4294967295|b>>>25),b=A+(D^w&(E^D))+T[13]+4254626195&4294967295,A=w+(b<<12&4294967295|b>>>20),b=D+(E^A&(w^E))+T[14]+2792965006&4294967295,D=A+(b<<17&4294967295|b>>>15),b=E+(w^D&(A^w))+T[15]+1236535329&4294967295,E=D+(b<<22&4294967295|b>>>10),b=w+(D^A&(E^D))+T[1]+4129170786&4294967295,w=E+(b<<5&4294967295|b>>>27),b=A+(E^D&(w^E))+T[6]+3225465664&4294967295,A=w+(b<<9&4294967295|b>>>23),b=D+(w^E&(A^w))+T[11]+643717713&4294967295,D=A+(b<<14&4294967295|b>>>18),b=E+(A^w&(D^A))+T[0]+3921069994&4294967295,E=D+(b<<20&4294967295|b>>>12),b=w+(D^A&(E^D))+T[5]+3593408605&4294967295,w=E+(b<<5&4294967295|b>>>27),b=A+(E^D&(w^E))+T[10]+38016083&4294967295,A=w+(b<<9&4294967295|b>>>23),b=D+(w^E&(A^w))+T[15]+3634488961&4294967295,D=A+(b<<14&4294967295|b>>>18),b=E+(A^w&(D^A))+T[4]+3889429448&4294967295,E=D+(b<<20&4294967295|b>>>12),b=w+(D^A&(E^D))+T[9]+568446438&4294967295,w=E+(b<<5&4294967295|b>>>27),b=A+(E^D&(w^E))+T[14]+3275163606&4294967295,A=w+(b<<9&4294967295|b>>>23),b=D+(w^E&(A^w))+T[3]+4107603335&4294967295,D=A+(b<<14&4294967295|b>>>18),b=E+(A^w&(D^A))+T[8]+1163531501&4294967295,E=D+(b<<20&4294967295|b>>>12),b=w+(D^A&(E^D))+T[13]+2850285829&4294967295,w=E+(b<<5&4294967295|b>>>27),b=A+(E^D&(w^E))+T[2]+4243563512&4294967295,A=w+(b<<9&4294967295|b>>>23),b=D+(w^E&(A^w))+T[7]+1735328473&4294967295,D=A+(b<<14&4294967295|b>>>18),b=E+(A^w&(D^A))+T[12]+2368359562&4294967295,E=D+(b<<20&4294967295|b>>>12),b=w+(E^D^A)+T[5]+4294588738&4294967295,w=E+(b<<4&4294967295|b>>>28),b=A+(w^E^D)+T[8]+2272392833&4294967295,A=w+(b<<11&4294967295|b>>>21),b=D+(A^w^E)+T[11]+1839030562&4294967295,D=A+(b<<16&4294967295|b>>>16),b=E+(D^A^w)+T[14]+4259657740&4294967295,E=D+(b<<23&4294967295|b>>>9),b=w+(E^D^A)+T[1]+2763975236&4294967295,w=E+(b<<4&4294967295|b>>>28),b=A+(w^E^D)+T[4]+1272893353&4294967295,A=w+(b<<11&4294967295|b>>>21),b=D+(A^w^E)+T[7]+4139469664&4294967295,D=A+(b<<16&4294967295|b>>>16),b=E+(D^A^w)+T[10]+3200236656&4294967295,E=D+(b<<23&4294967295|b>>>9),b=w+(E^D^A)+T[13]+681279174&4294967295,w=E+(b<<4&4294967295|b>>>28),b=A+(w^E^D)+T[0]+3936430074&4294967295,A=w+(b<<11&4294967295|b>>>21),b=D+(A^w^E)+T[3]+3572445317&4294967295,D=A+(b<<16&4294967295|b>>>16),b=E+(D^A^w)+T[6]+76029189&4294967295,E=D+(b<<23&4294967295|b>>>9),b=w+(E^D^A)+T[9]+3654602809&4294967295,w=E+(b<<4&4294967295|b>>>28),b=A+(w^E^D)+T[12]+3873151461&4294967295,A=w+(b<<11&4294967295|b>>>21),b=D+(A^w^E)+T[15]+530742520&4294967295,D=A+(b<<16&4294967295|b>>>16),b=E+(D^A^w)+T[2]+3299628645&4294967295,E=D+(b<<23&4294967295|b>>>9),b=w+(D^(E|~A))+T[0]+4096336452&4294967295,w=E+(b<<6&4294967295|b>>>26),b=A+(E^(w|~D))+T[7]+1126891415&4294967295,A=w+(b<<10&4294967295|b>>>22),b=D+(w^(A|~E))+T[14]+2878612391&4294967295,D=A+(b<<15&4294967295|b>>>17),b=E+(A^(D|~w))+T[5]+4237533241&4294967295,E=D+(b<<21&4294967295|b>>>11),b=w+(D^(E|~A))+T[12]+1700485571&4294967295,w=E+(b<<6&4294967295|b>>>26),b=A+(E^(w|~D))+T[3]+2399980690&4294967295,A=w+(b<<10&4294967295|b>>>22),b=D+(w^(A|~E))+T[10]+4293915773&4294967295,D=A+(b<<15&4294967295|b>>>17),b=E+(A^(D|~w))+T[1]+2240044497&4294967295,E=D+(b<<21&4294967295|b>>>11),b=w+(D^(E|~A))+T[8]+1873313359&4294967295,w=E+(b<<6&4294967295|b>>>26),b=A+(E^(w|~D))+T[15]+4264355552&4294967295,A=w+(b<<10&4294967295|b>>>22),b=D+(w^(A|~E))+T[6]+2734768916&4294967295,D=A+(b<<15&4294967295|b>>>17),b=E+(A^(D|~w))+T[13]+1309151649&4294967295,E=D+(b<<21&4294967295|b>>>11),b=w+(D^(E|~A))+T[4]+4149444226&4294967295,w=E+(b<<6&4294967295|b>>>26),b=A+(E^(w|~D))+T[11]+3174756917&4294967295,A=w+(b<<10&4294967295|b>>>22),b=D+(w^(A|~E))+T[2]+718787259&4294967295,D=A+(b<<15&4294967295|b>>>17),b=E+(A^(D|~w))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(D+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+A&4294967295}r.prototype.v=function(I,w){w===void 0&&(w=I.length);let E=w-this.blockSize,T=this.C,D=this.h,A=0;for(;A<w;){if(D==0)for(;A<=E;)i(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<w;)if(T[D++]=I.charCodeAt(A++),D==this.blockSize){i(this,T),D=0;break}}else for(;A<w;)if(T[D++]=I[A++],D==this.blockSize){i(this,T),D=0;break}}this.h=D,this.o+=w},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;w=this.o*8;for(var E=I.length-8;E<I.length;++E)I[E]=w&255,w/=256;for(this.v(I),I=Array(16),w=0,E=0;E<4;++E)for(let T=0;T<32;T+=8)I[w++]=this.g[E]>>>T&255;return I};function o(I,w){var E=c;return Object.prototype.hasOwnProperty.call(E,I)?E[I]:E[I]=w(I)}function s(I,w){this.h=w;let E=[],T=!0;for(let D=I.length-1;D>=0;D--){let A=I[D]|0;T&&A==w||(E[D]=A,T=!1)}this.g=E}var c={};function l(I){return-128<=I&&I<128?o(I,function(w){return new s([w|0],w<0?-1:0)}):new s([I|0],I<0?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return p;if(I<0)return L(u(-I));let w=[],E=1;for(let T=0;I>=E;T++)w[T]=I/E|0,E*=4294967296;return new s(w,0)}function f(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return L(f(I.substring(1),w));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=u(Math.pow(w,8)),T=p;for(let A=0;A<I.length;A+=8){var D=Math.min(8,I.length-A);let b=parseInt(I.substring(A,A+D),w);D<8?(D=u(Math.pow(w,D)),T=T.j(D).add(u(b))):(T=T.j(E),T=T.add(u(b)))}return T}var p=l(0),v=l(1),_=l(16777216);n=s.prototype,n.m=function(){if(O(this))return-L(this).m();let I=0,w=1;for(let E=0;E<this.g.length;E++){let T=this.i(E);I+=(T>=0?T:4294967296+T)*w,w*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(M(this))return"0";if(O(this))return"-"+L(this).toString(I);let w=u(Math.pow(I,6));var E=this;let T="";for(;;){let D=St(E,w).g;E=z(E,D.j(w));let A=((E.g.length>0?E.g[0]:E.h)>>>0).toString(I);if(E=D,M(E))return A+T;for(;A.length<6;)A="0"+A;T=A+T}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function M(I){if(I.h!=0)return!1;for(let w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function O(I){return I.h==-1}n.l=function(I){return I=z(this,I),O(I)?-1:M(I)?0:1};function L(I){let w=I.g.length,E=[];for(let T=0;T<w;T++)E[T]=~I.g[T];return new s(E,~I.h).add(v)}n.abs=function(){return O(this)?L(this):this},n.add=function(I){let w=Math.max(this.g.length,I.g.length),E=[],T=0;for(let D=0;D<=w;D++){let A=T+(this.i(D)&65535)+(I.i(D)&65535),b=(A>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);T=b>>>16,A&=65535,b&=65535,E[D]=b<<16|A}return new s(E,E[E.length-1]&-2147483648?-1:0)};function z(I,w){return I.add(L(w))}n.j=function(I){if(M(this)||M(I))return p;if(O(this))return O(I)?L(this).j(L(I)):L(L(this).j(I));if(O(I))return L(this.j(L(I)));if(this.l(_)<0&&I.l(_)<0)return u(this.m()*I.m());let w=this.g.length+I.g.length,E=[];for(var T=0;T<2*w;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(let D=0;D<I.g.length;D++){let A=this.i(T)>>>16,b=this.i(T)&65535,Bt=I.i(D)>>>16,Pr=I.i(D)&65535;E[2*T+2*D]+=b*Pr,ee(E,2*T+2*D),E[2*T+2*D+1]+=A*Pr,ee(E,2*T+2*D+1),E[2*T+2*D+1]+=b*Bt,ee(E,2*T+2*D+1),E[2*T+2*D+2]+=A*Bt,ee(E,2*T+2*D+2)}for(I=0;I<w;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=w;I<2*w;I++)E[I]=0;return new s(E,0)};function ee(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function ue(I,w){this.g=I,this.h=w}function St(I,w){if(M(w))throw Error("division by zero");if(M(I))return new ue(p,p);if(O(I))return w=St(L(I),w),new ue(L(w.g),L(w.h));if(O(w))return w=St(I,L(w)),new ue(L(w.g),w.h);if(I.g.length>30){if(O(I)||O(w))throw Error("slowDivide_ only works with positive integers.");for(var E=v,T=w;T.l(I)<=0;)E=pn(E),T=pn(T);var D=Et(E,1),A=Et(T,1);for(T=Et(T,2),E=Et(E,2);!M(T);){var b=A.add(T);b.l(I)<=0&&(D=D.add(E),A=b),T=Et(T,1),E=Et(E,1)}return w=z(I,D.j(w)),new ue(D,w)}for(D=p;I.l(w)>=0;){for(E=Math.max(1,Math.floor(I.m()/w.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),A=u(E),b=A.j(w);O(b)||b.l(I)>0;)E-=T,A=u(E),b=A.j(w);M(A)&&(A=v),D=D.add(A),I=z(I,b)}return new ue(D,I)}n.B=function(I){return St(this,I).h},n.and=function(I){let w=Math.max(this.g.length,I.g.length),E=[];for(let T=0;T<w;T++)E[T]=this.i(T)&I.i(T);return new s(E,this.h&I.h)},n.or=function(I){let w=Math.max(this.g.length,I.g.length),E=[];for(let T=0;T<w;T++)E[T]=this.i(T)|I.i(T);return new s(E,this.h|I.h)},n.xor=function(I){let w=Math.max(this.g.length,I.g.length),E=[];for(let T=0;T<w;T++)E[T]=this.i(T)^I.i(T);return new s(E,this.h^I.h)};function pn(I){let w=I.g.length+1,E=[];for(let T=0;T<w;T++)E[T]=I.i(T)<<1|I.i(T-1)>>>31;return new s(E,I.h)}function Et(I,w){let E=w>>5;w%=32;let T=I.g.length-E,D=[];for(let A=0;A<T;A++)D[A]=w>0?I.i(A+E)>>>w|I.i(A+E+1)<<32-w:I.i(A+E);return new s(D,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ay=lI.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=f,_r=lI.Integer=s}).apply(typeof cI<"u"?cI:typeof self<"u"?self:typeof window<"u"?window:{});var Ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wr={};var cy,bF,ns,ly,lc,Dd,uy,dy,fy;(function(){var n,e=Object.defineProperty;function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ed=="object"&&Ed];for(var d=0;d<a.length;++d){var h=a[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(a,d){if(d)e:{var h=r;a=a.split(".");for(var m=0;m<a.length-1;m++){var S=a[m];if(!(S in h))break e;h=h[S]}a=a[a.length-1],m=h[a],d=d(m),d!=m&&d!=null&&e(h,a,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(d){var h=[],m;for(m in d)Object.prototype.hasOwnProperty.call(d,m)&&h.push([m,d[m]]);return h}});var o=o||{},s=this||self;function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function l(a,d,h){return a.call.apply(a.bind,arguments)}function u(a,d,h){return u=l,u.apply(null,arguments)}function f(a,d){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function p(a,d){function h(){}h.prototype=d.prototype,a.Z=d.prototype,a.prototype=new h,a.prototype.constructor=a,a.Ob=function(m,S,R){for(var H=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)H[ge-2]=arguments[ge];return d.prototype[S].apply(m,H)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function _(a){let d=a.length;if(d>0){let h=Array(d);for(let m=0;m<d;m++)h[m]=a[m];return h}return[]}function M(a,d){for(let m=1;m<arguments.length;m++){let S=arguments[m];var h=typeof S;if(h=h!="object"?h:S?Array.isArray(S)?"array":h:"null",h=="array"||h=="object"&&typeof S.length=="number"){h=a.length||0;let R=S.length||0;a.length=h+R;for(let H=0;H<R;H++)a[h+H]=S[H]}else a.push(S)}}class O{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function L(a){s.setTimeout(()=>{throw a},0)}function z(){var a=I;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class ee{constructor(){this.h=this.g=null}add(d,h){let m=ue.get();m.set(d,h),this.h?this.h.next=m:this.g=m,this.h=m}}var ue=new O(()=>new St,a=>a.reset());class St{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let pn,Et=!1,I=new ee,w=()=>{let a=Promise.resolve(void 0);pn=()=>{a.then(E)}};function E(){for(var a;a=z();){try{a.h.call(a.g)}catch(h){L(h)}var d=ue;d.j(a),d.h<100&&(d.h++,a.next=d.g,d.g=a)}Et=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};s.addEventListener("test",h,d),s.removeEventListener("test",h,d)}catch{}return a}();function b(a){return/^[\s\xa0]*$/.test(a)}function Bt(a,d){D.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,d)}p(Bt,D),Bt.prototype.init=function(a,d){let h=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget,d||(h=="mouseover"?d=a.fromElement:h=="mouseout"&&(d=a.toElement)),this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Bt.Z.h.call(this)},Bt.prototype.h=function(){Bt.Z.h.call(this);let a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Pr="closure_listenable_"+(Math.random()*1e6|0),px=0;function mx(a,d,h,m,S){this.listener=a,this.proxy=null,this.src=d,this.type=h,this.capture=!!m,this.ha=S,this.key=++px,this.da=this.fa=!1}function Wc(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Kc(a,d,h){for(let m in a)d.call(h,a[m],m,a)}function gx(a,d){for(let h in a)d.call(void 0,a[h],h,a)}function A_(a){let d={};for(let h in a)d[h]=a[h];return d}let R_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P_(a,d){let h,m;for(let S=1;S<arguments.length;S++){m=arguments[S];for(h in m)a[h]=m[h];for(let R=0;R<R_.length;R++)h=R_[R],Object.prototype.hasOwnProperty.call(m,h)&&(a[h]=m[h])}}function Qc(a){this.src=a,this.g={},this.h=0}Qc.prototype.add=function(a,d,h,m,S){let R=a.toString();a=this.g[R],a||(a=this.g[R]=[],this.h++);let H=nh(a,d,m,S);return H>-1?(d=a[H],h||(d.fa=!1)):(d=new mx(d,this.src,R,!!m,S),d.fa=h,a.push(d)),d};function th(a,d){let h=d.type;if(h in a.g){var m=a.g[h],S=Array.prototype.indexOf.call(m,d,void 0),R;(R=S>=0)&&Array.prototype.splice.call(m,S,1),R&&(Wc(d),a.g[h].length==0&&(delete a.g[h],a.h--))}}function nh(a,d,h,m){for(let S=0;S<a.length;++S){let R=a[S];if(!R.da&&R.listener==d&&R.capture==!!h&&R.ha==m)return S}return-1}var rh="closure_lm_"+(Math.random()*1e6|0),ih={};function N_(a,d,h,m,S){if(m&&m.once)return k_(a,d,h,m,S);if(Array.isArray(d)){for(let R=0;R<d.length;R++)N_(a,d[R],h,m,S);return null}return h=ch(h),a&&a[Pr]?a.J(d,h,c(m)?!!m.capture:!!m,S):O_(a,d,h,!1,m,S)}function O_(a,d,h,m,S,R){if(!d)throw Error("Invalid event type");let H=c(S)?!!S.capture:!!S,ge=sh(a);if(ge||(a[rh]=ge=new Qc(a)),h=ge.add(d,h,m,H,R),h.proxy)return h;if(m=yx(),h.proxy=m,m.src=a,m.listener=h,a.addEventListener)A||(S=H),S===void 0&&(S=!1),a.addEventListener(d.toString(),m,S);else if(a.attachEvent)a.attachEvent(F_(d.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function yx(){function a(h){return d.call(a.src,a.listener,h)}let d=vx;return a}function k_(a,d,h,m,S){if(Array.isArray(d)){for(let R=0;R<d.length;R++)k_(a,d[R],h,m,S);return null}return h=ch(h),a&&a[Pr]?a.K(d,h,c(m)?!!m.capture:!!m,S):O_(a,d,h,!0,m,S)}function V_(a,d,h,m,S){if(Array.isArray(d))for(var R=0;R<d.length;R++)V_(a,d[R],h,m,S);else m=c(m)?!!m.capture:!!m,h=ch(h),a&&a[Pr]?(a=a.i,R=String(d).toString(),R in a.g&&(d=a.g[R],h=nh(d,h,m,S),h>-1&&(Wc(d[h]),Array.prototype.splice.call(d,h,1),d.length==0&&(delete a.g[R],a.h--)))):a&&(a=sh(a))&&(d=a.g[d.toString()],a=-1,d&&(a=nh(d,h,m,S)),(h=a>-1?d[a]:null)&&oh(h))}function oh(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Pr])th(d.i,a);else{var h=a.type,m=a.proxy;d.removeEventListener?d.removeEventListener(h,m,a.capture):d.detachEvent?d.detachEvent(F_(h),m):d.addListener&&d.removeListener&&d.removeListener(m),(h=sh(d))?(th(h,a),h.h==0&&(h.src=null,d[rh]=null)):Wc(a)}}}function F_(a){return a in ih?ih[a]:ih[a]="on"+a}function vx(a,d){if(a.da)a=!0;else{d=new Bt(d,this);let h=a.listener,m=a.ha||a.src;a.fa&&oh(a),a=h.call(m,d)}return a}function sh(a){return a=a[rh],a instanceof Qc?a:null}var ah="__closure_events_fn_"+(Math.random()*1e9>>>0);function ch(a){return typeof a=="function"?a:(a[ah]||(a[ah]=function(d){return a.handleEvent(d)}),a[ah])}function xt(){T.call(this),this.i=new Qc(this),this.M=this,this.G=null}p(xt,T),xt.prototype[Pr]=!0,xt.prototype.removeEventListener=function(a,d,h,m){V_(this,a,d,h,m)};function Ot(a,d){var h,m=a.G;if(m)for(h=[];m;m=m.G)h.push(m);if(a=a.M,m=d.type||d,typeof d=="string")d=new D(d,a);else if(d instanceof D)d.target=d.target||a;else{var S=d;d=new D(m,a),P_(d,S)}S=!0;let R,H;if(h)for(H=h.length-1;H>=0;H--)R=d.g=h[H],S=Yc(R,m,!0,d)&&S;if(R=d.g=a,S=Yc(R,m,!0,d)&&S,S=Yc(R,m,!1,d)&&S,h)for(H=0;H<h.length;H++)R=d.g=h[H],S=Yc(R,m,!1,d)&&S}xt.prototype.N=function(){if(xt.Z.N.call(this),this.i){var a=this.i;for(let d in a.g){let h=a.g[d];for(let m=0;m<h.length;m++)Wc(h[m]);delete a.g[d],a.h--}}this.G=null},xt.prototype.J=function(a,d,h,m){return this.i.add(String(a),d,!1,h,m)},xt.prototype.K=function(a,d,h,m){return this.i.add(String(a),d,!0,h,m)};function Yc(a,d,h,m){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();let S=!0;for(let R=0;R<d.length;++R){let H=d[R];if(H&&!H.da&&H.capture==h){let ge=H.listener,at=H.ha||H.src;H.fa&&th(a.i,H),S=ge.call(at,m)!==!1&&S}}return S&&!m.defaultPrevented}function _x(a,d){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(a,d||0)}function L_(a){a.g=_x(()=>{a.g=null,a.i&&(a.i=!1,L_(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class wx extends T{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:L_(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vs(a){T.call(this),this.h=a,this.g={}}p(Vs,T);var j_=[];function B_(a){Kc(a.g,function(d,h){this.g.hasOwnProperty(h)&&oh(d)},a),a.g={}}Vs.prototype.N=function(){Vs.Z.N.call(this),B_(this)},Vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lh=s.JSON.stringify,Cx=s.JSON.parse,bx=class{stringify(a){return s.JSON.stringify(a,void 0)}parse(a){return s.JSON.parse(a,void 0)}};function U_(){}function $_(){}var Fs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function uh(){D.call(this,"d")}p(uh,D);function dh(){D.call(this,"c")}p(dh,D);var ii={},H_=null;function Zc(){return H_=H_||new xt}ii.Ia="serverreachability";function z_(a){D.call(this,ii.Ia,a)}p(z_,D);function Ls(a){let d=Zc();Ot(d,new z_(d))}ii.STAT_EVENT="statevent";function q_(a,d){D.call(this,ii.STAT_EVENT,a),this.stat=d}p(q_,D);function kt(a){let d=Zc();Ot(d,new q_(d,a))}ii.Ja="timingevent";function G_(a,d){D.call(this,ii.Ja,a),this.size=d}p(G_,D);function js(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){a()},d)}function Bs(){this.g=!0}Bs.prototype.ua=function(){this.g=!1};function Ex(a,d,h,m,S,R){a.info(function(){if(a.g)if(R){var H="",ge=R.split("&");for(let Ve=0;Ve<ge.length;Ve++){var at=ge[Ve].split("=");if(at.length>1){let gt=at[0];at=at[1];let An=gt.split("_");H=An.length>=2&&An[1]=="type"?H+(gt+"="+at+"&"):H+(gt+"=redacted&")}}}else H=null;else H=R;return"XMLHTTP REQ ("+m+") [attempt "+S+"]: "+d+`
`+h+`
`+H})}function Dx(a,d,h,m,S,R,H){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+S+"]: "+d+`
`+h+`
`+R+" "+H})}function no(a,d,h,m){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+Tx(a,h)+(m?" "+m:"")})}function Ix(a,d){a.info(function(){return"TIMEOUT: "+d})}Bs.prototype.info=function(){};function Tx(a,d){if(!a.g)return d;if(!d)return null;try{let R=JSON.parse(d);if(R){for(a=0;a<R.length;a++)if(Array.isArray(R[a])){var h=R[a];if(!(h.length<2)){var m=h[1];if(Array.isArray(m)&&!(m.length<1)){var S=m[0];if(S!="noop"&&S!="stop"&&S!="close")for(let H=1;H<m.length;H++)m[H]=""}}}}return lh(R)}catch{return d}}var Jc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},W_={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},K_;function fh(){}p(fh,U_),fh.prototype.g=function(){return new XMLHttpRequest},K_=new fh;function Us(a){return encodeURIComponent(String(a))}function Sx(a){var d=1;a=a.split(":");let h=[];for(;d>0&&a.length;)h.push(a.shift()),d--;return a.length&&h.push(a.join(":")),h}function Nr(a,d,h,m){this.j=a,this.i=d,this.l=h,this.S=m||1,this.V=new Vs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Q_}function Q_(){this.i=null,this.g="",this.h=!1}var Y_={},hh={};function ph(a,d,h){a.M=1,a.A=el(Mn(d)),a.u=h,a.R=!0,Z_(a,null)}function Z_(a,d){a.F=Date.now(),Xc(a),a.B=Mn(a.A);var h=a.B,m=a.S;Array.isArray(m)||(m=[String(m)]),u0(h.i,"t",m),a.C=0,h=a.j.L,a.h=new Q_,a.g=x0(a.j,h?d:null,!a.u),a.P>0&&(a.O=new wx(u(a.Y,a,a.g),a.P)),d=a.V,h=a.g,m=a.ba;var S="readystatechange";Array.isArray(S)||(S&&(j_[0]=S.toString()),S=j_);for(let R=0;R<S.length;R++){let H=N_(h,S[R],m||d.handleEvent,!1,d.h||d);if(!H)break;d.g[H.key]=H}d=a.J?A_(a.J):{},a.u?(a.v||(a.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,d)):(a.v="GET",a.g.ea(a.B,a.v,null,d)),Ls(),Ex(a.i,a.v,a.B,a.l,a.S,a.u)}Nr.prototype.ba=function(a){a=a.target;let d=this.O;d&&Vr(a)==3?d.j():this.Y(a)},Nr.prototype.Y=function(a){try{if(a==this.g)e:{let ge=Vr(this.g),at=this.g.ya(),Ve=this.g.ca();if(!(ge<3)&&(ge!=3||this.g&&(this.h.h||this.g.la()||y0(this.g)))){this.K||ge!=4||at==7||(at==8||Ve<=0?Ls(3):Ls(2)),mh(this);var d=this.g.ca();this.X=d;var h=xx(this);if(this.o=d==200,Dx(this.i,this.v,this.B,this.l,this.S,ge,d),this.o){if(this.U&&!this.L){t:{if(this.g){var m,S=this.g;if((m=S.g?S.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(m)){var R=m;break t}}R=null}if(a=R)no(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,gh(this,a);else{this.o=!1,this.m=3,kt(12),oi(this),$s(this);break e}}if(this.R){a=!0;let gt;for(;!this.K&&this.C<h.length;)if(gt=Mx(this,h),gt==hh){ge==4&&(this.m=4,kt(14),a=!1),no(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==Y_){this.m=4,kt(15),no(this.i,this.l,h,"[Invalid Chunk]"),a=!1;break}else no(this.i,this.l,gt,null),gh(this,gt);if(J_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ge!=4||h.length!=0||this.h.h||(this.m=1,kt(16),a=!1),this.o=this.o&&a,!a)no(this.i,this.l,h,"[Invalid Chunked Response]"),oi(this),$s(this);else if(h.length>0&&!this.W){this.W=!0;var H=this.j;H.g==this&&H.aa&&!H.P&&(H.j.info("Great, no buffering proxy detected. Bytes received: "+h.length),Eh(H),H.P=!0,kt(11))}}else no(this.i,this.l,h,null),gh(this,h);ge==4&&oi(this),this.o&&!this.K&&(ge==4?D0(this.j,this):(this.o=!1,Xc(this)))}else Hx(this.g),d==400&&h.indexOf("Unknown SID")>0?(this.m=3,kt(12)):(this.m=0,kt(13)),oi(this),$s(this)}}}catch{}finally{}};function xx(a){if(!J_(a))return a.g.la();let d=y0(a.g);if(d==="")return"";let h="",m=d.length,S=Vr(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return oi(a),$s(a),"";a.h.i=new s.TextDecoder}for(let R=0;R<m;R++)a.h.h=!0,h+=a.h.i.decode(d[R],{stream:!(S&&R==m-1)});return d.length=0,a.h.g+=h,a.C=0,a.h.g}function J_(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Mx(a,d){var h=a.C,m=d.indexOf(`
`,h);return m==-1?hh:(h=Number(d.substring(h,m)),isNaN(h)?Y_:(m+=1,m+h>d.length?hh:(d=d.slice(m,m+h),a.C=m+h,d)))}Nr.prototype.cancel=function(){this.K=!0,oi(this)};function Xc(a){a.T=Date.now()+a.H,X_(a,a.H)}function X_(a,d){if(a.D!=null)throw Error("WatchDog timer not null");a.D=js(u(a.aa,a),d)}function mh(a){a.D&&(s.clearTimeout(a.D),a.D=null)}Nr.prototype.aa=function(){this.D=null;let a=Date.now();a-this.T>=0?(Ix(this.i,this.B),this.M!=2&&(Ls(),kt(17)),oi(this),this.m=2,$s(this)):X_(this,this.T-a)};function $s(a){a.j.I==0||a.K||D0(a.j,a)}function oi(a){mh(a);var d=a.O;d&&typeof d.dispose=="function"&&d.dispose(),a.O=null,B_(a.V),a.g&&(d=a.g,a.g=null,d.abort(),d.dispose())}function gh(a,d){try{var h=a.j;if(h.I!=0&&(h.g==a||yh(h.h,a))){if(!a.L&&yh(h.h,a)&&h.I==3){try{var m=h.Ba.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var S=m;if(S[0]==0){e:if(!h.v){if(h.g)if(h.g.F+3e3<a.F)sl(h),il(h);else break e;bh(h),kt(18)}}else h.xa=S[1],0<h.xa-h.K&&S[2]<37500&&h.F&&h.A==0&&!h.C&&(h.C=js(u(h.Va,h),6e3));n0(h.h)<=1&&h.ta&&(h.ta=void 0)}else ai(h,11)}else if((a.L||h.g==a)&&sl(h),!b(d))for(S=h.Ba.g.parse(d),d=0;d<S.length;d++){let Ve=S[d],gt=Ve[0];if(!(gt<=h.K))if(h.K=gt,Ve=Ve[1],h.I==2)if(Ve[0]=="c"){h.M=Ve[1],h.ba=Ve[2];let An=Ve[3];An!=null&&(h.ka=An,h.j.info("VER="+h.ka));let ci=Ve[4];ci!=null&&(h.za=ci,h.j.info("SVER="+h.za));let Fr=Ve[5];Fr!=null&&typeof Fr=="number"&&Fr>0&&(m=1.5*Fr,h.O=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;let Lr=a.g;if(Lr){let cl=Lr.g?Lr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cl){var R=m.h;R.g||cl.indexOf("spdy")==-1&&cl.indexOf("quic")==-1&&cl.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(vh(R,R.h),R.h=null))}if(m.G){let Dh=Lr.g?Lr.g.getResponseHeader("X-HTTP-Session-Id"):null;Dh&&(m.wa=Dh,Be(m.J,m.G,Dh))}}h.I=3,h.l&&h.l.ra(),h.aa&&(h.T=Date.now()-a.F,h.j.info("Handshake RTT: "+h.T+"ms")),m=h;var H=a;if(m.na=S0(m,m.L?m.ba:null,m.W),H.L){r0(m.h,H);var ge=H,at=m.O;at&&(ge.H=at),ge.D&&(mh(ge),Xc(ge)),m.g=H}else b0(m);h.i.length>0&&ol(h)}else Ve[0]!="stop"&&Ve[0]!="close"||ai(h,7);else h.I==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?ai(h,7):Ch(h):Ve[0]!="noop"&&h.l&&h.l.qa(Ve),h.A=0)}}Ls(4)}catch{}}var Ax=class{constructor(a,d){this.g=a,this.map=d}};function e0(a){this.l=a||10,s.PerformanceNavigationTiming?(a=s.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function t0(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function n0(a){return a.h?1:a.g?a.g.size:0}function yh(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function vh(a,d){a.g?a.g.add(d):a.h=d}function r0(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}e0.prototype.cancel=function(){if(this.i=i0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function i0(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let h of a.g.values())d=d.concat(h.G);return d}return _(a.i)}var o0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rx(a,d){if(a){a=a.split("&");for(let h=0;h<a.length;h++){let m=a[h].indexOf("="),S,R=null;m>=0?(S=a[h].substring(0,m),R=a[h].substring(m+1)):S=a[h],d(S,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function Or(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;a instanceof Or?(this.l=a.l,Hs(this,a.j),this.o=a.o,this.g=a.g,zs(this,a.u),this.h=a.h,_h(this,d0(a.i)),this.m=a.m):a&&(d=String(a).match(o0))?(this.l=!1,Hs(this,d[1]||"",!0),this.o=qs(d[2]||""),this.g=qs(d[3]||"",!0),zs(this,d[4]),this.h=qs(d[5]||"",!0),_h(this,d[6]||"",!0),this.m=qs(d[7]||"")):(this.l=!1,this.i=new Ws(null,this.l))}Or.prototype.toString=function(){let a=[];var d=this.j;d&&a.push(Gs(d,s0,!0),":");var h=this.g;return(h||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Gs(d,s0,!0),"@"),a.push(Us(h).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.u,h!=null&&a.push(":",String(h))),(h=this.h)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(Gs(h,h.charAt(0)=="/"?Ox:Nx,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",Gs(h,Vx)),a.join("")},Or.prototype.resolve=function(a){let d=Mn(this),h=!!a.j;h?Hs(d,a.j):h=!!a.o,h?d.o=a.o:h=!!a.g,h?d.g=a.g:h=a.u!=null;var m=a.h;if(h)zs(d,a.u);else if(h=!!a.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var S=d.h.lastIndexOf("/");S!=-1&&(m=d.h.slice(0,S+1)+m)}if(S=m,S==".."||S==".")m="";else if(S.indexOf("./")!=-1||S.indexOf("/.")!=-1){m=S.lastIndexOf("/",0)==0,S=S.split("/");let R=[];for(let H=0;H<S.length;){let ge=S[H++];ge=="."?m&&H==S.length&&R.push(""):ge==".."?((R.length>1||R.length==1&&R[0]!="")&&R.pop(),m&&H==S.length&&R.push("")):(R.push(ge),m=!0)}m=R.join("/")}else m=S}return h?d.h=m:h=a.i.toString()!=="",h?_h(d,d0(a.i)):h=!!a.m,h&&(d.m=a.m),d};function Mn(a){return new Or(a)}function Hs(a,d,h){a.j=h?qs(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function zs(a,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);a.u=d}else a.u=null}function _h(a,d,h){d instanceof Ws?(a.i=d,Fx(a.i,a.l)):(h||(d=Gs(d,kx)),a.i=new Ws(d,a.l))}function Be(a,d,h){a.i.set(d,h)}function el(a){return Be(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function qs(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Gs(a,d,h){return typeof a=="string"?(a=encodeURI(a).replace(d,Px),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Px(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var s0=/[#\/\?@]/g,Nx=/[#\?:]/g,Ox=/[#\?]/g,kx=/[#\?@]/g,Vx=/#/g;function Ws(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function si(a){a.g||(a.g=new Map,a.h=0,a.i&&Rx(a.i,function(d,h){a.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}n=Ws.prototype,n.add=function(a,d){si(this),this.i=null,a=ro(this,a);let h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(d),this.h+=1,this};function a0(a,d){si(a),d=ro(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function c0(a,d){return si(a),d=ro(a,d),a.g.has(d)}n.forEach=function(a,d){si(this),this.g.forEach(function(h,m){h.forEach(function(S){a.call(d,S,m,this)},this)},this)};function l0(a,d){si(a);let h=[];if(typeof d=="string")c0(a,d)&&(h=h.concat(a.g.get(ro(a,d))));else for(a=Array.from(a.g.values()),d=0;d<a.length;d++)h=h.concat(a[d]);return h}n.set=function(a,d){return si(this),this.i=null,a=ro(this,a),c0(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},n.get=function(a,d){return a?(a=l0(this,a),a.length>0?String(a[0]):d):d};function u0(a,d,h){a0(a,d),h.length>0&&(a.i=null,a.g.set(ro(a,d),_(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(let m=0;m<d.length;m++){var h=d[m];let S=Us(h);h=l0(this,h);for(let R=0;R<h.length;R++){let H=S;h[R]!==""&&(H+="="+Us(h[R])),a.push(H)}}return this.i=a.join("&")};function d0(a){let d=new Ws;return d.i=a.i,a.g&&(d.g=new Map(a.g),d.h=a.h),d}function ro(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function Fx(a,d){d&&!a.j&&(si(a),a.i=null,a.g.forEach(function(h,m){let S=m.toLowerCase();m!=S&&(a0(this,m),u0(this,S,h))},a)),a.j=d}function Lx(a,d){let h=new Bs;if(s.Image){let m=new Image;m.onload=f(kr,h,"TestLoadImage: loaded",!0,d,m),m.onerror=f(kr,h,"TestLoadImage: error",!1,d,m),m.onabort=f(kr,h,"TestLoadImage: abort",!1,d,m),m.ontimeout=f(kr,h,"TestLoadImage: timeout",!1,d,m),s.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else d(!1)}function jx(a,d){let h=new Bs,m=new AbortController,S=setTimeout(()=>{m.abort(),kr(h,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:m.signal}).then(R=>{clearTimeout(S),R.ok?kr(h,"TestPingServer: ok",!0,d):kr(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(S),kr(h,"TestPingServer: error",!1,d)})}function kr(a,d,h,m,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),m(h)}catch{}}function Bx(){this.g=new bx}function tl(a){this.i=a.Sb||null,this.h=a.ab||!1}p(tl,U_),tl.prototype.g=function(){return new nl(this.i,this.h)};function nl(a,d){xt.call(this),this.H=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(nl,xt),n=nl.prototype,n.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=d,this.readyState=1,Qs(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(d.body=a),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ks(this)),this.readyState=0},n.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Qs(this)),this.g&&(this.readyState=3,Qs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;f0(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function f0(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}n.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Ks(this):Qs(this),this.readyState==3&&f0(this)}},n.Oa=function(a){this.g&&(this.response=this.responseText=a,Ks(this))},n.Na=function(a){this.g&&(this.response=a,Ks(this))},n.ga=function(){this.g&&Ks(this)};function Ks(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Qs(a)}n.setRequestHeader=function(a,d){this.A.append(a,d)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=d.next();return a.join(`\r
`)};function Qs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(nl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function h0(a){let d="";return Kc(a,function(h,m){d+=m,d+=":",d+=h,d+=`\r
`}),d}function wh(a,d,h){e:{for(m in h){var m=!1;break e}m=!0}m||(h=h0(h),typeof a=="string"?h!=null&&Us(h):Be(a,d,h))}function qe(a){xt.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(qe,xt);var Ux=/^https?$/i,$x=["POST","PUT"];n=qe.prototype,n.Fa=function(a){this.H=a},n.ea=function(a,d,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():K_.g(),this.g.onreadystatechange=v(u(this.Ca,this));try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(R){p0(this,R);return}if(a=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var S in m)h.set(S,m[S]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let R of m.keys())h.set(R,m.get(R));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(R=>R.toLowerCase()=="content-type"),S=s.FormData&&a instanceof s.FormData,!(Array.prototype.indexOf.call($x,d,void 0)>=0)||m||S||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,H]of h)this.g.setRequestHeader(R,H);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(R){p0(this,R)}};function p0(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.o=5,m0(a),rl(a)}function m0(a){a.A||(a.A=!0,Ot(a,"complete"),Ot(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,Ot(this,"complete"),Ot(this,"abort"),rl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rl(this,!0)),qe.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?g0(this):this.Xa())},n.Xa=function(){g0(this)};function g0(a){if(a.h&&typeof o<"u"){if(a.v&&Vr(a)==4)setTimeout(a.Ca.bind(a),0);else if(Ot(a,"readystatechange"),Vr(a)==4){a.h=!1;try{let R=a.ca();e:switch(R){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var m;if(m=R===0){let H=String(a.D).match(o0)[1]||null;!H&&s.self&&s.self.location&&(H=s.self.location.protocol.slice(0,-1)),m=!Ux.test(H?H.toLowerCase():"")}h=m}if(h)Ot(a,"complete"),Ot(a,"success");else{a.o=6;try{var S=Vr(a)>2?a.g.statusText:""}catch{S=""}a.l=S+" ["+a.ca()+"]",m0(a)}}finally{rl(a)}}}}function rl(a,d){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);let h=a.g;a.g=null,d||Ot(a,"ready");try{h.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Vr(a){return a.g?a.g.readyState:0}n.ca=function(){try{return Vr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Cx(d)}};function y0(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Hx(a){let d={};a=(a.g&&Vr(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(b(a[m]))continue;var h=Sx(a[m]);let S=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let R=d[S]||[];d[S]=R,R.push(h)}gx(d,function(m){return m.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ys(a,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||d}function v0(a){this.za=0,this.i=[],this.j=new Bs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ys("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ys("baseRetryDelayMs",5e3,a),this.Za=Ys("retryDelaySeedMs",1e4,a),this.Ta=Ys("forwardChannelMaxRetries",2,a),this.va=Ys("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new e0(a&&a.concurrentRequestLimit),this.Ba=new Bx,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=v0.prototype,n.ka=8,n.I=1,n.connect=function(a,d,h,m){kt(0),this.W=a,this.H=d||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.J=S0(this,null,this.W),ol(this)};function Ch(a){if(_0(a),a.I==3){var d=a.V++,h=Mn(a.J);if(Be(h,"SID",a.M),Be(h,"RID",d),Be(h,"TYPE","terminate"),Zs(a,h),d=new Nr(a,a.j,d),d.M=2,d.A=el(Mn(h)),h=!1,s.navigator&&s.navigator.sendBeacon)try{h=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!h&&s.Image&&(new Image().src=d.A,h=!0),h||(d.g=x0(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Xc(d)}T0(a)}function il(a){a.g&&(Eh(a),a.g.cancel(),a.g=null)}function _0(a){il(a),a.v&&(s.clearTimeout(a.v),a.v=null),sl(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&s.clearTimeout(a.m),a.m=null)}function ol(a){if(!t0(a.h)&&!a.m){a.m=!0;var d=a.Ea;pn||w(),Et||(pn(),Et=!0),I.add(d,a),a.D=0}}function zx(a,d){return n0(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=d.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=js(u(a.Ea,a,d),I0(a,a.D)),a.D++,!0)}n.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;let S=new Nr(this,this.j,a),R=this.o;if(this.U&&(R?(R=A_(R),P_(R,this.U)):R=this.U),this.u!==null||this.R||(S.J=R,R=null),this.S)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,d>4096){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=C0(this,S,d),h=Mn(this.J),Be(h,"RID",a),Be(h,"CVER",22),this.G&&Be(h,"X-HTTP-Session-Id",this.G),Zs(this,h),R&&(this.R?d="headers="+Us(h0(R))+"&"+d:this.u&&wh(h,this.u,R)),vh(this.h,S),this.Ra&&Be(h,"TYPE","init"),this.S?(Be(h,"$req",d),Be(h,"SID","null"),S.U=!0,ph(S,h,null)):ph(S,h,d),this.I=2}}else this.I==3&&(a?w0(this,a):this.i.length==0||t0(this.h)||w0(this))};function w0(a,d){var h;d?h=d.l:h=a.V++;let m=Mn(a.J);Be(m,"SID",a.M),Be(m,"RID",h),Be(m,"AID",a.K),Zs(a,m),a.u&&a.o&&wh(m,a.u,a.o),h=new Nr(a,a.j,h,a.D+1),a.u===null&&(h.J=a.o),d&&(a.i=d.G.concat(a.i)),d=C0(a,h,1e3),h.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),vh(a.h,h),ph(h,m,d)}function Zs(a,d){a.H&&Kc(a.H,function(h,m){Be(d,m,h)}),a.l&&Kc({},function(h,m){Be(d,m,h)})}function C0(a,d,h){h=Math.min(a.i.length,h);let m=a.l?u(a.l.Ka,a.l,a):null;e:{var S=a.i;let ge=-1;for(;;){let at=["count="+h];ge==-1?h>0?(ge=S[0].g,at.push("ofs="+ge)):ge=0:at.push("ofs="+ge);let Ve=!0;for(let gt=0;gt<h;gt++){var R=S[gt].g;let An=S[gt].map;if(R-=ge,R<0)ge=Math.max(0,S[gt].g-100),Ve=!1;else try{R="req"+R+"_"||"";try{var H=An instanceof Map?An:Object.entries(An);for(let[ci,Fr]of H){let Lr=Fr;c(Fr)&&(Lr=lh(Fr)),at.push(R+ci+"="+encodeURIComponent(Lr))}}catch(ci){throw at.push(R+"type="+encodeURIComponent("_badmap")),ci}}catch{m&&m(An)}}if(Ve){H=at.join("&");break e}}H=void 0}return a=a.i.splice(0,h),d.G=a,H}function b0(a){if(!a.g&&!a.v){a.Y=1;var d=a.Da;pn||w(),Et||(pn(),Et=!0),I.add(d,a),a.A=0}}function bh(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=js(u(a.Da,a),I0(a,a.A)),a.A++,!0)}n.Da=function(){if(this.v=null,E0(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=js(u(this.Wa,this),a)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,kt(10),il(this),E0(this))};function Eh(a){a.B!=null&&(s.clearTimeout(a.B),a.B=null)}function E0(a){a.g=new Nr(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var d=Mn(a.na);Be(d,"RID","rpc"),Be(d,"SID",a.M),Be(d,"AID",a.K),Be(d,"CI",a.F?"0":"1"),!a.F&&a.ia&&Be(d,"TO",a.ia),Be(d,"TYPE","xmlhttp"),Zs(a,d),a.u&&a.o&&wh(d,a.u,a.o),a.O&&(a.g.H=a.O);var h=a.g;a=a.ba,h.M=1,h.A=el(Mn(d)),h.u=null,h.R=!0,Z_(h,a)}n.Va=function(){this.C!=null&&(this.C=null,il(this),bh(this),kt(19))};function sl(a){a.C!=null&&(s.clearTimeout(a.C),a.C=null)}function D0(a,d){var h=null;if(a.g==d){sl(a),Eh(a),a.g=null;var m=2}else if(yh(a.h,d))h=d.G,r0(a.h,d),m=1;else return;if(a.I!=0){if(d.o)if(m==1){h=d.u?d.u.length:0,d=Date.now()-d.F;var S=a.D;m=Zc(),Ot(m,new G_(m,h)),ol(a)}else b0(a);else if(S=d.m,S==3||S==0&&d.X>0||!(m==1&&zx(a,d)||m==2&&bh(a)))switch(h&&h.length>0&&(d=a.h,d.i=d.i.concat(h)),S){case 1:ai(a,5);break;case 4:ai(a,10);break;case 3:ai(a,6);break;default:ai(a,2)}}}function I0(a,d){let h=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(h*=2),h*d}function ai(a,d){if(a.j.info("Error code "+d),d==2){var h=u(a.bb,a),m=a.Ua;let S=!m;m=new Or(m||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Hs(m,"https"),el(m),S?Lx(m.toString(),h):jx(m.toString(),h)}else kt(2);a.I=0,a.l&&a.l.pa(d),T0(a),_0(a)}n.bb=function(a){a?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function T0(a){if(a.I=0,a.ja=[],a.l){let d=i0(a.h);(d.length!=0||a.i.length!=0)&&(M(a.ja,d),M(a.ja,a.i),a.h.i.length=0,_(a.i),a.i.length=0),a.l.oa()}}function S0(a,d,h){var m=h instanceof Or?Mn(h):new Or(h);if(m.g!="")d&&(m.g=d+"."+m.g),zs(m,m.u);else{var S=s.location;m=S.protocol,d=d?d+"."+S.hostname:S.hostname,S=+S.port;let R=new Or(null);m&&Hs(R,m),d&&(R.g=d),S&&zs(R,S),h&&(R.h=h),m=R}return h=a.G,d=a.wa,h&&d&&Be(m,h,d),Be(m,"VER",a.ka),Zs(a,m),m}function x0(a,d,h){if(d&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Aa&&!a.ma?new qe(new tl({ab:h})):new qe(a.ma),d.Fa(a.L),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function M0(){}n=M0.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function al(){}al.prototype.g=function(a,d){return new Yt(a,d)};function Yt(a,d){xt.call(this),this.g=new v0(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(a?a["X-WebChannel-Client-Profile"]=d.sa:a={"X-WebChannel-Client-Profile":d.sa}),this.g.U=a,(a=d&&d.Qb)&&!b(a)&&(this.g.u=a),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!b(d)&&(this.g.G=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new io(this)}p(Yt,xt),Yt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){Ch(this.g)},Yt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.v&&(h={},h.__data__=lh(a),a=h);d.i.push(new Ax(d.Ya++,a)),d.I==3&&ol(d)},Yt.prototype.N=function(){this.g.l=null,delete this.j,Ch(this.g),delete this.g,Yt.Z.N.call(this)};function A0(a){uh.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let h in d){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}p(A0,uh);function R0(){dh.call(this),this.status=1}p(R0,dh);function io(a){this.g=a}p(io,M0),io.prototype.ra=function(){Ot(this.g,"a")},io.prototype.qa=function(a){Ot(this.g,new A0(a))},io.prototype.pa=function(a){Ot(this.g,new R0)},io.prototype.oa=function(){Ot(this.g,"b")},al.prototype.createWebChannel=al.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,fy=wr.createWebChannelTransport=function(){return new al},dy=wr.getStatEventTarget=function(){return Zc()},uy=wr.Event=ii,Dd=wr.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Jc.NO_ERROR=0,Jc.TIMEOUT=8,Jc.HTTP_ERROR=6,lc=wr.ErrorCode=Jc,W_.COMPLETE="complete",ly=wr.EventType=W_,$_.EventType=Fs,Fs.OPEN="a",Fs.CLOSE="b",Fs.ERROR="c",Fs.MESSAGE="d",xt.prototype.listen=xt.prototype.J,ns=wr.WebChannel=$_,bF=wr.FetchXmlHttpFactory=tl,qe.prototype.listenOnce=qe.prototype.K,qe.prototype.getLastError=qe.prototype.Ha,qe.prototype.getLastErrorCode=qe.prototype.ya,qe.prototype.getStatus=qe.prototype.ca,qe.prototype.getResponseJson=qe.prototype.La,qe.prototype.getResponseText=qe.prototype.la,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Fa,cy=wr.XhrIo=qe}).apply(typeof Ed<"u"?Ed:typeof self<"u"?self:typeof window<"u"?window:{});var _t=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");var bs="12.9.0";function KI(n){bs=n}var $i=new ts("@firebase/firestore");function rs(){return $i.logLevel}function q(n,...e){if($i.logLevel<=Me.DEBUG){let t=e.map(Hv);$i.debug(`Firestore (${bs}): ${n}`,...t)}}function br(n,...e){if($i.logLevel<=Me.ERROR){let t=e.map(Hv);$i.error(`Firestore (${bs}): ${n}`,...t)}}function Er(n,...e){if($i.logLevel<=Me.WARN){let t=e.map(Hv);$i.warn(`Firestore (${bs}): ${n}`,...t)}}function Hv(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ne(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,QI(n,r,t)}function QI(n,e,t){let r=`FIRESTORE (${bs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw br(r),new Error(r)}function ke(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||QI(e,i,r)}function ae(n,e){return n}var F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},K=class extends gr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Wn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Rd=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Pd=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(_t.UNAUTHENTICATED))}shutdown(){}},vy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Nd=class{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ke(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),o=new Wn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Wn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(()=>V(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},c=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Wn)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke(typeof r.accessToken=="string",31837,{l:r}),new Rd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string",2055,{h:e}),new _t(e)}},_y=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);let e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}},wy=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new _y(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Od=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},kd=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rI(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ke(this.o===void 0,3512);let r=o=>{o.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,q("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Od(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Od(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function EF(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Hi=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=EF(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Ie(n,e){return n<e?-1:n>e?1:0}function Cy(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return hy(i)===hy(o)?Ie(i,o):hy(i)?1:-1}return Ie(n.length,e.length)}var DF=55296,IF=57343;function hy(n){let e=n.charCodeAt(0);return e>=DF&&e<=IF}function us(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var uI="__name__",Vd=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ne(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ne(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Ie(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Cy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _r.fromString(e.substring(4,e.length-2))}},We=class n extends Vd{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new K(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},TF=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Wt=class n extends Vd{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return TF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===uI}static keyField(){return new n([uI])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new K(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new K(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var te=class n{constructor(e){this.path=e}static fromPath(e){return new n(We.fromString(e))}static fromName(e){return new n(We.fromString(e).popFirst(5))}static empty(){return new n(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return We.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new We(e.slice()))}};function SF(n,e,t){if(!t)throw new K(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function YI(n,e,t,r){if(e===!0&&r===!0)throw new K(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dI(n){if(!te.isDocumentKey(n))throw new K(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ZI(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function hf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ne(12329,{type:typeof n})}function er(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new K(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=hf(n);throw new K(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Je(n,e){let t={typeString:n};return e&&(t.value=e),t}function Es(n,e){if(!ZI(n))throw new K(F.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new K(F.INVALID_ARGUMENT,t);return!0}var fI=-62135596800,hI=1e6,Xe=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*hI);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<fI)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hI}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Es(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-fI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:Je("string",Xe._jsonSchemaVersion),seconds:Je("number"),nanoseconds:Je("number")};var le=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Xe(0,0))}static max(){return new n(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var mc=-1,Fd=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Fd.UNKNOWN_ID=-1;function xF(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new Xe(t+1,0):new Xe(t,r));return new zi(i,te.empty(),e)}function MF(n){return new zi(n.readTime,n.key,mc)}var zi=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(le.min(),te.empty(),mc)}static max(){return new n(le.max(),te.empty(),mc)}};function AF(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=te.comparator(n.documentKey,e.documentKey),t!==0?t:Ie(n.largestBatchId,e.largestBatchId))}var RF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",by=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ds(n){return V(this,null,function*(){if(n.code!==F.FAILED_PRECONDITION||n.message!==RF)throw n;q("LocalStore","Unexpectedly lost primary lease")})}var U=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&t()},l=>r(l))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let l=0;l<o;l++){let u=l;t(e[u]).next(f=>{s[u]=f,++c,c===o&&r(s)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function PF(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Is(n){return n.name==="IndexedDbTransactionError"}var zv=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),qv=-1;function pf(n){return n==null}function gc(n){return n===0&&1/n==-1/0}function NF(n){return typeof n=="number"&&Number.isInteger(n)&&!gc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var JI="";function OF(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=pI(e)),e=kF(n.get(t),e);return pI(e)}function kF(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case JI:t+="";break;default:t+=o}}return t}function pI(n){return n+JI+""}var VF="remoteDocuments",XI="owner";var eT="mutationQueues";var tT="mutations";var nT="documentMutations",FF="remoteDocumentsV14";var rT="remoteDocumentGlobal";var iT="targets";var oT="targetDocuments";var sT="targetGlobal",aT="collectionParents";var cT="clientMetadata";var lT="bundles";var uT="namedQueries";var LF="indexConfiguration";var jF="indexState";var BF="indexEntries";var dT="documentOverlays";var UF="globals";var $F=[eT,tT,nT,VF,iT,XI,sT,oT,cT,rT,aT,lT,uT],aq=[...$F,dT],HF=[eT,tT,nT,FF,iT,XI,sT,oT,cT,rT,aT,lT,uT,dT],zF=HF,qF=[...zF,LF,jF,BF];var cq=[...qF,UF];function mI(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ji(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fT(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ke=class n{constructor(e,t){this.comparator=e,this.root=t||Kn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new as(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new as(this.root,e,this.comparator,!1)}getReverseIterator(){return new as(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new as(this.root,e,this.comparator,!0)}},as=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Kn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}};Kn.EMPTY=null,Kn.RED=!0,Kn.BLACK=!1;Kn.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Kn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var wt=class n{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ld(this.data.getIterator())}getIteratorFrom(e){return new Ld(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ld=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Gn=class n{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new n([])}unionWith(e){let t=new wt(Wt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return us(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var jd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Tt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new jd("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Tt.EMPTY_BYTE_STRING=new Tt("");var GF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dr(n){if(ke(!!n,39018),typeof n=="string"){let e=0,t=GF.exec(n);if(ke(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$e(n.seconds),nanos:$e(n.nanos)}}function $e(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ir(n){return typeof n=="string"?Tt.fromBase64String(n):Tt.fromUint8Array(n)}var hT="server_timestamp",pT="__type__",mT="__previous_value__",gT="__local_write_time__";function mf(n){return(n?.mapValue?.fields||{})[pT]?.stringValue===hT}function gf(n){let e=n.mapValue.fields[mT];return mf(e)?gf(e):e}function yc(n){let e=Dr(n.mapValue.fields[gT].timestampValue);return new Xe(e.seconds,e.nanos)}var Ey=class{constructor(e,t,r,i,o,s,c,l,u,f,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=f,this.apiKey=p}},Bd="(default)",vc=class n{constructor(e,t){this.projectId=e,this.database=t||Bd}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Bd}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};function yT(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new K(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vc(n.options.projectId,e)}var Gv="__type__",vT="__max__",Id={mapValue:{fields:{__type__:{stringValue:vT}}}},Wv="__vector__",ds="value";function Jr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?mf(n)?4:wT(n)?9007199254740991:_T(n)?10:11:ne(28295,{value:n})}function Xn(n,e){if(n===e)return!0;let t=Jr(n);if(t!==Jr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yc(n).isEqual(yc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Dr(i.timestampValue),c=Dr(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Ir(i.bytesValue).isEqual(Ir(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return $e(i.geoPointValue.latitude)===$e(o.geoPointValue.latitude)&&$e(i.geoPointValue.longitude)===$e(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return $e(i.integerValue)===$e(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=$e(i.doubleValue),c=$e(o.doubleValue);return s===c?gc(s)===gc(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return us(n.arrayValue.values||[],e.arrayValue.values||[],Xn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(mI(s)!==mI(c))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(c[l]===void 0||!Xn(s[l],c[l])))return!1;return!0}(n,e);default:return ne(52216,{left:n})}}function _c(n,e){return(n.values||[]).find(t=>Xn(t,e))!==void 0}function fs(n,e){if(n===e)return 0;let t=Jr(n),r=Jr(e);if(t!==r)return Ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ie(n.booleanValue,e.booleanValue);case 2:return function(o,s){let c=$e(o.integerValue||o.doubleValue),l=$e(s.integerValue||s.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return gI(n.timestampValue,e.timestampValue);case 4:return gI(yc(n),yc(e));case 5:return Cy(n.stringValue,e.stringValue);case 6:return function(o,s){let c=Ir(o),l=Ir(s);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let c=o.split("/"),l=s.split("/");for(let u=0;u<c.length&&u<l.length;u++){let f=Ie(c[u],l[u]);if(f!==0)return f}return Ie(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let c=Ie($e(o.latitude),$e(s.latitude));return c!==0?c:Ie($e(o.longitude),$e(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return yI(n.arrayValue,e.arrayValue);case 10:return function(o,s){let c=o.fields||{},l=s.fields||{},u=c[ds]?.arrayValue,f=l[ds]?.arrayValue,p=Ie(u?.values?.length||0,f?.values?.length||0);return p!==0?p:yI(u,f)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Id.mapValue&&s===Id.mapValue)return 0;if(o===Id.mapValue)return 1;if(s===Id.mapValue)return-1;let c=o.fields||{},l=Object.keys(c),u=s.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){let v=Cy(l[p],f[p]);if(v!==0)return v;let _=fs(c[l[p]],u[f[p]]);if(_!==0)return _}return Ie(l.length,f.length)}(n.mapValue,e.mapValue);default:throw ne(23264,{he:t})}}function gI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ie(n,e);let t=Dr(n),r=Dr(e),i=Ie(t.seconds,r.seconds);return i!==0?i:Ie(t.nanos,r.nanos)}function yI(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=fs(t[i],r[i]);if(o)return o}return Ie(t.length,r.length)}function hs(n){return Dy(n)}function Dy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Dr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ir(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return te.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Dy(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Dy(t.fields[s])}`;return i+"}"}(n.mapValue):ne(61005,{value:n})}function xd(n){switch(Jr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=gf(n);return e?16+xd(e):16;case 5:return 2*n.stringValue.length;case 6:return Ir(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+xd(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Ji(r.fields,(o,s)=>{i+=o.length+xd(s)}),i}(n.mapValue);default:throw ne(13486,{value:n})}}function Iy(n){return!!n&&"integerValue"in n}function Kv(n){return!!n&&"arrayValue"in n}function vI(n){return!!n&&"nullValue"in n}function _I(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Md(n){return!!n&&"mapValue"in n}function _T(n){return(n?.mapValue?.fields||{})[Gv]?.stringValue===Wv}function fc(n){if(n.geoPointValue)return{geoPointValue:N({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:N({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ji(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=fc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fc(n.arrayValue.values[t]);return e}return N({},n)}function wT(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===vT}var uq={mapValue:{fields:{[Gv]:{stringValue:Wv},[ds]:{arrayValue:{}}}}};var fn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Md(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fc(t)}setAll(e){let t=Wt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=c.popLast()}s?r[c.lastSegment()]=fc(s):i.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Md(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Md(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ji(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(fc(this.value))}};function CT(n){let e=[];return Ji(n.fields,(t,r)=>{let i=new Wt([t]);if(Md(r)){let o=CT(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Gn(e)}var Sn=class n{constructor(e,t,r,i,o,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new n(e,0,le.min(),le.min(),le.min(),fn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,le.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,le.min(),le.min(),fn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,le.min(),le.min(),fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var qi=class{constructor(e,t){this.position=e,this.inclusive=t}};function wI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=te.comparator(te.fromName(s.referenceValue),t.key):r=fs(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function CI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xn(n.position[t],e.position[t]))return!1;return!0}var Gi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function WF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ud=class{},st=class n extends Ud{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Sy(e,t,r):t==="array-contains"?new Ay(e,r):t==="in"?new Ry(e,r):t==="not-in"?new Py(e,r):t==="array-contains-any"?new Ny(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new xy(e,r):new My(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(fs(t,this.value)):t!==null&&Jr(this.value)===Jr(t)&&this.matchesComparison(fs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},xn=class n extends Ud{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return bT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function bT(n){return n.op==="and"}function ET(n){return KF(n)&&bT(n)}function KF(n){for(let e of n.filters)if(e instanceof xn)return!1;return!0}function Ty(n){if(n instanceof st)return n.field.canonicalString()+n.op.toString()+hs(n.value);if(ET(n))return n.filters.map(e=>Ty(e)).join(",");{let e=n.filters.map(t=>Ty(t)).join(",");return`${n.op}(${e})`}}function DT(n,e){return n instanceof st?function(r,i){return i instanceof st&&r.op===i.op&&r.field.isEqual(i.field)&&Xn(r.value,i.value)}(n,e):n instanceof xn?function(r,i){return i instanceof xn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&DT(s,i.filters[c]),!0):!1}(n,e):void ne(19439)}function IT(n){return n instanceof st?function(t){return`${t.field.canonicalString()} ${t.op} ${hs(t.value)}`}(n):n instanceof xn?function(t){return t.op.toString()+" {"+t.getFilters().map(IT).join(" ,")+"}"}(n):"Filter"}var Sy=class extends st{constructor(e,t,r){super(e,t,r),this.key=te.fromName(r.referenceValue)}matches(e){let t=te.comparator(e.key,this.key);return this.matchesComparison(t)}},xy=class extends st{constructor(e,t){super(e,"in",t),this.keys=TT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},My=class extends st{constructor(e,t){super(e,"not-in",t),this.keys=TT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function TT(n,e){return(e.arrayValue?.values||[]).map(t=>te.fromName(t.referenceValue))}var Ay=class extends st{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Kv(t)&&_c(t.arrayValue,this.value)}},Ry=class extends st{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&_c(this.value.arrayValue,t)}},Py=class extends st{constructor(e,t){super(e,"not-in",t)}matches(e){if(_c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!_c(this.value.arrayValue,t)}},Ny=class extends st{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Kv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>_c(this.value.arrayValue,r))}};var Oy=class{constructor(e,t=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Te=null}};function bI(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Oy(n,e,t,r,i,o,s)}function Qv(n){let e=ae(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ty(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),pf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hs(r)).join(",")),e.Te=t}return e.Te}function Yv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!WF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!DT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!CI(n.startAt,e.startAt)&&CI(n.endAt,e.endAt)}function ky(n){return te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ps=class{constructor(e,t=null,r=[],i=[],o=null,s="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function QF(n,e,t,r,i,o,s,c){return new ps(n,e,t,r,i,o,s,c)}function Ac(n){return new ps(n)}function EI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function YF(n){return te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function ST(n){return n.collectionGroup!==null}function cs(n){let e=ae(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new wt(Wt.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(c=c.add(u.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Gi(o,r))}),t.has(Wt.keyField().canonicalString())||e.Ie.push(new Gi(Wt.keyField(),r))}return e.Ie}function Qn(n){let e=ae(n);return e.Ee||(e.Ee=ZF(e,cs(n))),e.Ee}function ZF(n,e){if(n.limitType==="F")return bI(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Gi(i.field,o)});let t=n.endAt?new qi(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new qi(n.startAt.position,n.startAt.inclusive):null;return bI(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function $d(n,e,t){return new ps(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yf(n,e){return Yv(Qn(n),Qn(e))&&n.limitType===e.limitType}function xT(n){return`${Qv(Qn(n))}|lt:${n.limitType}`}function is(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>IT(i)).join(", ")}]`),pf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>hs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>hs(i)).join(",")),`Target(${r})`}(Qn(n))}; limitType=${n.limitType})`}function vf(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):te.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of cs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,c,l){let u=wI(s,c,l);return s.inclusive?u<=0:u<0}(r.startAt,cs(r),i)||r.endAt&&!function(s,c,l){let u=wI(s,c,l);return s.inclusive?u>=0:u>0}(r.endAt,cs(r),i))}(n,e)}function JF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function MT(n){return(e,t)=>{let r=!1;for(let i of cs(n)){let o=XF(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function XF(n,e,t){let r=n.field.isKeyField()?te.comparator(e.key,t.key):function(o,s,c){let l=s.data.field(o),u=c.data.field(o);return l!==null&&u!==null?fs(l,u):ne(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:n.dir})}}var Tr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ji(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return fT(this.inner)}size(){return this.innerSize}};var eL=new Ke(te.comparator);function Sr(){return eL}var AT=new Ke(te.comparator);function dc(...n){let e=AT;for(let t of n)e=e.insert(t.key,t);return e}function RT(n){let e=AT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Bi(){return hc()}function PT(){return hc()}function hc(){return new Tr(n=>n.toString(),(n,e)=>n.isEqual(e))}var tL=new Ke(te.comparator),nL=new wt(te.comparator);function Ee(...n){let e=nL;for(let t of n)e=e.add(t);return e}var rL=new wt(Ie);function iL(){return rL}function Zv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gc(e)?"-0":e}}function NT(n){return{integerValue:""+n}}function oL(n,e){return NF(e)?NT(e):Zv(n,e)}var ms=class{constructor(){this._=void 0}};function sL(n,e,t){return n instanceof gs?function(i,o){let s={fields:{[pT]:{stringValue:hT},[gT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&mf(o)&&(o=gf(o)),o&&(s.fields[mT]=o),{mapValue:s}}(t,e):n instanceof Wi?kT(n,e):n instanceof Ki?VT(n,e):function(i,o){let s=OT(i,o),c=DI(s)+DI(i.Ae);return Iy(s)&&Iy(i.Ae)?NT(c):Zv(i.serializer,c)}(n,e)}function aL(n,e,t){return n instanceof Wi?kT(n,e):n instanceof Ki?VT(n,e):t}function OT(n,e){return n instanceof ys?function(r){return Iy(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var gs=class extends ms{},Wi=class extends ms{constructor(e){super(),this.elements=e}};function kT(n,e){let t=FT(e);for(let r of n.elements)t.some(i=>Xn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ki=class extends ms{constructor(e){super(),this.elements=e}};function VT(n,e){let t=FT(e);for(let r of n.elements)t=t.filter(i=>!Xn(i,r));return{arrayValue:{values:t}}}var ys=class extends ms{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function DI(n){return $e(n.integerValue||n.doubleValue)}function FT(n){return Kv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function cL(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Wi&&i instanceof Wi||r instanceof Ki&&i instanceof Ki?us(r.elements,i.elements,Xn):r instanceof ys&&i instanceof ys?Xn(r.Ae,i.Ae):r instanceof gs&&i instanceof gs}(n.transform,e.transform)}var Vy=class{constructor(e,t){this.version=e,this.transformResults=t}},Zr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ad(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var vs=class{};function LT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new wc(n.key,Zr.none()):new Qi(n.key,n.data,Zr.none());{let t=n.data,r=fn.empty(),i=new wt(Wt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new xr(n.key,r,new Gn(i.toArray()),Zr.none())}}function lL(n,e,t){n instanceof Qi?function(i,o,s){let c=i.value.clone(),l=TI(i.fieldTransforms,o,s.transformResults);c.setAll(l),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof xr?function(i,o,s){if(!Ad(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=TI(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(jT(i)),l.setAll(c),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function pc(n,e,t,r){return n instanceof Qi?function(o,s,c,l){if(!Ad(o.precondition,s))return c;let u=o.value.clone(),f=SI(o.fieldTransforms,l,s);return u.setAll(f),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof xr?function(o,s,c,l){if(!Ad(o.precondition,s))return c;let u=SI(o.fieldTransforms,l,s),f=s.data;return f.setAll(jT(o)),f.setAll(u),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,c){return Ad(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c}(n,e,t)}function uL(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=OT(r.transform,i||null);o!=null&&(t===null&&(t=fn.empty()),t.set(r.field,o))}return t||null}function II(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&us(r,i,(o,s)=>cL(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Qi=class extends vs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},xr=class extends vs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function jT(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function TI(n,e,t){let r=new Map;ke(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,aL(s,c,t[i]))}return r}function SI(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,sL(o,s,e))}return r}var wc=class extends vs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Fy=class extends vs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ly=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&lL(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=pc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=pc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=PT();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=t.has(i.key)?null:c;let l=LT(s,c);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ee())}isEqual(e){return this.batchId===e.batchId&&us(this.mutations,e.mutations,(t,r)=>II(t,r))&&us(this.baseMutations,e.baseMutations,(t,r)=>II(t,r))}},jy=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return tL}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var By=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Uy=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var it,Ae;function dL(n){switch(n){case F.OK:return ne(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ne(15467,{code:n})}}function BT(n){if(n===void 0)return br("GRPC error has no .code"),F.UNKNOWN;switch(n){case it.OK:return F.OK;case it.CANCELLED:return F.CANCELLED;case it.UNKNOWN:return F.UNKNOWN;case it.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case it.INTERNAL:return F.INTERNAL;case it.UNAVAILABLE:return F.UNAVAILABLE;case it.UNAUTHENTICATED:return F.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case it.NOT_FOUND:return F.NOT_FOUND;case it.ALREADY_EXISTS:return F.ALREADY_EXISTS;case it.PERMISSION_DENIED:return F.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case it.ABORTED:return F.ABORTED;case it.OUT_OF_RANGE:return F.OUT_OF_RANGE;case it.UNIMPLEMENTED:return F.UNIMPLEMENTED;case it.DATA_LOSS:return F.DATA_LOSS;default:return ne(39323,{code:n})}}(Ae=it||(it={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";var fL=null;function hL(){return new TextEncoder}var pL=new _r([4294967295,4294967295],0);function xI(n){let e=hL().encode(n),t=new ay;return t.update(e),new Uint8Array(t.digest())}function MI(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new _r([t,r],0),new _r([i,o],0)]}var $y=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ui(`Invalid padding: ${t}`);if(r<0)throw new Ui(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ui(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ui(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=_r.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(_r.fromNumber(r)));return i.compare(pL)===1&&(i=new _r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=xI(e),[r,i]=MI(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.ge===0)return;let t=xI(e),[r,i]=MI(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.be(s)}}be(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ui=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Hd=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Cc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(le.min(),i,new Ke(Ie),Sr(),Ee())}},Cc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ee(),Ee(),Ee())}};var ls=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=i}},zd=class{constructor(e,t){this.targetId=e,this.Ce=t}},qd=class{constructor(e,t,r=Tt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Gd=class{constructor(){this.ve=0,this.Fe=AI(),this.Me=Tt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ee(),t=Ee(),r=Ee();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ne(38017,{changeType:o})}}),new Cc(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=AI()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ke(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},Hy=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Sr(),this.He=Td(),this.Je=Td(),this.Ze=new Ke(Ie)}Xe(e){for(let t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(ky(o))if(r===0){let s=new te(o.path);this.et(t,s,Sn.newNoDocument(s,le.min()))}else ke(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let c=this.ut(e),l=c?this.ct(c,e,s):1;if(l!==0){this.it(t);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,u)}fL?.lt(function(f,p,v,_,M){let O={localCacheCount:f,existenceFilterCount:p.count,databaseId:v.database,projectId:v.projectId},L=p.unchangedNames;return L&&(O.bloomFilter={applied:M===0,hashCount:L?.hashCount??0,bitmapLength:L?.bits?.bitmap?.length??0,padding:L?.bits?.padding??0,mightContain:z=>_?.mightContain(z)??!1}),O}(s,e.Ce,this.Ge.ht(),c,l))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,c;try{s=Ir(r).toUint8Array()}catch(l){if(l instanceof jd)return Er("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new $y(s,i,o)}catch(l){return Er(l instanceof Ui?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let c=this.ot(s);if(c){if(o.current&&ky(c.target)){let l=new te(c.target.path);this.It(l).has(s)||this.Et(s,l)||this.et(s,l,Sn.newNoDocument(l,e))}o.Be&&(t.set(s,o.ke()),o.Ke())}});let r=Ee();this.Je.forEach((o,s)=>{let c=!0;s.forEachWhile(l=>{let u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Hd(e,t,this.Ze,this.je,r);return this.je=Sr(),this.He=Td(),this.Je=Td(),this.Ze=new Ke(Ie),i}Ye(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.qe(t,1):i.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Gd,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new wt(Ie),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new wt(Ie),this.He=this.He.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||q("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Gd),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Td(){return new Ke(te.comparator)}function AI(){return new Ke(te.comparator)}var mL={asc:"ASCENDING",desc:"DESCENDING"},gL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yL={and:"AND",or:"OR"},zy=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function qy(n,e){return n.useProto3Json||pf(e)?e:{value:e}}function Wd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function vL(n,e){return Wd(n,e.toTimestamp())}function Yn(n){return ke(!!n,49232),le.fromTimestamp(function(t){let r=Dr(t);return new Xe(r.seconds,r.nanos)}(n))}function Jv(n,e){return Gy(n,e).canonicalString()}function Gy(n,e){let t=function(i){return new We(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function $T(n){let e=We.fromString(n);return ke(WT(e),10190,{key:e.toString()}),e}function Wy(n,e){return Jv(n.databaseId,e.path)}function py(n,e){let t=$T(e);if(t.get(1)!==n.databaseId.projectId)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new te(zT(t))}function HT(n,e){return Jv(n.databaseId,e)}function _L(n){let e=$T(n);return e.length===4?We.emptyPath():zT(e)}function Ky(n){return new We(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zT(n){return ke(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function RI(n,e,t){return{name:Wy(n,e),fields:t.value.mapValue.fields}}function wL(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ne(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,f){return u.useProto3Json?(ke(f===void 0||typeof f=="string",58123),Tt.fromBase64String(f||"")):(ke(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Tt.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&function(u){let f=u.code===void 0?F.UNKNOWN:BT(u.code);return new K(f,u.message||"")}(s);t=new qd(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=py(n,r.document.name),o=Yn(r.document.updateTime),s=r.document.createTime?Yn(r.document.createTime):le.min(),c=new fn({mapValue:{fields:r.document.fields}}),l=Sn.newFoundDocument(i,o,s,c),u=r.targetIds||[],f=r.removedTargetIds||[];t=new ls(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=py(n,r.document),o=r.readTime?Yn(r.readTime):le.min(),s=Sn.newNoDocument(i,o),c=r.removedTargetIds||[];t=new ls([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=py(n,r.document),o=r.removedTargetIds||[];t=new ls([],o,i,null)}else{if(!("filter"in e))return ne(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Uy(i,o),c=r.targetId;t=new zd(c,s)}}return t}function CL(n,e){let t;if(e instanceof Qi)t={update:RI(n,e.key,e.value)};else if(e instanceof wc)t={delete:Wy(n,e.key)};else if(e instanceof xr)t={update:RI(n,e.key,e.data),updateMask:AL(e.fieldMask)};else{if(!(e instanceof Fy))return ne(16599,{dt:e.type});t={verify:Wy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let c=s.transform;if(c instanceof gs)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Wi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ki)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ys)return{fieldPath:s.field.canonicalString(),increment:c.Ae};throw ne(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:vL(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ne(27497)}(n,e.precondition)),t}function bL(n,e){return n&&n.length>0?(ke(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Yn(i.updateTime):Yn(o);return s.isEqual(le.min())&&(s=Yn(o)),new Vy(s,i.transformResults||[])}(t,e))):[]}function EL(n,e){return{documents:[HT(n,e.path)]}}function DL(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=HT(n,i);let o=function(u){if(u.length!==0)return GT(xn.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(f=>function(v){return{field:os(v.field),direction:SL(v.dir)}}(f))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let c=qy(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:t,parent:i}}function IL(n){let e=_L(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ke(r===1,65062);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=function(p){let v=qT(p);return v instanceof xn&&ET(v)?v.getFilters():[v]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(v=>function(M){return new Gi(ss(M.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(v))}(t.orderBy));let c=null;t.limit&&(c=function(p){let v;return v=typeof p=="object"?p.value:p,pf(v)?null:v}(t.limit));let l=null;t.startAt&&(l=function(p){let v=!!p.before,_=p.values||[];return new qi(_,v)}(t.startAt));let u=null;return t.endAt&&(u=function(p){let v=!p.before,_=p.values||[];return new qi(_,v)}(t.endAt)),QF(e,i,s,o,c,"F",l,u)}function TL(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function qT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ss(t.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ss(t.unaryFilter.field);return st.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ss(t.unaryFilter.field);return st.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ss(t.unaryFilter.field);return st.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(n):n.fieldFilter!==void 0?function(t){return st.create(ss(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return xn.create(t.compositeFilter.filters.map(r=>qT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(t.compositeFilter.op))}(n):ne(30097,{filter:n})}function SL(n){return mL[n]}function xL(n){return gL[n]}function ML(n){return yL[n]}function os(n){return{fieldPath:n.canonicalString()}}function ss(n){return Wt.fromServerFormat(n.fieldPath)}function GT(n){return n instanceof st?function(t){if(t.op==="=="){if(_I(t.value))return{unaryFilter:{field:os(t.field),op:"IS_NAN"}};if(vI(t.value))return{unaryFilter:{field:os(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(_I(t.value))return{unaryFilter:{field:os(t.field),op:"IS_NOT_NAN"}};if(vI(t.value))return{unaryFilter:{field:os(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:os(t.field),op:xL(t.op),value:t.value}}}(n):n instanceof xn?function(t){let r=t.getFilters().map(i=>GT(i));return r.length===1?r[0]:{compositeFilter:{op:ML(t.op),filters:r}}}(n):ne(54877,{filter:n})}function AL(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function WT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function KT(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}var bc=class n{constructor(e,t,r,i,o=le.min(),s=le.min(),c=Tt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Qy=class{constructor(e){this.yt=e}};function QT(n){let e=IL({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?$d(e,e.limit,"L"):e}var Kd=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt($e(e.integerValue));else if("doubleValue"in e){let r=$e(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),gc(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Dr(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ir(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?wT(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):_T(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):ne(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=ds,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt($e(o)),this.Ot(i,t),this.Ct(r[i],t)}qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),te.fromName(e).path.forEach(r=>{this.Ft(t,60),this.$t(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Kd.Wt=new Kd;var Yy=class{constructor(){this.Sn=new Zy}addToCollectionParentIndex(e,t){return this.Sn.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(zi.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(zi.min())}updateCollectionGroup(e,t,r){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}},Zy=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new wt(We.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wt(We.comparator)).toArray()}};var dq=new Uint8Array(0);var PI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},YT=41943040,dn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(YT,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);var Ec=class n{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new n(0)}static ar(){return new n(-1)}};var NI="LruGarbageCollector",RL=1048576;function OI([n,e],[t,r]){let i=Ie(n,t);return i===0?Ie(e,r):i}var Jy=class{constructor(e){this.Pr=e,this.buffer=new wt(OI),this.Tr=0}Ir(){return++this.Tr}Er(e){let t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();OI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Xy=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){q(NI,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>V(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Is(t)?q(NI,"Ignoring IndexedDB error during garbage collection: ",t):yield Ds(t)}yield this.Ar(3e5)}))}},ev=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return U.resolve(zv.ce);let r=new Jy(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(PI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PI):this.gr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,i,o,s,c,l,u,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),rs()<=Me.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(l-c)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function PL(n,e){return new ev(n,e)}var tv=class{constructor(){this.changes=new Tr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?U.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var nv=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var rv=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&pc(r.mutation,i,Gn.empty(),Xe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ee()){let i=Bi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=dc();return o.forEach((c,l)=>{s=s.insert(c,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Bi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ee()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{t.set(s,c)})})}computeViews(e,t,r,i){let o=Sr(),s=hc(),c=function(){return hc()}();return t.forEach((l,u)=>{let f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof xr)?o=o.insert(u.key,u):f!==void 0?(s.set(u.key,f.mutation.getFieldMask()),pc(f.mutation,u,f.mutation.getFieldMask(),Xe.now())):s.set(u.key,Gn.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,f)=>s.set(u,f)),t.forEach((u,f)=>c.set(u,new nv(f,s.get(u)??null))),c))}recalculateAndSaveOverlays(e,t){let r=hc(),i=new Ke((s,c)=>s-c),o=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let c of s)c.keys().forEach(l=>{let u=t.get(l);if(u===null)return;let f=r.get(l)||Gn.empty();f=c.applyToLocalView(u,f),r.set(l,f);let p=(i.get(c.batchId)||Ee()).add(l);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),u=l.key,f=l.value,p=PT();f.forEach(v=>{if(!o.has(v)){let _=LT(t.get(v),r.get(v));_!==null&&p.set(v,_),o=o.add(v)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,p))}return U.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return YF(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ST(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):U.resolve(Bi()),c=mc,l=o;return s.next(u=>U.forEach(u,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(v=>{l=l.insert(f,v)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,Ee())).next(f=>({batchId:c,changes:RT(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new te(t)).next(r=>{let i=dc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=dc();return this.indexManager.getCollectionParents(e,o).next(c=>U.forEach(c,l=>{let u=function(p,v){return new ps(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(f=>{f.forEach((p,v)=>{s=s.insert(p,v)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((l,u)=>{let f=u.getKey();s.get(f)===null&&(s=s.insert(f,Sn.newInvalidDocument(f)))});let c=dc();return s.forEach((l,u)=>{let f=o.get(l);f!==void 0&&pc(f.mutation,u,Gn.empty(),Xe.now()),vf(t,u)&&(c=c.insert(l,u))}),c})}};var iv=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return U.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Yn(i.createTime)}}(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,function(i){return{name:i.name,query:QT(i.bundledQuery),readTime:Yn(i.readTime)}}(t)),U.resolve()}};var ov=class{constructor(){this.overlays=new Ke(te.comparator),this.Lr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Bi();return U.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.bt(e,t,o)}),U.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Lr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Lr.delete(r)),U.resolve()}getOverlaysForCollection(e,t,r){let i=Bi(),o=t.length+1,s=new te(t.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let l=c.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return U.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ke((u,f)=>u-f),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let f=o.get(u.largestBatchId);f===null&&(f=Bi(),o=o.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}let c=Bi(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,f)=>c.set(u,f)),!(c.size()>=i)););return U.resolve(c)}bt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new By(t,r));let o=this.Lr.get(t);o===void 0&&(o=Ee(),this.Lr.set(t,o)),this.Lr.set(t,o.add(r.key))}};var sv=class{constructor(){this.sessionToken=Tt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}};var Dc=class{constructor(){this.kr=new wt(ot.Kr),this.qr=new wt(ot.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){let r=new ot(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new ot(e,t))}Qr(e,t){e.forEach(r=>this.removeReference(r,t))}Gr(e){let t=new te(new We([])),r=new ot(t,e),i=new ot(t,e+1),o=[];return this.qr.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let t=new te(new We([])),r=new ot(t,e),i=new ot(t,e+1),o=Ee();return this.qr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new ot(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ot=class{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return te.comparator(e.key,t.key)||Ie(e.Hr,t.Hr)}static Ur(e,t){return Ie(e.Hr,t.Hr)||te.comparator(e.key,t.key)}};var av=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new wt(ot.Kr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Ly(o,t,r,i);this.mutationQueue.push(s);for(let c of i)this.Jr=this.Jr.add(new ot(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(s)}lookupMutationBatch(e,t){return U.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return U.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?qv:this.Yn-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ot(t,0),i=new ot(t,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([r,i],s=>{let c=this.Zr(s.Hr);o.push(c)}),U.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wt(Ie);return t.forEach(i=>{let o=new ot(i,0),s=new ot(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,s],c=>{r=r.add(c.Hr)})}),U.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;te.isDocumentKey(o)||(o=o.child(""));let s=new ot(new te(o),0),c=new wt(Ie);return this.Jr.forEachWhile(l=>{let u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(c=c.add(l.Hr)),!0)},s),U.resolve(this.Yr(c))}Yr(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ke(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return U.forEach(t.mutations,i=>{let o=new ot(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,t){let r=new ot(t,0),i=this.Jr.firstAfterOrEqual(r);return U.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var cv=class{constructor(e){this.ti=e,this.docs=function(){return new Ke(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return U.resolve(r?r.document.mutableCopy():Sn.newInvalidDocument(t))}getEntries(e,t){let r=Sr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Sn.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Sr(),s=t.path,c=new te(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:u,value:{document:f}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||AF(MF(f),r)<=0||(i.has(f.key)||vf(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return U.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ne(9500)}ni(e,t){return U.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new lv(this)}getSize(e){return U.resolve(this.size)}},lv=class extends tv{constructor(e){super(),this.Mr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),U.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}};var uv=class{constructor(e){this.persistence=e,this.ri=new Tr(t=>Qv(t),Yv),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.ii=0,this.si=new Dc,this.targetCount=0,this.oi=Ec._r()}forEachTarget(e,t){return this.ri.forEach((r,i)=>t(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),U.resolve()}lr(e){this.ri.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.oi=new Ec(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.lr(t),U.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ri.forEach((s,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.ri.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),U.waitFor(o).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){let r=this.ri.get(t)||null;return U.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),U.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),U.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),U.resolve()}getMatchingKeysForTargetId(e,t){let r=this.si.jr(t);return U.resolve(r)}containsKey(e,t){return U.resolve(this.si.containsKey(t))}};var Qd=class{constructor(e,t){this._i={},this.overlays={},this.ai=new zv(0),this.ui=!1,this.ui=!0,this.ci=new sv,this.referenceDelegate=e(this),this.li=new uv(this),this.indexManager=new Yy,this.remoteDocumentCache=function(i){return new cv(i)}(r=>this.referenceDelegate.hi(r)),this.serializer=new Qy(t),this.Pi=new iv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ov,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new av(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){q("MemoryPersistence","Starting transaction:",e);let i=new dv(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(o=>this.referenceDelegate.Ii(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return U.or(Object.values(this._i).map(r=>()=>r.containsKey(e,t)))}},dv=class extends by{constructor(e){super(),this.currentSequenceNumber=e}},fv=class n{constructor(e){this.persistence=e,this.Ri=new Dc,this.Ai=null}static Vi(e){return new n(e)}get di(){if(this.Ai)return this.Ai;throw ne(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),U.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),U.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ti(){this.Ai=new Set}Ii(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.di,r=>{let i=te.fromPath(r);return this.mi(e,i).next(o=>{o||t.removeEntry(i,le.min())})}).next(()=>(this.Ai=null,t.apply(e)))}updateLimboDocument(e,t){return this.mi(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}hi(e){return 0}mi(e,t){return U.or([()=>U.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Yd=class n{constructor(e,t){this.persistence=e,this.fi=new Tr(r=>OF(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=PL(this,t)}static Vi(e,t){return new n(e,t)}Ti(){}Ii(e){return U.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}pr(e){let t=0;return this.mr(e,r=>{t++}).next(()=>t)}mr(e,t){return U.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(o=>o?U.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ni(e,s=>this.wr(e,s,t).next(c=>{c||(r++,o.removeEntry(s,le.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),U.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),U.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xd(e.data.value)),t}wr(e,t,r){return U.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.fi.get(t);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var hv=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=i}static Es(e,t){let r=Ee(),i=Ee();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var pv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var mv=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return $D()?8:PF(UD())>0?6:4}()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.gs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ps(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new pv;return this.ys(e,t,s).next(c=>{if(o.result=c,this.As)return this.ws(e,t,s,c.size)})}).next(()=>o.result)}ws(e,t,r,i){return r.documentReadCount<this.Vs?(rs()<=Me.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",is(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(rs()<=Me.DEBUG&&q("QueryEngine","Query:",is(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(rs()<=Me.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",is(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qn(t))):U.resolve())}gs(e,t){if(EI(t))return U.resolve(null);let r=Qn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=$d(t,null,"F"),r=Qn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ee(...o);return this.fs.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{let u=this.bs(t,c);return this.Ss(t,u,s,l.readTime)?this.gs(e,$d(t,null,"F")):this.Ds(e,u,t,l)}))})))}ps(e,t,r,i){return EI(t)||i.isEqual(le.min())?U.resolve(null):this.fs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ss(t,s,r,i)?U.resolve(null):(rs()<=Me.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),is(t)),this.Ds(e,s,t,xF(i,mc)).next(c=>c))})}bs(e,t){let r=new wt(MT(e));return t.forEach((i,o)=>{vf(e,o)&&(r=r.add(o))}),r}Ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ys(e,t,r){return rs()<=Me.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",is(t)),this.fs.getDocumentsMatchingQuery(e,t,zi.min(),r)}Ds(e,t,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Xv="LocalStore",NL=3e8,gv=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new Ke(Ie),this.Fs=new Tr(o=>Qv(o),Yv),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rv(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.vs))}};function OL(n,e,t,r){return new gv(n,e,t,r)}function ZT(n,e){return V(this,null,function*(){let t=ae(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Os(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],l=Ee();for(let u of i){s.push(u.batchId);for(let f of u.mutations)l=l.add(f.key)}for(let u of o){c.push(u.batchId);for(let f of u.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(r,l).next(u=>({Ns:u,removedBatchIds:s,addedBatchIds:c}))})})})}function kL(n,e){let t=ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.xs.newChangeBuffer({trackRemovals:!0});return function(c,l,u,f){let p=u.batch,v=p.keys(),_=U.resolve();return v.forEach(M=>{_=_.next(()=>f.getEntry(l,M)).next(O=>{let L=u.docVersions.get(M);ke(L!==null,48541),O.version.compareTo(L)<0&&(p.applyToRemoteDocument(O,u),O.isValidDocument()&&(O.setReadTime(u.commitVersion),f.addEntry(O)))})}),_.next(()=>c.mutationQueue.removeMutationBatch(l,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let l=Ee();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function JT(n){let e=ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.li.getLastRemoteSnapshotVersion(t))}function VL(n,e){let t=ae(n),r=e.snapshotVersion,i=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.xs.newChangeBuffer({trackRemovals:!0});i=t.vs;let c=[];e.targetChanges.forEach((f,p)=>{let v=i.get(p);if(!v)return;c.push(t.li.removeMatchingKeys(o,f.removedDocuments,p).next(()=>t.li.addMatchingKeys(o,f.addedDocuments,p)));let _=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(Tt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),i=i.insert(p,_),function(O,L,z){return O.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=NL?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(v,_,f)&&c.push(t.li.updateTargetData(o,_))});let l=Sr(),u=Ee();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(FL(o,s,e.documentUpdates).next(f=>{l=f.Bs,u=f.Ls})),!r.isEqual(le.min())){let f=t.li.getLastRemoteSnapshotVersion(o).next(p=>t.li.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(f)}return U.waitFor(c).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(t.vs=i,o))}function FL(n,e,t){let r=Ee(),i=Ee();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Sr();return t.forEach((c,l)=>{let u=o.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(c)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(c,l.readTime),s=s.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(c,l)):q(Xv,"Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)}),{Bs:s,Ls:i}})}function LL(n,e){let t=ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=qv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function jL(n,e){let t=ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.li.getTargetData(r,e).next(o=>o?(i=o,U.resolve(i)):t.li.allocateTargetId(r).next(s=>(i=new bc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r})}function yv(n,e,t){return V(this,null,function*(){let r=ae(n),i=r.vs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Is(s))throw s;q(Xv,`Failed to update sequence numbers for target ${e}: ${s}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)})}function kI(n,e,t){let r=ae(n),i=le.min(),o=Ee();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,f){let p=ae(l),v=p.Fs.get(f);return v!==void 0?U.resolve(p.vs.get(v)):p.li.getTargetData(u,f)}(r,s,Qn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(s,c.targetId).next(l=>{o=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:le.min(),t?o:Ee())).next(c=>(BL(r,JF(e),c),{documents:c,ks:o})))}function BL(n,e,t){let r=n.Ms.get(e)||le.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Ms.set(e,r)}var Zd=class{constructor(){this.activeTargetIds=iL()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var vv=class{constructor(){this.vo=new Zd,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Zd,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var _v=class{Mo(e){}shutdown(){}};var VI="ConnectivityMonitor",Jd=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){q(VI,"Network connectivity changed: AVAILABLE");for(let e of this.Lo)e(0)}Bo(){q(VI,"Network connectivity changed: UNAVAILABLE");for(let e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Sd=null;function wv(){return Sd===null?Sd=function(){return 268435456+Math.round(2147483648*Math.random())}():Sd++,"0x"+Sd.toString(16)}var my="RestConnection",UL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"},Cv=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Bd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=wv(),c=this.Qo(e,t.toUriEncodedString());q(my,`Sending RPC '${e}' ${s}:`,c,r);let l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(l,i,o);let{host:u}=new URL(c),f=_d(u);return this.zo(e,c,l,r,f).then(p=>(q(my,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Er(my,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}Go(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Qo(e,t){let r=UL[e],i=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}};var bv=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}};var Nt="WebChannelConnection",uc=(n,e,t)=>{n.listen(e,r=>{try{t(r)}catch(i){setTimeout(()=>{throw i},0)}})},Xd=class n extends Cv{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!n.c_){let e=dy();uc(e,uy.STAT_EVENT,t=>{t.stat===Dd.PROXY?q(Nt,"STAT_EVENT: detected buffering proxy"):t.stat===Dd.NOPROXY&&q(Nt,"STAT_EVENT: detected no buffering proxy")}),n.c_=!0}}zo(e,t,r,i,o){let s=wv();return new Promise((c,l)=>{let u=new cy;u.setWithCredentials(!0),u.listenOnce(ly.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case lc.NO_ERROR:let p=u.getResponseJson();q(Nt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case lc.TIMEOUT:q(Nt,`RPC '${e}' ${s} timed out`),l(new K(F.DEADLINE_EXCEEDED,"Request time out"));break;case lc.HTTP_ERROR:let v=u.getStatus();if(q(Nt,`RPC '${e}' ${s} failed with status:`,v,"response text:",u.getResponseText()),v>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);let M=_?.error;if(M&&M.status&&M.message){let O=function(z){let ee=z.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(ee)>=0?ee:F.UNKNOWN}(M.status);l(new K(O,M.message))}else l(new K(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new K(F.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{q(Nt,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);q(Nt,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",f,r,15)})}T_(e,t,r){let i=wv(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let u=o.join("");q(Nt,`Creating RPC '${e}' stream ${i}: ${u}`,c);let f=s.createWebChannel(u,c);this.I_(f);let p=!1,v=!1,_=new bv({Ho:M=>{v?q(Nt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(p||(q(Nt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),q(Nt,`RPC '${e}' stream ${i} sending:`,M),f.send(M))},Jo:()=>f.close()});return uc(f,ns.EventType.OPEN,()=>{v||(q(Nt,`RPC '${e}' stream ${i} transport opened.`),_.i_())}),uc(f,ns.EventType.CLOSE,()=>{v||(v=!0,q(Nt,`RPC '${e}' stream ${i} transport closed`),_.o_(),this.E_(f))}),uc(f,ns.EventType.ERROR,M=>{v||(v=!0,Er(Nt,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),_.o_(new K(F.UNAVAILABLE,"The operation could not be completed")))}),uc(f,ns.EventType.MESSAGE,M=>{if(!v){let O=M.data[0];ke(!!O,16349);let L=O,z=L?.error||L[0]?.error;if(z){q(Nt,`RPC '${e}' stream ${i} received error:`,z);let ee=z.status,ue=function(Et){let I=it[Et];if(I!==void 0)return BT(I)}(ee),St=z.message;ee==="NOT_FOUND"&&St.includes("database")&&St.includes("does not exist")&&St.includes(this.databaseId.database)&&Er(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),ue===void 0&&(ue=F.INTERNAL,St="Unknown error status: "+ee+" with message "+z.message),v=!0,_.o_(new K(ue,St)),f.close()}else q(Nt,`RPC '${e}' stream ${i} received:`,O),_.__(O)}}),n.u_(),setTimeout(()=>{_.s_()},0),_}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(t=>t===e)}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return fy()}};function $L(n){return new Xd(n)}function gy(){return typeof document<"u"?document:null}function Rc(n){return new zy(n,!0)}Xd.c_=!1;var ef=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=i,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}};var FI="PersistentStream",tf=class{constructor(e,t,r,i,o,s,c,l){this.Ci=e,this.b_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ef(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return V(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}k_(){return V(this,null,function*(){if(this.O_())return this.close(0)})}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return V(this,null,function*(){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(br(t.toString()),br("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.t_(t)})}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new K(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>V(this,null,function*(){this.state=0,this.start()}))}z_(e){return q(FI,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget(()=>this.D_===e?t():(q(FI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Ev=class extends tf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=wL(this.serializer,e),r=function(o){if(!("targetChange"in o))return le.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?le.min():s.readTime?Yn(s.readTime):le.min()}(e);return this.listener.J_(t,r)}Z_(e){let t={};t.database=Ky(this.serializer),t.addTarget=function(o,s){let c,l=s.target;if(c=ky(l)?{documents:EL(o,l)}:{query:DL(o,l).ft},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=UT(o,s.resumeToken);let u=qy(o,s.expectedCount);u!==null&&(c.expectedCount=u)}else if(s.snapshotVersion.compareTo(le.min())>0){c.readTime=Wd(o,s.snapshotVersion.toTimestamp());let u=qy(o,s.expectedCount);u!==null&&(c.expectedCount=u)}return c}(this.serializer,e);let r=TL(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){let t={};t.database=Ky(this.serializer),t.removeTarget=e,this.K_(t)}},Dv=class extends tf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=bL(e.writeResults,e.commitTime),r=Yn(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=Ky(this.serializer),this.K_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>CL(this.serializer,r))};this.K_(t)}};var Iv=class{},Tv=class extends Iv{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,Gy(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(F.UNKNOWN,o.toString())})}jo(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.jo(e,Gy(t,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(F.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}};function HL(n,e,t,r){return new Tv(n,e,t,r)}var Sv=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(br(t),this.aa=!1):q("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Yi="RemoteStore",xv=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo(s=>{r.enqueueAndForget(()=>V(this,null,function*(){Xi(this)&&(q(Yi,"Restarting streams for network reachability change."),yield function(l){return V(this,null,function*(){let u=ae(l);u.Ea.add(4),yield Pc(u),u.Va.set("Unknown"),u.Ea.delete(4),yield _f(u)})}(this))}))}),this.Va=new Sv(r,i)}};function _f(n){return V(this,null,function*(){if(Xi(n))for(let e of n.Ra)yield e(!0)})}function Pc(n){return V(this,null,function*(){for(let e of n.Ra)yield e(!1)})}function XT(n,e){let t=ae(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),r_(t)?n_(t):Ts(t).O_()&&t_(t,e))}function e_(n,e){let t=ae(n),r=Ts(t);t.Ia.delete(e),r.O_()&&eS(t,e),t.Ia.size===0&&(r.O_()?r.L_():Xi(t)&&t.Va.set("Unknown"))}function t_(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ts(n).Z_(e)}function eS(n,e){n.da.$e(e),Ts(n).X_(e)}function n_(n){n.da=new Hy({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ts(n).start(),n.Va.ua()}function r_(n){return Xi(n)&&!Ts(n).x_()&&n.Ia.size>0}function Xi(n){return ae(n).Ea.size===0}function tS(n){n.da=void 0}function zL(n){return V(this,null,function*(){n.Va.set("Online")})}function qL(n){return V(this,null,function*(){n.Ia.forEach((e,t)=>{t_(n,e)})})}function GL(n,e){return V(this,null,function*(){tS(n),r_(n)?(n.Va.ha(e),n_(n)):n.Va.set("Unknown")})}function WL(n,e,t){return V(this,null,function*(){if(n.Va.set("Online"),e instanceof qd&&e.state===2&&e.cause)try{yield function(i,o){return V(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i.Ia.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i.Ia.delete(c),i.da.removeTarget(c))})}(n,e)}catch(r){q(Yi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield nf(n,r)}else if(e instanceof ls?n.da.Xe(e):e instanceof zd?n.da.st(e):n.da.tt(e),!t.isEqual(le.min()))try{let r=yield JT(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let c=o.da.Tt(s);return c.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let f=o.Ia.get(u);f&&o.Ia.set(u,f.withResumeToken(l.resumeToken,s))}}),c.targetMismatches.forEach((l,u)=>{let f=o.Ia.get(l);if(!f)return;o.Ia.set(l,f.withResumeToken(Tt.EMPTY_BYTE_STRING,f.snapshotVersion)),eS(o,l);let p=new bc(f.target,l,u,f.sequenceNumber);t_(o,p)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){q(Yi,"Failed to raise snapshot:",r),yield nf(n,r)}})}function nf(n,e,t){return V(this,null,function*(){if(!Is(e))throw e;n.Ea.add(1),yield Pc(n),n.Va.set("Offline"),t||(t=()=>JT(n.localStore)),n.asyncQueue.enqueueRetryable(()=>V(null,null,function*(){q(Yi,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield _f(n)}))})}function nS(n,e){return e().catch(t=>nf(n,t,e))}function wf(n){return V(this,null,function*(){let e=ae(n),t=Xr(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qv;for(;KL(e);)try{let i=yield LL(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,QL(e,i)}catch(i){yield nf(e,i)}rS(e)&&iS(e)})}function KL(n){return Xi(n)&&n.Ta.length<10}function QL(n,e){n.Ta.push(e);let t=Xr(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function rS(n){return Xi(n)&&!Xr(n).x_()&&n.Ta.length>0}function iS(n){Xr(n).start()}function YL(n){return V(this,null,function*(){Xr(n).ra()})}function ZL(n){return V(this,null,function*(){let e=Xr(n);for(let t of n.Ta)e.ea(t.mutations)})}function JL(n,e,t){return V(this,null,function*(){let r=n.Ta.shift(),i=jy.from(r,e,t);yield nS(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield wf(n)})}function XL(n,e){return V(this,null,function*(){e&&Xr(n).Y_&&(yield function(r,i){return V(this,null,function*(){if(function(s){return dL(s)&&s!==F.ABORTED}(i.code)){let o=r.Ta.shift();Xr(r).B_(),yield nS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield wf(r)}})}(n,e)),rS(n)&&iS(n)})}function LI(n,e){return V(this,null,function*(){let t=ae(n);t.asyncQueue.verifyOperationInProgress(),q(Yi,"RemoteStore received new credentials");let r=Xi(t);t.Ea.add(3),yield Pc(t),r&&t.Va.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield _f(t)})}function e2(n,e){return V(this,null,function*(){let t=ae(n);e?(t.Ea.delete(2),yield _f(t)):e||(t.Ea.add(2),yield Pc(t),t.Va.set("Unknown"))})}function Ts(n){return n.ma||(n.ma=function(t,r,i){let o=ae(t);return o.sa(),new Ev(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:zL.bind(null,n),Yo:qL.bind(null,n),t_:GL.bind(null,n),J_:WL.bind(null,n)}),n.Ra.push(e=>V(null,null,function*(){e?(n.ma.B_(),r_(n)?n_(n):n.Va.set("Unknown")):(yield n.ma.stop(),tS(n))}))),n.ma}function Xr(n){return n.fa||(n.fa=function(t,r,i){let o=ae(t);return o.sa(),new Dv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:YL.bind(null,n),t_:XL.bind(null,n),ta:ZL.bind(null,n),na:JL.bind(null,n)}),n.Ra.push(e=>V(null,null,function*(){e?(n.fa.B_(),yield wf(n)):(yield n.fa.stop(),n.Ta.length>0&&(q(Yi,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}var Mv=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,c=new n(e,t,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function i_(n,e){if(br("AsyncQueue",`${e}: ${n}`),Is(n))return new K(F.UNAVAILABLE,`${e}: ${n}`);throw n}var Ic=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||te.comparator(t.key,r.key):(t,r)=>te.comparator(t.key,r.key),this.keyedMap=dc(),this.sortedSet=new Ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var rf=class{constructor(){this.ga=new Ke(te.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ne(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Zi=class n{constructor(e,t,r,i,o,s,c,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new n(e,t,Ic.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Av=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}},Rv=class{constructor(){this.queries=jI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=ae(t),o=i.queries;i.queries=jI(),o.forEach((s,c)=>{for(let l of c.ba)l.onError(r)})})(this,new K(F.ABORTED,"Firestore shutting down"))}};function jI(){return new Tr(n=>xT(n),yf)}function oS(n,e){return V(this,null,function*(){let t=ae(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.Da()&&(r=2):(o=new Av,r=e.Da()?0:1);try{switch(r){case 0:o.wa=yield t.onListen(i,!0);break;case 1:o.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let c=i_(s,`Initialization of query '${is(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.ba.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&o_(t)})}function sS(n,e){return V(this,null,function*(){let t=ae(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.ba.indexOf(e);s>=0&&(o.ba.splice(s,1),o.ba.length===0?i=e.Da()?0:1:!o.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function t2(n,e){let t=ae(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let c of s.ba)c.Fa(i)&&(r=!0);s.wa=i}}r&&o_(t)}function n2(n,e,t){let r=ae(n),i=r.queries.get(e);if(i)for(let o of i.ba)o.onError(t);r.queries.delete(e)}function o_(n){n.Ca.forEach(e=>{e.next()})}var Pv,BI;(BI=Pv||(Pv={})).Ma="default",BI.Cache="cache";var of=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Zi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Zi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Pv.Cache}};var sf=class{constructor(e){this.key=e}},af=class{constructor(e){this.key=e}},Nv=class{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ee(),this.mutatedKeys=Ee(),this.eu=MT(e),this.tu=new Ic(this.eu)}get nu(){return this.Za}ru(e,t){let r=t?t.iu:new rf,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,c=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let v=i.get(f),_=vf(this.query,p)?p:null,M=!!v&&this.mutatedKeys.has(v.key),O=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),L=!1;v&&_?v.data.isEqual(_.data)?M!==O&&(r.track({type:3,doc:_}),L=!0):this.su(v,_)||(r.track({type:2,doc:_}),L=!0,(l&&this.eu(_,l)>0||u&&this.eu(_,u)<0)&&(c=!0)):!v&&_?(r.track({type:0,doc:_}),L=!0):v&&!_&&(r.track({type:1,doc:v}),L=!0,(l||u)&&(c=!0)),L&&(_?(s=s.add(_),o=O?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Ss:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((f,p)=>function(_,M){let O=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Vt:L})}};return O(_)-O(M)}(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(r),i=i??!1;let c=t&&!i?this._u():[],l=this.Ya.size===0&&this.current&&!i?1:0,u=l!==this.Xa;return this.Xa=l,s.length!==0||u?{snapshot:new Zi(this.query,e.tu,o,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new rf,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Za=this.Za.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Za=this.Za.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=Ee(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});let t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new af(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new sf(r))}),t}cu(e){this.Za=e.ks,this.Ya=Ee();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Zi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},s_="SyncEngine",Ov=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},kv=class{constructor(e){this.key=e,this.hu=!1}},Vv=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Tr(c=>xT(c),yf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ke(te.comparator),this.Au=new Map,this.Vu=new Dc,this.du={},this.mu=new Map,this.fu=Ec.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function r2(n,e,t=!0){return V(this,null,function*(){let r=fS(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=yield aS(r,e,t,!0),i})}function i2(n,e){return V(this,null,function*(){let t=fS(n);yield aS(t,e,!0,!1)})}function aS(n,e,t,r){return V(this,null,function*(){let i=yield jL(n.localStore,Qn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),c;return r&&(c=yield o2(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&XT(n.remoteStore,i),c})}function o2(n,e,t,r,i){return V(this,null,function*(){n.pu=(p,v,_)=>function(O,L,z,ee){return V(this,null,function*(){let ue=L.view.ru(z);ue.Ss&&(ue=yield kI(O.localStore,L.query,!1).then(({documents:I})=>L.view.ru(I,ue)));let St=ee&&ee.targetChanges.get(L.targetId),pn=ee&&ee.targetMismatches.get(L.targetId)!=null,Et=L.view.applyChanges(ue,O.isPrimaryClient,St,pn);return $I(O,L.targetId,Et.au),Et.snapshot})}(n,p,v,_);let o=yield kI(n.localStore,e,!0),s=new Nv(e,o.ks),c=s.ru(o.documents),l=Cc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(c,n.isPrimaryClient,l);$I(n,t,u.au);let f=new Ov(e,t,s);return n.Tu.set(e,f),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot})}function s2(n,e,t){return V(this,null,function*(){let r=ae(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!yf(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield yv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&e_(r.remoteStore,i.targetId),Fv(r,i.targetId)}).catch(Ds))):(Fv(r,i.targetId),yield yv(r.localStore,i.targetId,!0))})}function a2(n,e){return V(this,null,function*(){let t=ae(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),e_(t.remoteStore,r.targetId))})}function c2(n,e,t){return V(this,null,function*(){let r=m2(n);try{let i=yield function(s,c){let l=ae(s),u=Xe.now(),f=c.reduce((_,M)=>_.add(M.key),Ee()),p,v;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let M=Sr(),O=Ee();return l.xs.getEntries(_,f).next(L=>{M=L,M.forEach((z,ee)=>{ee.isValidDocument()||(O=O.add(z))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,M)).next(L=>{p=L;let z=[];for(let ee of c){let ue=uL(ee,p.get(ee.key).overlayedDocument);ue!=null&&z.push(new xr(ee.key,ue,CT(ue.value.mapValue),Zr.exists(!0)))}return l.mutationQueue.addMutationBatch(_,u,z,c)}).next(L=>{v=L;let z=L.applyToLocalDocumentSet(p,O);return l.documentOverlayCache.saveOverlays(_,L.batchId,z)})}).then(()=>({batchId:v.batchId,changes:RT(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,l){let u=s.du[s.currentUser.toKey()];u||(u=new Ke(Ie)),u=u.insert(c,l),s.du[s.currentUser.toKey()]=u}(r,i.batchId,t),yield Nc(r,i.changes),yield wf(r.remoteStore)}catch(i){let o=i_(i,"Failed to persist write");t.reject(o)}})}function cS(n,e){return V(this,null,function*(){let t=ae(n);try{let r=yield VL(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?ke(s.hu,14607):i.removedDocuments.size>0&&(ke(s.hu,42227),s.hu=!1))}),yield Nc(t,r,e)}catch(r){yield Ds(r)}})}function UI(n,e,t){let r=ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(s,c){let l=ae(s);l.onlineState=c;let u=!1;l.queries.forEach((f,p)=>{for(let v of p.ba)v.va(c)&&(u=!0)}),u&&o_(l)}(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function l2(n,e,t){return V(this,null,function*(){let r=ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Ke(te.comparator);s=s.insert(o,Sn.newNoDocument(o,le.min()));let c=Ee().add(o),l=new Hd(le.min(),new Map,new Ke(Ie),s,c);yield cS(r,l),r.Ru=r.Ru.remove(o),r.Au.delete(e),a_(r)}else yield yv(r.localStore,e,!1).then(()=>Fv(r,e,t)).catch(Ds)})}function u2(n,e){return V(this,null,function*(){let t=ae(n),r=e.batch.batchId;try{let i=yield kL(t.localStore,e);uS(t,r,null),lS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Nc(t,i)}catch(i){yield Ds(i)}})}function d2(n,e,t){return V(this,null,function*(){let r=ae(n);try{let i=yield function(s,c){let l=ae(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return l.mutationQueue.lookupMutationBatch(u,c).next(p=>(ke(p!==null,37113),f=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>l.localDocuments.getDocuments(u,f))})}(r.localStore,e);uS(r,e,t),lS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Nc(r,i)}catch(i){yield Ds(i)}})}function lS(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function uS(n,e,t){let r=ae(n),i=r.du[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function Fv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach(r=>{n.Vu.containsKey(r)||dS(n,r)})}function dS(n,e){n.Eu.delete(e.path.canonicalString());let t=n.Ru.get(e);t!==null&&(e_(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),a_(n))}function $I(n,e,t){for(let r of t)r instanceof sf?(n.Vu.addReference(r.key,e),f2(n,r)):r instanceof af?(q(s_,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||dS(n,r.key)):ne(19791,{wu:r})}function f2(n,e){let t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(q(s_,"New document in limbo: "+t),n.Eu.add(r),a_(n))}function a_(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new te(We.fromString(e)),r=n.fu.next();n.Au.set(r,new kv(t)),n.Ru=n.Ru.insert(t,r),XT(n.remoteStore,new bc(Qn(Ac(t.path)),r,"TargetPurposeLimboResolution",zv.ce))}}function Nc(n,e,t){return V(this,null,function*(){let r=ae(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((c,l)=>{s.push(r.pu(l,e,t).then(u=>{if((u||t)&&r.isPrimaryClient){let f=u?!u.fromCache:t?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);let f=hv.Es(l.targetId,u);o.push(f)}}))}),yield Promise.all(s),r.Pu.J_(i),yield function(l,u){return V(this,null,function*(){let f=ae(l);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(u,v=>U.forEach(v.Ts,_=>f.persistence.referenceDelegate.addReference(p,v.targetId,_)).next(()=>U.forEach(v.Is,_=>f.persistence.referenceDelegate.removeReference(p,v.targetId,_)))))}catch(p){if(!Is(p))throw p;q(Xv,"Failed to update sequence numbers: "+p)}for(let p of u){let v=p.targetId;if(!p.fromCache){let _=f.vs.get(v),M=_.snapshotVersion,O=_.withLastLimboFreeSnapshotVersion(M);f.vs=f.vs.insert(v,O)}}})}(r.localStore,o))})}function h2(n,e){return V(this,null,function*(){let t=ae(n);if(!t.currentUser.isEqual(e)){q(s_,"User change. New user:",e.toKey());let r=yield ZT(t.localStore,e);t.currentUser=e,function(o,s){o.mu.forEach(c=>{c.forEach(l=>{l.reject(new K(F.CANCELLED,s))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Nc(t,r.Ns)}})}function p2(n,e){let t=ae(n),r=t.Au.get(e);if(r&&r.hu)return Ee().add(r.key);{let i=Ee(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let c=t.Tu.get(s);i=i.unionWith(c.view.nu)}return i}}function fS(n){let e=ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=cS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=l2.bind(null,e),e.Pu.J_=t2.bind(null,e.eventManager),e.Pu.yu=n2.bind(null,e.eventManager),e}function m2(n){let e=ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=u2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=d2.bind(null,e),e}var c_=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return V(this,null,function*(){this.serializer=Rc(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return OL(this.persistence,new mv,t.initialUser,this.serializer)}Cu(t){return new Qd(fv.Vi,this.serializer)}Du(t){return new vv}terminate(){return V(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),cf=class extends c_{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ke(this.persistence.referenceDelegate instanceof Yd,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Xy(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new Qd(r=>Yd.Vi(r,t),this.serializer)}};var hS=(()=>{class n{initialize(t,r){return V(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>UI(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=h2.bind(null,this.syncEngine),yield e2(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Rv}()}createDatastore(t){let r=Rc(t.databaseInfo.databaseId),i=$L(t.databaseInfo);return HL(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,c,l){return new xv(i,o,s,c,l)}(this.localStore,this.datastore,t.asyncQueue,r=>UI(this.syncEngine,r,0),function(){return Jd.v()?new Jd:new _v}())}createSyncEngine(t,r){return function(o,s,c,l,u,f,p){let v=new Vv(o,s,c,l,u,f);return p&&(v.gu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return V(this,null,function*(){yield function(r){return V(this,null,function*(){let i=ae(r);q(Yi,"RemoteStore shutting down."),i.Ea.add(5),yield Pc(i),i.Aa.shutdown(),i.Va.set("Unknown")})}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var lf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ei="FirestoreClient",Lv=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=i,this.user=_t.UNAUTHENTICATED,this.clientId=Hi.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>V(this,null,function*(){q(ei,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(q(ei,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>V(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=i_(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function yy(n,e){return V(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),q(ei,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>V(null,null,function*(){r.isEqual(i)||(yield ZT(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function HI(n,e){return V(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield g2(n);q(ei,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>LI(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>LI(e.remoteStore,i)),n._onlineComponents=e})}function g2(n){return V(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){q(ei,"Using user provided OfflineComponentProvider");try{yield yy(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Er("Error using user provided cache. Falling back to memory cache: "+t),yield yy(n,new c_)}}else q(ei,"Using default OfflineComponentProvider"),yield yy(n,new cf(void 0));return n._offlineComponents})}function pS(n){return V(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(q(ei,"Using user provided OnlineComponentProvider"),yield HI(n,n._uninitializedComponentsProvider._online)):(q(ei,"Using default OnlineComponentProvider"),yield HI(n,new hS))),n._onlineComponents})}function y2(n){return pS(n).then(e=>e.syncEngine)}function jv(n){return V(this,null,function*(){let e=yield pS(n),t=e.eventManager;return t.onListen=r2.bind(null,e.syncEngine),t.onUnlisten=s2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=i2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=a2.bind(null,e.syncEngine),t})}function mS(n,e,t,r){let i=new lf(r),o=new of(e,i,t);return n.asyncQueue.enqueueAndForget(()=>V(null,null,function*(){return oS(yield jv(n),o)})),()=>{i.Nu(),n.asyncQueue.enqueueAndForget(()=>V(null,null,function*(){return sS(yield jv(n),o)}))}}function gS(n,e,t={}){let r=new Wn;return n.asyncQueue.enqueueAndForget(()=>V(null,null,function*(){return function(o,s,c,l,u){let f=new lf({next:v=>{f.Nu(),s.enqueueAndForget(()=>sS(o,p));let _=v.docs.has(c);!_&&v.fromCache?u.reject(new K(F.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&v.fromCache&&l&&l.source==="server"?u.reject(new K(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(v)},error:v=>u.reject(v)}),p=new of(Ac(c.path),f,{includeMetadataChanges:!0,Ka:!0});return oS(o,p)}(yield jv(n),n.asyncQueue,e,t,r)})),r.promise}function yS(n,e){let t=new Wn;return n.asyncQueue.enqueueAndForget(()=>V(null,null,function*(){return c2(yield y2(n),e,t)})),t.promise}function vS(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var v2="ComponentProvider",zI=new Map;function _2(n,e,t,r,i){return new Ey(n,e,t,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,vS(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}var _S="firestore.googleapis.com",qI=!0,uf=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new K(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_S,this.ssl=qI}else this.host=e.host,this.ssl=e.ssl??qI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=YT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<RL)throw new K(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vS(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Tc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Pd;switch(r.type){case"firstParty":return new wy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return V(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=zI.get(t);r&&(q(v2,"Removing Datastore"),zI.delete(t),r.terminate())}(this),Promise.resolve()}};function wS(n,e,t,r={}){n=er(n,Tc);let i=_d(e),o=n._getSettings(),s=G(N({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;i&&(LD(`https://${c}`),BD("Firestore",!0)),o.host!==_S&&o.host!==c&&Er("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=G(N({},o),{host:c,ssl:i,emulatorOptions:r});if(!Fi(l,s)&&(n._setSettings(l),r.mockUserToken)){let u,f;if(typeof r.mockUserToken=="string")u=r.mockUserToken,f=_t.MOCK_USER;else{u=jD(r.mockUserToken,n._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new K(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new _t(p)}n._authCredentials=new vy(new Rd(u,f))}}var _s=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ct=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Es(t,n._jsonSchema))return new n(e,r||null,new te(We.fromString(t.referencePath)))}};Ct._jsonSchemaVersion="firestore/documentReference/1.0",Ct._jsonSchema={type:Je("string",Ct._jsonSchemaVersion),referencePath:Je("string")};var ws=class n extends _s{constructor(e,t,r){super(e,t,Ac(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new te(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Ss(n,e,...t){if(n=Li(n),arguments.length===1&&(e=Hi.newId()),SF("doc","path",e),n instanceof Tc){let r=We.fromString(e,...t);return dI(r),new Ct(n,null,new te(r))}{if(!(n instanceof Ct||n instanceof ws))throw new K(F.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(We.fromString(e,...t));return dI(r),new Ct(n.firestore,n instanceof ws?n.converter:null,new te(r))}}var GI="AsyncQueue",df=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ef(this,"async_queue_retry"),this._c=()=>{let r=gy();r&&q(GI,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=gy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=gy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Wn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}lc(){return V(this,null,function*(){if(this.Yu.length!==0){try{yield this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Is(e))throw e;q(GI,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,br("INTERNAL UNHANDLED ERROR: ",WI(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=Mv.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&ne(47125,{Pc:WI(this.nc)})}verifyOperationInProgress(){}Tc(){return V(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function WI(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var Mr=class extends Tc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new df,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return V(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new df(e),this._firestoreClient=void 0,yield e}})}};function l_(n,e){let t=typeof n=="object"?n:oI(),r=typeof n=="string"?n:e||Bd,i=nI(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=FD("firestore");o&&wS(i,...o)}return i}function Oc(n){if(n._terminated)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||w2(n),n._firestoreClient}function w2(n){let e=n._freezeSettings(),t=_2(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Lv(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(n._componentsProvider))}var Zn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Tt.fromBase64String(e))}catch(t){throw new K(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Es(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Zn._jsonSchemaVersion="firestore/bytes/1.0",Zn._jsonSchema={type:Je("string",Zn._jsonSchemaVersion),bytes:Je("string")};var Cs=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new K(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Sc=class{constructor(e){this._methodName=e}};var Cr=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new K(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new K(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Es(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Cr._jsonSchemaVersion="firestore/geoPoint/1.0",Cr._jsonSchema={type:Je("string",Cr._jsonSchemaVersion),latitude:Je("number"),longitude:Je("number")};var Jn=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Es(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new K(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Jn._jsonSchemaVersion="firestore/vectorValue/1.0",Jn._jsonSchema={type:Je("string",Jn._jsonSchemaVersion),vectorValues:Je("object")};var C2=/^__.*__$/,Bv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new xr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qi(e,this.data,t,this.fieldTransforms)}};function CS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{dataSource:n})}}var Uv=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new n(N(N({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){let t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){let t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return ff(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(CS(this.dataSource)&&C2.test(e))throw this.createError('Document fields cannot begin and end with "__"')}},$v=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Rc(e)}createContext(e,t,r,i=!1){return new Uv({dataSource:e,methodName:t,targetDoc:r,path:Wt.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function bS(n){let e=n._freezeSettings(),t=Rc(n._databaseId);return new $v(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ES(n,e,t,r,i,o={}){let s=n.createContext(o.merge||o.mergeFields?2:0,e,t,i);SS("Data must be an object, but it was:",s,r);let c=IS(r,s),l,u;if(o.merge)l=new Gn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let v=Cf(e,p,t);if(!s.contains(v))throw new K(F.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);E2(f,v)||f.push(v)}l=new Gn(f),u=s.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=s.fieldTransforms;return new Bv(new fn(c),l,u)}function DS(n,e){if(TS(n=Li(n)))return SS("Unsupported field value:",e,n),IS(n,e);if(n instanceof Sc)return function(r,i){if(!CS(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let c of r){let l=DS(c,i.childContextForArray(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Li(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Xe.fromDate(r);return{timestampValue:Wd(i.serializer,o)}}if(r instanceof Xe){let o=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wd(i.serializer,o)}}if(r instanceof Cr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zn)return{bytesValue:UT(i.serializer,r._byteString)};if(r instanceof Ct){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Jv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Jn)return function(s,c){let l=s instanceof Jn?s.toArray():s;return{mapValue:{fields:{[Gv]:{stringValue:Wv},[ds]:{arrayValue:{values:l.map(f=>{if(typeof f!="number")throw c.createError("VectorValues must only contain numeric values.");return Zv(c.serializer,f)})}}}}}}(r,i);if(KT(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${hf(r)}`)}(n,e)}function IS(n,e){let t={};return fT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ji(n,(r,i)=>{let o=DS(i,e.childContextForField(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function TS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Xe||n instanceof Cr||n instanceof Zn||n instanceof Ct||n instanceof Sc||n instanceof Jn||KT(n))}function SS(n,e,t){if(!TS(t)||!ZI(t)){let r=hf(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function Cf(n,e,t){if((e=Li(e))instanceof Cs)return e._internalPath;if(typeof e=="string")return xS(n,e);throw ff("Field path arguments must be of type string or ",n,!1,void 0,t)}var b2=new RegExp("[~\\*/\\[\\]]");function xS(n,e,t){if(e.search(b2)>=0)throw ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cs(...e.split("."))._internalPath}catch{throw ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ff(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new K(F.INVALID_ARGUMENT,c+n+l)}function E2(n,e){return n.some(t=>t.isEqual(e))}var xc=class{convertValue(e,t="none"){switch(Jr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ji(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[ds].arrayValue?.values?.map(r=>$e(r.doubleValue));return new Jn(t)}convertGeoPoint(e){return new Cr($e(e.latitude),$e(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=gf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(yc(e));default:return null}}convertTimestamp(e){let t=Dr(e);return new Xe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=We.fromString(e);ke(WT(r),9688,{name:e});let i=new vc(r.get(1),r.get(3)),o=new te(r.popFirst(5));return i.isEqual(t)||br(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};var Mc=class extends xc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,t)}};var MS="@firebase/firestore",AS="4.11.0";function RS(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var bf=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new u_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let t=this._document.data.field(Cf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},u_=class extends bf{data(){return super.data()}};function S2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new K(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function x2(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var eo=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},to=class n extends bf{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new xs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Cf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};to._jsonSchemaVersion="firestore/documentSnapshot/1.0",to._jsonSchema={type:Je("string",to._jsonSchemaVersion),bundleSource:Je("string","DocumentSnapshot"),bundleName:Je("string"),bundle:Je("string")};var xs=class extends to{data(e={}){return super.data(e)}},Ms=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new eo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new xs(this._firestore,this._userDataWriter,r.key,r,new eo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new K(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let l=new xs(i._firestore,i._userDataWriter,c.doc.key,c.doc,new eo(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let l=new xs(i._firestore,i._userDataWriter,c.doc.key,c.doc,new eo(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,f=-1;return c.type!==0&&(u=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),f=s.indexOf(c.doc.key)),{type:M2(c.type),doc:l,oldIndex:u,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Hi.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function M2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:n})}}Ms._jsonSchemaVersion="firestore/querySnapshot/1.0",Ms._jsonSchema={type:Je("string",Ms._jsonSchemaVersion),bundleSource:Je("string","QuerySnapshot"),bundleName:Je("string"),bundle:Je("string")};function PS(n){n=er(n,Ct);let e=er(n.firestore,Mr),t=Oc(e);return gS(t,n._key).then(r=>kS(e,n,r))}function NS(n,e,t){n=er(n,Ct);let r=er(n.firestore,Mr),i=x2(n.converter,e,t),o=bS(r);return A2(r,[ES(o,"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Zr.none())])}function OS(n,...e){n=Li(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||RS(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(RS(e[r])){let u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let o,s,c;if(n instanceof Ct)s=er(n.firestore,Mr),c=Ac(n._key.path),o={next:u=>{e[r]&&e[r](kS(s,n,u))},error:e[r+1],complete:e[r+2]};else{let u=er(n,_s);s=er(u.firestore,Mr),c=u._query;let f=new Mc(s);o={next:p=>{e[r]&&e[r](new Ms(s,f,u,p))},error:e[r+1],complete:e[r+2]},S2(n._query)}let l=Oc(s);return mS(l,c,i,o)}function A2(n,e){let t=Oc(n);return yS(t,e)}function kS(n,e,t){let r=t.docs.get(e._key),i=new Mc(n);return new to(n,i,e._key,r,new eo(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){KI(iI),ac(new yr("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new Mr(new Nd(r.getProvider("auth-internal")),new kd(s,r.getProvider("app-check-internal")),yT(s,i),s);return o=N({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Yr(MS,AS,e),Yr(MS,AS,"esm2020")})();var VS={apiKey:"YOUR_API_KEY",authDomain:"YOUR_PROJECT_ID.firebaseapp.com",projectId:"YOUR_PROJECT_ID",storageBucket:"YOUR_PROJECT_ID.appspot.com",messagingSenderId:"YOUR_MESSAGING_SENDER_ID",appId:"YOUR_APP_ID"},Ef=class n{constructor(){this.app=null;this.db=null;this.unsubscribe=null;this.isInitialized=!1}initialize(){if(!this.isInitialized)try{let e=this.getFirebaseConfig();if(!e||!e.projectId||e.projectId==="YOUR_PROJECT_ID"){console.warn("Firebase not configured. Using localStorage only.");return}this.app=sy(e),this.db=l_(this.app),this.isInitialized=!0}catch(e){console.error("Firebase initialization error:",e)}}getFirebaseConfig(){let e=localStorage.getItem("firebase-config");if(e)try{return JSON.parse(e)}catch{return VS}return VS}setFirebaseConfig(e){localStorage.setItem("firebase-config",JSON.stringify(e)),this.isInitialized=!1,this.initialize()}saveApartments(e,t){return V(this,null,function*(){if(!this.db||!this.isInitialized)throw new Error("Firebase not initialized");try{let r=Ss(this.db,"users",t);yield NS(r,{apartments:e,lastUpdated:new Date().toISOString()})}catch(r){throw console.error("Error saving to Firebase:",r),r}})}loadApartments(e){return V(this,null,function*(){if(!this.db||!this.isInitialized)return null;try{let t=Ss(this.db,"users",e),r=yield PS(t);return r.exists()&&r.data().apartments||null}catch(t){return console.error("Error loading from Firebase:",t),null}})}subscribeToApartments(e,t){if(!(!this.db||!this.isInitialized)){this.unsubscribe&&this.unsubscribe();try{let r=Ss(this.db,"users",e);this.unsubscribe=OS(r,i=>{if(i.exists()){let o=i.data();t(o.apartments||[])}})}catch(r){console.error("Error subscribing to Firebase:",r)}}}unsubscribeFromApartments(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)}isConfigured(){return this.isInitialized&&this.db!==null}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}};var FS="apartment-manager-user-id",d_="cloud-sync-enabled",Df=class n{constructor(e){this.firebase=e;this.syncEnabled=W(this.loadSyncEnabled());this.userId=this.getOrCreateUserId();this.isSyncing=!1;this.syncEnabled$=this.syncEnabled.asReadonly();this.firebase.initialize(),hr(()=>{this.syncEnabled()?this.setupRealtimeSync():this.firebase.unsubscribeFromApartments()})}getOrCreateUserId(){let e=localStorage.getItem(FS);return e||(e=yd(),localStorage.setItem(FS,e)),e}loadSyncEnabled(){return localStorage.getItem(d_)==="true"}enableSync(e){e&&this.firebase.setFirebaseConfig(e),this.syncEnabled.set(!0),localStorage.setItem(d_,"true")}disableSync(){this.syncEnabled.set(!1),localStorage.setItem(d_,"false"),this.firebase.unsubscribeFromApartments()}syncToCloud(e){return V(this,null,function*(){if(!(!this.syncEnabled()||this.isSyncing)&&this.firebase.isConfigured()){this.isSyncing=!0;try{yield this.firebase.saveApartments(e,this.userId)}catch(t){console.error("Cloud sync error:",t)}finally{this.isSyncing=!1}}})}syncFromCloud(){return V(this,null,function*(){if(!this.syncEnabled()||!this.firebase.isConfigured())return null;try{return yield this.firebase.loadApartments(this.userId)}catch(e){return console.error("Cloud load error:",e),null}})}setupRealtimeSync(){this.firebase.isConfigured()&&this.firebase.subscribeToApartments(this.userId,e=>{if(!this.isSyncing&&e.length>0){let t=new CustomEvent("cloud-sync-update",{detail:e});window.dispatchEvent(t)}})}getUserId(){return this.userId}static{this.\u0275fac=function(t){return new(t||n)(re(Ef))}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}};var kc=P0("App",{web:()=>import("./chunk-UD7QDXYL.js").then(n=>new n.AppWeb)});var LS="https://accounts.google.com/gsi/client",P2="https://accounts.google.com/o/oauth2/v2/auth",jS="https://www.googleapis.com/auth/drive.file",f_="part-manager.json",h_="gdrive-file-id",p_="gdrive-client-id",m_="gdrive-access-token",g_="gdrive_oauth_callback",Vc="gdrive_code_verifier",N2="https://oauth2.googleapis.com/token",O2="838239311300-ji616dlcecp6upb9417t6jf0agqh7mt0.apps.googleusercontent.com",y_="gdrive-native-redirect-uri",BS="https://0x20cello.github.io/apt-manager/oauth-redirect",US="com.apartmentmanager.app",v_="gdrive-config-loaded",ti=class n{constructor(){this.platformId=k(Ti);this.accessToken=this.loadAccessToken();this.tokenClient=null;this.fileId=this.loadFileId();this.connectedSignal=W(!!this.accessToken);this.connected=this.connectedSignal.asReadonly();this.clientId=W(this.loadClientId());this.nativeRedirectUri=W(this.loadNativeRedirectUri());this.lastError=W(null);this.isSaving=W(!1);ag(this.platformId)&&(this.handleOAuthCallback(),window.addEventListener("hashchange",()=>this.handleOAuthCallback()),li.isNativePlatform()&&kc.addListener("appUrlOpen",e=>this.handleOAuthFromUrl(e.url)),this.accessToken&&(this.connectedSignal.set(!0),this.triggerConfigLoad()))}get isNative(){return li.isNativePlatform()}applyOAuthParams(e){let t=e.get("access_token"),r=e.get("error");return r?(this.lastError.set(r),!0):t?(this.storeAccessToken(t),this.connectedSignal.set(!0),this.lastError.set(null),this.triggerConfigLoad(),!0):!1}exchangeCodeForToken(e,t){return V(this,null,function*(){let r=new URLSearchParams({code:e,code_verifier:t,client_id:this.clientId(),redirect_uri:this.getRedirectUri(),grant_type:"authorization_code"}),i=yield fetch(N2,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!i.ok){let s=yield i.json().catch(()=>({}));return this.lastError.set(s.error||`Token exchange failed: ${i.status}`),null}return(yield i.json()).access_token||null})}handleOAuthFromUrl(e){try{let t=new URL(e),r=t.hash?.slice(1),i=t.search?.slice(1),o=r||i;if(!o)return;let s=new URLSearchParams(o),c=s.get("code"),l=s.get("error");if(l){this.lastError.set(l);return}if(c){let u=sessionStorage.getItem(Vc);sessionStorage.removeItem(Vc),u&&this.exchangeCodeForToken(c,u).then(f=>{f&&(this.storeAccessToken(f),this.connectedSignal.set(!0),this.lastError.set(null),this.triggerConfigLoad())});return}if(this.applyOAuthParams(s))try{sessionStorage.removeItem(g_)}catch{}}catch{}}handleOAuthCallback(){let e=null;try{let r=sessionStorage.getItem(g_);r&&(e=new URLSearchParams(r),sessionStorage.removeItem(g_))}catch{}if(!e){let r=window.location.hash?.slice(1),i=window.location.search?.slice(1),o=r&&(r.includes("access_token=")||r.includes("error=")||r.includes("code="))?r:i&&(i.includes("access_token=")||i.includes("error=")||i.includes("code="))?i:null;if(!o)return;e=new URLSearchParams(o)}if(!e)return;let t=e.get("code");if(t){let r=sessionStorage.getItem(Vc);sessionStorage.removeItem(Vc),r&&this.exchangeCodeForToken(t,r).then(i=>{i&&(this.storeAccessToken(i),this.connectedSignal.set(!0),this.lastError.set(null),this.triggerConfigLoad()),typeof window<"u"&&window.history.replaceState(null,"",window.location.pathname||"/")});return}if(this.applyOAuthParams(e)&&typeof window<"u"){let r=(window.location.pathname||"/")+(window.location.search||"");window.history.replaceState(null,"",r)}}useRedirectFlow(){return li.isNativePlatform()}randomString(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=new Uint8Array(e);return crypto.getRandomValues(r),Array.from(r,i=>t[i%t.length]).join("")}generateCodeChallenge(e){return V(this,null,function*(){let t=new TextEncoder().encode(e),r=yield crypto.subtle.digest("SHA-256",t);return btoa(String.fromCharCode(...new Uint8Array(r))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}loadFileId(){return localStorage.getItem(h_)}loadClientId(){return localStorage.getItem(p_)??O2}loadAccessToken(){return localStorage.getItem(m_)}setClientId(e){this.clientId.set(e),e?localStorage.setItem(p_,e):localStorage.removeItem(p_)}loadNativeRedirectUri(){return typeof localStorage<"u"&&localStorage.getItem(y_)||BS}setNativeRedirectUri(e){let t=e?.trim()??"";this.nativeRedirectUri.set(t),t?localStorage.setItem(y_,t):localStorage.removeItem(y_)}getRedirectUri(){return typeof window>"u"?"":li.isNativePlatform()?this.nativeRedirectUri()||"":window.location.origin}storeFileId(e){this.fileId=e,e?localStorage.setItem(h_,e):localStorage.removeItem(h_)}storeAccessToken(e){this.accessToken=e,e?localStorage.setItem(m_,e):localStorage.removeItem(m_)}loadScript(){return V(this,null,function*(){if(!window.google?.accounts?.oauth2?.initTokenClient)return new Promise((e,t)=>{if(document.querySelector(`script[src="${LS}"]`)){window.google?.accounts?.oauth2?.initTokenClient?e():window.gapiLoad=()=>e();return}let i=document.createElement("script");i.src=LS,i.async=!0,i.onload=()=>{window.google?.accounts?.oauth2?.initTokenClient?e():window.gapiLoad=()=>e()},i.onerror=()=>t(new Error("Failed to load Google script")),document.head.appendChild(i)})})}initTokenClient(){let e=this.clientId();!e||this.tokenClient||(this.tokenClient=window.google.accounts.oauth2.initTokenClient({client_id:e,scope:jS,callback:t=>{if(t.error){this.lastError.set(t.error),this.connectedSignal.set(!1),this.storeAccessToken(null);return}this.lastError.set(null),this.storeAccessToken(t.access_token),this.connectedSignal.set(!0),this.triggerConfigLoad()}}))}triggerConfigLoad(){this.loadFromDrive().then(e=>{e&&typeof window<"u"&&window.dispatchEvent(new CustomEvent(v_,{detail:e}))})}connect(){return V(this,null,function*(){let e=this.clientId();if(!e.trim())return this.lastError.set("Enter your Google Client ID in settings"),!1;if(this.lastError.set(null),this.useRedirectFlow()){let t=this.getRedirectUri();if(!t||!t.startsWith("https://"))return this.lastError.set("Set Native redirect URL (https) in settings \u2014 your app URL + /oauth-redirect"),!1;let r=this.randomString(64),i=yield this.generateCodeChallenge(r);try{sessionStorage.setItem(Vc,r)}catch{return this.lastError.set("Storage unavailable"),!1}let o=new URLSearchParams({client_id:e,redirect_uri:this.getRedirectUri(),response_type:"code",scope:jS,code_challenge:i,code_challenge_method:"S256",access_type:"offline"});return window.location.href=`${P2}?${o.toString()}`,!0}try{return yield this.loadScript(),this.initTokenClient(),this.tokenClient.requestAccessToken(),!0}catch(t){return this.lastError.set(t instanceof Error?t.message:"Failed to connect"),!1}})}tryRestoreSession(){return V(this,null,function*(){if(this.clientId()?.trim())try{if(yield this.loadScript(),this.initTokenClient(),!this.tokenClient)return;this.tokenClient.requestAccessToken({prompt:"none"})}catch{}})}requestTokenSilent(){this.tokenClient?.requestAccessToken({prompt:"none"})}disconnect(){this.accessToken&&window.google?.accounts?.oauth2?.revoke(this.accessToken,()=>{}),this.storeAccessToken(null),this.fileId=null,this.storeFileId(null),this.connectedSignal.set(!1),this.lastError.set(null)}loadFromDrive(){return V(this,null,function*(){if(!this.accessToken)return null;let e=this.accessToken,t=this.fileId;if(!t){let i=yield fetch(`https://www.googleapis.com/drive/v3/files?q=name%3D'${encodeURIComponent(f_)}'%20and%20'root'%20in%20parents&fields=files(id)`,{headers:{Authorization:`Bearer ${e}`}});if(i.status===401)return this.connectedSignal.set(!1),this.storeAccessToken(null),null;if(!i.ok)return null;let o=yield i.json();if(!o.files?.length)return null;t=o.files[0].id,this.fileId=t,this.storeFileId(t)}let r=yield fetch(`https://www.googleapis.com/drive/v3/files/${t}?alt=media`,{headers:{Authorization:`Bearer ${e}`}});return r.status===401?(this.connectedSignal.set(!1),this.storeAccessToken(null),null):r.ok?r.text():null})}saveToDrive(e){!this.connectedSignal()||!this.accessToken||(this.isSaving.set(!0),this.doSave(e).catch(()=>{}).finally(()=>this.isSaving.set(!1)))}doSave(e){return V(this,null,function*(){if(!this.accessToken)return;let t=this.accessToken;if(this.fileId){let f=yield fetch(`https://www.googleapis.com/upload/drive/v3/files/${this.fileId}?uploadType=media`,{method:"PATCH",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:e});if(f.status===401){this.connectedSignal.set(!1),this.storeAccessToken(null);return}if(!f.ok){this.lastError.set(`Save failed: ${f.status}`);return}this.lastError.set(null);return}let r=yield fetch(`https://www.googleapis.com/drive/v3/files?q=name%3D'${encodeURIComponent(f_)}'%20and%20'root'%20in%20parents&fields=files(id)`,{headers:{Authorization:`Bearer ${t}`}});if(r.status===401){this.connectedSignal.set(!1),this.storeAccessToken(null);return}if(!r.ok){this.lastError.set(`List failed: ${r.status}`);return}let i=yield r.json();if(i.files?.length>0){this.fileId=i.files[0].id,this.storeFileId(this.fileId),yield this.doSave(e);return}let o="part-manager-boundary-"+Date.now(),s=JSON.stringify({name:f_,parents:["root"]}),c=`--${o}\r
Content-Type: application/json; charset=UTF-8\r
\r
${s}\r
--${o}\r
Content-Type: application/json\r
\r
${e}\r
--${o}--`,l=yield fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":`multipart/related; boundary=${o}`},body:c});if(l.status===401){this.connectedSignal.set(!1),this.storeAccessToken(null);return}if(!l.ok){this.lastError.set(`Create failed: ${l.status}`);return}let u=yield l.json();this.fileId=u.id,this.storeFileId(this.fileId),this.lastError.set(null)})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}};function If(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate())}function ni(n){let e=n.split("-").map(Number);if(e.length!==3||e.some(o=>Number.isNaN(o)))return null;let[t,r,i]=e;return new Date(t,r-1,i)}function Tf(n,e){if(!n.endDate)return!1;let t=ni(n.endDate),r=ni(e);return!t||!r?!1:If(r).getTime()>If(t).getTime()}function Fc(n,e=new Date){if(!n.endDate)return!0;let t=ni(n.endDate);return t?If(t).getTime()>=If(e).getTime():!0}function Lc(n,e,t=new Date){return n.filter(r=>r.roomId===e&&Fc(r,t))}var jc="apartment-manager-data",__="current-apartment-id",bt=class n{constructor(){this.cloudSync=k(Df);this.googleDrive=k(ti);this.apartmentsSignal=W(this.loadFromStorage());this.currentApartmentIdSignal=W(this.loadCurrentApartmentId());this.apartments=this.apartmentsSignal.asReadonly();this.currentApartmentId=this.currentApartmentIdSignal.asReadonly();this.currentApartment=Ze(()=>{let e=this.currentApartmentIdSignal();return e&&this.apartmentsSignal().find(t=>t.id===e)||null});this.isSyncingToCloud=!1;this.initializeCloudSync(),window.addEventListener(v_,e=>{let t=e.detail;if(t)try{let r=JSON.parse(t);if(Array.isArray(r)&&r.length>=0){this.isSyncingToCloud=!0;let i=r.map(s=>G(N({},s),{tenants:s.tenants||[],payments:s.payments||[]}));this.apartmentsSignal.set(i),localStorage.setItem(jc,JSON.stringify(i));let o=this.currentApartmentIdSignal();o&&this.setCurrentApartment(o),setTimeout(()=>{this.isSyncingToCloud=!1},100)}}catch{}}),hr(()=>{let e=this.apartmentsSignal();this.isSyncingToCloud||this.cloudSync.syncToCloud(e)})}initializeCloudSync(){return V(this,null,function*(){window.addEventListener("cloud-sync-update",t=>{let r=t.detail;if(r&&r.length>=0){this.isSyncingToCloud=!0;let i=this.currentApartmentIdSignal();this.apartmentsSignal.set(r),localStorage.setItem(jc,JSON.stringify(r)),i&&this.setCurrentApartment(i),setTimeout(()=>{this.isSyncingToCloud=!1},100)}});let e=yield this.cloudSync.syncFromCloud();if(e&&e.length>0){let t=this.apartmentsSignal();(t.length===0||this.isCloudDataNewer(e,t))&&(this.isSyncingToCloud=!0,this.apartmentsSignal.set(e),localStorage.setItem(jc,JSON.stringify(e)),setTimeout(()=>{this.isSyncingToCloud=!1},100))}})}isCloudDataNewer(e,t){return e.length>t.length}loadFromStorage(){let e=localStorage.getItem(jc);return(e?JSON.parse(e):[]).map(r=>G(N({},r),{tenants:r.tenants||[],payments:r.payments||[]}))}loadCurrentApartmentId(){return localStorage.getItem(__)}saveToStorage(){let e=JSON.stringify(this.apartmentsSignal());localStorage.setItem(jc,e),this.googleDrive.connected()&&this.googleDrive.saveToDrive(this.exportData())}saveCurrentApartmentId(e){e?localStorage.setItem(__,e):localStorage.removeItem(__)}generateId(){return yd()}parseYmdDate(e){if(!e)return null;let t=e.split("-").map(Number);if(t.length!==3||t.some(s=>Number.isNaN(s)))return null;let[r,i,o]=t;return new Date(r,i-1,o)}sanitizeDisabledDates(e){let t=e.disabledDates||[];if(t.length===0)return;let r=this.parseYmdDate(e.startDate)?.getTime(),i=this.parseYmdDate(e.endDate)?.getTime(),o=t.filter(c=>{let l=this.parseYmdDate(c)?.getTime();return!(l===void 0||r!==void 0&&l<r||i!==void 0&&l>i)}),s=Array.from(new Set(o));return s.length>0?s:void 0}withSanitizedDisabledDates(e){let t=this.sanitizeDisabledDates(e);return G(N({},e),{disabledDates:t})}getCurrentApartment(){return this.currentApartment()}setCurrentApartment(e){this.currentApartmentIdSignal.set(e),this.saveCurrentApartmentId(e)}addApartment(e){let t={id:this.generateId(),name:e,rooms:[],expenses:[],tenants:[],payments:[]};this.apartmentsSignal.update(r=>[...r,t]),this.saveToStorage(),this.currentApartmentIdSignal()||this.setCurrentApartment(t.id)}removeApartment(e){if(this.apartmentsSignal.update(t=>t.filter(r=>r.id!==e)),this.saveToStorage(),this.currentApartmentIdSignal()===e){let t=this.apartmentsSignal();this.setCurrentApartment(t.length>0?t[0].id:null)}}updateApartmentName(e,t){this.apartmentsSignal.update(r=>r.map(i=>i.id===e?G(N({},i),{name:t}):i)),this.saveToStorage()}addRoom(e,t){let r=G(N({},t),{id:this.generateId()});this.apartmentsSignal.update(i=>i.map(o=>o.id===e?G(N({},o),{rooms:[...o.rooms,r]}):o)),this.saveToStorage()}updateRoom(e,t,r){this.apartmentsSignal.update(i=>i.map(o=>o.id===e?G(N({},o),{rooms:o.rooms.map(s=>s.id===t?N(N({},s),r):s)}):o)),this.saveToStorage()}removeRoom(e,t){this.apartmentsSignal.update(r=>r.map(i=>i.id===e?G(N({},i),{rooms:i.rooms.filter(o=>o.id!==t)}):i)),this.saveToStorage()}addExpense(e,t){let r=G(N({},t),{id:this.generateId()});this.apartmentsSignal.update(i=>i.map(o=>o.id===e?G(N({},o),{expenses:[...o.expenses,r]}):o)),this.saveToStorage()}updateExpense(e,t,r){this.apartmentsSignal.update(i=>i.map(o=>o.id===e?G(N({},o),{expenses:o.expenses.map(s=>s.id===t?N(N({},s),r):s)}):o)),this.saveToStorage()}removeExpense(e,t){this.apartmentsSignal.update(r=>r.map(i=>i.id===e?G(N({},i),{expenses:i.expenses.filter(o=>o.id!==t)}):i)),this.saveToStorage()}calculateMetrics(e){let t=new Set(e.rooms.filter(ee=>Lc(e.tenants,ee.id).length>0).map(ee=>ee.id)),r=e.rooms.filter(ee=>t.has(ee.id)),i=r.reduce((ee,ue)=>ee+(ue.rentMin+ue.rentMax)/2,0),o=r.reduce((ee,ue)=>ee+ue.rentMin,0),s=r.reduce((ee,ue)=>ee+ue.rentMax,0),c=e.expenses.reduce((ee,ue)=>ee+(ue.cadence==="monthly"?ue.amount:ue.amount/12),0),l=i*12,u=c*12,f=i-c,p=l-u,v=o*12,_=s*12,M=o-c,O=s-c,L=v-u,z=_-u;return{monthlyRevenue:i,yearlyRevenue:l,monthlyCosts:c,yearlyCosts:u,monthlyProfit:f,yearlyProfit:p,minMonthlyRevenue:o,maxMonthlyRevenue:s,minYearlyRevenue:v,maxYearlyRevenue:_,minMonthlyProfit:M,maxMonthlyProfit:O,minYearlyProfit:L,maxYearlyProfit:z}}exportData(){return JSON.stringify(this.apartmentsSignal(),null,2)}importData(e){this.apartmentsSignal.set(e),this.saveToStorage()}addTenant(e,t){let r=this.withSanitizedDisabledDates(G(N({},t),{id:this.generateId()}));this.apartmentsSignal.update(i=>i.map(o=>o.id===e?G(N({},o),{tenants:[...o.tenants,r]}):o)),this.saveToStorage()}updateTenant(e,t,r){this.apartmentsSignal.update(i=>i.map(o=>o.id===e?G(N({},o),{tenants:o.tenants.map(s=>s.id===t?this.withSanitizedDisabledDates(N(N({},s),r)):s)}):o)),this.saveToStorage()}removeTenant(e,t){this.apartmentsSignal.update(r=>r.map(i=>i.id===e?G(N({},i),{tenants:i.tenants.filter(o=>o.id!==t)}):i)),this.saveToStorage()}toggleTenantOccupancyDate(e,t,r,i){this.apartmentsSignal.update(o=>o.map(s=>s.id===e?G(N({},s),{tenants:s.tenants.map(c=>{if(c.id!==t)return c;let l=c.disabledDates||[],u;return i?u=l.includes(r)?l:[...l,r]:u=l.filter(f=>f!==r),this.withSanitizedDisabledDates(G(N({},c),{disabledDates:u}))})}):s)),this.saveToStorage()}generateRentPayments(e,t,r){let i=this.apartmentsSignal().find(v=>v.id===e);if(!i)return;let o=new Date(r,t+1,0).getDate(),s=new Date(r,t,15),c=i.payments||[],l=new Set,u=c.filter(v=>{if(v.type==="rent"&&v.month===t&&v.year===r){let _=v.roomId;if(l.has(_))return!1;l.add(_)}return!0});u.length<c.length&&(this.apartmentsSignal.update(v=>v.map(_=>_.id===e?G(N({},_),{payments:u}):_)),this.saveToStorage());let f=u,p=[];for(let v of i.rooms){if(f.some(z=>z.roomId===v.id&&z.month===t&&z.year===r&&z.type==="rent"))continue;let M=i.tenants.find(z=>z.roomId===v.id&&z.rentCollectionDay&&Fc(z,s));if(!M)continue;let O=Math.min(M.rentCollectionDay,o),L=`${r}-${String(t+1).padStart(2,"0")}-${String(O).padStart(2,"0")}`;p.push({id:this.generateId(),type:"rent",roomId:v.id,tenantId:M.id,amount:(v.rentMin+v.rentMax)/2,dueDate:L,month:t,year:r})}p.length!==0&&(this.apartmentsSignal.update(v=>v.map(_=>_.id===e?G(N({},_),{payments:[..._.payments||[],...p]}):_)),this.saveToStorage())}togglePaymentPaid(e,t){let r=new Date,i=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`;this.apartmentsSignal.update(o=>o.map(s=>s.id===e?G(N({},s),{payments:(s.payments||[]).map(c=>c.id===t?G(N({},c),{paidDate:c.paidDate?void 0:i}):c)}):s)),this.saveToStorage()}removePayment(e,t){this.apartmentsSignal.update(r=>r.map(i=>i.id===e?G(N({},i),{payments:(i.payments||[]).filter(o=>o.id!==t)}):i)),this.saveToStorage()}addBillPayments(e,t,r,i){let o=this.apartmentsSignal().find(l=>l.id===e);if(!o)return;let s=new Date(i,r+1,0).getDate(),c=[];for(let l of t){let u=o.tenants.find(v=>v.id===l.tenantId);if(!u)continue;let f=Math.min(u.rentCollectionDay||1,s),p=`${i}-${String(r+1).padStart(2,"0")}-${String(f).padStart(2,"0")}`;c.push({id:this.generateId(),type:"bill",roomId:u.roomId,tenantId:u.id,amount:l.amount,dueDate:p,month:r,year:i})}c.length!==0&&(this.apartmentsSignal.update(l=>l.map(u=>u.id===e?G(N({},u),{payments:[...u.payments||[],...c]}):u)),this.saveToStorage())}getPaymentsForMonth(e,t,r){let i=this.apartmentsSignal().find(o=>o.id===e);return i?(i.payments||[]).filter(o=>o.month===t&&o.year===r).sort((o,s)=>o.dueDate.localeCompare(s.dueDate)):[]}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}};var k2=(n,e)=>e.id;function V2(n,e){n&1&&(y(0,"option",3),C(1,"Select an apartment"),g())}function F2(n,e){if(n&1&&(y(0,"option",4),C(1),g()),n&2){let t=e.$implicit;ie("value",t.id),x(),_e(t.name)}}var Sf=class n{constructor(){this.apartmentService=k(bt);this.apartments=this.apartmentService.apartments;this.currentApartmentId=this.apartmentService.currentApartmentId}onApartmentChange(e){let t=e.target;this.apartmentService.setCurrentApartment(t.value||null)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-apartment-selector"]],decls:7,vars:2,consts:[[1,"apartment-selector"],[1,"selector-label"],[1,"apartment-select",3,"change","value"],["value",""],[3,"value"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"label",1),C(2,"Apartment:"),g(),y(3,"select",2),$("change",function(o){return r.onApartmentChange(o)}),X(4,V2,2,0,"option",3),ht(5,F2,2,2,"option",4,k2),g()()),t&2&&(x(3),ie("value",r.currentApartmentId()||""),x(),Z(r.currentApartmentId()?-1:4),x(),pt(r.apartments()))},styles:[".apartment-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}.selector-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:var(--color-text-secondary)}.apartment-select[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);min-height:44px;border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease;min-width:180px}@media (max-width: 768px){.apartment-selector[_ngcontent-%COMP%]{width:100%}.apartment-select[_ngcontent-%COMP%]{flex:1;min-width:0}}.apartment-select[_ngcontent-%COMP%]:hover{border-color:var(--color-primary-light)}.apartment-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #2563eb1a}"],changeDetection:0})}};var ri=class n{constructor(){this.mobileMenuOpen=W(!1);this.showGoogleDriveModal=W(!1)}toggleMobileMenu(){this.mobileMenuOpen.update(e=>!e)}closeMobileMenu(){this.mobileMenuOpen.set(!1)}openGoogleDriveModal(){this.showGoogleDriveModal.set(!0)}closeGoogleDriveModal(){this.showGoogleDriveModal.set(!1)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}};var xf=class n{constructor(){this.layout=k(ri)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-header"]],decls:9,vars:0,consts:[[1,"app-header"],[1,"header-left"],["type","button","aria-label","Open menu",1,"menu-btn",3,"click"],[1,"menu-icon"],[1,"header-right"]],template:function(t,r){t&1&&(y(0,"header",0)(1,"div",1)(2,"button",2),$("click",function(){return r.layout.toggleMobileMenu()}),Ye(3,"span",3)(4,"span",3)(5,"span",3),g(),Ye(6,"app-logo"),g(),y(7,"div",4),Ye(8,"app-apartment-selector"),g()())},dependencies:[gd,Sf],styles:[".app-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-lg) var(--spacing-xl);padding-top:max(var(--spacing-lg),env(safe-area-inset-top));padding-left:max(var(--spacing-lg),env(safe-area-inset-left));padding-right:max(var(--spacing-xl),env(safe-area-inset-right));background:var(--color-card-bg);border-bottom:1px solid var(--color-border);box-shadow:var(--shadow-sm)}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md)}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1;min-width:0;justify-content:flex-end}.menu-btn[_ngcontent-%COMP%]{display:none;flex-direction:column;justify-content:center;gap:5px;width:44px;height:44px;padding:0;border:none;border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-primary);cursor:pointer;transition:background .2s ease}.menu-btn[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.menu-icon[_ngcontent-%COMP%]{display:block;width:20px;height:2px;background:currentColor;border-radius:1px}@media (max-width: 768px){.menu-btn[_ngcontent-%COMP%]{display:flex}.app-header[_ngcontent-%COMP%]{flex-wrap:wrap;gap:var(--spacing-md)}.header-right[_ngcontent-%COMP%]{width:100%;order:3}}@media (min-width: 769px){.menu-btn[_ngcontent-%COMP%]{display:none}}"],changeDetection:0})}};var ZS=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Se(ur),Se(Xt))};static \u0275dir=Qe({type:n})}return n})(),Nf=(()=>{class n extends ZS{static \u0275fac=(()=>{let t;return function(i){return(t||(t=En(n)))(i||n)}})();static \u0275dir=Qe({type:n,features:[ln]})}return n})(),qc=new J("");var L2={provide:qc,useExisting:wn(()=>Kt),multi:!0};function j2(){let n=un()?un().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var B2=new J(""),Kt=(()=>{class n extends ZS{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!j2())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Se(ur),Se(Xt),Se(B2,8))};static \u0275dir=Qe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&$("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[fr([L2]),ln]})}return n})();function U2(n){return n==null||$2(n)===0}function $2(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Of=new J(""),H2=new J("");function z2(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function q2(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function G2(n){return U2(n.value)?{required:!0}:null}function $S(n){return null}function JS(n){return n!=null}function XS(n){return Uo(n)?He(n):n}function ex(n){let e={};return n.forEach(t=>{e=t!=null?N(N({},e),t):e}),Object.keys(e).length===0?null:e}function tx(n,e){return e.map(t=>t(n))}function W2(n){return!n.validate}function nx(n){return n.map(e=>W2(e)?e:t=>e.validate(t))}function K2(n){if(!n)return null;let e=n.filter(JS);return e.length==0?null:function(t){return ex(tx(t,e))}}function rx(n){return n!=null?K2(nx(n)):null}function Q2(n){if(!n)return null;let e=n.filter(JS);return e.length==0?null:function(t){let r=tx(t,e).map(XS);return Yh(r).pipe(ye(ex))}}function ix(n){return n!=null?Q2(nx(n)):null}function HS(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Y2(n){return n._rawValidators}function Z2(n){return n._rawAsyncValidators}function w_(n){return n?Array.isArray(n)?n:[n]:[]}function Af(n,e){return Array.isArray(n)?n.includes(e):n===e}function zS(n,e){let t=w_(e);return w_(n).forEach(i=>{Af(t,i)||t.push(i)}),t}function qS(n,e){return w_(e).filter(t=>!Af(n,t))}var Rf=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=rx(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ix(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},C_=class extends Rf{name;get formDirective(){return null}get path(){return null}},zc=class extends Rf{_parent=null;name=null;valueAccessor=null},b_=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},J2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},N7=G(N({},J2),{"[class.ng-submitted]":"isSubmitted"}),hn=(()=>{class n extends b_{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Se(zc,2))};static \u0275dir=Qe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&yt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[ln]})}return n})();var Bc="VALID",Mf="INVALID",As="PENDING",Uc="DISABLED",Ps=class{},Pf=class extends Ps{value;source;constructor(e,t){super(),this.value=e,this.source=t}},$c=class extends Ps{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Hc=class extends Ps{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Rs=class extends Ps{status;source;constructor(e,t){super(),this.status=e,this.source=t}};function X2(n){return(kf(n)?n.validators:n)||null}function ej(n){return Array.isArray(n)?rx(n):n||null}function tj(n,e){return(kf(e)?e.asyncValidators:n)||null}function nj(n){return Array.isArray(n)?ix(n):n||null}function kf(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var E_=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ai(this.statusReactive)}set status(e){Ai(()=>this.statusReactive.set(e))}_status=Ze(()=>this.statusReactive());statusReactive=W(void 0);get valid(){return this.status===Bc}get invalid(){return this.status===Mf}get pending(){return this.status==As}get disabled(){return this.status===Uc}get enabled(){return this.status!==Uc}errors;get pristine(){return Ai(this.pristineReactive)}set pristine(e){Ai(()=>this.pristineReactive.set(e))}_pristine=Ze(()=>this.pristineReactive());pristineReactive=W(!0);get dirty(){return!this.pristine}get touched(){return Ai(this.touchedReactive)}set touched(e){Ai(()=>this.touchedReactive.set(e))}_touched=Ze(()=>this.touchedReactive());touchedReactive=W(!1);get untouched(){return!this.touched}_events=new Ue;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(zS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(zS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(qS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(qS(e,this._rawAsyncValidators))}hasValidator(e){return Af(this._rawValidators,e)}hasAsyncValidator(e){return Af(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(G(N({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Hc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Hc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(G(N({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new $c(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new $c(!0,r))}markAsPending(e={}){this.status=As;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rs(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(G(N({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Uc,this.errors=null,this._forEachChild(i=>{i.disable(G(N({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Pf(this.value,r)),this._events.next(new Rs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(G(N({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Bc,this._forEachChild(r=>{r.enable(G(N({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(G(N({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bc||this.status===As)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Pf(this.value,t)),this._events.next(new Rs(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(G(N({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Uc:Bc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=As,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=XS(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Rs(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new lt,this.statusChanges=new lt}_calculateStatus(){return this._allControlsDisabled()?Uc:this.errors?Mf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(As)?As:this._anyControlsHaveStatus(Mf)?Mf:Bc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new $c(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Hc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){kf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=ej(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=nj(this._rawAsyncValidators)}};var ox=new J("",{providedIn:"root",factory:()=>D_}),D_="always";function rj(n,e){return[...e.path,n]}function ij(n,e,t=D_){sj(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),aj(n,e),lj(n,e),cj(n,e),oj(n,e)}function GS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function oj(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function sj(n,e){let t=Y2(n);e.validator!==null?n.setValidators(HS(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Z2(n);e.asyncValidator!==null?n.setAsyncValidators(HS(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();GS(e._rawValidators,i),GS(e._rawAsyncValidators,i)}function aj(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&sx(n,e)})}function cj(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&sx(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function sx(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function lj(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function uj(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function dj(n){return Object.getPrototypeOf(n.constructor)===Nf}function fj(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Kt?t=o:dj(o)?r=o:i=o}),i||r||t||null}function WS(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function KS(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var hj=class extends E_{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(X2(t),tj(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),kf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(KS(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){WS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){WS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){KS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var pj={provide:zc,useExisting:wn(()=>nn)},QS=Promise.resolve(),nn=(()=>{class n extends zc{_changeDetectorRef;callSetDisabledState;control=new hj;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new lt;constructor(t,r,i,o,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=fj(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),uj(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ij(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){QS.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Mi(r);QS.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?rj(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(Se(C_,9),Se(Of,10),Se(H2,10),Se(qc,10),Se(xi,8),Se(ox,8))};static \u0275dir=Qe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[fr([pj]),ln,lr]})}return n})();var mj={provide:qc,useExisting:wn(()=>Ar),multi:!0},Ar=(()=>{class n extends Nf{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=En(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&$("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[fr([mj]),ln]})}return n})();var gj={provide:qc,useExisting:wn(()=>Ns),multi:!0};function ax(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function yj(n){return n.split(":")[0]}var Ns=(()=>{class n extends Nf{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=ax(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=yj(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=En(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&$("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[fr([gj]),ln]})}return n})(),Vf=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(ax(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Se(Xt),Se(ur),Se(Ns,9))};static \u0275dir=Qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),vj={provide:qc,useExisting:wn(()=>cx),multi:!0};function YS(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function _j(n){return n.split(":")[0]}var cx=(()=>{class n extends Nf{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let c=0;c<s.length;c++){let l=s[c],u=this._getOptionValue(l.value);i.push(u)}}else{let s=r.options;for(let c=0;c<s.length;c++){let l=s[c];if(l.selected){let u=this._getOptionValue(l.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=_j(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=En(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&$("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[fr([vj]),ln]})}return n})(),Ff=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(YS(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(YS(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Se(Xt),Se(ur),Se(cx,9))};static \u0275dir=Qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function lx(n){return typeof n=="number"?n:parseFloat(n)}var I_=(()=>{class n{_validator=$S;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):$S,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Qe({type:n,features:[lr]})}return n})(),wj={provide:Of,useExisting:wn(()=>T_),multi:!0},T_=(()=>{class n extends I_{max;inputName="max";normalizeInput=t=>lx(t);createValidator=t=>q2(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=En(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&dr("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[fr([wj]),ln]})}return n})(),Cj={provide:Of,useExisting:wn(()=>Rr),multi:!0},Rr=(()=>{class n extends I_{min;inputName="min";normalizeInput=t=>lx(t);createValidator=t=>z2(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=En(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&dr("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[fr([Cj]),ln]})}return n})(),bj={provide:Of,useExisting:wn(()=>S_),multi:!0};var S_=(()=>{class n extends I_{required;inputName="required";normalizeInput=Mi;createValidator=t=>G2;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=En(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&dr("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[fr([bj]),ln]})}return n})();var Ej=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=qr({type:n});static \u0275inj=zr({})}return n})();var Qt=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ox,useValue:t.callSetDisabledState??D_}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=qr({type:n});static \u0275inj=zr({imports:[Ej]})}return n})();var Dj=()=>({exact:!0});function Ij(n,e){n&1&&Ye(0,"span",22)}var Lf=class n{constructor(){this.apartmentService=k(bt);this.googleDrive=k(ti);this.layout=k(ri);this.newApartmentName=W("");this.showGoogleDrive=W(!1);this.gdriveConnected=this.googleDrive.connected}addApartment(){let e=this.newApartmentName().trim();e&&(this.apartmentService.addApartment(e),this.newApartmentName.set(""))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-sidebar"]],decls:54,vars:7,consts:[[1,"sidebar"],[1,"sidebar-nav"],[1,"nav-section-title"],[1,"nav-list"],[1,"nav-item"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-link",3,"click","routerLinkActiveOptions"],[1,"nav-icon"],["routerLink","/expenses","routerLinkActive","active",1,"nav-link",3,"click"],["routerLink","/payments","routerLinkActive","active",1,"nav-link",3,"click"],["routerLink","/rooms","routerLinkActive","active",1,"nav-link",3,"click"],["routerLink","/tenants","routerLinkActive","active",1,"nav-link",3,"click"],["routerLink","/bill-calculator","routerLinkActive","active",1,"nav-link",3,"click"],[1,"sidebar-forms"],[1,"form-section"],[1,"form-section-title"],[1,"input-group"],["type","text","placeholder","Apartment name...",3,"ngModelChange","keydown.enter","ngModel"],[1,"btn-primary",3,"click","disabled"],[1,"icon"],[1,"form-section","settings-section"],[1,"settings-actions"],[1,"btn-settings",3,"click"],[1,"sync-indicator"]],template:function(t,r){t&1&&(y(0,"aside",0)(1,"nav",1)(2,"h3",2),C(3,"Navigation"),g(),y(4,"ul",3)(5,"li",4)(6,"a",5),$("click",function(){return r.layout.closeMobileMenu()}),y(7,"span",6),C(8,"\u{1F4CA}"),g(),C(9," Dashboard "),g()(),y(10,"li",4)(11,"a",7),$("click",function(){return r.layout.closeMobileMenu()}),y(12,"span",6),C(13,"\u{1F4BC}"),g(),C(14," Expenses "),g()(),y(15,"li",4)(16,"a",8),$("click",function(){return r.layout.closeMobileMenu()}),y(17,"span",6),C(18,"\u{1F4B3}"),g(),C(19," Payments "),g()(),y(20,"li",4)(21,"a",9),$("click",function(){return r.layout.closeMobileMenu()}),y(22,"span",6),C(23,"\u{1F6AA}"),g(),C(24," Rooms "),g()(),y(25,"li",4)(26,"a",10),$("click",function(){return r.layout.closeMobileMenu()}),y(27,"span",6),C(28,"\u{1F465}"),g(),C(29," Tenants "),g()(),y(30,"li",4)(31,"a",11),$("click",function(){return r.layout.closeMobileMenu()}),y(32,"span",6),C(33,"\u{1F4B0}"),g(),C(34," Bill Calculator "),g()()()(),y(35,"div",12)(36,"section",13)(37,"h3",14),C(38,"Add Apartment"),g(),y(39,"div",15)(40,"input",16),Pe("ngModelChange",function(o){return Ne(r.newApartmentName,o)||(r.newApartmentName=o),o}),$("keydown.enter",function(){return r.addApartment()}),g(),y(41,"button",17),$("click",function(){return r.addApartment()}),y(42,"span",18),C(43,"+"),g(),C(44," Add "),g()()(),y(45,"section",19)(46,"h3",14),C(47,"Data"),g(),y(48,"div",20)(49,"button",21),$("click",function(){return r.layout.openGoogleDriveModal()}),y(50,"span",18),C(51,"\u{1F4C1}"),g(),C(52," Save to Drive "),X(53,Ij,1,0,"span",22),g()()()()()),t&2&&(x(6),ie("routerLinkActiveOptions",wE(6,Dj)),x(34),Re("ngModel",r.newApartmentName),x(),ie("disabled",!r.newApartmentName().trim()),x(8),yt("active",r.gdriveConnected()),x(4),Z(r.gdriveConnected()?53:-1))},dependencies:[Qt,Kt,hn,nn,es,jg],styles:[".sidebar[_ngcontent-%COMP%]{width:280px;max-width:85vw;background:var(--color-card-bg);border-right:1px solid var(--color-border);display:flex;flex-direction:column;height:100%;overflow-y:auto;flex-shrink:0}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;bottom:0;z-index:1001;transform:translate(-100%);transition:transform .2s ease;box-shadow:var(--shadow-xl);padding-top:env(safe-area-inset-top)}.sidebar-open[_nghost-%COMP%]   .sidebar[_ngcontent-%COMP%], .sidebar-open   [_nghost-%COMP%]   .sidebar[_ngcontent-%COMP%]{transform:translate(0)}}.sidebar-nav[_ngcontent-%COMP%]{padding:var(--spacing-lg);border-bottom:1px solid var(--color-border)}.nav-section-title[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;color:var(--color-text-secondary);text-transform:uppercase;letter-spacing:.05em;margin:0 0 var(--spacing-md) 0}.nav-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.nav-item[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xs)}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-md) var(--spacing-lg);min-height:44px;color:var(--color-text-secondary);text-decoration:none;border-radius:var(--border-radius-md);transition:all .2s ease;font-size:.9rem}.nav-link[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);color:var(--color-text-primary)}.nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff}.nav-icon[_ngcontent-%COMP%]{font-size:1.1rem}.sidebar-forms[_ngcontent-%COMP%]{padding:var(--spacing-lg);flex:1}.form-section[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.form-section-title[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text-primary);margin:0 0 var(--spacing-md) 0}.input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-family:inherit;transition:all .2s ease}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #2563eb1a}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--color-text-tertiary)}.btn-primary[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--spacing-sm);padding:var(--spacing-md) var(--spacing-lg);min-height:44px;border:none;border-radius:var(--border-radius-md);background:var(--color-primary);color:#fff;font-size:.9rem;font-weight:600;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-primary-dark);transform:translateY(-1px)}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.icon[_ngcontent-%COMP%]{font-size:1rem}.settings-section[_ngcontent-%COMP%]{border-top:1px solid var(--color-border);padding-top:var(--spacing-lg);margin-top:var(--spacing-lg)}.settings-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.btn-settings[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-md) var(--spacing-lg);min-height:44px;border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.875rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease;text-align:left}.btn-settings[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);border-color:var(--color-primary-light)}.btn-settings.active[_ngcontent-%COMP%]{background:#10b9811a;border-color:var(--color-success)}.sync-indicator[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:var(--color-success);margin-left:auto}.empty-state[_ngcontent-%COMP%]{padding:var(--spacing-md);text-align:center;color:var(--color-text-tertiary);font-size:.9rem}"],changeDetection:0})}};function Tj(n,e){if(n&1&&(y(0,"p",10),C(1),g()),n&2){let t=P();x(),_e(t.lastError())}}function Sj(n,e){n&1&&(y(0,"span",14),C(1,"Saving\u2026"),g())}function xj(n,e){if(n&1){let t=we();y(0,"div",12),Ye(1,"span",13),y(2,"span"),C(3,"Connected to Google Drive"),g(),X(4,Sj,2,0,"span",14),g(),y(5,"div",11)(6,"button",15),$("click",function(){j(t);let i=P();return B(i.disconnect())}),C(7,"Disconnect"),g(),y(8,"button",16),$("click",function(){j(t);let i=P();return B(i.close.emit())}),C(9,"Close"),g()()}if(n&2){let t=P();x(4),Z(t.isSaving()?4:-1)}}function Mj(n,e){if(n&1){let t=we();y(0,"div",11)(1,"button",17),$("click",function(){j(t);let i=P();return B(i.connect())}),C(2,"Connect Google Drive"),g(),y(3,"button",16),$("click",function(){j(t);let i=P();return B(i.close.emit())}),C(4,"Cancel"),g()()}}var jf=class n{constructor(){this.gdrive=k(ti);this.clientIdInput=W("");this.connected=this.gdrive.connected;this.lastError=this.gdrive.lastError;this.isSaving=this.gdrive.isSaving;this.close=ze();hr(()=>{let e=this.gdrive.clientId();this.clientIdInput.set(e)})}get redirectUri(){return this.gdrive.getRedirectUri()}ngOnInit(){this.gdrive.tryRestoreSession()}connect(){let e=this.clientIdInput().trim();e&&this.gdrive.setClientId(e),this.gdrive.connect()}disconnect(){this.gdrive.disconnect()}onBackdropClick(e){e.target===e.currentTarget&&this.close.emit()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-google-drive-settings"]],outputs:{close:"close"},decls:24,vars:4,consts:[[1,"gdrive-modal",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"help-text"],[1,"form-group"],["type","text","placeholder","xxx.apps.googleusercontent.com",3,"ngModelChange","ngModel"],[1,"redirect-uri-help"],[1,"redirect-uri-value"],[1,"error-text"],[1,"form-actions"],[1,"status","connected"],[1,"status-dot"],[1,"saving"],["type","button",1,"btn-danger",3,"click"],["type","button",1,"btn-secondary",3,"click"],["type","button",1,"btn-primary",3,"click"]],template:function(t,r){t&1&&(y(0,"div",0),$("click",function(o){return r.onBackdropClick(o)}),y(1,"div",1),$("click",function(o){return o.stopPropagation()}),y(2,"div",2)(3,"h2"),C(4,"Google Drive"),g(),y(5,"button",3),$("click",function(){return r.close.emit()}),C(6,"\u2715"),g()(),y(7,"div",4)(8,"p",5),C(9," Save part-manager.json to your Google Drive root. After connecting, every save will sync to Drive in the background. "),g(),y(10,"div",6)(11,"label"),C(12,"Google Client ID"),g(),y(13,"input",7),$("ngModelChange",function(o){return r.clientIdInput.set(o)}),g()(),y(14,"p",8),C(15," Add this to "),y(16,"strong"),C(17,"Authorized redirect URIs"),g(),C(18,": "),y(19,"code",9),C(20),g()(),X(21,Tj,2,1,"p",10)(22,xj,10,1)(23,Mj,5,0,"div",11),g()()()),t&2&&(x(13),ie("ngModel",r.clientIdInput()),x(7),_e(r.redirectUri),x(),Z(r.lastError()?21:-1),x(),Z(r.connected()?22:23))},dependencies:[Qt,Kt,hn,nn],styles:[".gdrive-modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1100;padding:var(--spacing-lg)}.modal-content[_ngcontent-%COMP%]{background:var(--color-card-bg);border-radius:var(--border-radius-xl);box-shadow:var(--shadow-xl);max-width:480px;width:100%}@media (max-width: 768px){.gdrive-modal[_ngcontent-%COMP%]{padding:var(--spacing-md);padding-left:max(var(--spacing-md),env(safe-area-inset-left));padding-right:max(var(--spacing-md),env(safe-area-inset-right));align-items:flex-start}.modal-content[_ngcontent-%COMP%]{max-height:calc(100vh - 2 * var(--spacing-md) - env(safe-area-inset-top) - env(safe-area-inset-bottom));overflow-y:auto}.btn-close[_ngcontent-%COMP%]{min-width:44px;min-height:44px}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-lg);border-bottom:1px solid var(--color-border)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700;color:var(--color-text-primary)}.btn-close[_ngcontent-%COMP%]{width:32px;height:32px;border:none;border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-secondary);font-size:1.2rem;cursor:pointer}.btn-close[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);color:var(--color-text-primary)}.modal-body[_ngcontent-%COMP%]{padding:var(--spacing-lg)}.help-text[_ngcontent-%COMP%]{color:var(--color-text-secondary);margin:0 0 var(--spacing-lg) 0;font-size:.9rem;line-height:1.5}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:var(--spacing-xs);font-size:.875rem;font-weight:500;color:var(--color-text-primary)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-family:inherit}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary)}.field-help[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-secondary);margin:var(--spacing-xs) 0 0 0;line-height:1.4}.field-help[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-family:JetBrains Mono,monospace;font-size:.7rem}.redirect-uri-help[_ngcontent-%COMP%]{font-size:.8rem;color:var(--color-text-secondary);margin:0 0 var(--spacing-md) 0;line-height:1.5}.redirect-uri-value[_ngcontent-%COMP%]{display:inline-block;padding:var(--spacing-xs) var(--spacing-sm);background:var(--color-bg-secondary);border-radius:var(--border-radius-sm);font-family:JetBrains Mono,monospace;font-size:.75rem;word-break:break-all}.error-text[_ngcontent-%COMP%]{color:var(--color-error);font-size:.875rem;margin:0 0 var(--spacing-md) 0}.status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-md);border-radius:var(--border-radius-md);background:var(--color-bg-secondary);margin-bottom:var(--spacing-lg)}.status.connected[_ngcontent-%COMP%]{background:#10b9811a}.status-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;background:var(--color-text-tertiary)}.status.connected[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:var(--color-success)}.saving[_ngcontent-%COMP%]{margin-left:auto;font-size:.85rem;color:var(--color-text-secondary)}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-md);justify-content:flex-end}.btn-primary[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);border:none;border-radius:var(--border-radius-md);background:var(--color-primary);color:#fff;font-size:.9rem;font-weight:600;cursor:pointer}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark)}.btn-secondary[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-secondary);font-size:.9rem;cursor:pointer}.btn-secondary[_ngcontent-%COMP%]:hover{border-color:var(--color-border-light);color:var(--color-text-primary)}.btn-danger[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);border:none;border-radius:var(--border-radius-md);background:var(--color-error);color:#fff;font-size:.9rem;font-weight:600;cursor:pointer}.btn-danger[_ngcontent-%COMP%]:hover{background:var(--color-error-dark)}"],changeDetection:0})}};function Aj(n,e){if(n&1){let t=we();y(0,"app-google-drive-settings",4),$("close",function(){j(t);let i=P();return B(i.layout.closeGoogleDriveModal())}),g()}}var Bf=class n{constructor(){this.layout=k(ri)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-root"]],decls:8,vars:3,consts:[[1,"app-container"],[1,"backdrop",3,"click"],[1,"app-layout"],[1,"app-main"],[3,"close"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1),$("click",function(){return r.layout.closeMobileMenu()}),g(),Ye(2,"app-header"),y(3,"div",2),Ye(4,"app-sidebar"),y(5,"main",3),Ye(6,"router-outlet"),g()()(),X(7,Aj,1,0,"app-google-drive-settings")),t&2&&(yt("sidebar-open",r.layout.mobileMenuOpen()),x(7),Z(r.layout.showGoogleDriveModal()?7:-1))},dependencies:[ec,xf,Lf,jf],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;min-height:100dvh;background:var(--color-bg-primary)}.app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;height:100dvh;overflow:hidden}.backdrop[_ngcontent-%COMP%]{display:none;position:fixed;inset:0;z-index:1000;background:#00000080;opacity:0;pointer-events:none;transition:opacity .2s ease}@media (max-width: 768px){.app-container.sidebar-open[_ngcontent-%COMP%]   .backdrop[_ngcontent-%COMP%]{display:block;opacity:1;pointer-events:auto}}@media (min-width: 769px){.backdrop[_ngcontent-%COMP%]{display:none!important}}.app-layout[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden}.app-main[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;background:var(--color-bg-secondary)}@media (max-width: 768px){.app-main[_ngcontent-%COMP%]{padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);padding-bottom:env(safe-area-inset-bottom)}}"],changeDetection:0})}};function Rj(n,e){if(n&1&&(y(0,"span",3),C(1),g()),n&2){let t=P();x(),Si("",t.formatCurrency(t.minValue())," - ",t.formatCurrency(t.maxValue()),"")}}var Uf=class n{constructor(){this.label=je.required();this.value=je.required();this.type=je("revenue");this.minValue=je(0);this.maxValue=je(0);this.showRange=je(!1);this.isNegative=je(!1)}formatCurrency(e){return new Intl.NumberFormat("en-AE",{style:"currency",currency:"AED",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-metrics-card"]],inputs:{label:[1,"label"],value:[1,"value"],type:[1,"type"],minValue:[1,"minValue"],maxValue:[1,"maxValue"],showRange:[1,"showRange"],isNegative:[1,"isNegative"]},decls:6,vars:7,consts:[[1,"metric-card"],[1,"metric-label"],[1,"metric-value"],[1,"metric-range"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"span",1),C(2),g(),y(3,"span",2),C(4),g(),X(5,Rj,2,2,"span",3),g()),t&2&&(Aa(r.type()),yt("negative",r.isNegative()),x(2),_e(r.label()),x(2),_e(r.formatCurrency(r.value())),x(),Z(r.showRange()&&r.minValue()!==r.maxValue()?5:-1))},styles:[".metric-card[_ngcontent-%COMP%]{padding:var(--spacing-md);border-radius:var(--border-radius-lg);display:flex;flex-direction:column;gap:var(--spacing-xs);border:1px solid var(--color-border);background:var(--color-card-bg);box-shadow:var(--shadow-sm);transition:all .2s ease}.metric-card[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-md);transform:translateY(-1px)}.metric-card.revenue[_ngcontent-%COMP%]{border-left:3px solid var(--color-success)}.metric-card.costs[_ngcontent-%COMP%]{border-left:3px solid var(--color-warning)}.metric-card.profit[_ngcontent-%COMP%]{border-left:3px solid var(--color-primary)}.metric-card.profit.negative[_ngcontent-%COMP%]{border-left-color:var(--color-error)}.metric-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-secondary);text-transform:uppercase;letter-spacing:.05em;font-weight:600}.metric-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;font-family:JetBrains Mono,monospace;color:var(--color-text-primary)}.metric-card.revenue[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{color:var(--color-success-dark)}.metric-card.costs[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{color:var(--color-warning-dark)}.metric-card.profit[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{color:var(--color-primary)}.metric-card.profit.negative[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{color:var(--color-error)}.metric-range[_ngcontent-%COMP%]{font-size:.7rem;color:var(--color-text-tertiary);font-family:JetBrains Mono,monospace}"],changeDetection:0})}};var Pj=(n,e)=>e.id;function Nj(n,e){n&1&&(y(0,"div",1)(1,"div",3),C(2,"\u{1F3E0}"),g(),y(3,"h3"),C(4,"No apartment selected"),g(),y(5,"p"),C(6,"Select an apartment from the dropdown above or add a new apartment from the sidebar"),g()())}function Oj(n,e){n&1&&(y(0,"p",19),C(1,"No upcoming rent collections this month"),g())}function kj(n,e){if(n&1&&(y(0,"span",30),C(1),g()),n&2){let t=P().$implicit,r=P(3);x(),Si(" (",r.formatCurrency(t.amountMin)," - ",r.formatCurrency(t.amountMax),") ")}}function Vj(n,e){if(n&1&&(y(0,"div",21)(1,"div",22)(2,"span",23),C(3),g(),y(4,"span",24),C(5),g()(),y(6,"div",25)(7,"div",26),C(8),g(),y(9,"div",27),C(10),g()(),y(11,"div",28)(12,"span",29),C(13),g(),X(14,kj,2,2,"span",30),g()()),n&2){let t=e.$implicit,r=P(3);x(3),_e(t.day),x(2),_e(t.monthName),x(3),_e(t.tenantName),x(2),Ge("Room: ",t.roomName,""),x(3),_e(r.formatCurrency(t.amount)),x(),Z(t.amountMin!==t.amountMax?14:-1)}}function Fj(n,e){if(n&1&&(y(0,"div",20),ht(1,Vj,15,6,"div",21,Pj),g()),n&2){P();let t=vE(29);x(),pt(t)}}function Lj(n,e){if(n&1){let t=we();y(0,"div",2)(1,"div",4)(2,"input",5),$("blur",function(i){j(t);let o=P();return B(o.onApartmentNameChange(i))})("keydown.enter",function(i){j(t);let o=P();return B(o.blurTarget(i))}),g()(),y(3,"section",6)(4,"h3",7),C(5,"Financial Summary"),g(),$o(6),y(7,"div",8)(8,"div",9)(9,"h4",10),C(10,"Revenue"),g(),y(11,"div",11),Ye(12,"app-metrics-card",12)(13,"app-metrics-card",13),g()(),y(14,"div",9)(15,"h4",10),C(16,"Costs"),g(),y(17,"div",11),Ye(18,"app-metrics-card",14)(19,"app-metrics-card",15),g()(),y(20,"div",9)(21,"h4",10),C(22,"Profit"),g(),y(23,"div",11),Ye(24,"app-metrics-card",16)(25,"app-metrics-card",17),g()()()(),y(26,"section",18)(27,"h3",7),C(28,"Upcoming Rent Collections"),g(),$o(29),X(30,Oj,2,0,"p",19)(31,Fj,3,0,"div",20),g()()}if(n&2){let t=P();x(2),ie("value",t.currentApartment().name);let r=t.getMetrics();x(10),ie("value",r.monthlyRevenue)("minValue",r.minMonthlyRevenue)("maxValue",r.maxMonthlyRevenue)("showRange",!0),x(),ie("value",r.yearlyRevenue)("minValue",r.minYearlyRevenue)("maxValue",r.maxYearlyRevenue)("showRange",!0),x(5),ie("value",r.monthlyCosts),x(),ie("value",r.yearlyCosts),x(5),ie("value",r.monthlyProfit)("isNegative",r.monthlyProfit<0)("minValue",r.minMonthlyProfit)("maxValue",r.maxMonthlyProfit)("showRange",!0),x(),ie("value",r.yearlyProfit)("isNegative",r.yearlyProfit<0)("minValue",r.minYearlyProfit)("maxValue",r.maxYearlyProfit)("showRange",!0),x(4);let i=yE(t.getUpcomingRentCollections());x(),Z(i.length===0?30:31)}}var $f=class n{constructor(){this.apartmentService=k(bt);this.currentApartment=this.apartmentService.currentApartment}getMetrics(){let e=this.currentApartment();return e?this.apartmentService.calculateMetrics(e):{monthlyRevenue:0,yearlyRevenue:0,monthlyCosts:0,yearlyCosts:0,monthlyProfit:0,yearlyProfit:0,minMonthlyRevenue:0,maxMonthlyRevenue:0,minYearlyRevenue:0,maxYearlyRevenue:0,minMonthlyProfit:0,maxMonthlyProfit:0,minYearlyProfit:0,maxYearlyProfit:0}}getUpcomingRentCollections(){let e=this.currentApartment();if(!e)return[];let t=new Date,r=t.getMonth(),i=t.getFullYear(),o=new Date(i,r+1,0).getDate(),s=t.getDate(),c=[];for(let l of e.tenants){if(!l.rentCollectionDay||!Fc(l,t))continue;let u=l.rentCollectionDay,f=e.rooms.find(p=>p.id===l.roomId);if(f&&u>=s&&u<=o){let v=new Date(i,r,u).toLocaleDateString("en-US",{month:"short"}),_=(f.rentMin+f.rentMax)/2;c.push({id:`${l.id}-${u}`,day:u,monthName:v,tenantName:l.name,roomName:f.name,amount:_,amountMin:f.rentMin,amountMax:f.rentMax})}}return c.sort((l,u)=>l.day-u.day)}formatCurrency(e){return new Intl.NumberFormat("en-AE",{style:"currency",currency:"AED",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}onApartmentNameChange(e){let t=this.currentApartment();if(!t)return;let r=e.target,i=r.value.trim();i&&i!==t.name?this.apartmentService.updateApartmentName(t.id,i):r.value=t.name}blurTarget(e){e.target.blur()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-dashboard"]],decls:3,vars:1,consts:[[1,"dashboard-container"],[1,"empty-state"],[1,"dashboard-content"],[1,"empty-icon"],[1,"dashboard-header"],["type","text",1,"apartment-title-input",3,"blur","keydown.enter","value"],[1,"metrics-section"],[1,"section-title"],[1,"metrics-columns"],[1,"metrics-column"],[1,"column-title"],[1,"column-cards"],["label","Monthly Revenue","type","revenue",3,"value","minValue","maxValue","showRange"],["label","Yearly Revenue","type","revenue",3,"value","minValue","maxValue","showRange"],["label","Monthly Costs","type","costs",3,"value"],["label","Yearly Costs","type","costs",3,"value"],["label","Monthly Profit","type","profit",3,"value","isNegative","minValue","maxValue","showRange"],["label","Yearly Profit","type","profit",3,"value","isNegative","minValue","maxValue","showRange"],[1,"rent-collections-section"],[1,"no-collections"],[1,"collections-list"],[1,"collection-item"],[1,"collection-date"],[1,"date-day"],[1,"date-month"],[1,"collection-details"],[1,"collection-tenant"],[1,"collection-room"],[1,"collection-amount"],[1,"amount-value"],[1,"amount-range"]],template:function(t,r){t&1&&(y(0,"div",0),X(1,Nj,7,0,"div",1)(2,Lj,32,23,"div",2),g()),t&2&&(x(),Z(r.currentApartment()?2:1))},dependencies:[Uf,Qt],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:var(--spacing-xl);min-height:100%}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-2xl) var(--spacing-xl);color:var(--color-text-secondary)}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--color-text-secondary)}.dashboard-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.dashboard-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.apartment-title-input[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text-primary);margin:0;background:transparent;border:2px solid transparent;border-radius:var(--border-radius-md);padding:var(--spacing-xs) var(--spacing-sm);font-family:inherit;width:100%;max-width:600px;transition:all .2s ease}.apartment-title-input[_ngcontent-%COMP%]:hover{border-color:var(--color-border);background:var(--color-bg-secondary)}.apartment-title-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);background:var(--color-card-bg);box-shadow:0 0 0 3px #2563eb1a}.metrics-section[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-text-primary);margin:0 0 var(--spacing-lg) 0}.metrics-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:var(--spacing-xl)}.metrics-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md);align-items:stretch}.column-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--color-text-secondary);margin:0 0 var(--spacing-xs) 0;padding-left:calc(3px + var(--spacing-md));text-transform:uppercase;letter-spacing:.05em}.column-cards[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}@media (max-width: 1024px){.metrics-columns[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:var(--spacing-md);padding-left:max(var(--spacing-md),env(safe-area-inset-left));padding-right:max(var(--spacing-md),env(safe-area-inset-right))}.apartment-title-input[_ngcontent-%COMP%]{font-size:1.5rem}.metrics-columns[_ngcontent-%COMP%]{grid-template-columns:1fr}.collection-item[_ngcontent-%COMP%]{flex-wrap:wrap;gap:var(--spacing-md)}.collection-amount[_ngcontent-%COMP%]{width:100%;align-items:flex-start}}.rent-collections-section[_ngcontent-%COMP%]{margin-top:var(--spacing-xl)}.no-collections[_ngcontent-%COMP%]{color:var(--color-text-secondary);text-align:center;padding:var(--spacing-lg);margin:0}.collections-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.collection-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-lg);padding:var(--spacing-md);background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);transition:all .2s ease}.collection-item[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);border-color:var(--color-primary-light)}.collection-date[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-width:60px;padding:var(--spacing-sm);background:var(--color-primary);border-radius:var(--border-radius-md);color:#fff}.date-day[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;line-height:1}.date-month[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;text-transform:uppercase;opacity:.9}.collection-details[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:var(--spacing-xs)}.collection-tenant[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--color-text-primary)}.collection-room[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-text-secondary)}.collection-amount[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:var(--spacing-xs)}.amount-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--color-primary)}.amount-range[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-secondary)}"],changeDetection:0})}};var jj=(n,e)=>e.id;function Bj(n,e){if(n&1){let t=we();y(0,"div",2)(1,"input",5),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.newExpenseName,i)||(o.newExpenseName=i),B(i)}),g(),y(2,"div",6)(3,"input",7),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.newExpenseAmount,i)||(o.newExpenseAmount=i),B(i)}),g(),y(4,"select",8),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.newExpenseCadence,i)||(o.newExpenseCadence=i),B(i)}),y(5,"option",9),C(6,"Monthly"),g(),y(7,"option",10),C(8,"Yearly"),g()()(),y(9,"div",11)(10,"button",12),$("click",function(){j(t);let i=P();return B(i.handleAdd())}),C(11,"Add"),g(),y(12,"button",13),$("click",function(){j(t);let i=P();return B(i.showAddForm.set(!1))}),C(13,"Cancel"),g()()()}if(n&2){let t=P();x(),Re("ngModel",t.newExpenseName),x(2),Re("ngModel",t.newExpenseAmount),x(),Re("ngModel",t.newExpenseCadence)}}function Uj(n,e){n&1&&(y(0,"p",3),C(1,"No expenses added yet"),g())}function $j(n,e){if(n&1){let t=we();y(0,"div",14)(1,"div",15)(2,"input",16),$("blur",function(i){let o=j(t).$implicit,s=P(2);return B(s.onExpenseNameChange(o.id,i))})("keydown.enter",function(i){j(t);let o=P(2);return B(o.blurTarget(i))}),g(),y(3,"div",17)(4,"input",18),$("blur",function(i){let o=j(t).$implicit,s=P(2);return B(s.onAmountChange(o.id,i))})("keydown.enter",function(i){j(t);let o=P(2);return B(o.blurTarget(i))}),g(),y(5,"select",19),$("change",function(i){let o=j(t).$implicit,s=P(2);return B(s.onCadenceChange(o.id,i))}),y(6,"option",9),C(7,"Monthly"),g(),y(8,"option",10),C(9,"Yearly"),g()()()(),y(10,"button",20),$("click",function(){let i=j(t).$implicit,o=P(2);return B(o.onRemove(i.id))}),C(11,"\u2715"),g()()}if(n&2){let t=e.$implicit;x(2),ie("value",t.name),x(2),ie("value",t.amount),x(),ie("value",t.cadence)}}function Hj(n,e){if(n&1&&(y(0,"div",4),ht(1,$j,12,3,"div",14,jj),g()),n&2){let t=P();x(),pt(t.expenses())}}var Hf=class n{constructor(){this.expenses=je.required();this.expenseAdded=ze();this.expenseUpdated=ze();this.expenseRemoved=ze();this.showAddForm=W(!1);this.newExpenseName=W("");this.newExpenseAmount=W(0);this.newExpenseCadence=W("monthly")}handleAdd(){let e=this.newExpenseName().trim();e&&(this.expenseAdded.emit({name:e,amount:this.newExpenseAmount(),cadence:this.newExpenseCadence()}),this.newExpenseName.set(""),this.newExpenseAmount.set(0),this.newExpenseCadence.set("monthly"),this.showAddForm.set(!1))}onExpenseNameChange(e,t){let r=t.target;this.expenseUpdated.emit({id:e,updates:{name:r.value}})}onAmountChange(e,t){let r=t.target;this.expenseUpdated.emit({id:e,updates:{amount:+r.value}})}onCadenceChange(e,t){let r=t.target;this.expenseUpdated.emit({id:e,updates:{cadence:r.value}})}onRemove(e){this.expenseRemoved.emit(e)}blurTarget(e){e.target.blur()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-expense-list"]],inputs:{expenses:[1,"expenses"]},outputs:{expenseAdded:"expenseAdded",expenseUpdated:"expenseUpdated",expenseRemoved:"expenseRemoved"},decls:8,vars:2,consts:[[1,"section-header"],[1,"btn-add-small",3,"click"],[1,"add-form"],[1,"empty-list"],[1,"expenses-list"],["type","text","placeholder","Expense name",3,"ngModelChange","ngModel"],[1,"expense-inputs"],["type","number","placeholder","Amount","min","0",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","monthly"],["value","yearly"],[1,"form-actions"],[1,"btn-confirm",3,"click"],[1,"btn-cancel",3,"click"],[1,"expense-item"],[1,"expense-info"],["type","text",1,"inline-edit",3,"blur","keydown.enter","value"],[1,"expense-amount"],["type","number","min","0",1,"inline-number",3,"blur","keydown.enter","value"],[3,"change","value"],[1,"btn-delete-small",3,"click"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"h3"),C(2,"Expenses"),g(),y(3,"button",1),$("click",function(){return r.showAddForm.set(!0)}),C(4,"+ Add Expense"),g()(),X(5,Bj,14,3,"div",2)(6,Uj,2,0,"p",3)(7,Hj,3,0,"div",4)),t&2&&(x(5),Z(r.showAddForm()?5:-1),x(),Z(r.expenses().length===0?6:7))},dependencies:[Qt,Vf,Ff,Kt,Ar,Ns,hn,Rr,nn],styles:[".section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-md)}@media (max-width: 768px){.section-header[_ngcontent-%COMP%]{flex-wrap:wrap;gap:var(--spacing-sm)}.expense-inputs[_ngcontent-%COMP%]{flex-wrap:wrap}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{min-height:44px}}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--color-text-primary);font-size:1rem;font-weight:600;margin:0}.btn-add-small[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-primary-light);border-radius:var(--border-radius-md);background:transparent;color:var(--color-primary);font-size:.85rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-add-small[_ngcontent-%COMP%]:hover{background:var(--color-primary-lighter);background-opacity:.1;border-color:var(--color-primary)}.add-form[_ngcontent-%COMP%]{background:var(--color-bg-secondary);border:1px solid var(--color-primary-light);border-radius:var(--border-radius-lg);padding:var(--spacing-md);margin-bottom:var(--spacing-md);display:flex;flex-direction:column;gap:var(--spacing-sm)}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:var(--spacing-sm);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-family:inherit;transition:all .2s ease}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary)}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--color-text-tertiary)}.expense-inputs[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:center}.expense-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1}.expense-inputs[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:120px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);justify-content:flex-end}.btn-confirm[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:none;border-radius:var(--border-radius-md);background:var(--color-primary);color:#fff;font-size:.85rem;font-weight:600;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-confirm[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark);transform:translateY(-1px)}.btn-cancel[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-secondary);font-size:.85rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-cancel[_ngcontent-%COMP%]:hover{border-color:var(--color-border-light);color:var(--color-text-primary)}.empty-list[_ngcontent-%COMP%]{color:var(--color-text-tertiary);font-size:.9rem;text-align:center;padding:var(--spacing-md);margin:0}.expenses-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.expense-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-sm) var(--spacing-md);background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);transition:all .2s ease}.expense-item[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.expense-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs);flex:1}.inline-edit[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--color-text-primary);font-size:.95rem;font-weight:500;font-family:inherit;padding:var(--spacing-xs);border-radius:var(--border-radius-sm);width:100%;transition:all .2s ease}.inline-edit[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.inline-edit[_ngcontent-%COMP%]:focus{outline:none;background:var(--color-bg-secondary)}.expense-amount[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);color:var(--color-text-secondary);font-size:.85rem}.inline-number[_ngcontent-%COMP%]{width:70px;background:transparent;border:none;color:var(--color-text-secondary);font-size:.85rem;font-family:JetBrains Mono,monospace;padding:var(--spacing-xs);border-radius:var(--border-radius-sm);transition:all .2s ease}.inline-number[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.inline-number[_ngcontent-%COMP%]:focus{outline:none;background:var(--color-bg-secondary);color:var(--color-text-primary)}.inline-number[_ngcontent-%COMP%]::-webkit-inner-spin-button, .inline-number[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.expense-amount[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);border:1px solid var(--color-border);border-radius:var(--border-radius-sm);background:var(--color-card-bg);color:var(--color-text-secondary);font-size:.8rem;font-family:inherit;cursor:pointer}.expense-amount[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary)}.btn-delete-small[_ngcontent-%COMP%]{width:28px;height:28px;border:none;border-radius:var(--border-radius-sm);background:transparent;color:var(--color-text-tertiary);font-size:.8rem;cursor:pointer;transition:all .2s ease}.btn-delete-small[_ngcontent-%COMP%]:hover{background:#ef44441a;color:var(--color-error)}"],changeDetection:0})}};function zj(n,e){n&1&&(y(0,"div",3)(1,"div",5),C(2,"\u{1F4BC}"),g(),y(3,"h3"),C(4,"No apartment selected"),g(),y(5,"p"),C(6,"Select an apartment from the dropdown above to manage expenses"),g()())}function qj(n,e){if(n&1){let t=we();y(0,"div",4)(1,"app-expense-list",6),$("expenseAdded",function(i){j(t);let o=P();return B(o.onExpenseAdded(i))})("expenseUpdated",function(i){j(t);let o=P();return B(o.onExpenseUpdated(i))})("expenseRemoved",function(i){j(t);let o=P();return B(o.onExpenseRemoved(i))}),g()()}if(n&2){let t=P();x(),ie("expenses",t.currentApartment().expenses)}}var zf=class n{constructor(){this.apartmentService=k(bt);this.currentApartment=this.apartmentService.currentApartment}onExpenseAdded(e){let t=this.currentApartment();t&&this.apartmentService.addExpense(t.id,e)}onExpenseUpdated(e){let t=this.currentApartment();t&&this.apartmentService.updateExpense(t.id,e.id,e.updates)}onExpenseRemoved(e){let t=this.currentApartment();t&&this.apartmentService.removeExpense(t.id,e)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-expenses"]],decls:8,vars:2,consts:[[1,"expenses-page"],[1,"page-header"],[1,"page-subtitle"],[1,"empty-state"],[1,"expenses-content"],[1,"empty-icon"],[3,"expenseAdded","expenseUpdated","expenseRemoved","expenses"]],template:function(t,r){if(t&1&&(y(0,"div",0)(1,"div",1)(2,"h1"),C(3,"Expenses"),g(),y(4,"p",2),C(5),g()(),X(6,zj,7,0,"div",3)(7,qj,2,1,"div",4),g()),t&2){let i;x(5),Ge("Manage expenses for ",((i=r.currentApartment())==null?null:i.name)||"selected apartment",""),x(),Z(r.currentApartment()?7:6)}},dependencies:[Hf],styles:[".expenses-page[_ngcontent-%COMP%]{padding:var(--spacing-xl);min-height:100%}.page-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.page-subtitle[_ngcontent-%COMP%]{color:var(--color-text-secondary);margin:0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-2xl) var(--spacing-xl);color:var(--color-text-secondary)}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--color-text-secondary)}.expenses-content[_ngcontent-%COMP%]{max-width:800px}@media (max-width: 768px){.expenses-page[_ngcontent-%COMP%]{padding:var(--spacing-md);padding-left:max(var(--spacing-md),env(safe-area-inset-left));padding-right:max(var(--spacing-md),env(safe-area-inset-right))}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}"],changeDetection:0})}};var Gj=(n,e)=>e.payment.id;function Wj(n,e){n&1&&(y(0,"p",0),C(1,"No payments for this month"),g())}function Kj(n,e){n&1&&(y(0,"span",5),C(1,"\u2713"),g())}function Qj(n,e){if(n&1&&(y(0,"span",13),C(1),g()),n&2){let t=P().$implicit;x(),Ge("Paid: ",t.paidDateFormatted,"")}}function Yj(n,e){if(n&1){let t=we();y(0,"div",3)(1,"button",4),$("click",function(){let i=j(t).$implicit,o=P(2);return B(o.paymentToggled.emit(i.payment.id))}),X(2,Kj,2,0,"span",5),g(),y(3,"div",6)(4,"div",7)(5,"span",8),C(6),g(),y(7,"span",9),C(8),g(),y(9,"span",10),C(10),g()(),y(11,"div",11)(12,"span",12),C(13),g(),X(14,Qj,2,1,"span",13),g()(),y(15,"div",14)(16,"span",15),C(17),g(),y(18,"span",16),C(19),g()(),y(20,"button",17),$("click",function(){let i=j(t).$implicit,o=P(2);return B(o.paymentRemoved.emit(i.payment.id))}),C(21,"\u2715"),g()()}if(n&2){let t=e.$implicit;yt("paid",t.status==="paid")("overdue",t.status==="overdue"),x(),yt("checked",t.status==="paid"),dr("aria-label",t.status==="paid"?"Mark as unpaid":"Mark as paid"),x(),Z(t.status==="paid"?2:-1),x(3),Aa("type-"+t.payment.type),x(),_e(t.payment.type),x(2),_e(t.roomName),x(2),_e(t.tenantName),x(3),Ge("Due: ",t.dueDateFormatted,""),x(),Z(t.payment.paidDate?14:-1),x(3),_e(t.amountFormatted),x(),Aa("status-"+t.status),x(),_e(t.status)}}function Zj(n,e){if(n&1&&(y(0,"div",1),ht(1,Yj,22,19,"div",2,Gj),g()),n&2){let t=P();x(),pt(t.enrichedPayments())}}var qf=class n{constructor(){this.payments=je.required();this.tenants=je.required();this.rooms=je.required();this.paymentToggled=ze();this.paymentRemoved=ze();this.formatter=new Intl.NumberFormat("en-AE",{style:"currency",currency:"AED",minimumFractionDigits:2,maximumFractionDigits:2});this.enrichedPayments=Ze(()=>{let e=new Map(this.tenants().map(i=>[i.id,i])),t=new Map(this.rooms().map(i=>[i.id,i])),r=new Date;return r.setHours(0,0,0,0),this.payments().map(i=>{let o=e.get(i.tenantId),s=t.get(i.roomId),c=this.getStatus(i,r);return{payment:i,tenantName:o?.name??"Unknown",roomName:s?.name??"Unknown",amountFormatted:this.formatter.format(i.amount),dueDateFormatted:this.formatDate(i.dueDate),paidDateFormatted:i.paidDate?this.formatDate(i.paidDate):"",status:c}})})}getStatus(e,t){if(e.paidDate)return"paid";let r=e.dueDate.split("-").map(Number),i=new Date(r[0],r[1]-1,r[2]);return i.setHours(0,0,0,0),i<t?"overdue":"due"}formatDate(e){let t=e.split("-").map(Number);return new Date(t[0],t[1]-1,t[2]).toLocaleDateString("en-US",{month:"short",day:"numeric"})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-payment-list"]],inputs:{payments:[1,"payments"],tenants:[1,"tenants"],rooms:[1,"rooms"]},outputs:{paymentToggled:"paymentToggled",paymentRemoved:"paymentRemoved"},decls:2,vars:1,consts:[[1,"empty-list"],[1,"payments-list"],[1,"payment-item",3,"paid","overdue"],[1,"payment-item"],[1,"pay-toggle",3,"click"],[1,"check-icon"],[1,"payment-details"],[1,"payment-primary"],[1,"type-badge"],[1,"room-name"],[1,"tenant-name"],[1,"payment-secondary"],[1,"due-date"],[1,"paid-date"],[1,"payment-right"],[1,"payment-amount"],[1,"status-badge"],["aria-label","Delete payment",1,"btn-delete",3,"click"]],template:function(t,r){t&1&&X(0,Wj,2,0,"p",0)(1,Zj,3,0,"div",1),t&2&&Z(r.payments().length===0?0:1)},styles:[".empty-list[_ngcontent-%COMP%]{color:var(--color-text-tertiary);font-size:.9rem;text-align:center;padding:var(--spacing-xl);margin:0}.payments-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.payment-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md);padding:var(--spacing-md);background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);transition:all .2s ease}.payment-item[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.payment-item.paid[_ngcontent-%COMP%]{opacity:.7}.payment-item.overdue[_ngcontent-%COMP%]{border-color:var(--color-error);border-left-width:3px}.pay-toggle[_ngcontent-%COMP%]{width:28px;height:28px;min-width:28px;border:2px solid var(--color-border-light);border-radius:var(--border-radius-sm);background:transparent;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;padding:0}.pay-toggle[_ngcontent-%COMP%]:hover{border-color:var(--color-primary)}.pay-toggle.checked[_ngcontent-%COMP%]{background:var(--color-success);border-color:var(--color-success)}.check-icon[_ngcontent-%COMP%]{color:#fff;font-size:.85rem;font-weight:700;line-height:1}.payment-details[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:var(--spacing-xs);min-width:0}.payment-primary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);flex-wrap:wrap}.type-badge[_ngcontent-%COMP%]{font-size:.65rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;padding:1px var(--spacing-xs);border-radius:var(--border-radius-sm);background:var(--color-bg-secondary);color:var(--color-text-secondary);border:1px solid var(--color-border)}.type-rent[_ngcontent-%COMP%]{background:#2563eb1a;color:var(--color-primary);border-color:transparent}.type-bill[_ngcontent-%COMP%]{background:#f59e0b1a;color:var(--color-warning-dark);border-color:transparent}.room-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text-primary);font-size:.95rem}.tenant-name[_ngcontent-%COMP%]{color:var(--color-text-secondary);font-size:.85rem}.payment-secondary[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-md);font-size:.8rem;color:var(--color-text-tertiary)}.payment-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:var(--spacing-xs);flex-shrink:0}.payment-amount[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:var(--color-text-primary);font-family:JetBrains Mono,monospace}.status-badge[_ngcontent-%COMP%]{font-size:.7rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;padding:2px var(--spacing-sm);border-radius:var(--border-radius-sm)}.status-paid[_ngcontent-%COMP%]{background:#10b9811a;color:var(--color-success-dark)}.status-due[_ngcontent-%COMP%]{background:#f59e0b1a;color:var(--color-warning-dark)}.status-overdue[_ngcontent-%COMP%]{background:#ef44441a;color:var(--color-error-dark)}.btn-delete[_ngcontent-%COMP%]{width:28px;height:28px;min-width:28px;border:none;border-radius:var(--border-radius-sm);background:transparent;color:var(--color-text-tertiary);font-size:.8rem;cursor:pointer;transition:all .2s ease;padding:0;flex-shrink:0}.btn-delete[_ngcontent-%COMP%]:hover{background:#ef44441a;color:var(--color-error)}@media (max-width: 768px){.payment-item[_ngcontent-%COMP%]{flex-wrap:wrap}.payment-right[_ngcontent-%COMP%]{width:100%;flex-direction:row;justify-content:space-between;align-items:center;padding-left:calc(28px + var(--spacing-md))}}"],changeDetection:0})}};function Jj(n,e){n&1&&(y(0,"div",3)(1,"div",5),C(2,"\u{1F4B3}"),g(),y(3,"h3"),C(4,"No apartment selected"),g(),y(5,"p"),C(6,"Select an apartment from the dropdown above to view payments"),g()())}function Xj(n,e){if(n&1){let t=we();y(0,"div",4)(1,"div",6)(2,"button",7),$("click",function(){j(t);let i=P();return B(i.prevMonth())}),C(3,"\u2039"),g(),y(4,"span",8),C(5),g(),y(6,"button",7),$("click",function(){j(t);let i=P();return B(i.nextMonth())}),C(7,"\u203A"),g()(),y(8,"app-payment-list",9),$("paymentToggled",function(i){j(t);let o=P();return B(o.onPaymentToggled(i))})("paymentRemoved",function(i){j(t);let o=P();return B(o.onPaymentRemoved(i))}),g()()}if(n&2){let t=P();x(5),_e(t.monthLabel()),x(3),ie("payments",t.payments())("tenants",t.currentApartment().tenants)("rooms",t.currentApartment().rooms)}}var Gf=class n{constructor(){this.apartmentService=k(bt);this.currentApartment=this.apartmentService.currentApartment;this.now=new Date;this.selectedMonth=W(this.now.getMonth());this.selectedYear=W(this.now.getFullYear());this.monthLabel=Ze(()=>new Date(this.selectedYear(),this.selectedMonth(),1).toLocaleDateString("en-US",{month:"long",year:"numeric"}));this.payments=Ze(()=>{let e=this.currentApartment();return e?this.apartmentService.getPaymentsForMonth(e.id,this.selectedMonth(),this.selectedYear()):[]});hr(()=>{let e=this.currentApartment(),t=this.selectedMonth(),r=this.selectedYear();e&&this.apartmentService.generateRentPayments(e.id,t,r)})}prevMonth(){this.selectedMonth()===0?(this.selectedMonth.set(11),this.selectedYear.update(e=>e-1)):this.selectedMonth.update(e=>e-1)}nextMonth(){this.selectedMonth()===11?(this.selectedMonth.set(0),this.selectedYear.update(e=>e+1)):this.selectedMonth.update(e=>e+1)}onPaymentToggled(e){let t=this.currentApartment();t&&this.apartmentService.togglePaymentPaid(t.id,e)}onPaymentRemoved(e){let t=this.currentApartment();t&&this.apartmentService.removePayment(t.id,e)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-payments"]],decls:8,vars:2,consts:[[1,"payments-page"],[1,"page-header"],[1,"page-subtitle"],[1,"empty-state"],[1,"payments-content"],[1,"empty-icon"],[1,"month-nav"],[1,"btn-month",3,"click"],[1,"month-label"],[3,"paymentToggled","paymentRemoved","payments","tenants","rooms"]],template:function(t,r){if(t&1&&(y(0,"div",0)(1,"div",1)(2,"h1"),C(3,"Payments"),g(),y(4,"p",2),C(5),g()(),X(6,Jj,7,0,"div",3)(7,Xj,9,4,"div",4),g()),t&2){let i;x(5),Ge("Track rent payments for ",((i=r.currentApartment())==null?null:i.name)||"selected apartment",""),x(),Z(r.currentApartment()?7:6)}},dependencies:[qf],styles:[".payments-page[_ngcontent-%COMP%]{padding:var(--spacing-xl);min-height:100%}.page-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.page-subtitle[_ngcontent-%COMP%]{color:var(--color-text-secondary);margin:0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-2xl) var(--spacing-xl);color:var(--color-text-secondary)}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--color-text-secondary)}.payments-content[_ngcontent-%COMP%]{max-width:800px}.month-nav[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--spacing-lg);margin-bottom:var(--spacing-xl)}.btn-month[_ngcontent-%COMP%]{width:36px;height:36px;border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:1.25rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;padding:0}.btn-month[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);border-color:var(--color-primary-light)}.month-label[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:var(--color-text-primary);min-width:160px;text-align:center}@media (max-width: 768px){.payments-page[_ngcontent-%COMP%]{padding:var(--spacing-md);padding-left:max(var(--spacing-md),env(safe-area-inset-left));padding-right:max(var(--spacing-md),env(safe-area-inset-right))}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}"],changeDetection:0})}};var eB=(n,e)=>e.id;function tB(n,e){if(n&1){let t=we();y(0,"div",2)(1,"input",5),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.newRoomName,i)||(o.newRoomName=i),B(i)}),g(),y(2,"div",6)(3,"input",7),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.newRoomRentMin,i)||(o.newRoomRentMin=i),B(i)}),g(),y(4,"span",8),C(5,"-"),g(),y(6,"input",9),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.newRoomRentMax,i)||(o.newRoomRentMax=i),B(i)}),g()(),y(7,"div",10)(8,"button",11),$("click",function(){j(t);let i=P();return B(i.handleAdd())}),C(9,"Add"),g(),y(10,"button",12),$("click",function(){j(t);let i=P();return B(i.showAddForm.set(!1))}),C(11,"Cancel"),g()()()}if(n&2){let t=P();x(),Re("ngModel",t.newRoomName),x(2),Re("ngModel",t.newRoomRentMin),x(3),Re("ngModel",t.newRoomRentMax)}}function nB(n,e){n&1&&(y(0,"p",3),C(1,"No rooms added yet"),g())}function rB(n,e){if(n&1&&(y(0,"span",18),C(1),g()),n&2){let t=P().$implicit,r=P(2);x(),_e(r.getTenantNames(t.id).join(", "))}}function iB(n,e){n&1&&(y(0,"span",19),C(1,"\u2014"),g())}function oB(n,e){n&1&&(y(0,"span",20),C(1,"Taken"),g())}function sB(n,e){n&1&&(y(0,"span",21),C(1,"Available"),g())}function aB(n,e){if(n&1){let t=we();y(0,"tr")(1,"td")(2,"input",15),$("blur",function(i){let o=j(t).$implicit,s=P(2);return B(s.onRoomNameChange(o.id,i))})("keydown.enter",function(i){j(t);let o=P(2);return B(o.blurTarget(i))}),g()(),y(3,"td")(4,"div",16)(5,"input",17),$("blur",function(i){let o=j(t).$implicit,s=P(2);return B(s.onRentMinChange(o.id,i))})("keydown.enter",function(i){j(t);let o=P(2);return B(o.blurTarget(i))}),g(),y(6,"span"),C(7,"-"),g(),y(8,"input",17),$("blur",function(i){let o=j(t).$implicit,s=P(2);return B(s.onRentMaxChange(o.id,i))})("keydown.enter",function(i){j(t);let o=P(2);return B(o.blurTarget(i))}),g()()(),y(9,"td"),X(10,rB,2,1,"span",18)(11,iB,2,0,"span",19),g(),y(12,"td"),X(13,oB,2,0,"span",20)(14,sB,2,0,"span",21),g(),y(15,"td")(16,"button",22),$("click",function(){let i=j(t).$implicit,o=P(2);return B(o.onRemove(i.id))}),C(17,"\u2715"),g()()()}if(n&2){let t=e.$implicit,r=P(2);yt("taken-row",r.isRoomTaken(t.id)),x(2),ie("value",t.name),x(3),ie("value",t.rentMin),x(3),ie("value",t.rentMax),x(2),Z(r.getTenantNames(t.id).length>0?10:11),x(3),Z(r.isRoomTaken(t.id)?13:14)}}function cB(n,e){if(n&1&&(y(0,"div",4)(1,"table",13)(2,"thead")(3,"tr")(4,"th"),C(5,"Room"),g(),y(6,"th"),C(7,"Rent (AED/mo)"),g(),y(8,"th"),C(9,"Tenants"),g(),y(10,"th"),C(11,"Taken"),g(),y(12,"th"),C(13,"Actions"),g()()(),y(14,"tbody"),ht(15,aB,18,7,"tr",14,eB),g()()()),n&2){let t=P();x(15),pt(t.rooms())}}var Wf=class n{constructor(){this.rooms=je.required();this.tenants=je([]);this.roomAdded=ze();this.roomUpdated=ze();this.roomRemoved=ze();this.showAddForm=W(!1);this.newRoomName=W("");this.newRoomRentMin=W(0);this.newRoomRentMax=W(0)}handleAdd(){let e=this.newRoomName().trim();e&&(this.roomAdded.emit({name:e,rentMin:this.newRoomRentMin(),rentMax:this.newRoomRentMax()}),this.newRoomName.set(""),this.newRoomRentMin.set(0),this.newRoomRentMax.set(0),this.showAddForm.set(!1))}onRoomNameChange(e,t){let r=t.target;this.roomUpdated.emit({id:e,updates:{name:r.value}})}onRentMinChange(e,t){let r=t.target;this.roomUpdated.emit({id:e,updates:{rentMin:+r.value}})}onRentMaxChange(e,t){let r=t.target;this.roomUpdated.emit({id:e,updates:{rentMax:+r.value}})}getTenantNames(e){return Lc(this.tenants(),e).map(t=>t.name)}isRoomTaken(e){return Lc(this.tenants(),e).length>0}onRemove(e){this.roomRemoved.emit(e)}blurTarget(e){e.target.blur()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-room-list"]],inputs:{rooms:[1,"rooms"],tenants:[1,"tenants"]},outputs:{roomAdded:"roomAdded",roomUpdated:"roomUpdated",roomRemoved:"roomRemoved"},decls:8,vars:2,consts:[[1,"section-header"],[1,"btn-add-small",3,"click"],[1,"add-form"],[1,"empty-list"],[1,"rooms-table-wrapper"],["type","text","placeholder","Room name",3,"ngModelChange","ngModel"],[1,"rent-inputs"],["type","number","placeholder","Min rent","min","0",3,"ngModelChange","ngModel"],[1,"separator"],["type","number","placeholder","Max rent","min","0",3,"ngModelChange","ngModel"],[1,"form-actions"],[1,"btn-confirm",3,"click"],[1,"btn-cancel",3,"click"],[1,"rooms-table"],[3,"taken-row"],["type","text",1,"inline-edit",3,"blur","keydown.enter","value"],[1,"rent-display"],["type","number","min","0",1,"inline-number",3,"blur","keydown.enter","value"],[1,"tenant-list"],[1,"text-muted"],[1,"taken-pill"],[1,"not-taken-pill"],[1,"btn-delete-small",3,"click"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"h3"),C(2,"Rooms"),g(),y(3,"button",1),$("click",function(){return r.showAddForm.set(!0)}),C(4,"+ Add Room"),g()(),X(5,tB,12,3,"div",2)(6,nB,2,0,"p",3)(7,cB,17,0,"div",4)),t&2&&(x(5),Z(r.showAddForm()?5:-1),x(),Z(r.rooms().length===0?6:7))},dependencies:[Qt,Kt,Ar,hn,Rr,nn],styles:[".section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-md)}@media (max-width: 768px){.section-header[_ngcontent-%COMP%]{flex-wrap:wrap;gap:var(--spacing-sm)}.rooms-table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-height:44px}}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--color-text-primary);font-size:1rem;font-weight:600;margin:0}.btn-add-small[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-primary-light);border-radius:var(--border-radius-md);background:transparent;color:var(--color-primary);font-size:.85rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-add-small[_ngcontent-%COMP%]:hover{background:var(--color-primary-lighter);background-opacity:.1;border-color:var(--color-primary)}.add-form[_ngcontent-%COMP%]{background:var(--color-bg-secondary);border:1px solid var(--color-primary-light);border-radius:var(--border-radius-lg);padding:var(--spacing-md);margin-bottom:var(--spacing-md);display:flex;flex-direction:column;gap:var(--spacing-sm)}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:var(--spacing-sm);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-family:inherit;transition:all .2s ease}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary)}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--color-text-tertiary)}.rent-inputs[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:center}.rent-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1}.separator[_ngcontent-%COMP%]{color:var(--color-text-tertiary)}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);justify-content:flex-end}.btn-confirm[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:none;border-radius:var(--border-radius-md);background:var(--color-primary);color:#fff;font-size:.85rem;font-weight:600;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-confirm[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark);transform:translateY(-1px)}.btn-cancel[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-secondary);font-size:.85rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-cancel[_ngcontent-%COMP%]:hover{border-color:var(--color-border-light);color:var(--color-text-primary)}.empty-list[_ngcontent-%COMP%]{color:var(--color-text-tertiary);font-size:.9rem;text-align:center;padding:var(--spacing-md);margin:0}.rooms-table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);-webkit-overflow-scrolling:touch}.rooms-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.rooms-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:var(--color-bg-secondary)}.rooms-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:var(--spacing-md);text-align:left;font-size:.875rem;font-weight:600;color:var(--color-text-primary);border-bottom:2px solid var(--color-border)}.rooms-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:var(--spacing-md);border-bottom:1px solid var(--color-border);font-size:.9rem;color:var(--color-text-primary);vertical-align:middle}.rooms-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.rooms-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.taken-row[_ngcontent-%COMP%]{background:#10b9810d}.inline-edit[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--color-text-primary);font-size:.95rem;font-weight:600;font-family:inherit;padding:var(--spacing-xs);border-radius:var(--border-radius-sm);min-width:140px;transition:all .2s ease}.inline-edit[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.inline-edit[_ngcontent-%COMP%]:focus{outline:none;background:var(--color-bg-secondary)}.rent-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-xs);color:var(--color-text-secondary);font-size:.85rem}.inline-number[_ngcontent-%COMP%]{width:78px;background:transparent;border:none;color:var(--color-text-secondary);font-size:.85rem;font-family:JetBrains Mono,monospace;padding:var(--spacing-xs);border-radius:var(--border-radius-sm);transition:all .2s ease}.inline-number[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.inline-number[_ngcontent-%COMP%]:focus{outline:none;background:var(--color-bg-secondary);color:var(--color-text-primary)}.inline-number[_ngcontent-%COMP%]::-webkit-inner-spin-button, .inline-number[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.tenant-list[_ngcontent-%COMP%]{color:var(--color-text-secondary)}.text-muted[_ngcontent-%COMP%]{color:var(--color-text-tertiary);font-style:italic}.taken-pill[_ngcontent-%COMP%], .not-taken-pill[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:90px;padding:var(--spacing-xs) var(--spacing-sm);border-radius:999px;font-size:.8rem;font-weight:600}.taken-pill[_ngcontent-%COMP%]{color:var(--color-success-dark);background:#10b98126}.not-taken-pill[_ngcontent-%COMP%]{color:var(--color-text-secondary);background:var(--color-bg-secondary)}.btn-delete-small[_ngcontent-%COMP%]{width:28px;height:28px;border:none;border-radius:var(--border-radius-sm);background:transparent;color:var(--color-text-tertiary);font-size:.8rem;cursor:pointer;transition:all .2s ease}.btn-delete-small[_ngcontent-%COMP%]:hover{background:#ef44441a;color:var(--color-error)}"],changeDetection:0})}};function lB(n,e){n&1&&(y(0,"div",3)(1,"div",5),C(2,"\u{1F6AA}"),g(),y(3,"h3"),C(4,"No apartment selected"),g(),y(5,"p"),C(6,"Select an apartment from the dropdown above to manage rooms"),g()())}function uB(n,e){if(n&1){let t=we();y(0,"div",4)(1,"app-room-list",6),$("roomAdded",function(i){j(t);let o=P();return B(o.onRoomAdded(i))})("roomUpdated",function(i){j(t);let o=P();return B(o.onRoomUpdated(i))})("roomRemoved",function(i){j(t);let o=P();return B(o.onRoomRemoved(i))}),g()()}if(n&2){let t=P();x(),ie("rooms",t.currentApartment().rooms)("tenants",t.currentApartment().tenants)}}var Kf=class n{constructor(){this.apartmentService=k(bt);this.currentApartment=this.apartmentService.currentApartment}onRoomAdded(e){let t=this.currentApartment();t&&this.apartmentService.addRoom(t.id,{name:e.name,rentMin:e.rentMin,rentMax:e.rentMax,isTaken:!1})}onRoomUpdated(e){let t=this.currentApartment();t&&this.apartmentService.updateRoom(t.id,e.id,e.updates)}onRoomRemoved(e){let t=this.currentApartment();t&&this.apartmentService.removeRoom(t.id,e)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-rooms"]],decls:8,vars:2,consts:[[1,"rooms-page"],[1,"page-header"],[1,"page-subtitle"],[1,"empty-state"],[1,"rooms-content"],[1,"empty-icon"],[3,"roomAdded","roomUpdated","roomRemoved","rooms","tenants"]],template:function(t,r){if(t&1&&(y(0,"div",0)(1,"div",1)(2,"h1"),C(3,"Rooms"),g(),y(4,"p",2),C(5),g()(),X(6,lB,7,0,"div",3)(7,uB,2,2,"div",4),g()),t&2){let i;x(5),Ge("Manage rooms for ",((i=r.currentApartment())==null?null:i.name)||"selected apartment",""),x(),Z(r.currentApartment()?7:6)}},dependencies:[Wf],styles:[".rooms-page[_ngcontent-%COMP%]{padding:var(--spacing-xl);min-height:100%}.page-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.page-subtitle[_ngcontent-%COMP%]{color:var(--color-text-secondary);margin:0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-2xl) var(--spacing-xl);color:var(--color-text-secondary)}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--color-text-secondary)}.rooms-content[_ngcontent-%COMP%]{max-width:800px}@media (max-width: 768px){.rooms-page[_ngcontent-%COMP%]{padding:var(--spacing-md);padding-left:max(var(--spacing-md),env(safe-area-inset-left));padding-right:max(var(--spacing-md),env(safe-area-inset-right))}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}"],changeDetection:0})}};var dB=(n,e)=>e.date||e.day;function fB(n,e){if(n&1){let t=we();y(0,"div",8),$("click",function(){j(t);let i=P().$implicit,o=P();return B(o.toggleDate(i.date))}),y(1,"span",9),C(2),g()()}if(n&2){let t=P().$implicit,r=P();yt("outside-range",!r.isInRange(t.date))("disabled",r.isDisabled(t.date))("today",r.isToday(t.date)),ie("title",r.getDayTitle(t.date)),x(2),_e(t.day)}}function hB(n,e){n&1&&Ye(0,"div",7)}function pB(n,e){if(n&1&&X(0,fB,3,8,"div",6)(1,hB,1,0,"div",7),n&2){let t=e.$implicit;Z(t.isCurrentMonth?0:1)}}var Qf=class n{constructor(){this.tenant=je.required();this.dateToggled=ze();this.currentDate=new Date;this.currentYear=W(this.currentDate.getFullYear());this.currentMonth=W(this.currentDate.getMonth());this.monthYear=Ze(()=>new Date(this.currentYear(),this.currentMonth()).toLocaleDateString("en-US",{month:"long",year:"numeric"}));this.calendarDays=Ze(()=>{let e=this.currentYear(),t=this.currentMonth(),r=new Date(e,t,1),i=new Date(e,t+1,0),o=r.getDay(),s=i.getDate(),c=[];for(let p=0;p<o;p++)c.push({day:0,date:"",isCurrentMonth:!1});let l=new Date(r);for(;l<=i;){let p=this.formatDate(l);c.push({day:l.getDate(),date:p,isCurrentMonth:!0}),l.setDate(l.getDate()+1)}let f=(7-c.length%7)%7;for(let p=0;p<f;p++)c.push({day:0,date:"",isCurrentMonth:!1});return c})}isInRange(e){let t=this.tenant(),r=this.parseDate(e);if(t.startDate){let i=ni(t.startDate);if(!i)return!0;if(i.setHours(0,0,0,0),r<i)return!1}return!0}isDisabled(e){if(!this.isInRange(e))return!1;let t=this.tenant();return Tf(t,e)?!0:t.disabledDates?.includes(e)||!1}isToday(e){let t=this.formatDate(new Date);return e===t}toggleDate(e){if(!this.isInRange(e)||Tf(this.tenant(),e))return;let t=this.isDisabled(e);this.dateToggled.emit({date:e,disabled:!t})}previousMonth(){this.currentMonth()===0?(this.currentMonth.set(11),this.currentYear.update(t=>t-1)):this.currentMonth.update(t=>t-1)}nextMonth(){this.currentMonth()===11?(this.currentMonth.set(0),this.currentYear.update(t=>t+1)):this.currentMonth.update(t=>t+1)}getDayTitle(e){let r=this.parseDate(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return this.isInRange(e)?Tf(this.tenant(),e)?`${r} - Contract ended`:this.isDisabled(e)?`${r} - Not occupied`:`${r} - Occupied`:`${r} - Outside contract period`}formatDate(e){return e.toISOString().split("T")[0]}parseDate(e){return new Date(e+"T00:00:00")}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-tenant-calendar"]],inputs:{tenant:[1,"tenant"]},outputs:{dateToggled:"dateToggled"},decls:25,vars:1,consts:[[1,"tenant-calendar"],[1,"calendar-header"],[1,"btn-nav",3,"click"],[1,"month-year"],[1,"calendar-grid"],[1,"day-header"],[1,"calendar-day",3,"outside-range","disabled","today","title"],[1,"calendar-day","empty-day"],[1,"calendar-day",3,"click","title"],[1,"day-number"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"button",2),$("click",function(){return r.previousMonth()}),C(3,"\u2039"),g(),y(4,"h3",3),C(5),g(),y(6,"button",2),$("click",function(){return r.nextMonth()}),C(7,"\u203A"),g()(),y(8,"div",4)(9,"div",5),C(10,"Sun"),g(),y(11,"div",5),C(12,"Mon"),g(),y(13,"div",5),C(14,"Tue"),g(),y(15,"div",5),C(16,"Wed"),g(),y(17,"div",5),C(18,"Thu"),g(),y(19,"div",5),C(20,"Fri"),g(),y(21,"div",5),C(22,"Sat"),g(),ht(23,pB,2,1,null,null,dB),g()()),t&2&&(x(5),_e(r.monthYear()),x(18),pt(r.calendarDays()))},styles:[".tenant-calendar[_ngcontent-%COMP%]{background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);padding:var(--spacing-lg)}.calendar-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-lg)}.btn-nav[_ngcontent-%COMP%]{width:32px;height:32px;border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:1.2rem;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.btn-nav[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);border-color:var(--color-primary)}.month-year[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:600;color:var(--color-text-primary)}.calendar-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:var(--spacing-xs)}.day-header[_ngcontent-%COMP%]{text-align:center;font-size:.75rem;font-weight:600;color:var(--color-text-secondary);text-transform:uppercase;padding:var(--spacing-sm)}.calendar-day[_ngcontent-%COMP%]{aspect-ratio:1;display:flex;align-items:center;justify-content:center;border:1px solid var(--color-border);border-radius:var(--border-radius-sm);background:var(--color-primary);cursor:pointer;transition:all .2s ease;position:relative}.calendar-day[_ngcontent-%COMP%]:hover:not(.outside-range){transform:scale(1.05);border-color:var(--color-primary-dark)}.calendar-day.outside-range[_ngcontent-%COMP%]{background:var(--color-bg-secondary);border-color:transparent;cursor:not-allowed;opacity:.3}.calendar-day.disabled[_ngcontent-%COMP%]{background:#fff;border-color:var(--color-border)}.calendar-day.today[_ngcontent-%COMP%]{border:2px solid var(--color-primary)}.day-number[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#fff}.calendar-day.outside-range[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{color:var(--color-text-secondary)}.calendar-day.disabled[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{color:var(--color-text-primary)}.calendar-day.empty-day[_ngcontent-%COMP%]{background:transparent;border:none;cursor:default;pointer-events:none}"],changeDetection:0})}};function mB(n,e){if(n&1){let t=we();y(0,"app-tenant-calendar",6),$("dateToggled",function(i){j(t);let o=P();return B(o.onDateToggled(i))}),g()}if(n&2){let t=P();ie("tenant",t.tenant())}}var Yf=class n{constructor(){this.tenant=je(null);this.close=ze();this.dateToggled=ze()}onBackdropClick(e){e.target===e.currentTarget&&this.close.emit()}onDateToggled(e){this.dateToggled.emit(e)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-tenant-calendar-modal"]],inputs:{tenant:[1,"tenant"]},outputs:{close:"close",dateToggled:"dateToggled"},decls:9,vars:2,consts:[[1,"modal-backdrop",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"modal-body"],[3,"tenant"],[3,"dateToggled","tenant"]],template:function(t,r){if(t&1&&(y(0,"div",0),$("click",function(o){return r.onBackdropClick(o)}),y(1,"div",1),$("click",function(o){return o.stopPropagation()}),y(2,"div",2)(3,"h2"),C(4),g(),y(5,"button",3),$("click",function(){return r.close.emit()}),C(6,"\u2715"),g()(),y(7,"div",4),X(8,mB,1,1,"app-tenant-calendar",5),g()()()),t&2){let i;x(4),Ge("Presence Calendar - ",(i=r.tenant())==null?null:i.name,""),x(4),Z(r.tenant()?8:-1)}},dependencies:[Qf],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:var(--spacing-lg)}.modal-content[_ngcontent-%COMP%]{background:var(--color-card-bg);border-radius:var(--border-radius-lg);box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;max-width:600px;width:100%;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-lg);border-bottom:1px solid var(--color-border)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:var(--color-text-primary)}.btn-close[_ngcontent-%COMP%]{width:32px;height:32px;border:none;border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-secondary);font-size:1.2rem;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.btn-close[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);color:var(--color-text-primary)}.modal-body[_ngcontent-%COMP%]{padding:var(--spacing-lg)}@media (max-width: 768px){.modal-backdrop[_ngcontent-%COMP%]{padding:max(var(--spacing-md),env(safe-area-inset-top)) max(var(--spacing-md),env(safe-area-inset-right)) max(var(--spacing-md),env(safe-area-inset-bottom)) max(var(--spacing-md),env(safe-area-inset-left));align-items:flex-start}.modal-content[_ngcontent-%COMP%]{max-height:90dvh}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem}}"],changeDetection:0})}};var x_=(n,e)=>e.id;function gB(n,e){if(n&1&&(y(0,"option",12),C(1),g()),n&2){let t=e.$implicit;ie("value",t.id),x(),_e(t.name)}}function yB(n,e){if(n&1){let t=we();y(0,"div",2)(1,"input",7),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.newTenantName,i)||(o.newTenantName=i),B(i)}),g(),y(2,"input",8),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.newTenantEmail,i)||(o.newTenantEmail=i),B(i)}),g(),y(3,"input",9),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.newTenantPhone,i)||(o.newTenantPhone=i),B(i)}),g(),y(4,"select",10),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.newTenantRoomId,i)||(o.newTenantRoomId=i),B(i)}),y(5,"option",11),C(6,"Select a room"),g(),ht(7,gB,2,2,"option",12,x_),g(),y(9,"div",13)(10,"input",14),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.newTenantStartDate,i)||(o.newTenantStartDate=i),B(i)}),g(),y(11,"input",15),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.newTenantEndDate,i)||(o.newTenantEndDate=i),B(i)}),g()(),y(12,"input",16),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.newTenantRentCollectionDay,i)||(o.newTenantRentCollectionDay=i),B(i)}),g(),y(13,"textarea",17),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.newTenantNotes,i)||(o.newTenantNotes=i),B(i)}),g(),y(14,"div",18)(15,"button",19),$("click",function(){j(t);let i=P();return B(i.handleAdd())}),C(16,"Add"),g(),y(17,"button",20),$("click",function(){j(t);let i=P();return B(i.showAddForm.set(!1))}),C(18,"Cancel"),g()()()}if(n&2){let t=P();x(),Re("ngModel",t.newTenantName),x(),Re("ngModel",t.newTenantEmail),x(),Re("ngModel",t.newTenantPhone),x(),Re("ngModel",t.newTenantRoomId),x(3),pt(t.rooms()),x(3),Re("ngModel",t.newTenantStartDate),x(),Re("ngModel",t.newTenantEndDate),x(),Re("ngModel",t.newTenantRentCollectionDay),x(),Re("ngModel",t.newTenantNotes)}}function vB(n,e){n&1&&(y(0,"p",3),C(1,"No tenants added yet"),g())}function _B(n,e){if(n&1&&(y(0,"span",24),C(1),g()),n&2){let t=P().$implicit;x(),_e(t.email)}}function wB(n,e){n&1&&(y(0,"span",25),C(1,"\u2014"),g())}function CB(n,e){if(n&1){let t=we();y(0,"a",33),$("click",function(i){return j(t),B(i.stopPropagation())}),C(1),g()}if(n&2){let t=P().$implicit,r=P(2);ie("href",r.getWhatsAppUrl(t.phone),jm),x(),Ge(" ",t.phone," ")}}function bB(n,e){n&1&&(y(0,"span",25),C(1,"\u2014"),g())}function EB(n,e){if(n&1&&(y(0,"span",27),C(1),g()),n&2){let t=P().$implicit,r=P(2);x(),_e(r.formatDate(t.startDate))}}function DB(n,e){n&1&&(y(0,"span",25),C(1,"\u2014"),g())}function IB(n,e){if(n&1&&(y(0,"span",27),C(1),g()),n&2){let t=P().$implicit,r=P(2);x(),_e(r.formatDate(t.endDate))}}function TB(n,e){n&1&&(y(0,"span",25),C(1,"\u2014"),g())}function SB(n,e){if(n&1&&(y(0,"span",28),C(1),g()),n&2){let t=P().$implicit;ie("title",t.notes),x(),_e(t.notes.length>30?t.notes.substring(0,30)+"...":t.notes)}}function xB(n,e){n&1&&(y(0,"span",25),C(1,"\u2014"),g())}function MB(n,e){if(n&1){let t=we();y(0,"button",34),$("click",function(){j(t);let i=P().$implicit,o=P(2);return B(o.openCalendar(i))}),C(1," \u{1F4C5} "),g()}}function AB(n,e){if(n&1){let t=we();y(0,"tr")(1,"td")(2,"input",22),$("blur",function(i){let o=j(t).$implicit,s=P(2);return B(s.onTenantNameChange(o.id,i))})("keydown.enter",function(i){j(t);let o=P(2);return B(o.blurTarget(i))}),g()(),y(3,"td"),$o(4),y(5,"span",23),C(6),g()(),y(7,"td"),X(8,_B,2,1,"span",24)(9,wB,2,0,"span",25),g(),y(10,"td"),X(11,CB,2,2,"a",26)(12,bB,2,0,"span",25),g(),y(13,"td"),X(14,EB,2,1,"span",27)(15,DB,2,0,"span",25),g(),y(16,"td"),X(17,IB,2,1,"span",27)(18,TB,2,0,"span",25),g(),y(19,"td"),X(20,SB,2,2,"span",28)(21,xB,2,0,"span",25),g(),y(22,"td")(23,"div",29)(24,"button",30),$("click",function(){let i=j(t).$implicit,o=P(2);return B(o.openEditModal(i))}),C(25,"\u270F\uFE0F"),g(),X(26,MB,2,0,"button",31),y(27,"button",32),$("click",function(){let i=j(t).$implicit,o=P(2);return B(o.onRemove(i.id))}),C(28,"\u2715"),g()()()()}if(n&2){let t=e.$implicit;x(2),ie("value",t.name);let r=P(2).getRoomName(t.roomId);x(4),_e(r||"Unknown"),x(2),Z(t.email?8:9),x(3),Z(t.phone?11:12),x(3),Z(t.startDate?14:15),x(3),Z(t.endDate?17:18),x(3),Z(t.notes?20:21),x(6),Z(t.startDate?26:-1)}}function RB(n,e){if(n&1&&(y(0,"div",4)(1,"table",21)(2,"thead")(3,"tr")(4,"th"),C(5,"Name"),g(),y(6,"th"),C(7,"Room"),g(),y(8,"th"),C(9,"Email"),g(),y(10,"th"),C(11,"Phone"),g(),y(12,"th"),C(13,"Start Date"),g(),y(14,"th"),C(15,"End Date"),g(),y(16,"th"),C(17,"Notes"),g(),y(18,"th"),C(19,"Actions"),g()()(),y(20,"tbody"),ht(21,AB,29,8,"tr",null,x_),g()()()),n&2){let t=P();x(21),pt(t.tenants())}}function PB(n,e){if(n&1){let t=we();y(0,"app-tenant-calendar-modal",35),$("close",function(){j(t);let i=P();return B(i.closeCalendar())})("dateToggled",function(i){j(t);let o=P();return B(o.onOccupancyToggle(o.selectedTenantForCalendar().id,i))}),g()}if(n&2){let t=P();ie("tenant",t.selectedTenantForCalendar())}}function NB(n,e){if(n&1&&(y(0,"option",12),C(1),g()),n&2){let t=e.$implicit;ie("value",t.id),x(),_e(t.name)}}function OB(n,e){if(n&1){let t=we();y(0,"div",36),$("click",function(){j(t);let i=P();return B(i.closeEditModal())}),y(1,"div",37),$("click",function(i){return j(t),B(i.stopPropagation())}),y(2,"div",38)(3,"h2"),C(4,"Edit Tenant"),g(),y(5,"button",39),$("click",function(){j(t);let i=P();return B(i.closeEditModal())}),C(6,"\u2715"),g()(),y(7,"div",40)(8,"div",41)(9,"div",42)(10,"label"),C(11,"Name *"),g(),y(12,"input",7),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.editTenantName,i)||(o.editTenantName=i),B(i)}),g()(),y(13,"div",42)(14,"label"),C(15,"Room *"),g(),y(16,"select",10),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.editTenantRoomId,i)||(o.editTenantRoomId=i),B(i)}),y(17,"option",11),C(18,"Select a room"),g(),ht(19,NB,2,2,"option",12,x_),g()(),y(21,"div",42)(22,"label"),C(23,"Email"),g(),y(24,"input",8),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.editTenantEmail,i)||(o.editTenantEmail=i),B(i)}),g()(),y(25,"div",42)(26,"label"),C(27,"Phone"),g(),y(28,"input",9),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.editTenantPhone,i)||(o.editTenantPhone=i),B(i)}),g()(),y(29,"div",43)(30,"div",42)(31,"label"),C(32,"Start Date"),g(),y(33,"input",44),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.editTenantStartDate,i)||(o.editTenantStartDate=i),B(i)}),g()(),y(34,"div",42)(35,"label"),C(36,"End Date"),g(),y(37,"input",44),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.editTenantEndDate,i)||(o.editTenantEndDate=i),B(i)}),g()()(),y(38,"div",42)(39,"label"),C(40,"Rent Collection Day"),g(),y(41,"input",45),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.editTenantRentCollectionDay,i)||(o.editTenantRentCollectionDay=i),B(i)}),g()(),y(42,"div",42)(43,"label"),C(44,"Notes"),g(),y(45,"textarea",17),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.editTenantNotes,i)||(o.editTenantNotes=i),B(i)}),g()(),y(46,"div",18)(47,"button",19),$("click",function(){j(t);let i=P();return B(i.saveEdit())}),C(48,"Save"),g(),y(49,"button",20),$("click",function(){j(t);let i=P();return B(i.closeEditModal())}),C(50,"Cancel"),g()()()()()()}if(n&2){let t=P();x(12),Re("ngModel",t.editTenantName),x(4),Re("ngModel",t.editTenantRoomId),x(3),pt(t.rooms()),x(5),Re("ngModel",t.editTenantEmail),x(4),Re("ngModel",t.editTenantPhone),x(5),Re("ngModel",t.editTenantStartDate),x(4),Re("ngModel",t.editTenantEndDate),x(4),Re("ngModel",t.editTenantRentCollectionDay),x(4),Re("ngModel",t.editTenantNotes)}}var Zf=class n{constructor(){this.tenants=je.required();this.rooms=je.required();this.tenantAdded=ze();this.tenantUpdated=ze();this.tenantRemoved=ze();this.tenantOccupancyToggled=ze();this.showAddForm=W(!1);this.newTenantName=W("");this.newTenantEmail=W("");this.newTenantPhone=W("");this.newTenantRoomId=W("");this.newTenantStartDate=W("");this.newTenantEndDate=W("");this.newTenantRentCollectionDay=W(void 0);this.newTenantNotes=W("");this.selectedTenantForCalendarId=W(null);this.selectedTenantForCalendar=Ze(()=>{let e=this.selectedTenantForCalendarId();return e&&this.tenants().find(t=>t.id===e)||null});this.selectedTenantForEdit=W(null);this.editTenantName=W("");this.editTenantEmail=W("");this.editTenantPhone=W("");this.editTenantRoomId=W("");this.editTenantStartDate=W("");this.editTenantEndDate=W("");this.editTenantRentCollectionDay=W(void 0);this.editTenantNotes=W("")}getRoomName(e){return this.rooms().find(t=>t.id===e)?.name||""}handleAdd(){let e=this.newTenantName().trim(),t=this.newTenantRoomId();if(e&&t){let r=this.newTenantRentCollectionDay();this.tenantAdded.emit({name:e,email:this.newTenantEmail().trim()||void 0,phone:this.newTenantPhone().trim()||void 0,roomId:t,startDate:this.newTenantStartDate()||void 0,endDate:this.newTenantEndDate()||void 0,rentCollectionDay:r&&r>=1&&r<=31?r:void 0,notes:this.newTenantNotes().trim()||void 0}),this.newTenantName.set(""),this.newTenantEmail.set(""),this.newTenantPhone.set(""),this.newTenantRoomId.set(""),this.newTenantStartDate.set(""),this.newTenantEndDate.set(""),this.newTenantRentCollectionDay.set(void 0),this.newTenantNotes.set(""),this.showAddForm.set(!1)}}onTenantNameChange(e,t){let r=t.target;this.tenantUpdated.emit({id:e,updates:{name:r.value}})}onRemove(e){this.tenantRemoved.emit(e)}formatDate(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""}blurTarget(e){e.target.blur()}onOccupancyToggle(e,t){this.tenantOccupancyToggled.emit({id:e,date:t.date,disabled:t.disabled})}openCalendar(e){this.selectedTenantForCalendarId.set(e.id)}closeCalendar(){this.selectedTenantForCalendarId.set(null)}getWhatsAppUrl(e){return`https://wa.me/${e.replace(/[^\d+]/g,"").replace(/^\+/,"")}`}openEditModal(e){this.selectedTenantForEdit.set(e),this.editTenantName.set(e.name),this.editTenantEmail.set(e.email||""),this.editTenantPhone.set(e.phone||""),this.editTenantRoomId.set(e.roomId),this.editTenantStartDate.set(e.startDate||""),this.editTenantEndDate.set(e.endDate||""),this.editTenantRentCollectionDay.set(e.rentCollectionDay),this.editTenantNotes.set(e.notes||"")}closeEditModal(){this.selectedTenantForEdit.set(null),this.editTenantName.set(""),this.editTenantEmail.set(""),this.editTenantPhone.set(""),this.editTenantRoomId.set(""),this.editTenantStartDate.set(""),this.editTenantEndDate.set(""),this.editTenantRentCollectionDay.set(void 0),this.editTenantNotes.set("")}saveEdit(){let e=this.selectedTenantForEdit();if(!e)return;let t=this.editTenantName().trim(),r=this.editTenantRoomId();if(t&&r){let i=this.editTenantRentCollectionDay();this.tenantUpdated.emit({id:e.id,updates:{name:t,email:this.editTenantEmail().trim()||void 0,phone:this.editTenantPhone().trim()||void 0,roomId:r,startDate:this.editTenantStartDate()||void 0,endDate:this.editTenantEndDate()||void 0,rentCollectionDay:i&&i>=1&&i<=31?i:void 0,notes:this.editTenantNotes().trim()||void 0}}),this.closeEditModal()}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-tenant-list"]],inputs:{tenants:[1,"tenants"],rooms:[1,"rooms"]},outputs:{tenantAdded:"tenantAdded",tenantUpdated:"tenantUpdated",tenantRemoved:"tenantRemoved",tenantOccupancyToggled:"tenantOccupancyToggled"},decls:10,vars:4,consts:[[1,"section-header"],[1,"btn-add-small",3,"click"],[1,"add-form"],[1,"empty-list"],[1,"tenants-table-wrapper"],[3,"tenant"],[1,"modal-backdrop"],["type","text","placeholder","Tenant name","required","",3,"ngModelChange","ngModel"],["type","email","placeholder","Email (optional)",3,"ngModelChange","ngModel"],["type","tel","placeholder","Phone (optional)",3,"ngModelChange","ngModel"],["required","",3,"ngModelChange","ngModel"],["value",""],[3,"value"],[1,"date-inputs"],["type","date","placeholder","Start date (optional)",3,"ngModelChange","ngModel"],["type","date","placeholder","End date (optional)",3,"ngModelChange","ngModel"],["type","number","placeholder","Rent collection day (1-31, optional)","min","1","max","31",3,"ngModelChange","ngModel"],["placeholder","Notes (optional)","rows","3",3,"ngModelChange","ngModel"],[1,"form-actions"],[1,"btn-confirm",3,"click"],[1,"btn-cancel",3,"click"],[1,"tenants-table"],["type","text",1,"inline-edit","tenant-name",3,"blur","keydown.enter","value"],[1,"tenant-room"],[1,"tenant-email"],[1,"text-muted"],["target","_blank","rel","noopener noreferrer",1,"tenant-phone","phone-link",3,"href"],[1,"tenant-date"],[1,"tenant-notes",3,"title"],[1,"table-actions"],["title","Edit Tenant",1,"btn-edit",3,"click"],["title","Edit Presence",1,"btn-calendar"],["title","Delete",1,"btn-delete",3,"click"],["target","_blank","rel","noopener noreferrer",1,"tenant-phone","phone-link",3,"click","href"],["title","Edit Presence",1,"btn-calendar",3,"click"],[3,"close","dateToggled","tenant"],[1,"modal-backdrop",3,"click"],[1,"modal-content","edit-modal",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"modal-body"],[1,"edit-form"],[1,"form-group"],[1,"form-row"],["type","date",3,"ngModelChange","ngModel"],["type","number","placeholder","Day of month (1-31)","min","1","max","31",3,"ngModelChange","ngModel"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"h3"),C(2,"Tenants"),g(),y(3,"button",1),$("click",function(){return r.showAddForm.set(!0)}),C(4,"+ Add Tenant"),g()(),X(5,yB,19,8,"div",2)(6,vB,2,0,"p",3)(7,RB,23,0,"div",4)(8,PB,1,1,"app-tenant-calendar-modal",5)(9,OB,51,8,"div",6)),t&2&&(x(5),Z(r.showAddForm()?5:-1),x(),Z(r.tenants().length===0?6:7),x(2),Z(r.selectedTenantForCalendar()?8:-1),x(),Z(r.selectedTenantForEdit()?9:-1))},dependencies:[Qt,Vf,Ff,Kt,Ar,Ns,hn,S_,Rr,T_,nn,Yf],styles:[".section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-md)}@media (max-width: 768px){.section-header[_ngcontent-%COMP%]{flex-wrap:wrap;gap:var(--spacing-sm)}.modal-backdrop[_ngcontent-%COMP%]{padding:max(var(--spacing-md),env(safe-area-inset-top)) max(var(--spacing-md),env(safe-area-inset-right)) max(var(--spacing-md),env(safe-area-inset-bottom)) max(var(--spacing-md),env(safe-area-inset-left))}.edit-modal[_ngcontent-%COMP%]{max-height:90dvh}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .add-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:44px}}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--color-text-primary);font-size:1rem;font-weight:600;margin:0}.btn-add-small[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-primary-light);border-radius:var(--border-radius-md);background:transparent;color:var(--color-primary);font-size:.85rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-add-small[_ngcontent-%COMP%]:hover{background:var(--color-primary-lighter);background-opacity:.1;border-color:var(--color-primary)}.add-form[_ngcontent-%COMP%]{background:var(--color-bg-secondary);border:1px solid var(--color-primary-light);border-radius:var(--border-radius-lg);padding:var(--spacing-md);margin-bottom:var(--spacing-md);display:flex;flex-direction:column;gap:var(--spacing-sm)}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .add-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:var(--spacing-sm);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-family:inherit;transition:all .2s ease}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .add-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary)}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .add-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:var(--color-text-tertiary)}.date-inputs[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-sm)}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);justify-content:flex-end}.btn-confirm[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:none;border-radius:var(--border-radius-md);background:var(--color-primary);color:#fff;font-size:.85rem;font-weight:600;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-confirm[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark);transform:translateY(-1px)}.btn-cancel[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-secondary);font-size:.85rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-cancel[_ngcontent-%COMP%]:hover{border-color:var(--color-border-light);color:var(--color-text-primary)}.empty-list[_ngcontent-%COMP%]{color:var(--color-text-tertiary);font-size:.9rem;text-align:center;padding:var(--spacing-md);margin:0}.tenants-table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);-webkit-overflow-scrolling:touch}.tenants-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.tenants-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:var(--color-bg-secondary)}.tenants-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:var(--spacing-md);text-align:left;font-size:.875rem;font-weight:600;color:var(--color-text-primary);border-bottom:2px solid var(--color-border)}.tenants-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:var(--spacing-md);border-bottom:1px solid var(--color-border);font-size:.9rem;color:var(--color-text-primary)}.tenants-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.tenants-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.tenant-name[_ngcontent-%COMP%]{background:transparent;border:1px solid transparent;color:var(--color-text-primary);font-size:.9rem;font-weight:600;font-family:inherit;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius-sm);width:100%;min-width:120px;transition:all .2s ease}.tenant-name[_ngcontent-%COMP%]:hover{border-color:var(--color-border);background:var(--color-bg-secondary)}.tenant-name[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);background:var(--color-card-bg)}.tenant-room[_ngcontent-%COMP%]{font-weight:500;color:var(--color-primary)}.tenant-email[_ngcontent-%COMP%]{color:var(--color-text-secondary)}.phone-link[_ngcontent-%COMP%]{color:var(--color-primary);text-decoration:none;cursor:pointer;transition:all .2s ease}.phone-link[_ngcontent-%COMP%]:hover{color:var(--color-primary-dark);text-decoration:underline}.tenant-date[_ngcontent-%COMP%]{color:var(--color-text-secondary);font-size:.85rem}.tenant-notes[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-text-secondary);font-style:italic;max-width:200px}.text-muted[_ngcontent-%COMP%]{color:var(--color-text-tertiary);font-style:italic}.table-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-xs);align-items:center}.btn-edit[_ngcontent-%COMP%], .btn-calendar[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{width:32px;height:32px;border:none;border-radius:var(--border-radius-sm);background:transparent;color:var(--color-text-tertiary);font-size:1rem;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.btn-edit[_ngcontent-%COMP%]:hover{background:#10b9811a;color:var(--color-success)}.btn-calendar[_ngcontent-%COMP%]:hover{background:#2563eb1a;color:var(--color-primary)}.btn-delete[_ngcontent-%COMP%]:hover{background:#ef44441a;color:var(--color-error)}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:var(--spacing-lg)}.edit-modal[_ngcontent-%COMP%]{background:var(--color-card-bg);border-radius:var(--border-radius-lg);box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;max-width:600px;width:100%;max-height:90vh;overflow-y:auto}.edit-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-lg);border-bottom:1px solid var(--color-border)}.edit-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:var(--color-text-primary)}.edit-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{width:32px;height:32px;border:none;border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-secondary);font-size:1.2rem;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.edit-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);color:var(--color-text-primary)}.edit-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:var(--spacing-lg)}.edit-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text-primary)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-family:inherit;transition:all .2s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #2563eb1a}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-md)}"],changeDetection:0})}};function kB(n,e){n&1&&(y(0,"div",3)(1,"div",5),C(2,"\u{1F465}"),g(),y(3,"h3"),C(4,"No apartment selected"),g(),y(5,"p"),C(6,"Select an apartment from the dropdown above to manage tenants"),g()())}function VB(n,e){if(n&1){let t=we();y(0,"div",4)(1,"app-tenant-list",6),$("tenantAdded",function(i){j(t);let o=P();return B(o.onTenantAdded(i))})("tenantUpdated",function(i){j(t);let o=P();return B(o.onTenantUpdated(i))})("tenantRemoved",function(i){j(t);let o=P();return B(o.onTenantRemoved(i))})("tenantOccupancyToggled",function(i){j(t);let o=P();return B(o.onOccupancyToggle(i))}),g()()}if(n&2){let t=P();x(),ie("tenants",t.currentApartment().tenants)("rooms",t.currentApartment().rooms)}}var Jf=class n{constructor(){this.apartmentService=k(bt);this.currentApartment=this.apartmentService.currentApartment}onTenantAdded(e){let t=this.currentApartment();t&&this.apartmentService.addTenant(t.id,e)}onTenantUpdated(e){let t=this.currentApartment();t&&this.apartmentService.updateTenant(t.id,e.id,e.updates)}onTenantRemoved(e){let t=this.currentApartment();t&&this.apartmentService.removeTenant(t.id,e)}onOccupancyToggle(e){let t=this.currentApartment();t&&this.apartmentService.toggleTenantOccupancyDate(t.id,e.id,e.date,e.disabled)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-tenants"]],decls:8,vars:2,consts:[[1,"tenants-page"],[1,"page-header"],[1,"page-subtitle"],[1,"empty-state"],[1,"tenants-content"],[1,"empty-icon"],[3,"tenantAdded","tenantUpdated","tenantRemoved","tenantOccupancyToggled","tenants","rooms"]],template:function(t,r){if(t&1&&(y(0,"div",0)(1,"div",1)(2,"h1"),C(3,"Tenants"),g(),y(4,"p",2),C(5),g()(),X(6,kB,7,0,"div",3)(7,VB,2,2,"div",4),g()),t&2){let i;x(5),Ge("Manage tenants for ",((i=r.currentApartment())==null?null:i.name)||"selected apartment",""),x(),Z(r.currentApartment()?7:6)}},dependencies:[Zf],styles:[".tenants-page[_ngcontent-%COMP%]{padding:var(--spacing-xl);min-height:100%}.page-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.page-subtitle[_ngcontent-%COMP%]{color:var(--color-text-secondary);margin:0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-2xl) var(--spacing-xl);color:var(--color-text-secondary)}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--color-text-secondary)}.tenants-content[_ngcontent-%COMP%]{max-width:800px}@media (max-width: 768px){.tenants-page[_ngcontent-%COMP%]{padding:var(--spacing-md);padding-left:max(var(--spacing-md),env(safe-area-inset-left));padding-right:max(var(--spacing-md),env(safe-area-inset-right))}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}"],changeDetection:0})}};var FB=(n,e)=>e.id,LB=(n,e)=>e.tenant.id;function jB(n,e){n&1&&(y(0,"div",3)(1,"div",5),C(2,"\u{1F4B0}"),g(),y(3,"h3"),C(4,"No apartment selected"),g(),y(5,"p"),C(6,"Select an apartment from the dropdown above to calculate bills"),g()())}function BB(n,e){if(n&1){let t=we();y(0,"button",17),$("click",function(){let i=j(t).$implicit,o=P(3);return B(o.toggleRoom(i.id))}),C(1),g()}if(n&2){let t=e.$implicit,r=P(3);yt("excluded",r.excludedRoomIds().has(t.id)),x(),Ge(" ",t.name," ")}}function UB(n,e){if(n&1&&(y(0,"div",7)(1,"label"),C(2,"Rooms"),g(),y(3,"div",15),ht(4,BB,2,3,"button",16,FB),g()()),n&2){let t=P(2);x(4),pt(t.rooms())}}function $B(n,e){n&1&&(y(0,"span",24),C(1,"Copied"),g())}function HB(n,e){n&1&&(y(0,"span",25),C(1,"Copy failed"),g())}function zB(n,e){n&1&&(y(0,"span",24),C(1,"Created"),g())}function qB(n,e){n&1&&(y(0,"p",28),C(1,"No tenants with presence in this period"),g())}function GB(n,e){if(n&1&&(y(0,"div",30)(1,"div",31)(2,"span",32),C(3),g(),y(4,"span",33),C(5),g()(),y(6,"div",34),C(7),g()()),n&2){let t=e.$implicit,r=P(4);x(3),_e(t.tenant.name),x(2),Si("",t.days," day",t.days!==1?"s":"",""),x(2),Ge(" ",r.formatCurrency(t.amount)," ")}}function WB(n,e){if(n&1&&(y(0,"div",29),ht(1,GB,8,4,"div",30,LB),g()),n&2){let t=P(3);x(),pt(t.tenantBills())}}function KB(n,e){if(n&1){let t=we();y(0,"div",14)(1,"div",18)(2,"h3"),C(3,"Summary"),g(),y(4,"div",19)(5,"span",20),C(6,"Total Days of Presence:"),g(),y(7,"span",21),C(8),g()(),y(9,"div",19)(10,"span",20),C(11,"Cost per Day:"),g(),y(12,"span",21),C(13),g()(),y(14,"div",19)(15,"span",20),C(16,"Bill Total:"),g(),y(17,"span",21),C(18),g()(),y(19,"div",22)(20,"button",23),$("click",function(){j(t);let i=P(2);return B(i.copyCalculatorAsText())}),C(21," Copy as TXT "),g(),X(22,$B,2,0,"span",24)(23,HB,2,0,"span",25),y(24,"button",26),$("click",function(){j(t);let i=P(2);return B(i.createPayments())}),C(25," Create Payments "),g(),X(26,zB,2,0,"span",24),g()(),y(27,"div",27)(28,"h3"),C(29,"Tenant Breakdown"),g(),X(30,qB,2,0,"p",28)(31,WB,3,0,"div",29),g()()}if(n&2){let t=P(2);x(8),_e(t.totalDaysOfPresence()),x(5),_e(t.formatCurrency(t.costPerDay())),x(5),_e(t.formatCurrency(t.billTotal())),x(4),Z(t.copyState()==="success"?22:t.copyState()==="error"?23:-1),x(2),ie("disabled",t.tenantBills().length===0),x(2),Z(t.paymentsState()==="success"?26:-1),x(4),Z(t.tenantBills().length===0?30:31)}}function QB(n,e){if(n&1){let t=we();y(0,"div",4)(1,"div",6)(2,"div",7)(3,"label",8),C(4,"Bill Total (AED)"),g(),y(5,"input",9),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.billTotal,i)||(o.billTotal=i),B(i)}),g()(),y(6,"div",7)(7,"label",10),C(8,"Start Date"),g(),y(9,"input",11),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.startDate,i)||(o.startDate=i),B(i)}),g()(),y(10,"div",7)(11,"label",12),C(12,"End Date"),g(),y(13,"input",13),Pe("ngModelChange",function(i){j(t);let o=P();return Ne(o.endDate,i)||(o.endDate=i),B(i)}),g()(),X(14,UB,6,0,"div",7),g(),X(15,KB,32,7,"div",14),g()}if(n&2){let t=P();x(5),Re("ngModel",t.billTotal),x(4),Re("ngModel",t.startDate),x(4),Re("ngModel",t.endDate),x(),Z(t.rooms().length>0?14:-1),x(),Z(t.billTotal()>0&&t.startDate()&&t.endDate()?15:-1)}}var Xf=class n{constructor(){this.apartmentService=k(bt);this.currentApartment=this.apartmentService.currentApartment;this.today=new Date;this.billTotal=W(0);this.startDate=W("");this.endDate=W("");this.copyState=W("idle");this.paymentsState=W("idle");this.excludedRoomIds=W(new Set);this.rooms=Ze(()=>this.currentApartment()?.rooms??[]);this.totalDaysOfPresence=Ze(()=>{let e=this.currentApartment();if(!e)return 0;let t=this.parseDate(this.startDate()),r=this.parseDate(this.endDate());if(!t||!r||r<t)return 0;let i=this.excludedRoomIds(),o=0;for(let s of e.tenants)i.has(s.roomId)||(o+=this.calculateTenantPresenceDays(s,t,r));return o});this.costPerDay=Ze(()=>{let e=this.totalDaysOfPresence(),t=this.billTotal();return e===0||t===0?0:t/e});this.tenantBills=Ze(()=>{let e=this.currentApartment();if(!e)return[];let t=this.parseDate(this.startDate()),r=this.parseDate(this.endDate());if(!t||!r||r<t)return[];let i=this.excludedRoomIds(),o=this.costPerDay(),s=[];for(let c of e.tenants){if(i.has(c.roomId))continue;let l=this.calculateTenantPresenceDays(c,t,r);l>0&&s.push({tenant:c,days:l,amount:l*o})}return s.sort((c,l)=>l.amount-c.amount)});this.thirtyDaysAgo=new Date(this.today),this.thirtyDaysAgo.setDate(this.thirtyDaysAgo.getDate()-30),this.startDate.set(this.formatDateInput(this.thirtyDaysAgo)),this.endDate.set(this.formatDateInput(this.today))}calculateTenantPresenceDays(e,t,r){let i=e.startDate?ni(e.startDate):null,o=e.endDate?ni(e.endDate):null,s=i&&i>t?i:t,c=o&&o<r?o:r;if(s>c)return 0;let l=new Set(e.disabledDates||[]),u=0,f=new Date(s);for(;f<=c;){let p=this.formatDate(f);l.has(p)||u++,f.setDate(f.getDate()+1)}return u}formatCurrency(e){return new Intl.NumberFormat("en-AE",{style:"currency",currency:"AED",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}toggleRoom(e){this.excludedRoomIds.update(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})}createPayments(){let e=this.currentApartment();if(!e)return;let t=this.tenantBills();if(t.length===0)return;let r=this.parseDate(this.endDate());if(!r)return;let i=r.getMonth(),o=r.getFullYear();this.apartmentService.addBillPayments(e.id,t.map(s=>({tenantId:s.tenant.id,amount:s.amount})),i,o),this.paymentsState.set("success"),window.setTimeout(()=>this.paymentsState.set("idle"),2e3)}copyCalculatorAsText(){return V(this,null,function*(){let e=this.getCalculatorText();if(!e){this.copyState.set("error"),this.clearCopyStateLater();return}try{navigator.clipboard?.writeText?yield navigator.clipboard.writeText(e):this.copyWithFallback(e),this.copyState.set("success")}catch{this.copyState.set("error")}this.clearCopyStateLater()})}getCalculatorText(){let e=this.currentApartment();if(!e)return"";let t=[];t.push(`Apartment: ${e.name}`),t.push(""),t.push("Input"),t.push(`- Bill Total: ${this.formatCurrency(this.billTotal())}`),t.push(`- Start Date: ${this.startDate()||"N/A"}`),t.push(`- End Date: ${this.endDate()||"N/A"}`),t.push(""),t.push("Output"),t.push(`- Total Days of Presence: ${this.totalDaysOfPresence()}`),t.push(`- Cost per Day: ${this.formatCurrency(this.costPerDay())}`),t.push(`- Bill Total: ${this.formatCurrency(this.billTotal())}`),t.push(""),t.push("Tenant Breakdown");let r=this.tenantBills();if(r.length===0)t.push("- No tenants with presence in this period");else for(let i of r)t.push(`- ${i.tenant.name}: ${i.days} day${i.days!==1?"s":""} - ${this.formatCurrency(i.amount)}`);return t.join(`
`)}copyWithFallback(e){let t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}clearCopyStateLater(){window.setTimeout(()=>this.copyState.set("idle"),2e3)}formatDateInput(e){return e.toISOString().split("T")[0]}parseDate(e){return e?new Date(e+"T00:00:00"):null}formatDate(e){return e.toISOString().split("T")[0]}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-bill-calculator"]],decls:8,vars:1,consts:[[1,"bill-calculator-page"],[1,"page-header"],[1,"page-subtitle"],[1,"empty-state"],[1,"bill-calculator-content"],[1,"empty-icon"],[1,"calculator-form"],[1,"form-group"],["for","billTotal"],["type","number","id","billTotal","placeholder","0.00","step","0.01","min","0",3,"ngModelChange","ngModel"],["for","startDate"],["type","date","id","startDate",3,"ngModelChange","ngModel"],["for","endDate"],["type","date","id","endDate",3,"ngModelChange","ngModel"],[1,"calculation-results"],[1,"room-filters"],[1,"room-chip",3,"excluded"],[1,"room-chip",3,"click"],[1,"summary-card"],[1,"summary-item"],[1,"summary-label"],[1,"summary-value"],[1,"summary-actions"],[1,"btn-copy",3,"click"],[1,"copy-feedback","success"],[1,"copy-feedback","error"],[1,"btn-create-payments",3,"click","disabled"],[1,"tenants-list"],[1,"no-tenants"],[1,"tenant-bills"],[1,"tenant-bill-item"],[1,"tenant-info"],[1,"tenant-name"],[1,"tenant-days"],[1,"tenant-amount"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"h1"),C(3,"Bill Calculator"),g(),y(4,"p",2),C(5,"Calculate bill distribution based on tenant occupancy"),g()(),X(6,jB,7,0,"div",3)(7,QB,16,5,"div",4),g()),t&2&&(x(6),Z(r.currentApartment()?7:6))},dependencies:[Qt,Kt,Ar,hn,Rr,nn],styles:[".bill-calculator-page[_ngcontent-%COMP%]{padding:var(--spacing-xl);min-height:100%}.page-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.page-subtitle[_ngcontent-%COMP%]{color:var(--color-text-secondary);margin:0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-2xl) var(--spacing-xl);color:var(--color-text-secondary)}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--color-text-secondary)}.bill-calculator-content[_ngcontent-%COMP%]{max-width:800px}.calculator-form[_ngcontent-%COMP%]{background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);padding:var(--spacing-lg);margin-bottom:var(--spacing-xl)}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:600;color:var(--color-text-primary);margin-bottom:var(--spacing-xs)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-family:inherit;transition:all .2s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #2563eb1a}.room-filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--spacing-sm)}.room-chip[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-md);border:1px solid var(--color-primary-light);border-radius:var(--border-radius-md);background:#2563eb14;color:var(--color-primary);font-size:.85rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease}.room-chip[_ngcontent-%COMP%]:hover{background:#2563eb26}.room-chip.excluded[_ngcontent-%COMP%]{background:transparent;border-color:var(--color-border);color:var(--color-text-tertiary);text-decoration:line-through}.room-chip.excluded[_ngcontent-%COMP%]:hover{border-color:var(--color-border-light);color:var(--color-text-secondary)}.calculation-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-lg)}.summary-card[_ngcontent-%COMP%]{background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);padding:var(--spacing-lg)}.summary-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:var(--color-text-primary);margin:0 0 var(--spacing-md) 0}.summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-sm) 0;border-bottom:1px solid var(--color-border)}.summary-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.summary-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);margin-top:var(--spacing-md)}.btn-copy[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.85rem;font-weight:600;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-copy[_ngcontent-%COMP%]:hover{border-color:var(--color-primary);background:var(--color-bg-secondary)}.btn-create-payments[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);border:1px solid var(--color-primary-light);border-radius:var(--border-radius-md);background:var(--color-primary);color:#fff;font-size:.85rem;font-weight:600;font-family:inherit;cursor:pointer;transition:all .2s ease;margin-left:auto}.btn-create-payments[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-primary-dark)}.btn-create-payments[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.copy-feedback[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600}.copy-feedback.success[_ngcontent-%COMP%]{color:var(--color-success)}.copy-feedback.error[_ngcontent-%COMP%]{color:var(--color-error)}.summary-label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--color-text-secondary)}.summary-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--color-text-primary)}.tenants-list[_ngcontent-%COMP%]{background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);padding:var(--spacing-lg)}.tenants-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:var(--color-text-primary);margin:0 0 var(--spacing-md) 0}.no-tenants[_ngcontent-%COMP%]{color:var(--color-text-secondary);text-align:center;padding:var(--spacing-md);margin:0}.tenant-bills[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.tenant-bill-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-sm) var(--spacing-md);background:var(--color-bg-secondary);border:1px solid var(--color-border);border-radius:var(--border-radius-md)}.tenant-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md)}.tenant-name[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:var(--color-text-primary)}.tenant-days[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-text-secondary)}.tenant-amount[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:var(--color-primary)}@media (max-width: 768px){.bill-calculator-page[_ngcontent-%COMP%]{padding:var(--spacing-md);padding-left:max(var(--spacing-md),env(safe-area-inset-left));padding-right:max(var(--spacing-md),env(safe-area-inset-right))}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-height:44px}}"],changeDetection:0})}};var eh=class n{ngOnInit(){let e=typeof window<"u"?window.location.search:"",t=`${US}://localhost${e||""}`;typeof window<"u"&&(window.location.href=t)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=he({type:n,selectors:[["app-oauth-redirect"]],decls:3,vars:0,consts:[[1,"oauth-redirect"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"p"),C(2,"Redirecting to app\u2026"),g()())},styles:[".oauth-redirect[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;font-family:inherit;color:var(--color-text-secondary)}"],changeDetection:0})}};var ux=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"oauth-redirect",component:eh},{path:"dashboard",component:$f},{path:"expenses",component:zf},{path:"payments",component:Gf},{path:"rooms",component:Kf},{path:"tenants",component:Jf},{path:"bill-calculator",component:Xf},{path:"**",redirectTo:"/dashboard"}];var M_="Service workers are disabled or not supported by this browser",ks=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new Ce(r=>r.error(new Q(5601,!1)));else{let r=null,i=new Ue;this.worker=new Ce(u=>(r!==null&&u.next(r),i.subscribe(f=>u.next(f))));let o=()=>{let{controller:u}=e;u!==null&&(r=u,i.next(r))};e.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(Mt(()=>e.getRegistration()));let s=new Ue;this.events=s.asObservable();let c=u=>{let{data:f}=u;f?.type&&s.next(f)};e.addEventListener("message",c),t?.get(Ln,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",o),e.removeEventListener("message",c)})}}postMessage(e,t){return new Promise(r=>{this.worker.pipe(Ft(1)).subscribe(i=>{i.postMessage(N({action:e},t)),r()})})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,t);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(Vt(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Ft(1))}waitForOperationCompleted(e){return new Promise((t,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(Vt(i=>i.nonce===e),Ft(1),ye(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:t,error:r})})}get isEnabled(){return!!this.serviceWorker}},YB=(()=>{class n{sw;messages;notificationClicks;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new Ue;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=pi,this.notificationClicks=pi,this.subscription=pi;return}this.messages=this.sw.eventsOfType("PUSH").pipe(ye(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(ye(i=>i.data)),this.pushManager=this.sw.registration.pipe(ye(i=>i.pushManager));let r=this.pushManager.pipe(Mt(i=>i.getSubscription()));this.subscription=new Ce(i=>{let o=r.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(M_));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,c)=>{this.pushManager.pipe(Mt(l=>l.subscribe(r)),Ft(1)).subscribe({next:l=>{this.subscriptionChanges.next(l),s(l)},error:c})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(M_));let t=r=>{if(r===null)throw new Q(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new Q(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(Ft(1),Mt(t)).subscribe({next:r,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||n)(re(ks))};static \u0275prov=Y({token:n,factory:n.\u0275fac})}return n})(),ZB=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=pi,this.unrecoverable=pi;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(M_));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Q(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||n)(re(ks))};static \u0275prov=Y({token:n,factory:n.\u0275fac})}return n})();var fx=new J("");function JB(){let n=k(Gc);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=k(fx),t=k(dt),r=k(Ln);t.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),t.runOutsideAngular(()=>{let i,{registrationStrategy:o}=n;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...c]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=dx(+c[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),dx(+c[0])]);break;default:throw new Q(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:n.scope}).catch(s=>console.error(vu(5604,!1)))})})}function dx(n){return new Promise(e=>setTimeout(e,n))}function XB(n,e){return new ks(n.enabled!==!1?navigator.serviceWorker:void 0,e)}var Gc=class{enabled;scope;registrationStrategy};function hx(n,e={}){return Ta([YB,ZB,{provide:fx,useValue:n},{provide:Gc,useValue:e},{provide:ks,useFactory:XB,deps:[Gc,an]},tg(JB)])}li.isNativePlatform()&&kc.addListener("backButton",({canGoBack:n})=>{n?window.history.back():kc.exitApp()});mg(Bf,{providers:[Bg(ux,Ug()),hx("ngsw-worker.js",{enabled:!EE(),registrationStrategy:"registerWhenStable:30000"})]}).catch(n=>console.error(n));
